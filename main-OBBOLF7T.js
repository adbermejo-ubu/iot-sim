var Dfe=Object.create;var py=Object.defineProperty,Nfe=Object.defineProperties,NV=Object.getOwnPropertyDescriptor,Afe=Object.getOwnPropertyDescriptors,Rfe=Object.getOwnPropertyNames,DC=Object.getOwnPropertySymbols,Ofe=Object.getPrototypeOf,f5=Object.prototype.hasOwnProperty,AV=Object.prototype.propertyIsEnumerable;var DV=(t,n,e)=>n in t?py(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,ae=(t,n)=>{for(var e in n||={})f5.call(n,e)&&DV(t,e,n[e]);if(DC)for(var e of DC(n))AV.call(n,e)&&DV(t,e,n[e]);return t},lt=(t,n)=>Nfe(t,Afe(n));var hy=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(n,e)=>(typeof require<"u"?require:n)[e]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var tm=(t,n)=>{var e={};for(var r in t)f5.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&DC)for(var r of DC(t))n.indexOf(r)<0&&AV.call(t,r)&&(e[r]=t[r]);return e};var Lo=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),Qt=(t,n)=>{for(var e in n)py(t,e,{get:n[e],enumerable:!0})},Ffe=(t,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of Rfe(n))!f5.call(t,o)&&o!==e&&py(t,o,{get:()=>n[o],enumerable:!(r=NV(n,o))||r.enumerable});return t};var O2=(t,n,e)=>(e=t!=null?Dfe(Ofe(t)):{},Ffe(n||!t||!t.__esModule?py(e,"default",{value:t,enumerable:!0}):e,t));var ws=(t,n,e,r)=>{for(var o=r>1?void 0:r?NV(n,e):n,i=t.length-1,s;i>=0;i--)(s=t[i])&&(o=(r?s(n,e,o):s(o))||o);return r&&o&&py(n,e,o),o};var z=(t,n,e)=>new Promise((r,o)=>{var i=l=>{try{a(e.next(l))}catch(c){o(c)}},s=l=>{try{a(e.throw(l))}catch(c){o(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,s);a((e=e.apply(t,n)).next())});var KK=Lo((Jut,qK)=>{"use strict";qK.exports=kr;var Aa=null;try{Aa=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function kr(t,n,e){this.low=t|0,this.high=n|0,this.unsigned=!!e}kr.prototype.__isLong__;Object.defineProperty(kr.prototype,"__isLong__",{value:!0});function Ns(t){return(t&&t.__isLong__)===!0}kr.isLong=Ns;var LK={},$K={};function sg(t,n){var e,r,o;return n?(t>>>=0,(o=0<=t&&t<256)&&(r=$K[t],r)?r:(e=_r(t,(t|0)<0?-1:0,!0),o&&($K[t]=e),e)):(t|=0,(o=-128<=t&&t<128)&&(r=LK[t],r)?r:(e=_r(t,t<0?-1:0,!1),o&&(LK[t]=e),e))}kr.fromInt=sg;function Ra(t,n){if(isNaN(t))return n?ig:Oa;if(n){if(t<0)return ig;if(t>=HK)return WK}else{if(t<=-jK)return Ds;if(t+1>=jK)return GK}return t<0?Ra(-t,n).neg():_r(t%gv|0,t/gv|0,n)}kr.fromNumber=Ra;function _r(t,n,e){return new kr(t,n,e)}kr.fromBits=_r;var Y3=Math.pow;function IO(t,n,e){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Oa;if(typeof n=="number"?(e=n,n=!1):n=!!n,e=e||10,e<2||36<e)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return IO(t.substring(1),n,e).neg();for(var o=Ra(Y3(e,8)),i=Oa,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),e);if(a<8){var c=Ra(Y3(e,a));i=i.mul(c).add(Ra(l))}else i=i.mul(o),i=i.add(Ra(l))}return i.unsigned=n,i}kr.fromString=IO;function Il(t,n){return typeof t=="number"?Ra(t,n):typeof t=="string"?IO(t,n):_r(t.low,t.high,typeof n=="boolean"?n:t.unsigned)}kr.fromValue=Il;var VK=65536,J_e=1<<24,gv=VK*VK,HK=gv*gv,jK=HK/2,zK=sg(J_e),Oa=sg(0);kr.ZERO=Oa;var ig=sg(0,!0);kr.UZERO=ig;var mv=sg(1);kr.ONE=mv;var UK=sg(1,!0);kr.UONE=UK;var EO=sg(-1);kr.NEG_ONE=EO;var GK=_r(-1,2147483647,!1);kr.MAX_VALUE=GK;var WK=_r(-1,-1,!0);kr.MAX_UNSIGNED_VALUE=WK;var Ds=_r(0,-2147483648,!1);kr.MIN_VALUE=Ds;var tt=kr.prototype;tt.toInt=function(){return this.unsigned?this.low>>>0:this.low};tt.toNumber=function(){return this.unsigned?(this.high>>>0)*gv+(this.low>>>0):this.high*gv+(this.low>>>0)};tt.toString=function(n){if(n=n||10,n<2||36<n)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Ds)){var e=Ra(n),r=this.div(e),o=r.mul(e).sub(this);return r.toString(n)+o.toInt().toString(n)}else return"-"+this.neg().toString(n);for(var i=Ra(Y3(n,6),this.unsigned),s=this,a="";;){var l=s.div(i),c=s.sub(l.mul(i)).toInt()>>>0,u=c.toString(n);if(s=l,s.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};tt.getHighBits=function(){return this.high};tt.getHighBitsUnsigned=function(){return this.high>>>0};tt.getLowBits=function(){return this.low};tt.getLowBitsUnsigned=function(){return this.low>>>0};tt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ds)?64:this.neg().getNumBitsAbs();for(var n=this.high!=0?this.high:this.low,e=31;e>0&&(n&1<<e)==0;e--);return this.high!=0?e+33:e+1};tt.isZero=function(){return this.high===0&&this.low===0};tt.eqz=tt.isZero;tt.isNegative=function(){return!this.unsigned&&this.high<0};tt.isPositive=function(){return this.unsigned||this.high>=0};tt.isOdd=function(){return(this.low&1)===1};tt.isEven=function(){return(this.low&1)===0};tt.equals=function(n){return Ns(n)||(n=Il(n)),this.unsigned!==n.unsigned&&this.high>>>31===1&&n.high>>>31===1?!1:this.high===n.high&&this.low===n.low};tt.eq=tt.equals;tt.notEquals=function(n){return!this.eq(n)};tt.neq=tt.notEquals;tt.ne=tt.notEquals;tt.lessThan=function(n){return this.comp(n)<0};tt.lt=tt.lessThan;tt.lessThanOrEqual=function(n){return this.comp(n)<=0};tt.lte=tt.lessThanOrEqual;tt.le=tt.lessThanOrEqual;tt.greaterThan=function(n){return this.comp(n)>0};tt.gt=tt.greaterThan;tt.greaterThanOrEqual=function(n){return this.comp(n)>=0};tt.gte=tt.greaterThanOrEqual;tt.ge=tt.greaterThanOrEqual;tt.compare=function(n){if(Ns(n)||(n=Il(n)),this.eq(n))return 0;var e=this.isNegative(),r=n.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?n.high>>>0>this.high>>>0||n.high===this.high&&n.low>>>0>this.low>>>0?-1:1:this.sub(n).isNegative()?-1:1};tt.comp=tt.compare;tt.negate=function(){return!this.unsigned&&this.eq(Ds)?Ds:this.not().add(mv)};tt.neg=tt.negate;tt.add=function(n){Ns(n)||(n=Il(n));var e=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,s=n.high>>>16,a=n.high&65535,l=n.low>>>16,c=n.low&65535,u=0,d=0,p=0,h=0;return h+=i+c,p+=h>>>16,h&=65535,p+=o+l,d+=p>>>16,p&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=e+s,u&=65535,_r(p<<16|h,u<<16|d,this.unsigned)};tt.subtract=function(n){return Ns(n)||(n=Il(n)),this.add(n.neg())};tt.sub=tt.subtract;tt.multiply=function(n){if(this.isZero())return Oa;if(Ns(n)||(n=Il(n)),Aa){var e=Aa.mul(this.low,this.high,n.low,n.high);return _r(e,Aa.get_high(),this.unsigned)}if(n.isZero())return Oa;if(this.eq(Ds))return n.isOdd()?Ds:Oa;if(n.eq(Ds))return this.isOdd()?Ds:Oa;if(this.isNegative())return n.isNegative()?this.neg().mul(n.neg()):this.neg().mul(n).neg();if(n.isNegative())return this.mul(n.neg()).neg();if(this.lt(zK)&&n.lt(zK))return Ra(this.toNumber()*n.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=n.high>>>16,l=n.high&65535,c=n.low>>>16,u=n.low&65535,d=0,p=0,h=0,f=0;return f+=s*u,h+=f>>>16,f&=65535,h+=i*u,p+=h>>>16,h&=65535,h+=s*c,p+=h>>>16,h&=65535,p+=o*u,d+=p>>>16,p&=65535,p+=i*c,d+=p>>>16,p&=65535,p+=s*l,d+=p>>>16,p&=65535,d+=r*u+o*c+i*l+s*a,d&=65535,_r(h<<16|f,d<<16|p,this.unsigned)};tt.mul=tt.multiply;tt.divide=function(n){if(Ns(n)||(n=Il(n)),n.isZero())throw Error("division by zero");if(Aa){if(!this.unsigned&&this.high===-2147483648&&n.low===-1&&n.high===-1)return this;var e=(this.unsigned?Aa.div_u:Aa.div_s)(this.low,this.high,n.low,n.high);return _r(e,Aa.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ig:Oa;var r,o,i;if(this.unsigned){if(n.unsigned||(n=n.toUnsigned()),n.gt(this))return ig;if(n.gt(this.shru(1)))return UK;i=ig}else{if(this.eq(Ds)){if(n.eq(mv)||n.eq(EO))return Ds;if(n.eq(Ds))return mv;var s=this.shr(1);return r=s.div(n).shl(1),r.eq(Oa)?n.isNegative()?mv:EO:(o=this.sub(n.mul(r)),i=r.add(o.div(n)),i)}else if(n.eq(Ds))return this.unsigned?ig:Oa;if(this.isNegative())return n.isNegative()?this.neg().div(n.neg()):this.neg().div(n).neg();if(n.isNegative())return this.div(n.neg()).neg();i=Oa}for(o=this;o.gte(n);){r=Math.max(1,Math.floor(o.toNumber()/n.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Y3(2,a-48),c=Ra(r),u=c.mul(n);u.isNegative()||u.gt(o);)r-=l,c=Ra(r,this.unsigned),u=c.mul(n);c.isZero()&&(c=mv),i=i.add(c),o=o.sub(u)}return i};tt.div=tt.divide;tt.modulo=function(n){if(Ns(n)||(n=Il(n)),Aa){var e=(this.unsigned?Aa.rem_u:Aa.rem_s)(this.low,this.high,n.low,n.high);return _r(e,Aa.get_high(),this.unsigned)}return this.sub(this.div(n).mul(n))};tt.mod=tt.modulo;tt.rem=tt.modulo;tt.not=function(){return _r(~this.low,~this.high,this.unsigned)};tt.and=function(n){return Ns(n)||(n=Il(n)),_r(this.low&n.low,this.high&n.high,this.unsigned)};tt.or=function(n){return Ns(n)||(n=Il(n)),_r(this.low|n.low,this.high|n.high,this.unsigned)};tt.xor=function(n){return Ns(n)||(n=Il(n)),_r(this.low^n.low,this.high^n.high,this.unsigned)};tt.shiftLeft=function(n){return Ns(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?_r(this.low<<n,this.high<<n|this.low>>>32-n,this.unsigned):_r(0,this.low<<n-32,this.unsigned)};tt.shl=tt.shiftLeft;tt.shiftRight=function(n){return Ns(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?_r(this.low>>>n|this.high<<32-n,this.high>>n,this.unsigned):_r(this.high>>n-32,this.high>=0?0:-1,this.unsigned)};tt.shr=tt.shiftRight;tt.shiftRightUnsigned=function(n){if(Ns(n)&&(n=n.toInt()),n&=63,n===0)return this;var e=this.high;if(n<32){var r=this.low;return _r(r>>>n|e<<32-n,e>>>n,this.unsigned)}else return n===32?_r(e,0,this.unsigned):_r(e>>>n-32,0,this.unsigned)};tt.shru=tt.shiftRightUnsigned;tt.shr_u=tt.shiftRightUnsigned;tt.toSigned=function(){return this.unsigned?_r(this.low,this.high,!1):this};tt.toUnsigned=function(){return this.unsigned?this:_r(this.low,this.high,!0)};tt.toBytes=function(n){return n?this.toBytesLE():this.toBytesBE()};tt.toBytesLE=function(){var n=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,n&255,n>>>8&255,n>>>16&255,n>>>24]};tt.toBytesBE=function(){var n=this.high,e=this.low;return[n>>>24,n>>>16&255,n>>>8&255,n&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};kr.fromBytes=function(n,e,r){return r?kr.fromBytesLE(n,e):kr.fromBytesBE(n,e)};kr.fromBytesLE=function(n,e){return new kr(n[0]|n[1]<<8|n[2]<<16|n[3]<<24,n[4]|n[5]<<8|n[6]<<16|n[7]<<24,e)};kr.fromBytesBE=function(n,e){return new kr(n[4]<<24|n[5]<<16|n[6]<<8|n[7],n[0]<<24|n[1]<<16|n[2]<<8|n[3],e)}});var LZ=Lo((Cv,PZ)=>{"use strict";var Zbe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},hg=Zbe();PZ.exports=Cv=hg.fetch;hg.fetch&&(Cv.default=hg.fetch.bind(hg));Cv.Headers=hg.Headers;Cv.Request=hg.Request;Cv.Response=hg.Response});var $Z=Lo(()=>{"use strict"});var YZ=Lo((XZ,CF)=>{"use strict";(function(t,n,e){function r(a){var l=this,c=s();l.next=function(){var u=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=u|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function o(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function i(a,l){var c=new r(a),u=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,u&&(typeof u=="object"&&o(u,c),d.state=function(){return o(c,{})}),d}function s(){var a=4022871197,l=function(c){c=String(c);for(var u=0;u<c.length;u++){a+=c.charCodeAt(u);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.alea=i})(XZ,typeof CF=="object"&&CF,typeof define=="function"&&define)});var JZ=Lo((QZ,MF)=>{"use strict";(function(t,n,e){function r(s){var a=this,l="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xor128=i})(QZ,typeof MF=="object"&&MF,typeof define=="function"&&define)});var tX=Lo((eX,SF)=>{"use strict";(function(t,n,e){function r(s){var a=this,l="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,c==l.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xorwow=i})(eX,typeof SF=="object"&&SF,typeof define=="function"&&define)});var rX=Lo((nX,TF)=>{"use strict";(function(t,n,e){function r(s){var a=this;a.next=function(){var c=a.x,u=a.i,d,p,h;return d=c[u],d^=d>>>7,p=d^d<<24,d=c[u+1&7],p^=d^d>>>10,d=c[u+3&7],p^=d^d>>>3,d=c[u+4&7],p^=d^d<<7,d=c[u+7&7],d=d^d<<13,p^=d^d<<9,c[u]=p,a.i=u+1&7,p};function l(c,u){var d,p,h=[];if(u===(u|0))p=h[0]=u;else for(u=""+u,d=0;d<u.length;++d)h[d&7]=h[d&7]<<15^u.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?p=h[7]=-1:p=h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(c.x&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xorshift7=i})(nX,typeof TF=="object"&&TF,typeof define=="function"&&define)});var iX=Lo((oX,EF)=>{"use strict";(function(t,n,e){function r(s){var a=this;a.next=function(){var c=a.w,u=a.X,d=a.i,p,h;return a.w=c=c+1640531527|0,h=u[d+34&127],p=u[d=d+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=u[d]=h^p,a.i=d,h+(c^c>>>16)|0};function l(c,u){var d,p,h,f,m,g=[],v=128;for(u===(u|0)?(p=u,u=null):(u=u+"\0",p=0,v=Math.max(v,u.length)),h=0,f=-32;f<v;++f)u&&(p^=u.charCodeAt((f+32)%u.length)),f===0&&(m=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,f>=0&&(m=m+1640531527|0,d=g[f&127]^=p+m,h=d==0?h+1:0);for(h>=128&&(g[(u&&u.length||0)&127]=-1),h=127,f=512;f>0;--f)p=g[h+34&127],d=g[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,g[h]=p^d;c.w=m,c.X=g,c.i=h}l(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(c.X&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.xor4096=i})(oX,typeof EF=="object"&&EF,typeof define=="function"&&define)});var aX=Lo((sX,IF)=>{"use strict";(function(t,n,e){function r(s){var a=this,l="";a.next=function(){var u=a.b,d=a.c,p=a.d,h=a.a;return u=u<<25^u>>>7^d,d=d-p|0,p=p<<24^p>>>8^h,h=h-u|0,a.b=u=u<<20^u>>>12^d,a.c=d=d-p|0,a.d=p<<16^d>>>16^h,a.a=h-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)a.b^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}n&&n.exports?n.exports=i:e&&e.amd?e(function(){return i}):this.tychei=i})(sX,typeof IF=="object"&&IF,typeof define=="function"&&define)});var lX=Lo(()=>{"use strict"});var uX=Lo((cX,fS)=>{"use strict";(function(t,n,e){var r=256,o=6,i=52,s="random",a=e.pow(r,o),l=e.pow(2,i),c=l*2,u=r-1,d;function p(y,k,_){var S=[];k=k==!0?{entropy:!0}:k||{};var E=g(m(k.entropy?[y,w(n)]:y??v(),3),S),N=new h(S),B=function(){for(var D=N.g(o),P=a,M=0;D<l;)D=(D+M)*r,P*=r,M=N.g(1);for(;D>=c;)D/=2,P/=2,M>>>=1;return(D+M)/P};return B.int32=function(){return N.g(4)|0},B.quick=function(){return N.g(4)/4294967296},B.double=B,g(w(N.S),n),(k.pass||_||function(D,P,M,W){return W&&(W.S&&f(W,N),D.state=function(){return f(N,{})}),M?(e[s]=D,P):D})(B,E,"global"in k?k.global:this==e,k.state)}function h(y){var k,_=y.length,S=this,E=0,N=S.i=S.j=0,B=S.S=[];for(_||(y=[_++]);E<r;)B[E]=E++;for(E=0;E<r;E++)B[E]=B[N=u&N+y[E%_]+(k=B[E])],B[N]=k;(S.g=function(D){for(var P,M=0,W=S.i,ie=S.j,Z=S.S;D--;)P=Z[W=u&W+1],M=M*r+Z[u&(Z[W]=Z[ie=u&ie+P])+(Z[ie]=P)];return S.i=W,S.j=ie,M})(r)}function f(y,k){return k.i=y.i,k.j=y.j,k.S=y.S.slice(),k}function m(y,k){var _=[],S=typeof y,E;if(k&&S=="object")for(E in y)try{_.push(m(y[E],k-1))}catch{}return _.length?_:S=="string"?y:y+"\0"}function g(y,k){for(var _=y+"",S,E=0;E<_.length;)k[u&E]=u&(S^=k[u&E]*19)+_.charCodeAt(E++);return w(k)}function v(){try{var y;return d&&(y=d.randomBytes)?y=y(r):(y=new Uint8Array(r),(t.crypto||t.msCrypto).getRandomValues(y)),w(y)}catch{var k=t.navigator,_=k&&k.plugins;return[+new Date,t,_,t.screen,w(n)]}}function w(y){return String.fromCharCode.apply(0,y)}if(g(e.random(),n),typeof fS=="object"&&fS.exports){fS.exports=p;try{d=lX()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):e["seed"+s]=p})(typeof self<"u"?self:cX,[],Math)});var a_=Lo((CCt,dX)=>{"use strict";var OMe=YZ(),FMe=JZ(),BMe=tX(),PMe=rX(),LMe=iX(),$Me=aX(),Cg=uX();Cg.alea=OMe;Cg.xor128=FMe;Cg.xorwow=BMe;Cg.xorshift7=PMe;Cg.xor4096=LMe;Cg.tychei=$Me;dX.exports=Cg});var Ote=Lo(nE=>{"use strict";nE.byteLength=mAe;nE.toByteArray=vAe;nE.fromByteArray=xAe;var Iu=[],Za=[],fAe=typeof Uint8Array<"u"?Uint8Array:Array,AL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Xg=0,Ate=AL.length;Xg<Ate;++Xg)Iu[Xg]=AL[Xg],Za[AL.charCodeAt(Xg)]=Xg;var Xg,Ate;Za[45]=62;Za[95]=63;function Rte(t){var n=t.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");e===-1&&(e=n);var r=e===n?0:4-e%4;return[e,r]}function mAe(t){var n=Rte(t),e=n[0],r=n[1];return(e+r)*3/4-r}function gAe(t,n,e){return(n+e)*3/4-e}function vAe(t){var n,e=Rte(t),r=e[0],o=e[1],i=new fAe(gAe(t,r,o)),s=0,a=o>0?r-4:r,l;for(l=0;l<a;l+=4)n=Za[t.charCodeAt(l)]<<18|Za[t.charCodeAt(l+1)]<<12|Za[t.charCodeAt(l+2)]<<6|Za[t.charCodeAt(l+3)],i[s++]=n>>16&255,i[s++]=n>>8&255,i[s++]=n&255;return o===2&&(n=Za[t.charCodeAt(l)]<<2|Za[t.charCodeAt(l+1)]>>4,i[s++]=n&255),o===1&&(n=Za[t.charCodeAt(l)]<<10|Za[t.charCodeAt(l+1)]<<4|Za[t.charCodeAt(l+2)]>>2,i[s++]=n>>8&255,i[s++]=n&255),i}function wAe(t){return Iu[t>>18&63]+Iu[t>>12&63]+Iu[t>>6&63]+Iu[t&63]}function yAe(t,n,e){for(var r,o=[],i=n;i<e;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),o.push(wAe(r));return o.join("")}function xAe(t){for(var n,e=t.length,r=e%3,o=[],i=16383,s=0,a=e-r;s<a;s+=i)o.push(yAe(t,s,s+i>a?a:s+i));return r===1?(n=t[e-1],o.push(Iu[n>>2]+Iu[n<<4&63]+"==")):r===2&&(n=(t[e-2]<<8)+t[e-1],o.push(Iu[n>>10]+Iu[n>>4&63]+Iu[n<<2&63]+"=")),o.join("")}});var Fte=Lo(RL=>{"use strict";RL.read=function(t,n,e,r,o){var i,s,a=o*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=e?o-1:0,p=e?-1:1,h=t[n+d];for(d+=p,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=i*256+t[n+d],d+=p,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=s*256+t[n+d],d+=p,u-=8);if(i===0)i=1-c;else{if(i===l)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-c}return(h?-1:1)*s*Math.pow(2,i-r)};RL.write=function(t,n,e,r,o,i){var s,a,l,c=i*8-o-1,u=(1<<c)-1,d=u>>1,p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,m=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(a=isNaN(n)?1:0,s=u):(s=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?n+=p/l:n+=p*Math.pow(2,1-d),n*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(n*l-1)*Math.pow(2,o),s=s+d):(a=n*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;t[e+h]=a&255,h+=f,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;t[e+h]=s&255,h+=f,s/=256,c-=8);t[e+h-f]|=m*128}});var Kte=Lo(tw=>{"use strict";var OL=Ote(),ew=Fte(),Bte=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;tw.Buffer=Ie;tw.SlowBuffer=SAe;tw.INSPECT_MAX_BYTES=50;var rE=2147483647;tw.kMaxLength=rE;Ie.TYPED_ARRAY_SUPPORT=kAe();!Ie.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function kAe(){try{var t=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(t,n),t.foo()===42}catch{return!1}}Object.defineProperty(Ie.prototype,"parent",{enumerable:!0,get:function(){if(Ie.isBuffer(this))return this.buffer}});Object.defineProperty(Ie.prototype,"offset",{enumerable:!0,get:function(){if(Ie.isBuffer(this))return this.byteOffset}});function Hp(t){if(t>rE)throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=new Uint8Array(t);return Object.setPrototypeOf(n,Ie.prototype),n}function Ie(t,n,e){if(typeof t=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return LL(t)}return $te(t,n,e)}Ie.poolSize=8192;function $te(t,n,e){if(typeof t=="string")return bAe(t,n);if(ArrayBuffer.isView(t))return CAe(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Du(t,ArrayBuffer)||t&&Du(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Du(t,SharedArrayBuffer)||t&&Du(t.buffer,SharedArrayBuffer)))return BL(t,n,e);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(r!=null&&r!==t)return Ie.from(r,n,e);var o=MAe(t);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return Ie.from(t[Symbol.toPrimitive]("string"),n,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}Ie.from=function(t,n,e){return $te(t,n,e)};Object.setPrototypeOf(Ie.prototype,Uint8Array.prototype);Object.setPrototypeOf(Ie,Uint8Array);function Vte(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function _Ae(t,n,e){return Vte(t),t<=0?Hp(t):n!==void 0?typeof e=="string"?Hp(t).fill(n,e):Hp(t).fill(n):Hp(t)}Ie.alloc=function(t,n,e){return _Ae(t,n,e)};function LL(t){return Vte(t),Hp(t<0?0:$L(t)|0)}Ie.allocUnsafe=function(t){return LL(t)};Ie.allocUnsafeSlow=function(t){return LL(t)};function bAe(t,n){if((typeof n!="string"||n==="")&&(n="utf8"),!Ie.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var e=jte(t,n)|0,r=Hp(e),o=r.write(t,n);return o!==e&&(r=r.slice(0,o)),r}function FL(t){for(var n=t.length<0?0:$L(t.length)|0,e=Hp(n),r=0;r<n;r+=1)e[r]=t[r]&255;return e}function CAe(t){if(Du(t,Uint8Array)){var n=new Uint8Array(t);return BL(n.buffer,n.byteOffset,n.byteLength)}return FL(t)}function BL(t,n,e){if(n<0||t.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<n+(e||0))throw new RangeError('"length" is outside of buffer bounds');var r;return n===void 0&&e===void 0?r=new Uint8Array(t):e===void 0?r=new Uint8Array(t,n):r=new Uint8Array(t,n,e),Object.setPrototypeOf(r,Ie.prototype),r}function MAe(t){if(Ie.isBuffer(t)){var n=$L(t.length)|0,e=Hp(n);return e.length===0||t.copy(e,0,0,n),e}if(t.length!==void 0)return typeof t.length!="number"||VL(t.length)?Hp(0):FL(t);if(t.type==="Buffer"&&Array.isArray(t.data))return FL(t.data)}function $L(t){if(t>=rE)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+rE.toString(16)+" bytes");return t|0}function SAe(t){return+t!=t&&(t=0),Ie.alloc(+t)}Ie.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==Ie.prototype};Ie.compare=function(n,e){if(Du(n,Uint8Array)&&(n=Ie.from(n,n.offset,n.byteLength)),Du(e,Uint8Array)&&(e=Ie.from(e,e.offset,e.byteLength)),!Ie.isBuffer(n)||!Ie.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===e)return 0;for(var r=n.length,o=e.length,i=0,s=Math.min(r,o);i<s;++i)if(n[i]!==e[i]){r=n[i],o=e[i];break}return r<o?-1:o<r?1:0};Ie.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Ie.concat=function(n,e){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return Ie.alloc(0);var r;if(e===void 0)for(e=0,r=0;r<n.length;++r)e+=n[r].length;var o=Ie.allocUnsafe(e),i=0;for(r=0;r<n.length;++r){var s=n[r];if(Du(s,Uint8Array))i+s.length>o.length?Ie.from(s).copy(o,i):Uint8Array.prototype.set.call(o,s,i);else if(Ie.isBuffer(s))s.copy(o,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=s.length}return o};function jte(t,n){if(Ie.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Du(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var e=t.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&e===0)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return PL(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return qte(t).length;default:if(o)return r?-1:PL(t).length;n=(""+n).toLowerCase(),o=!0}}Ie.byteLength=jte;function TAe(t,n,e){var r=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,n>>>=0,e<=n))return"";for(t||(t="utf8");;)switch(t){case"hex":return PAe(this,n,e);case"utf8":case"utf-8":return Hte(this,n,e);case"ascii":return FAe(this,n,e);case"latin1":case"binary":return BAe(this,n,e);case"base64":return RAe(this,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return LAe(this,n,e);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}Ie.prototype._isBuffer=!0;function Yg(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}Ie.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<n;e+=2)Yg(this,e,e+1);return this};Ie.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<n;e+=4)Yg(this,e,e+3),Yg(this,e+1,e+2);return this};Ie.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<n;e+=8)Yg(this,e,e+7),Yg(this,e+1,e+6),Yg(this,e+2,e+5),Yg(this,e+3,e+4);return this};Ie.prototype.toString=function(){var n=this.length;return n===0?"":arguments.length===0?Hte(this,0,n):TAe.apply(this,arguments)};Ie.prototype.toLocaleString=Ie.prototype.toString;Ie.prototype.equals=function(n){if(!Ie.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:Ie.compare(this,n)===0};Ie.prototype.inspect=function(){var n="",e=tw.INSPECT_MAX_BYTES;return n=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(n+=" ... "),"<Buffer "+n+">"};Bte&&(Ie.prototype[Bte]=Ie.prototype.inspect);Ie.prototype.compare=function(n,e,r,o,i){if(Du(n,Uint8Array)&&(n=Ie.from(n,n.offset,n.byteLength)),!Ie.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(e===void 0&&(e=0),r===void 0&&(r=n?n.length:0),o===void 0&&(o=0),i===void 0&&(i=this.length),e<0||r>n.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&e>=r)return 0;if(o>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,o>>>=0,i>>>=0,this===n)return 0;for(var s=i-o,a=r-e,l=Math.min(s,a),c=this.slice(o,i),u=n.slice(e,r),d=0;d<l;++d)if(c[d]!==u[d]){s=c[d],a=u[d];break}return s<a?-1:a<s?1:0};function zte(t,n,e,r,o){if(t.length===0)return-1;if(typeof e=="string"?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,VL(e)&&(e=o?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(o)return-1;e=t.length-1}else if(e<0)if(o)e=0;else return-1;if(typeof n=="string"&&(n=Ie.from(n,r)),Ie.isBuffer(n))return n.length===0?-1:Pte(t,n,e,r,o);if(typeof n=="number")return n=n&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,n,e):Uint8Array.prototype.lastIndexOf.call(t,n,e):Pte(t,[n],e,r,o);throw new TypeError("val must be string, number or Buffer")}function Pte(t,n,e,r,o){var i=1,s=t.length,a=n.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||n.length<2)return-1;i=2,s/=2,a/=2,e/=2}function l(h,f){return i===1?h[f]:h.readUInt16BE(f*i)}var c;if(o){var u=-1;for(c=e;c<s;c++)if(l(t,c)===l(n,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===a)return u*i}else u!==-1&&(c-=c-u),u=-1}else for(e+a>s&&(e=s-a),c=e;c>=0;c--){for(var d=!0,p=0;p<a;p++)if(l(t,c+p)!==l(n,p)){d=!1;break}if(d)return c}return-1}Ie.prototype.includes=function(n,e,r){return this.indexOf(n,e,r)!==-1};Ie.prototype.indexOf=function(n,e,r){return zte(this,n,e,r,!0)};Ie.prototype.lastIndexOf=function(n,e,r){return zte(this,n,e,r,!1)};function EAe(t,n,e,r){e=Number(e)||0;var o=t.length-e;r?(r=Number(r),r>o&&(r=o)):r=o;var i=n.length;r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(n.substr(s*2,2),16);if(VL(a))return s;t[e+s]=a}return s}function IAe(t,n,e,r){return oE(PL(n,t.length-e),t,e,r)}function DAe(t,n,e,r){return oE(jAe(n),t,e,r)}function NAe(t,n,e,r){return oE(qte(n),t,e,r)}function AAe(t,n,e,r){return oE(zAe(n,t.length-e),t,e,r)}Ie.prototype.write=function(n,e,r,o){if(e===void 0)o="utf8",r=this.length,e=0;else if(r===void 0&&typeof e=="string")o=e,r=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(r)?(r=r>>>0,o===void 0&&(o="utf8")):(o=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-e;if((r===void 0||r>i)&&(r=i),n.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var s=!1;;)switch(o){case"hex":return EAe(this,n,e,r);case"utf8":case"utf-8":return IAe(this,n,e,r);case"ascii":case"latin1":case"binary":return DAe(this,n,e,r);case"base64":return NAe(this,n,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return AAe(this,n,e,r);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};Ie.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function RAe(t,n,e){return n===0&&e===t.length?OL.fromByteArray(t):OL.fromByteArray(t.slice(n,e))}function Hte(t,n,e){e=Math.min(t.length,e);for(var r=[],o=n;o<e;){var i=t[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=e){var l,c,u,d;switch(a){case 1:i<128&&(s=i);break;case 2:l=t[o+1],(l&192)===128&&(d=(i&31)<<6|l&63,d>127&&(s=d));break;case 3:l=t[o+1],c=t[o+2],(l&192)===128&&(c&192)===128&&(d=(i&15)<<12|(l&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:l=t[o+1],c=t[o+2],u=t[o+3],(l&192)===128&&(c&192)===128&&(u&192)===128&&(d=(i&15)<<18|(l&63)<<12|(c&63)<<6|u&63,d>65535&&d<1114112&&(s=d))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),o+=a}return OAe(r)}var Lte=4096;function OAe(t){var n=t.length;if(n<=Lte)return String.fromCharCode.apply(String,t);for(var e="",r=0;r<n;)e+=String.fromCharCode.apply(String,t.slice(r,r+=Lte));return e}function FAe(t,n,e){var r="";e=Math.min(t.length,e);for(var o=n;o<e;++o)r+=String.fromCharCode(t[o]&127);return r}function BAe(t,n,e){var r="";e=Math.min(t.length,e);for(var o=n;o<e;++o)r+=String.fromCharCode(t[o]);return r}function PAe(t,n,e){var r=t.length;(!n||n<0)&&(n=0),(!e||e<0||e>r)&&(e=r);for(var o="",i=n;i<e;++i)o+=HAe[t[i]];return o}function LAe(t,n,e){for(var r=t.slice(n,e),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+r[i+1]*256);return o}Ie.prototype.slice=function(n,e){var r=this.length;n=~~n,e=e===void 0?r:~~e,n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<n&&(e=n);var o=this.subarray(n,e);return Object.setPrototypeOf(o,Ie.prototype),o};function ui(t,n,e){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+n>e)throw new RangeError("Trying to access beyond buffer length")}Ie.prototype.readUintLE=Ie.prototype.readUIntLE=function(n,e,r){n=n>>>0,e=e>>>0,r||ui(n,e,this.length);for(var o=this[n],i=1,s=0;++s<e&&(i*=256);)o+=this[n+s]*i;return o};Ie.prototype.readUintBE=Ie.prototype.readUIntBE=function(n,e,r){n=n>>>0,e=e>>>0,r||ui(n,e,this.length);for(var o=this[n+--e],i=1;e>0&&(i*=256);)o+=this[n+--e]*i;return o};Ie.prototype.readUint8=Ie.prototype.readUInt8=function(n,e){return n=n>>>0,e||ui(n,1,this.length),this[n]};Ie.prototype.readUint16LE=Ie.prototype.readUInt16LE=function(n,e){return n=n>>>0,e||ui(n,2,this.length),this[n]|this[n+1]<<8};Ie.prototype.readUint16BE=Ie.prototype.readUInt16BE=function(n,e){return n=n>>>0,e||ui(n,2,this.length),this[n]<<8|this[n+1]};Ie.prototype.readUint32LE=Ie.prototype.readUInt32LE=function(n,e){return n=n>>>0,e||ui(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216};Ie.prototype.readUint32BE=Ie.prototype.readUInt32BE=function(n,e){return n=n>>>0,e||ui(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])};Ie.prototype.readIntLE=function(n,e,r){n=n>>>0,e=e>>>0,r||ui(n,e,this.length);for(var o=this[n],i=1,s=0;++s<e&&(i*=256);)o+=this[n+s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o};Ie.prototype.readIntBE=function(n,e,r){n=n>>>0,e=e>>>0,r||ui(n,e,this.length);for(var o=e,i=1,s=this[n+--o];o>0&&(i*=256);)s+=this[n+--o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s};Ie.prototype.readInt8=function(n,e){return n=n>>>0,e||ui(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]};Ie.prototype.readInt16LE=function(n,e){n=n>>>0,e||ui(n,2,this.length);var r=this[n]|this[n+1]<<8;return r&32768?r|4294901760:r};Ie.prototype.readInt16BE=function(n,e){n=n>>>0,e||ui(n,2,this.length);var r=this[n+1]|this[n]<<8;return r&32768?r|4294901760:r};Ie.prototype.readInt32LE=function(n,e){return n=n>>>0,e||ui(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24};Ie.prototype.readInt32BE=function(n,e){return n=n>>>0,e||ui(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]};Ie.prototype.readFloatLE=function(n,e){return n=n>>>0,e||ui(n,4,this.length),ew.read(this,n,!0,23,4)};Ie.prototype.readFloatBE=function(n,e){return n=n>>>0,e||ui(n,4,this.length),ew.read(this,n,!1,23,4)};Ie.prototype.readDoubleLE=function(n,e){return n=n>>>0,e||ui(n,8,this.length),ew.read(this,n,!0,52,8)};Ie.prototype.readDoubleBE=function(n,e){return n=n>>>0,e||ui(n,8,this.length),ew.read(this,n,!1,52,8)};function Fs(t,n,e,r,o,i){if(!Ie.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<i)throw new RangeError('"value" argument is out of bounds');if(e+r>t.length)throw new RangeError("Index out of range")}Ie.prototype.writeUintLE=Ie.prototype.writeUIntLE=function(n,e,r,o){if(n=+n,e=e>>>0,r=r>>>0,!o){var i=Math.pow(2,8*r)-1;Fs(this,n,e,r,i,0)}var s=1,a=0;for(this[e]=n&255;++a<r&&(s*=256);)this[e+a]=n/s&255;return e+r};Ie.prototype.writeUintBE=Ie.prototype.writeUIntBE=function(n,e,r,o){if(n=+n,e=e>>>0,r=r>>>0,!o){var i=Math.pow(2,8*r)-1;Fs(this,n,e,r,i,0)}var s=r-1,a=1;for(this[e+s]=n&255;--s>=0&&(a*=256);)this[e+s]=n/a&255;return e+r};Ie.prototype.writeUint8=Ie.prototype.writeUInt8=function(n,e,r){return n=+n,e=e>>>0,r||Fs(this,n,e,1,255,0),this[e]=n&255,e+1};Ie.prototype.writeUint16LE=Ie.prototype.writeUInt16LE=function(n,e,r){return n=+n,e=e>>>0,r||Fs(this,n,e,2,65535,0),this[e]=n&255,this[e+1]=n>>>8,e+2};Ie.prototype.writeUint16BE=Ie.prototype.writeUInt16BE=function(n,e,r){return n=+n,e=e>>>0,r||Fs(this,n,e,2,65535,0),this[e]=n>>>8,this[e+1]=n&255,e+2};Ie.prototype.writeUint32LE=Ie.prototype.writeUInt32LE=function(n,e,r){return n=+n,e=e>>>0,r||Fs(this,n,e,4,4294967295,0),this[e+3]=n>>>24,this[e+2]=n>>>16,this[e+1]=n>>>8,this[e]=n&255,e+4};Ie.prototype.writeUint32BE=Ie.prototype.writeUInt32BE=function(n,e,r){return n=+n,e=e>>>0,r||Fs(this,n,e,4,4294967295,0),this[e]=n>>>24,this[e+1]=n>>>16,this[e+2]=n>>>8,this[e+3]=n&255,e+4};Ie.prototype.writeIntLE=function(n,e,r,o){if(n=+n,e=e>>>0,!o){var i=Math.pow(2,8*r-1);Fs(this,n,e,r,i-1,-i)}var s=0,a=1,l=0;for(this[e]=n&255;++s<r&&(a*=256);)n<0&&l===0&&this[e+s-1]!==0&&(l=1),this[e+s]=(n/a>>0)-l&255;return e+r};Ie.prototype.writeIntBE=function(n,e,r,o){if(n=+n,e=e>>>0,!o){var i=Math.pow(2,8*r-1);Fs(this,n,e,r,i-1,-i)}var s=r-1,a=1,l=0;for(this[e+s]=n&255;--s>=0&&(a*=256);)n<0&&l===0&&this[e+s+1]!==0&&(l=1),this[e+s]=(n/a>>0)-l&255;return e+r};Ie.prototype.writeInt8=function(n,e,r){return n=+n,e=e>>>0,r||Fs(this,n,e,1,127,-128),n<0&&(n=255+n+1),this[e]=n&255,e+1};Ie.prototype.writeInt16LE=function(n,e,r){return n=+n,e=e>>>0,r||Fs(this,n,e,2,32767,-32768),this[e]=n&255,this[e+1]=n>>>8,e+2};Ie.prototype.writeInt16BE=function(n,e,r){return n=+n,e=e>>>0,r||Fs(this,n,e,2,32767,-32768),this[e]=n>>>8,this[e+1]=n&255,e+2};Ie.prototype.writeInt32LE=function(n,e,r){return n=+n,e=e>>>0,r||Fs(this,n,e,4,2147483647,-2147483648),this[e]=n&255,this[e+1]=n>>>8,this[e+2]=n>>>16,this[e+3]=n>>>24,e+4};Ie.prototype.writeInt32BE=function(n,e,r){return n=+n,e=e>>>0,r||Fs(this,n,e,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[e]=n>>>24,this[e+1]=n>>>16,this[e+2]=n>>>8,this[e+3]=n&255,e+4};function Ute(t,n,e,r,o,i){if(e+r>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Gte(t,n,e,r,o){return n=+n,e=e>>>0,o||Ute(t,n,e,4,34028234663852886e22,-34028234663852886e22),ew.write(t,n,e,r,23,4),e+4}Ie.prototype.writeFloatLE=function(n,e,r){return Gte(this,n,e,!0,r)};Ie.prototype.writeFloatBE=function(n,e,r){return Gte(this,n,e,!1,r)};function Wte(t,n,e,r,o){return n=+n,e=e>>>0,o||Ute(t,n,e,8,17976931348623157e292,-17976931348623157e292),ew.write(t,n,e,r,52,8),e+8}Ie.prototype.writeDoubleLE=function(n,e,r){return Wte(this,n,e,!0,r)};Ie.prototype.writeDoubleBE=function(n,e,r){return Wte(this,n,e,!1,r)};Ie.prototype.copy=function(n,e,r,o){if(!Ie.isBuffer(n))throw new TypeError("argument should be a Buffer");if(r||(r=0),!o&&o!==0&&(o=this.length),e>=n.length&&(e=n.length),e||(e=0),o>0&&o<r&&(o=r),o===r||n.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),n.length-e<o-r&&(o=n.length-e+r);var i=o-r;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,r,o):Uint8Array.prototype.set.call(n,this.subarray(r,o),e),i};Ie.prototype.fill=function(n,e,r,o){if(typeof n=="string"){if(typeof e=="string"?(o=e,e=0,r=this.length):typeof r=="string"&&(o=r,r=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!Ie.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(n.length===1){var i=n.charCodeAt(0);(o==="utf8"&&i<128||o==="latin1")&&(n=i)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e=e>>>0,r=r===void 0?this.length:r>>>0,n||(n=0);var s;if(typeof n=="number")for(s=e;s<r;++s)this[s]=n;else{var a=Ie.isBuffer(n)?n:Ie.from(n,o),l=a.length;if(l===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=a[s%l]}return this};var $Ae=/[^+/0-9A-Za-z-_]/g;function VAe(t){if(t=t.split("=")[0],t=t.trim().replace($Ae,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function PL(t,n){n=n||1/0;for(var e,r=t.length,o=null,i=[],s=0;s<r;++s){if(e=t.charCodeAt(s),e>55295&&e<57344){if(!o){if(e>56319){(n-=3)>-1&&i.push(239,191,189);continue}else if(s+1===r){(n-=3)>-1&&i.push(239,191,189);continue}o=e;continue}if(e<56320){(n-=3)>-1&&i.push(239,191,189),o=e;continue}e=(o-55296<<10|e-56320)+65536}else o&&(n-=3)>-1&&i.push(239,191,189);if(o=null,e<128){if((n-=1)<0)break;i.push(e)}else if(e<2048){if((n-=2)<0)break;i.push(e>>6|192,e&63|128)}else if(e<65536){if((n-=3)<0)break;i.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((n-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return i}function jAe(t){for(var n=[],e=0;e<t.length;++e)n.push(t.charCodeAt(e)&255);return n}function zAe(t,n){for(var e,r,o,i=[],s=0;s<t.length&&!((n-=2)<0);++s)e=t.charCodeAt(s),r=e>>8,o=e%256,i.push(o),i.push(r);return i}function qte(t){return OL.toByteArray(VAe(t))}function oE(t,n,e,r){for(var o=0;o<r&&!(o+e>=n.length||o>=t.length);++o)n[o+e]=t[o];return o}function Du(t,n){return t instanceof n||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===n.name}function VL(t){return t!==t}var HAe=(function(){for(var t="0123456789abcdef",n=new Array(256),e=0;e<16;++e)for(var r=e*16,o=0;o<16;++o)n[r+o]=t[e]+t[o];return n})()});var Yte=Lo((jL,Xte)=>{"use strict";var iE=Kte(),Nu=iE.Buffer;function Zte(t,n){for(var e in t)n[e]=t[e]}Nu.from&&Nu.alloc&&Nu.allocUnsafe&&Nu.allocUnsafeSlow?Xte.exports=iE:(Zte(iE,jL),jL.Buffer=Qg);function Qg(t,n,e){return Nu(t,n,e)}Qg.prototype=Object.create(Nu.prototype);Zte(Nu,Qg);Qg.from=function(t,n,e){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Nu(t,n,e)};Qg.alloc=function(t,n,e){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=Nu(t);return n!==void 0?typeof e=="string"?r.fill(n,e):r.fill(n):r.fill(0),r};Qg.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Nu(t)};Qg.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return iE.SlowBuffer(t)}});var UL=Lo(Jte=>{"use strict";var HL=Yte().Buffer,Qte=HL.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function UAe(t){if(!t)return"utf8";for(var n;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(n)return;t=(""+t).toLowerCase(),n=!0}}function GAe(t){var n=UAe(t);if(typeof n!="string"&&(HL.isEncoding===Qte||!Qte(t)))throw new Error("Unknown encoding: "+t);return n||t}Jte.StringDecoder=Z_;function Z_(t){this.encoding=GAe(t);var n;switch(this.encoding){case"utf16le":this.text=YAe,this.end=QAe,n=4;break;case"utf8":this.fillLast=KAe,n=4;break;case"base64":this.text=JAe,this.end=eRe,n=3;break;default:this.write=tRe,this.end=nRe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=HL.allocUnsafe(n)}Z_.prototype.write=function(t){if(t.length===0)return"";var n,e;if(this.lastNeed){if(n=this.fillLast(t),n===void 0)return"";e=this.lastNeed,this.lastNeed=0}else e=0;return e<t.length?n?n+this.text(t,e):this.text(t,e):n||""};Z_.prototype.end=XAe;Z_.prototype.text=ZAe;Z_.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function zL(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function WAe(t,n,e){var r=n.length-1;if(r<e)return 0;var o=zL(n[r]);return o>=0?(o>0&&(t.lastNeed=o-1),o):--r<e||o===-2?0:(o=zL(n[r]),o>=0?(o>0&&(t.lastNeed=o-2),o):--r<e||o===-2?0:(o=zL(n[r]),o>=0?(o>0&&(o===2?o=0:t.lastNeed=o-3),o):0))}function qAe(t,n,e){if((n[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&n.length>1){if((n[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&n.length>2&&(n[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function KAe(t){var n=this.lastTotal-this.lastNeed,e=qAe(this,t,n);if(e!==void 0)return e;if(this.lastNeed<=t.length)return t.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,n,0,t.length),this.lastNeed-=t.length}function ZAe(t,n){var e=WAe(this,t,n);if(!this.lastNeed)return t.toString("utf8",n);this.lastTotal=e;var r=t.length-(e-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",n,r)}function XAe(t){var n=t&&t.length?this.write(t):"";return this.lastNeed?n+"\uFFFD":n}function YAe(t,n){if((t.length-n)%2===0){var e=t.toString("utf16le",n);if(e){var r=e.charCodeAt(e.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],e.slice(0,-1)}return e}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",n,t.length-1)}function QAe(t){var n=t&&t.length?this.write(t):"";if(this.lastNeed){var e=this.lastTotal-this.lastNeed;return n+this.lastChar.toString("utf16le",0,e)}return n}function JAe(t,n){var e=(t.length-n)%3;return e===0?t.toString("base64",n):(this.lastNeed=3-e,this.lastTotal=3,e===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",n,t.length-e))}function eRe(t){var n=t&&t.length?this.write(t):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}function tRe(t){return t.toString(this.encoding)}function nRe(t){return t&&t.length?this.write(t):""}});var mne=Lo(()=>{"use strict"});var zue=Lo((jue,l$)=>{"use strict";(function(t){typeof jue=="object"&&typeof l$<"u"?l$.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=t()})(function(){return(function t(n,e,r){function o(a,l){if(!e[a]){if(!n[a]){var c=typeof hy=="function"&&hy;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=e[a]={exports:{}};n[a][0].call(d.exports,function(p){var h=n[a][1][p];return o(h||p)},d,d.exports,t,n,e,r)}return e[a].exports}for(var i=typeof hy=="function"&&hy,s=0;s<r.length;s++)o(r[s]);return o})({1:[function(t,n,e){"use strict";var r=t("./utils"),o=t("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(s){for(var a,l,c,u,d,p,h,f=[],m=0,g=s.length,v=g,w=r.getTypeOf(s)!=="string";m<s.length;)v=g-m,c=w?(a=s[m++],l=m<g?s[m++]:0,m<g?s[m++]:0):(a=s.charCodeAt(m++),l=m<g?s.charCodeAt(m++):0,m<g?s.charCodeAt(m++):0),u=a>>2,d=(3&a)<<4|l>>4,p=1<v?(15&l)<<2|c>>6:64,h=2<v?63&c:64,f.push(i.charAt(u)+i.charAt(d)+i.charAt(p)+i.charAt(h));return f.join("")},e.decode=function(s){var a,l,c,u,d,p,h=0,f=0,m="data:";if(s.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var g,v=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===i.charAt(64)&&v--,s.charAt(s.length-2)===i.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=o.uint8array?new Uint8Array(0|v):new Array(0|v);h<s.length;)a=i.indexOf(s.charAt(h++))<<2|(u=i.indexOf(s.charAt(h++)))>>4,l=(15&u)<<4|(d=i.indexOf(s.charAt(h++)))>>2,c=(3&d)<<6|(p=i.indexOf(s.charAt(h++))),g[f++]=a,d!==64&&(g[f++]=l),p!==64&&(g[f++]=c);return g}},{"./support":30,"./utils":32}],2:[function(t,n,e){"use strict";var r=t("./external"),o=t("./stream/DataWorker"),i=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function a(l,c,u,d,p){this.compressedSize=l,this.uncompressedSize=c,this.crc32=u,this.compression=d,this.compressedContent=p}a.prototype={getContentWorker:function(){var l=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),c=this;return l.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(l,c,u){return l.pipe(new i).pipe(new s("uncompressedSize")).pipe(c.compressWorker(u)).pipe(new s("compressedSize")).withStreamInfo("compression",c)},n.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,e){"use strict";var r=t("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},e.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,e){"use strict";var r=t("./utils"),o=(function(){for(var i,s=[],a=0;a<256;a++){i=a;for(var l=0;l<8;l++)i=1&i?3988292384^i>>>1:i>>>1;s[a]=i}return s})();n.exports=function(i,s){return i!==void 0&&i.length?r.getTypeOf(i)!=="string"?(function(a,l,c,u){var d=o,p=u+c;a^=-1;for(var h=u;h<p;h++)a=a>>>8^d[255&(a^l[h])];return-1^a})(0|s,i,i.length,0):(function(a,l,c,u){var d=o,p=u+c;a^=-1;for(var h=u;h<p;h++)a=a>>>8^d[255&(a^l.charCodeAt(h))];return-1^a})(0|s,i,i.length,0):0}},{"./utils":32}],5:[function(t,n,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(t,n,e){"use strict";var r=null;r=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:r}},{lie:37}],7:[function(t,n,e){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),i=t("./utils"),s=t("./stream/GenericWorker"),a=r?"uint8array":"array";function l(c,u){s.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=u,this.meta={}}e.magic="\b\0",i.inherits(l,s),l.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(a,c.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(u){c.push({data:u,meta:c.meta})}},e.compressWorker=function(c){return new l("Deflate",c)},e.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,e){"use strict";function r(d,p){var h,f="";for(h=0;h<p;h++)f+=String.fromCharCode(255&d),d>>>=8;return f}function o(d,p,h,f,m,g){var v,w,y=d.file,k=d.compression,_=g!==a.utf8encode,S=i.transformTo("string",g(y.name)),E=i.transformTo("string",a.utf8encode(y.name)),N=y.comment,B=i.transformTo("string",g(N)),D=i.transformTo("string",a.utf8encode(N)),P=E.length!==y.name.length,M=D.length!==N.length,W="",ie="",Z="",X=y.dir,G=y.date,H={crc32:0,compressedSize:0,uncompressedSize:0};p&&!h||(H.crc32=d.crc32,H.compressedSize=d.compressedSize,H.uncompressedSize=d.uncompressedSize);var V=0;p&&(V|=8),_||!P&&!M||(V|=2048);var K=0,pe=0;X&&(K|=16),m==="UNIX"?(pe=798,K|=(function(se,we){var Ne=se;return se||(Ne=we?16893:33204),(65535&Ne)<<16})(y.unixPermissions,X)):(pe=20,K|=(function(se){return 63&(se||0)})(y.dosPermissions)),v=G.getUTCHours(),v<<=6,v|=G.getUTCMinutes(),v<<=5,v|=G.getUTCSeconds()/2,w=G.getUTCFullYear()-1980,w<<=4,w|=G.getUTCMonth()+1,w<<=5,w|=G.getUTCDate(),P&&(ie=r(1,1)+r(l(S),4)+E,W+="up"+r(ie.length,2)+ie),M&&(Z=r(1,1)+r(l(B),4)+D,W+="uc"+r(Z.length,2)+Z);var ce="";return ce+=`
\0`,ce+=r(V,2),ce+=k.magic,ce+=r(v,2),ce+=r(w,2),ce+=r(H.crc32,4),ce+=r(H.compressedSize,4),ce+=r(H.uncompressedSize,4),ce+=r(S.length,2),ce+=r(W.length,2),{fileRecord:c.LOCAL_FILE_HEADER+ce+S+W,dirRecord:c.CENTRAL_FILE_HEADER+r(pe,2)+ce+r(B.length,2)+"\0\0\0\0"+r(K,4)+r(f,4)+S+W+B}}var i=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),l=t("../crc32"),c=t("../signature");function u(d,p,h,f){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=h,this.encodeFileName=f,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,s),u.prototype.push=function(d){var p=d.meta.percent||0,h=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,s.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:h?(p+100*(h-f-1))/h:100}}))},u.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var p=this.streamFiles&&!d.file.dir;if(p){var h=o(d,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(d){this.accumulate=!1;var p=this.streamFiles&&!d.file.dir,h=o(d,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),p)this.push({data:(function(f){return c.DATA_DESCRIPTOR+r(f.crc32,4)+r(f.compressedSize,4)+r(f.uncompressedSize,4)})(d),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var d=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var h=this.bytesWritten-d,f=(function(m,g,v,w,y){var k=i.transformTo("string",y(w));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(m,2)+r(m,2)+r(g,4)+r(v,4)+r(k.length,2)+k})(this.dirRecords.length,h,d,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(d){this._sources.push(d);var p=this;return d.on("data",function(h){p.processChunk(h)}),d.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),d.on("error",function(h){p.error(h)}),this},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(d){var p=this._sources;if(!s.prototype.error.call(this,d))return!1;for(var h=0;h<p.length;h++)try{p[h].error(d)}catch{}return!0},u.prototype.lock=function(){s.prototype.lock.call(this);for(var d=this._sources,p=0;p<d.length;p++)d[p].lock()},n.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,e){"use strict";var r=t("../compressions"),o=t("./ZipFileWorker");e.generateWorker=function(i,s,a){var l=new o(s.streamFiles,a,s.platform,s.encodeFileName),c=0;try{i.forEach(function(u,d){c++;var p=(function(g,v){var w=g||v,y=r[w];if(!y)throw new Error(w+" is not a valid compression method !");return y})(d.options.compression,s.compression),h=d.options.compressionOptions||s.compressionOptions||{},f=d.dir,m=d.date;d._compressWorker(p,h).withStreamInfo("file",{name:u,dir:f,date:m,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(l)}),l.entriesCount=c}catch(u){l.error(u)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,e){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var i in this)typeof this[i]!="function"&&(o[i]=this[i]);return o}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(o,i){return new r().loadAsync(o,i)},r.external=t("./external"),n.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,e){"use strict";var r=t("./utils"),o=t("./external"),i=t("./utf8"),s=t("./zipEntries"),a=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function c(u){return new o.Promise(function(d,p){var h=u.decompressed.getContentWorker().pipe(new a);h.on("error",function(f){p(f)}).on("end",function(){h.streamInfo.crc32!==u.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(u,d){var p=this;return d=r.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&&l.isStream(u)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",u,!0,d.optimizedBinaryString,d.base64).then(function(h){var f=new s(d);return f.load(h),f}).then(function(h){var f=[o.Promise.resolve(h)],m=h.files;if(d.checkCRC32)for(var g=0;g<m.length;g++)f.push(c(m[g]));return o.Promise.all(f)}).then(function(h){for(var f=h.shift(),m=f.files,g=0;g<m.length;g++){var v=m[g],w=v.fileNameStr,y=r.resolve(v.fileNameStr);p.file(y,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:d.createFolders}),v.dir||(p.file(y).unsafeOriginalName=w)}return f.zipComment.length&&(p.comment=f.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,e){"use strict";var r=t("../utils"),o=t("../stream/GenericWorker");function i(s,a){o.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}r.inherits(i,o),i.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(l){a.push({data:l,meta:{percent:0}})}).on("error",function(l){a.isPaused?this.generatedError=l:a.error(l)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,e){"use strict";var r=t("readable-stream").Readable;function o(i,s,a){r.call(this,s),this._helper=i;var l=this;i.on("data",function(c,u){l.push(c)||l._helper.pause(),a&&a(u)}).on("error",function(c){l.emit("error",c)}).on("end",function(){l.push(null)})}t("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,e){"use strict";n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,n,e){"use strict";function r(y,k,_){var S,E=i.getTypeOf(k),N=i.extend(_||{},l);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(y=m(y)),N.createFolders&&(S=f(y))&&g.call(this,S,!0);var B=E==="string"&&N.binary===!1&&N.base64===!1;_&&_.binary!==void 0||(N.binary=!B),(k instanceof c&&k.uncompressedSize===0||N.dir||!k||k.length===0)&&(N.base64=!1,N.binary=!0,k="",N.compression="STORE",E="string");var D=null;D=k instanceof c||k instanceof s?k:p.isNode&&p.isStream(k)?new h(y,k):i.prepareContent(y,k,N.binary,N.optimizedBinaryString,N.base64);var P=new u(y,D,N);this.files[y]=P}var o=t("./utf8"),i=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),l=t("./defaults"),c=t("./compressedObject"),u=t("./zipObject"),d=t("./generate"),p=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),f=function(y){y.slice(-1)==="/"&&(y=y.substring(0,y.length-1));var k=y.lastIndexOf("/");return 0<k?y.substring(0,k):""},m=function(y){return y.slice(-1)!=="/"&&(y+="/"),y},g=function(y,k){return k=k!==void 0?k:l.createFolders,y=m(y),this.files[y]||r.call(this,y,null,{dir:!0,createFolders:k}),this.files[y]};function v(y){return Object.prototype.toString.call(y)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(y){var k,_,S;for(k in this.files)S=this.files[k],(_=k.slice(this.root.length,k.length))&&k.slice(0,this.root.length)===this.root&&y(_,S)},filter:function(y){var k=[];return this.forEach(function(_,S){y(_,S)&&k.push(S)}),k},file:function(y,k,_){if(arguments.length!==1)return y=this.root+y,r.call(this,y,k,_),this;if(v(y)){var S=y;return this.filter(function(N,B){return!B.dir&&S.test(N)})}var E=this.files[this.root+y];return E&&!E.dir?E:null},folder:function(y){if(!y)return this;if(v(y))return this.filter(function(E,N){return N.dir&&y.test(E)});var k=this.root+y,_=g.call(this,k),S=this.clone();return S.root=_.name,S},remove:function(y){y=this.root+y;var k=this.files[y];if(k||(y.slice(-1)!=="/"&&(y+="/"),k=this.files[y]),k&&!k.dir)delete this.files[y];else for(var _=this.filter(function(E,N){return N.name.slice(0,y.length)===y}),S=0;S<_.length;S++)delete this.files[_[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(y){var k,_={};try{if((_=i.extend(y||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=_.type.toLowerCase(),_.compression=_.compression.toUpperCase(),_.type==="binarystring"&&(_.type="string"),!_.type)throw new Error("No output type specified.");i.checkSupport(_.type),_.platform!=="darwin"&&_.platform!=="freebsd"&&_.platform!=="linux"&&_.platform!=="sunos"||(_.platform="UNIX"),_.platform==="win32"&&(_.platform="DOS");var S=_.comment||this.comment||"";k=d.generateWorker(this,_,S)}catch(E){(k=new s("error")).error(E)}return new a(k,_.type||"string",_.mimeType)},generateAsync:function(y,k){return this.generateInternalStream(y).accumulate(k)},generateNodeStream:function(y,k){return(y=y||{}).type||(y.type="nodebuffer"),this.generateInternalStream(y).toNodejsStream(k)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,e){"use strict";n.exports=t("stream")},{stream:void 0}],17:[function(t,n,e){"use strict";var r=t("./DataReader");function o(i){r.call(this,i);for(var s=0;s<this.data.length;s++)i[s]=255&i[s]}t("../utils").inherits(o,r),o.prototype.byteAt=function(i){return this.data[this.zero+i]},o.prototype.lastIndexOfSignature=function(i){for(var s=i.charCodeAt(0),a=i.charCodeAt(1),l=i.charCodeAt(2),c=i.charCodeAt(3),u=this.length-4;0<=u;--u)if(this.data[u]===s&&this.data[u+1]===a&&this.data[u+2]===l&&this.data[u+3]===c)return u-this.zero;return-1},o.prototype.readAndCheckSignature=function(i){var s=i.charCodeAt(0),a=i.charCodeAt(1),l=i.charCodeAt(2),c=i.charCodeAt(3),u=this.readData(4);return s===u[0]&&a===u[1]&&l===u[2]&&c===u[3]},o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,e){"use strict";var r=t("../utils");function o(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var s,a=0;for(this.checkOffset(i),s=this.index+i-1;s>=this.index;s--)a=(a<<8)+this.byteAt(s);return this.index+=i,a},readString:function(i){return r.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,e){"use strict";var r=t("./Uint8ArrayReader");function o(i){r.call(this,i)}t("../utils").inherits(o,r),o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,e){"use strict";var r=t("./DataReader");function o(i){r.call(this,i)}t("../utils").inherits(o,r),o.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},o.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},o.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,e){"use strict";var r=t("./ArrayReader");function o(i){r.call(this,i)}t("../utils").inherits(o,r),o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,e){"use strict";var r=t("../utils"),o=t("../support"),i=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");n.exports=function(c){var u=r.getTypeOf(c);return r.checkSupport(u),u!=="string"||o.uint8array?u==="nodebuffer"?new a(c):o.uint8array?new l(r.transformTo("uint8array",c)):new i(r.transformTo("array",c)):new s(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,e){"use strict";var r=t("./GenericWorker"),o=t("../utils");function i(s){r.call(this,"ConvertWorker to "+s),this.destType=s}o.inherits(i,r),i.prototype.processChunk=function(s){this.push({data:o.transformTo(this.destType,s.data),meta:s.meta})},n.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,e){"use strict";var r=t("./GenericWorker"),o=t("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(i,r),i.prototype.processChunk=function(s){this.streamInfo.crc32=o(s.data,this.streamInfo.crc32||0),this.push(s)},n.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,e){"use strict";var r=t("../utils"),o=t("./GenericWorker");function i(s){o.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}r.inherits(i,o),i.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}o.prototype.processChunk.call(this,s)},n.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,e){"use strict";var r=t("../utils"),o=t("./GenericWorker");function i(s){o.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&&l.length||0,a.type=r.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}r.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,e){"use strict";function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,i){return this._listeners[o].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,i){if(this._listeners[o])for(var s=0;s<this._listeners[o].length;s++)this._listeners[o][s].call(this,i)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var i=this;return o.on("data",function(s){i.processChunk(s)}),o.on("end",function(){i.end()}),o.on("error",function(s){i.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,i){return this.extraStreamInfo[o]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=r},{}],29:[function(t,n,e){"use strict";var r=t("../utils"),o=t("./ConvertWorker"),i=t("./GenericWorker"),s=t("../base64"),a=t("../support"),l=t("../external"),c=null;if(a.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function u(p,h){return new l.Promise(function(f,m){var g=[],v=p._internalType,w=p._outputType,y=p._mimeType;p.on("data",function(k,_){g.push(k),h&&h(_)}).on("error",function(k){g=[],m(k)}).on("end",function(){try{var k=(function(_,S,E){switch(_){case"blob":return r.newBlob(r.transformTo("arraybuffer",S),E);case"base64":return s.encode(S);default:return r.transformTo(_,S)}})(w,(function(_,S){var E,N=0,B=null,D=0;for(E=0;E<S.length;E++)D+=S[E].length;switch(_){case"string":return S.join("");case"array":return Array.prototype.concat.apply([],S);case"uint8array":for(B=new Uint8Array(D),E=0;E<S.length;E++)B.set(S[E],N),N+=S[E].length;return B;case"nodebuffer":return Buffer.concat(S);default:throw new Error("concat : unsupported type '"+_+"'")}})(v,g),y);f(k)}catch(_){m(_)}g=[]}).resume()})}function d(p,h,f){var m=h;switch(h){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=h,this._mimeType=f,r.checkSupport(m),this._worker=p.pipe(new o(m)),p.lock()}catch(g){this._worker=new i("error"),this._worker.error(g)}}d.prototype={accumulate:function(p){return u(this,p)},on:function(p,h){var f=this;return p==="data"?this._worker.on(p,function(m){h.call(f,m.data,m.meta)}):this._worker.on(p,function(){r.delay(h,arguments,f)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",e.nodebuffer=typeof Buffer<"u",e.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")e.blob=!1;else{var r=new ArrayBuffer(0);try{e.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),e.blob=o.getBlob("application/zip").size===0}catch{e.blob=!1}}}try{e.nodestream=!!t("readable-stream").Readable}catch{e.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,e){"use strict";for(var r=t("./utils"),o=t("./support"),i=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;a[254]=a[254]=1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function u(){s.call(this,"utf-8 encode")}e.utf8encode=function(d){return o.nodebuffer?i.newBufferFrom(d,"utf-8"):(function(p){var h,f,m,g,v,w=p.length,y=0;for(g=0;g<w;g++)(64512&(f=p.charCodeAt(g)))==55296&&g+1<w&&(64512&(m=p.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),g++),y+=f<128?1:f<2048?2:f<65536?3:4;for(h=o.uint8array?new Uint8Array(y):new Array(y),g=v=0;v<y;g++)(64512&(f=p.charCodeAt(g)))==55296&&g+1<w&&(64512&(m=p.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(m-56320),g++),f<128?h[v++]=f:(f<2048?h[v++]=192|f>>>6:(f<65536?h[v++]=224|f>>>12:(h[v++]=240|f>>>18,h[v++]=128|f>>>12&63),h[v++]=128|f>>>6&63),h[v++]=128|63&f);return h})(d)},e.utf8decode=function(d){return o.nodebuffer?r.transformTo("nodebuffer",d).toString("utf-8"):(function(p){var h,f,m,g,v=p.length,w=new Array(2*v);for(h=f=0;h<v;)if((m=p[h++])<128)w[f++]=m;else if(4<(g=a[m]))w[f++]=65533,h+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&h<v;)m=m<<6|63&p[h++],g--;1<g?w[f++]=65533:m<65536?w[f++]=m:(m-=65536,w[f++]=55296|m>>10&1023,w[f++]=56320|1023&m)}return w.length!==f&&(w.subarray?w=w.subarray(0,f):w.length=f),r.applyFromCharCode(w)})(d=r.transformTo(o.uint8array?"uint8array":"array",d))},r.inherits(c,s),c.prototype.processChunk=function(d){var p=r.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var h=p;(p=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),p.set(h,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var f=(function(g,v){var w;for((v=v||g.length)>g.length&&(v=g.length),w=v-1;0<=w&&(192&g[w])==128;)w--;return w<0||w===0?v:w+a[g[w]]>v?w:v})(p),m=p;f!==p.length&&(o.uint8array?(m=p.subarray(0,f),this.leftOver=p.subarray(f,p.length)):(m=p.slice(0,f),this.leftOver=p.slice(f,p.length))),this.push({data:e.utf8decode(m),meta:d.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=c,r.inherits(u,s),u.prototype.processChunk=function(d){this.push({data:e.utf8encode(d.data),meta:d.meta})},e.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,e){"use strict";var r=t("./support"),o=t("./base64"),i=t("./nodejsUtils"),s=t("./external");function a(h){return h}function l(h,f){for(var m=0;m<h.length;++m)f[m]=255&h.charCodeAt(m);return f}t("setimmediate"),e.newBlob=function(h,f){e.checkSupport("blob");try{return new Blob([h],{type:f})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(h),m.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(h,f,m){var g=[],v=0,w=h.length;if(w<=m)return String.fromCharCode.apply(null,h);for(;v<w;)f==="array"||f==="nodebuffer"?g.push(String.fromCharCode.apply(null,h.slice(v,Math.min(v+m,w)))):g.push(String.fromCharCode.apply(null,h.subarray(v,Math.min(v+m,w)))),v+=m;return g.join("")},stringifyByChar:function(h){for(var f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);return f},applyCanBeUsed:{uint8array:(function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}})()}};function u(h){var f=65536,m=e.getTypeOf(h),g=!0;if(m==="uint8array"?g=c.applyCanBeUsed.uint8array:m==="nodebuffer"&&(g=c.applyCanBeUsed.nodebuffer),g)for(;1<f;)try{return c.stringifyByChunk(h,m,f)}catch{f=Math.floor(f/2)}return c.stringifyByChar(h)}function d(h,f){for(var m=0;m<h.length;m++)f[m]=h[m];return f}e.applyFromCharCode=u;var p={};p.string={string:a,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return p.string.uint8array(h).buffer},uint8array:function(h){return l(h,new Uint8Array(h.length))},nodebuffer:function(h){return l(h,i.allocBuffer(h.length))}},p.array={string:u,array:a,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(h)}},p.arraybuffer={string:function(h){return u(new Uint8Array(h))},array:function(h){return d(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:a,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(new Uint8Array(h))}},p.uint8array={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:a,nodebuffer:function(h){return i.newBufferFrom(h)}},p.nodebuffer={string:u,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return p.nodebuffer.uint8array(h).buffer},uint8array:function(h){return d(h,new Uint8Array(h.length))},nodebuffer:a},e.transformTo=function(h,f){if(f=f||"",!h)return f;e.checkSupport(h);var m=e.getTypeOf(f);return p[m][h](f)},e.resolve=function(h){for(var f=h.split("/"),m=[],g=0;g<f.length;g++){var v=f[g];v==="."||v===""&&g!==0&&g!==f.length-1||(v===".."?m.pop():m.push(v))}return m.join("/")},e.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":r.nodebuffer&&i.isBuffer(h)?"nodebuffer":r.uint8array&&h instanceof Uint8Array?"uint8array":r.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(h){if(!r[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(h){var f,m,g="";for(m=0;m<(h||"").length;m++)g+="\\x"+((f=h.charCodeAt(m))<16?"0":"")+f.toString(16).toUpperCase();return g},e.delay=function(h,f,m){setImmediate(function(){h.apply(m||null,f||[])})},e.inherits=function(h,f){function m(){}m.prototype=f.prototype,h.prototype=new m},e.extend=function(){var h,f,m={};for(h=0;h<arguments.length;h++)for(f in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],f)&&m[f]===void 0&&(m[f]=arguments[h][f]);return m},e.prepareContent=function(h,f,m,g,v){return s.Promise.resolve(f).then(function(w){return r.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new s.Promise(function(y,k){var _=new FileReader;_.onload=function(S){y(S.target.result)},_.onerror=function(S){k(S.target.error)},_.readAsArrayBuffer(w)}):w}).then(function(w){var y=e.getTypeOf(w);return y?(y==="arraybuffer"?w=e.transformTo("uint8array",w):y==="string"&&(v?w=o.decode(w):m&&g!==!0&&(w=(function(k){return l(k,r.uint8array?new Uint8Array(k.length):new Array(k.length))})(w))),w):s.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,e){"use strict";var r=t("./reader/readerFor"),o=t("./utils"),i=t("./signature"),s=t("./zipEntry"),a=t("./support");function l(c){this.files=[],this.loadOptions=c}l.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var u=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(u)+", expected "+o.pretty(c)+")")}},isSignature:function(c,u){var d=this.reader.index;this.reader.setIndex(c);var p=this.reader.readString(4)===u;return this.reader.setIndex(d),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),u=a.uint8array?"uint8array":"array",d=o.transformTo(u,c);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,u,d,p=this.zip64EndOfCentralSize-44;0<p;)c=this.reader.readInt(2),u=this.reader.readInt(4),d=this.reader.readData(u),this.zip64ExtensibleData[c]={id:c,length:u,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,u;for(c=0;c<this.files.length;c++)u=this.files[c],this.reader.setIndex(u.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),u.readLocalPart(this.reader),u.handleUTF8(),u.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(c=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var u=c;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var p=u-d;if(0<p)this.isSignature(u,i.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(c){this.reader=r(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,e){"use strict";var r=t("./reader/readerFor"),o=t("./utils"),i=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),l=t("./compressions"),c=t("./support");function u(d,p){this.options=d,this.loadOptions=p}u.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var p,h;if(d.skip(22),this.fileNameLength=d.readInt(2),h=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=(function(f){for(var m in l)if(Object.prototype.hasOwnProperty.call(l,m)&&l[m].magic===f)return l[m];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,p,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var p=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(p),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var p,h,f,m=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<m;)p=d.readInt(2),h=d.readInt(2),f=d.readData(h),this.extraFields[p]={id:p,length:h,value:f};d.setIndex(m)},handleUTF8:function(){var d=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var h=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var m=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var p=r(d.value);return p.readInt(1)!==1||s(this.fileName)!==p.readInt(4)?null:a.utf8decode(p.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var p=r(d.value);return p.readInt(1)!==1||s(this.fileComment)!==p.readInt(4)?null:a.utf8decode(p.readData(d.length-5))}return null}},n.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,e){"use strict";function r(p,h,f){this.name=p,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=h,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var o=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),l=t("./stream/GenericWorker");r.prototype={internalStream:function(p){var h=null,f="string";try{if(!p)throw new Error("No output type specified.");var m=(f=p.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),h=this._decompressWorker();var g=!this._dataBinary;g&&!m&&(h=h.pipe(new s.Utf8EncodeWorker)),!g&&m&&(h=h.pipe(new s.Utf8DecodeWorker))}catch(v){(h=new l("error")).error(v)}return new o(h,f,"")},async:function(p,h){return this.internalStream(p).accumulate(h)},nodeStream:function(p,h){return this.internalStream(p||"nodebuffer").toNodejsStream(h)},_compressWorker:function(p,h){if(this._data instanceof a&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(f,p,h)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;n.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,e){(function(r){"use strict";var o,i,s=r.MutationObserver||r.WebKitMutationObserver;if(s){var a=0,l=new s(p),c=r.document.createTextNode("");l.observe(c,{characterData:!0}),o=function(){c.data=a=++a%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var h=r.document.createElement("script");h.onreadystatechange=function(){p(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},r.document.documentElement.appendChild(h)}:function(){setTimeout(p,0)};else{var u=new r.MessageChannel;u.port1.onmessage=p,o=function(){u.port2.postMessage(0)}}var d=[];function p(){var h,f;i=!0;for(var m=d.length;m;){for(f=d,d=[],h=-1;++h<m;)f[h]();m=d.length}i=!1}n.exports=function(h){d.push(h)!==1||i||o()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,e){"use strict";var r=t("immediate");function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,m!==o&&h(this,m)}function u(m,g,v){this.promise=m,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function d(m,g,v){r(function(){var w;try{w=g(v)}catch(y){return i.reject(m,y)}w===m?i.reject(m,new TypeError("Cannot resolve promise with itself")):i.resolve(m,w)})}function p(m){var g=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof g=="function")return function(){g.apply(m,arguments)}}function h(m,g){var v=!1;function w(_){v||(v=!0,i.reject(m,_))}function y(_){v||(v=!0,i.resolve(m,_))}var k=f(function(){g(y,w)});k.status==="error"&&w(k.value)}function f(m,g){var v={};try{v.value=m(g),v.status="success"}catch(w){v.status="error",v.value=w}return v}(n.exports=c).prototype.finally=function(m){if(typeof m!="function")return this;var g=this.constructor;return this.then(function(v){return g.resolve(m()).then(function(){return v})},function(v){return g.resolve(m()).then(function(){throw v})})},c.prototype.catch=function(m){return this.then(null,m)},c.prototype.then=function(m,g){if(typeof m!="function"&&this.state===a||typeof g!="function"&&this.state===s)return this;var v=new this.constructor(o);return this.state!==l?d(v,this.state===a?m:g,this.outcome):this.queue.push(new u(v,m,g)),v},u.prototype.callFulfilled=function(m){i.resolve(this.promise,m)},u.prototype.otherCallFulfilled=function(m){d(this.promise,this.onFulfilled,m)},u.prototype.callRejected=function(m){i.reject(this.promise,m)},u.prototype.otherCallRejected=function(m){d(this.promise,this.onRejected,m)},i.resolve=function(m,g){var v=f(p,g);if(v.status==="error")return i.reject(m,v.value);var w=v.value;if(w)h(m,w);else{m.state=a,m.outcome=g;for(var y=-1,k=m.queue.length;++y<k;)m.queue[y].callFulfilled(g)}return m},i.reject=function(m,g){m.state=s,m.outcome=g;for(var v=-1,w=m.queue.length;++v<w;)m.queue[v].callRejected(g);return m},c.resolve=function(m){return m instanceof this?m:i.resolve(new this(o),m)},c.reject=function(m){var g=new this(o);return i.reject(g,m)},c.all=function(m){var g=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=m.length,w=!1;if(!v)return this.resolve([]);for(var y=new Array(v),k=0,_=-1,S=new this(o);++_<v;)E(m[_],_);return S;function E(N,B){g.resolve(N).then(function(D){y[B]=D,++k!==v||w||(w=!0,i.resolve(S,y))},function(D){w||(w=!0,i.reject(S,D))})}},c.race=function(m){var g=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=m.length,w=!1;if(!v)return this.resolve([]);for(var y=-1,k=new this(o);++y<v;)_=m[y],g.resolve(_).then(function(S){w||(w=!0,i.resolve(k,S))},function(S){w||(w=!0,i.reject(k,S))});var _;return k}},{immediate:36}],38:[function(t,n,e){"use strict";var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,e){"use strict";var r=t("./zlib/deflate"),o=t("./utils/common"),i=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,p=8;function h(m){if(!(this instanceof h))return new h(m);this.options=o.assign({level:u,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},m||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var v=r.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(v!==c)throw new Error(s[v]);if(g.header&&r.deflateSetHeader(this.strm,g.header),g.dictionary){var w;if(w=typeof g.dictionary=="string"?i.string2buf(g.dictionary):l.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(v=r.deflateSetDictionary(this.strm,w))!==c)throw new Error(s[v]);this._dict_set=!0}}function f(m,g){var v=new h(g);if(v.push(m,!0),v.err)throw v.msg||s[v.err];return v.result}h.prototype.push=function(m,g){var v,w,y=this.strm,k=this.options.chunkSize;if(this.ended)return!1;w=g===~~g?g:g===!0?4:0,typeof m=="string"?y.input=i.string2buf(m):l.call(m)==="[object ArrayBuffer]"?y.input=new Uint8Array(m):y.input=m,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new o.Buf8(k),y.next_out=0,y.avail_out=k),(v=r.deflate(y,w))!==1&&v!==c)return this.onEnd(v),!(this.ended=!0);y.avail_out!==0&&(y.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(o.shrinkBuf(y.output,y.next_out))):this.onData(o.shrinkBuf(y.output,y.next_out)))}while((0<y.avail_in||y.avail_out===0)&&v!==1);return w===4?(v=r.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c):w!==2||(this.onEnd(c),!(y.avail_out=0))},h.prototype.onData=function(m){this.chunks.push(m)},h.prototype.onEnd=function(m){m===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},e.Deflate=h,e.deflate=f,e.deflateRaw=function(m,g){return(g=g||{}).raw=!0,f(m,g)},e.gzip=function(m,g){return(g=g||{}).gzip=!0,f(m,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,e){"use strict";var r=t("./zlib/inflate"),o=t("./utils/common"),i=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),l=t("./zlib/zstream"),c=t("./zlib/gzheader"),u=Object.prototype.toString;function d(h){if(!(this instanceof d))return new d(h);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},h||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||h&&h.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&(15&f.windowBits)==0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var m=r.inflateInit2(this.strm,f.windowBits);if(m!==s.Z_OK)throw new Error(a[m]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function p(h,f){var m=new d(f);if(m.push(h,!0),m.err)throw m.msg||a[m.err];return m.result}d.prototype.push=function(h,f){var m,g,v,w,y,k,_=this.strm,S=this.options.chunkSize,E=this.options.dictionary,N=!1;if(this.ended)return!1;g=f===~~f?f:f===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof h=="string"?_.input=i.binstring2buf(h):u.call(h)==="[object ArrayBuffer]"?_.input=new Uint8Array(h):_.input=h,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new o.Buf8(S),_.next_out=0,_.avail_out=S),(m=r.inflate(_,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&E&&(k=typeof E=="string"?i.string2buf(E):u.call(E)==="[object ArrayBuffer]"?new Uint8Array(E):E,m=r.inflateSetDictionary(this.strm,k)),m===s.Z_BUF_ERROR&&N===!0&&(m=s.Z_OK,N=!1),m!==s.Z_STREAM_END&&m!==s.Z_OK)return this.onEnd(m),!(this.ended=!0);_.next_out&&(_.avail_out!==0&&m!==s.Z_STREAM_END&&(_.avail_in!==0||g!==s.Z_FINISH&&g!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=i.utf8border(_.output,_.next_out),w=_.next_out-v,y=i.buf2string(_.output,v),_.next_out=w,_.avail_out=S-w,w&&o.arraySet(_.output,_.output,v,w,0),this.onData(y)):this.onData(o.shrinkBuf(_.output,_.next_out)))),_.avail_in===0&&_.avail_out===0&&(N=!0)}while((0<_.avail_in||_.avail_out===0)&&m!==s.Z_STREAM_END);return m===s.Z_STREAM_END&&(g=s.Z_FINISH),g===s.Z_FINISH?(m=r.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===s.Z_OK):g!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(_.avail_out=0))},d.prototype.onData=function(h){this.chunks.push(h)},d.prototype.onEnd=function(h){h===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},e.Inflate=d,e.inflate=p,e.inflateRaw=function(h,f){return(f=f||{}).raw=!0,p(h,f)},e.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,e){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";e.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])}}return s},e.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var o={arraySet:function(s,a,l,c,u){if(a.subarray&&s.subarray)s.set(a.subarray(l,l+c),u);else for(var d=0;d<c;d++)s[u+d]=a[l+d]},flattenChunks:function(s){var a,l,c,u,d,p;for(a=c=0,l=s.length;a<l;a++)c+=s[a].length;for(p=new Uint8Array(c),a=u=0,l=s.length;a<l;a++)d=s[a],p.set(d,u),u+=d.length;return p}},i={arraySet:function(s,a,l,c,u){for(var d=0;d<c;d++)s[u+d]=a[l+d]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(r)},{}],42:[function(t,n,e){"use strict";var r=t("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(c,u){if(u<65537&&(c.subarray&&i||!c.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(c,u));for(var d="",p=0;p<u;p++)d+=String.fromCharCode(c[p]);return d}s[254]=s[254]=1,e.string2buf=function(c){var u,d,p,h,f,m=c.length,g=0;for(h=0;h<m;h++)(64512&(d=c.charCodeAt(h)))==55296&&h+1<m&&(64512&(p=c.charCodeAt(h+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),h++),g+=d<128?1:d<2048?2:d<65536?3:4;for(u=new r.Buf8(g),h=f=0;f<g;h++)(64512&(d=c.charCodeAt(h)))==55296&&h+1<m&&(64512&(p=c.charCodeAt(h+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),h++),d<128?u[f++]=d:(d<2048?u[f++]=192|d>>>6:(d<65536?u[f++]=224|d>>>12:(u[f++]=240|d>>>18,u[f++]=128|d>>>12&63),u[f++]=128|d>>>6&63),u[f++]=128|63&d);return u},e.buf2binstring=function(c){return l(c,c.length)},e.binstring2buf=function(c){for(var u=new r.Buf8(c.length),d=0,p=u.length;d<p;d++)u[d]=c.charCodeAt(d);return u},e.buf2string=function(c,u){var d,p,h,f,m=u||c.length,g=new Array(2*m);for(d=p=0;d<m;)if((h=c[d++])<128)g[p++]=h;else if(4<(f=s[h]))g[p++]=65533,d+=f-1;else{for(h&=f===2?31:f===3?15:7;1<f&&d<m;)h=h<<6|63&c[d++],f--;1<f?g[p++]=65533:h<65536?g[p++]=h:(h-=65536,g[p++]=55296|h>>10&1023,g[p++]=56320|1023&h)}return l(g,p)},e.utf8border=function(c,u){var d;for((u=u||c.length)>c.length&&(u=c.length),d=u-1;0<=d&&(192&c[d])==128;)d--;return d<0||d===0?u:d+s[c[d]]>u?d:u}},{"./common":41}],43:[function(t,n,e){"use strict";n.exports=function(r,o,i,s){for(var a=65535&r|0,l=r>>>16&65535|0,c=0;i!==0;){for(i-=c=2e3<i?2e3:i;l=l+(a=a+o[s++]|0)|0,--c;);a%=65521,l%=65521}return a|l<<16|0}},{}],44:[function(t,n,e){"use strict";n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,e){"use strict";var r=(function(){for(var o,i=[],s=0;s<256;s++){o=s;for(var a=0;a<8;a++)o=1&o?3988292384^o>>>1:o>>>1;i[s]=o}return i})();n.exports=function(o,i,s,a){var l=r,c=a+s;o^=-1;for(var u=a;u<c;u++)o=o>>>8^l[255&(o^i[u])];return-1^o}},{}],46:[function(t,n,e){"use strict";var r,o=t("../utils/common"),i=t("./trees"),s=t("./adler32"),a=t("./crc32"),l=t("./messages"),c=0,u=4,d=0,p=-2,h=-1,f=4,m=2,g=8,v=9,w=286,y=30,k=19,_=2*w+1,S=15,E=3,N=258,B=N+E+1,D=42,P=113,M=1,W=2,ie=3,Z=4;function X(T,ve){return T.msg=l[ve],ve}function G(T){return(T<<1)-(4<T?9:0)}function H(T){for(var ve=T.length;0<=--ve;)T[ve]=0}function V(T){var ve=T.state,he=ve.pending;he>T.avail_out&&(he=T.avail_out),he!==0&&(o.arraySet(T.output,ve.pending_buf,ve.pending_out,he,T.next_out),T.next_out+=he,ve.pending_out+=he,T.total_out+=he,T.avail_out-=he,ve.pending-=he,ve.pending===0&&(ve.pending_out=0))}function K(T,ve){i._tr_flush_block(T,0<=T.block_start?T.block_start:-1,T.strstart-T.block_start,ve),T.block_start=T.strstart,V(T.strm)}function pe(T,ve){T.pending_buf[T.pending++]=ve}function ce(T,ve){T.pending_buf[T.pending++]=ve>>>8&255,T.pending_buf[T.pending++]=255&ve}function se(T,ve){var he,q,j=T.max_chain_length,oe=T.strstart,xe=T.prev_length,Re=T.nice_match,ue=T.strstart>T.w_size-B?T.strstart-(T.w_size-B):0,ze=T.window,et=T.w_mask,qe=T.prev,dt=T.strstart+N,yn=ze[oe+xe-1],an=ze[oe+xe];T.prev_length>=T.good_match&&(j>>=2),Re>T.lookahead&&(Re=T.lookahead);do if(ze[(he=ve)+xe]===an&&ze[he+xe-1]===yn&&ze[he]===ze[oe]&&ze[++he]===ze[oe+1]){oe+=2,he++;do;while(ze[++oe]===ze[++he]&&ze[++oe]===ze[++he]&&ze[++oe]===ze[++he]&&ze[++oe]===ze[++he]&&ze[++oe]===ze[++he]&&ze[++oe]===ze[++he]&&ze[++oe]===ze[++he]&&ze[++oe]===ze[++he]&&oe<dt);if(q=N-(dt-oe),oe=dt-N,xe<q){if(T.match_start=ve,Re<=(xe=q))break;yn=ze[oe+xe-1],an=ze[oe+xe]}}while((ve=qe[ve&et])>ue&&--j!=0);return xe<=T.lookahead?xe:T.lookahead}function we(T){var ve,he,q,j,oe,xe,Re,ue,ze,et,qe=T.w_size;do{if(j=T.window_size-T.lookahead-T.strstart,T.strstart>=qe+(qe-B)){for(o.arraySet(T.window,T.window,qe,qe,0),T.match_start-=qe,T.strstart-=qe,T.block_start-=qe,ve=he=T.hash_size;q=T.head[--ve],T.head[ve]=qe<=q?q-qe:0,--he;);for(ve=he=qe;q=T.prev[--ve],T.prev[ve]=qe<=q?q-qe:0,--he;);j+=qe}if(T.strm.avail_in===0)break;if(xe=T.strm,Re=T.window,ue=T.strstart+T.lookahead,ze=j,et=void 0,et=xe.avail_in,ze<et&&(et=ze),he=et===0?0:(xe.avail_in-=et,o.arraySet(Re,xe.input,xe.next_in,et,ue),xe.state.wrap===1?xe.adler=s(xe.adler,Re,et,ue):xe.state.wrap===2&&(xe.adler=a(xe.adler,Re,et,ue)),xe.next_in+=et,xe.total_in+=et,et),T.lookahead+=he,T.lookahead+T.insert>=E)for(oe=T.strstart-T.insert,T.ins_h=T.window[oe],T.ins_h=(T.ins_h<<T.hash_shift^T.window[oe+1])&T.hash_mask;T.insert&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[oe+E-1])&T.hash_mask,T.prev[oe&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=oe,oe++,T.insert--,!(T.lookahead+T.insert<E)););}while(T.lookahead<B&&T.strm.avail_in!==0)}function Ne(T,ve){for(var he,q;;){if(T.lookahead<B){if(we(T),T.lookahead<B&&ve===c)return M;if(T.lookahead===0)break}if(he=0,T.lookahead>=E&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+E-1])&T.hash_mask,he=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),he!==0&&T.strstart-he<=T.w_size-B&&(T.match_length=se(T,he)),T.match_length>=E)if(q=i._tr_tally(T,T.strstart-T.match_start,T.match_length-E),T.lookahead-=T.match_length,T.match_length<=T.max_lazy_match&&T.lookahead>=E){for(T.match_length--;T.strstart++,T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+E-1])&T.hash_mask,he=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart,--T.match_length!=0;);T.strstart++}else T.strstart+=T.match_length,T.match_length=0,T.ins_h=T.window[T.strstart],T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+1])&T.hash_mask;else q=i._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++;if(q&&(K(T,!1),T.strm.avail_out===0))return M}return T.insert=T.strstart<E-1?T.strstart:E-1,ve===u?(K(T,!0),T.strm.avail_out===0?ie:Z):T.last_lit&&(K(T,!1),T.strm.avail_out===0)?M:W}function Ae(T,ve){for(var he,q,j;;){if(T.lookahead<B){if(we(T),T.lookahead<B&&ve===c)return M;if(T.lookahead===0)break}if(he=0,T.lookahead>=E&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+E-1])&T.hash_mask,he=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),T.prev_length=T.match_length,T.prev_match=T.match_start,T.match_length=E-1,he!==0&&T.prev_length<T.max_lazy_match&&T.strstart-he<=T.w_size-B&&(T.match_length=se(T,he),T.match_length<=5&&(T.strategy===1||T.match_length===E&&4096<T.strstart-T.match_start)&&(T.match_length=E-1)),T.prev_length>=E&&T.match_length<=T.prev_length){for(j=T.strstart+T.lookahead-E,q=i._tr_tally(T,T.strstart-1-T.prev_match,T.prev_length-E),T.lookahead-=T.prev_length-1,T.prev_length-=2;++T.strstart<=j&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+E-1])&T.hash_mask,he=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),--T.prev_length!=0;);if(T.match_available=0,T.match_length=E-1,T.strstart++,q&&(K(T,!1),T.strm.avail_out===0))return M}else if(T.match_available){if((q=i._tr_tally(T,0,T.window[T.strstart-1]))&&K(T,!1),T.strstart++,T.lookahead--,T.strm.avail_out===0)return M}else T.match_available=1,T.strstart++,T.lookahead--}return T.match_available&&(q=i._tr_tally(T,0,T.window[T.strstart-1]),T.match_available=0),T.insert=T.strstart<E-1?T.strstart:E-1,ve===u?(K(T,!0),T.strm.avail_out===0?ie:Z):T.last_lit&&(K(T,!1),T.strm.avail_out===0)?M:W}function Ce(T,ve,he,q,j){this.good_length=T,this.max_lazy=ve,this.nice_length=he,this.max_chain=q,this.func=j}function Je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*_),this.dyn_dtree=new o.Buf16(2*(2*y+1)),this.bl_tree=new o.Buf16(2*(2*k+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(S+1),this.heap=new o.Buf16(2*w+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ge(T){var ve;return T&&T.state?(T.total_in=T.total_out=0,T.data_type=m,(ve=T.state).pending=0,ve.pending_out=0,ve.wrap<0&&(ve.wrap=-ve.wrap),ve.status=ve.wrap?D:P,T.adler=ve.wrap===2?0:1,ve.last_flush=c,i._tr_init(ve),d):X(T,p)}function vt(T){var ve=Ge(T);return ve===d&&(function(he){he.window_size=2*he.w_size,H(he.head),he.max_lazy_match=r[he.level].max_lazy,he.good_match=r[he.level].good_length,he.nice_match=r[he.level].nice_length,he.max_chain_length=r[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=E-1,he.match_available=0,he.ins_h=0})(T.state),ve}function kt(T,ve,he,q,j,oe){if(!T)return p;var xe=1;if(ve===h&&(ve=6),q<0?(xe=0,q=-q):15<q&&(xe=2,q-=16),j<1||v<j||he!==g||q<8||15<q||ve<0||9<ve||oe<0||f<oe)return X(T,p);q===8&&(q=9);var Re=new Je;return(T.state=Re).strm=T,Re.wrap=xe,Re.gzhead=null,Re.w_bits=q,Re.w_size=1<<Re.w_bits,Re.w_mask=Re.w_size-1,Re.hash_bits=j+7,Re.hash_size=1<<Re.hash_bits,Re.hash_mask=Re.hash_size-1,Re.hash_shift=~~((Re.hash_bits+E-1)/E),Re.window=new o.Buf8(2*Re.w_size),Re.head=new o.Buf16(Re.hash_size),Re.prev=new o.Buf16(Re.w_size),Re.lit_bufsize=1<<j+6,Re.pending_buf_size=4*Re.lit_bufsize,Re.pending_buf=new o.Buf8(Re.pending_buf_size),Re.d_buf=1*Re.lit_bufsize,Re.l_buf=3*Re.lit_bufsize,Re.level=ve,Re.strategy=oe,Re.method=he,vt(T)}r=[new Ce(0,0,0,0,function(T,ve){var he=65535;for(he>T.pending_buf_size-5&&(he=T.pending_buf_size-5);;){if(T.lookahead<=1){if(we(T),T.lookahead===0&&ve===c)return M;if(T.lookahead===0)break}T.strstart+=T.lookahead,T.lookahead=0;var q=T.block_start+he;if((T.strstart===0||T.strstart>=q)&&(T.lookahead=T.strstart-q,T.strstart=q,K(T,!1),T.strm.avail_out===0)||T.strstart-T.block_start>=T.w_size-B&&(K(T,!1),T.strm.avail_out===0))return M}return T.insert=0,ve===u?(K(T,!0),T.strm.avail_out===0?ie:Z):(T.strstart>T.block_start&&(K(T,!1),T.strm.avail_out),M)}),new Ce(4,4,8,4,Ne),new Ce(4,5,16,8,Ne),new Ce(4,6,32,32,Ne),new Ce(4,4,16,16,Ae),new Ce(8,16,32,32,Ae),new Ce(8,16,128,128,Ae),new Ce(8,32,128,256,Ae),new Ce(32,128,258,1024,Ae),new Ce(32,258,258,4096,Ae)],e.deflateInit=function(T,ve){return kt(T,ve,g,15,8,0)},e.deflateInit2=kt,e.deflateReset=vt,e.deflateResetKeep=Ge,e.deflateSetHeader=function(T,ve){return T&&T.state?T.state.wrap!==2?p:(T.state.gzhead=ve,d):p},e.deflate=function(T,ve){var he,q,j,oe;if(!T||!T.state||5<ve||ve<0)return T?X(T,p):p;if(q=T.state,!T.output||!T.input&&T.avail_in!==0||q.status===666&&ve!==u)return X(T,T.avail_out===0?-5:p);if(q.strm=T,he=q.last_flush,q.last_flush=ve,q.status===D)if(q.wrap===2)T.adler=0,pe(q,31),pe(q,139),pe(q,8),q.gzhead?(pe(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),pe(q,255&q.gzhead.time),pe(q,q.gzhead.time>>8&255),pe(q,q.gzhead.time>>16&255),pe(q,q.gzhead.time>>24&255),pe(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),pe(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(pe(q,255&q.gzhead.extra.length),pe(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(T.adler=a(T.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(pe(q,0),pe(q,0),pe(q,0),pe(q,0),pe(q,0),pe(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),pe(q,3),q.status=P);else{var xe=g+(q.w_bits-8<<4)<<8;xe|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(xe|=32),xe+=31-xe%31,q.status=P,ce(q,xe),q.strstart!==0&&(ce(q,T.adler>>>16),ce(q,65535&T.adler)),T.adler=1}if(q.status===69)if(q.gzhead.extra){for(j=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),V(T),j=q.pending,q.pending!==q.pending_buf_size));)pe(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){j=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),V(T),j=q.pending,q.pending===q.pending_buf_size)){oe=1;break}oe=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,pe(q,oe)}while(oe!==0);q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),oe===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){j=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),V(T),j=q.pending,q.pending===q.pending_buf_size)){oe=1;break}oe=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,pe(q,oe)}while(oe!==0);q.gzhead.hcrc&&q.pending>j&&(T.adler=a(T.adler,q.pending_buf,q.pending-j,j)),oe===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&V(T),q.pending+2<=q.pending_buf_size&&(pe(q,255&T.adler),pe(q,T.adler>>8&255),T.adler=0,q.status=P)):q.status=P),q.pending!==0){if(V(T),T.avail_out===0)return q.last_flush=-1,d}else if(T.avail_in===0&&G(ve)<=G(he)&&ve!==u)return X(T,-5);if(q.status===666&&T.avail_in!==0)return X(T,-5);if(T.avail_in!==0||q.lookahead!==0||ve!==c&&q.status!==666){var Re=q.strategy===2?(function(ue,ze){for(var et;;){if(ue.lookahead===0&&(we(ue),ue.lookahead===0)){if(ze===c)return M;break}if(ue.match_length=0,et=i._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++,et&&(K(ue,!1),ue.strm.avail_out===0))return M}return ue.insert=0,ze===u?(K(ue,!0),ue.strm.avail_out===0?ie:Z):ue.last_lit&&(K(ue,!1),ue.strm.avail_out===0)?M:W})(q,ve):q.strategy===3?(function(ue,ze){for(var et,qe,dt,yn,an=ue.window;;){if(ue.lookahead<=N){if(we(ue),ue.lookahead<=N&&ze===c)return M;if(ue.lookahead===0)break}if(ue.match_length=0,ue.lookahead>=E&&0<ue.strstart&&(qe=an[dt=ue.strstart-1])===an[++dt]&&qe===an[++dt]&&qe===an[++dt]){yn=ue.strstart+N;do;while(qe===an[++dt]&&qe===an[++dt]&&qe===an[++dt]&&qe===an[++dt]&&qe===an[++dt]&&qe===an[++dt]&&qe===an[++dt]&&qe===an[++dt]&&dt<yn);ue.match_length=N-(yn-dt),ue.match_length>ue.lookahead&&(ue.match_length=ue.lookahead)}if(ue.match_length>=E?(et=i._tr_tally(ue,1,ue.match_length-E),ue.lookahead-=ue.match_length,ue.strstart+=ue.match_length,ue.match_length=0):(et=i._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++),et&&(K(ue,!1),ue.strm.avail_out===0))return M}return ue.insert=0,ze===u?(K(ue,!0),ue.strm.avail_out===0?ie:Z):ue.last_lit&&(K(ue,!1),ue.strm.avail_out===0)?M:W})(q,ve):r[q.level].func(q,ve);if(Re!==ie&&Re!==Z||(q.status=666),Re===M||Re===ie)return T.avail_out===0&&(q.last_flush=-1),d;if(Re===W&&(ve===1?i._tr_align(q):ve!==5&&(i._tr_stored_block(q,0,0,!1),ve===3&&(H(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),V(T),T.avail_out===0))return q.last_flush=-1,d}return ve!==u?d:q.wrap<=0?1:(q.wrap===2?(pe(q,255&T.adler),pe(q,T.adler>>8&255),pe(q,T.adler>>16&255),pe(q,T.adler>>24&255),pe(q,255&T.total_in),pe(q,T.total_in>>8&255),pe(q,T.total_in>>16&255),pe(q,T.total_in>>24&255)):(ce(q,T.adler>>>16),ce(q,65535&T.adler)),V(T),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?d:1)},e.deflateEnd=function(T){var ve;return T&&T.state?(ve=T.state.status)!==D&&ve!==69&&ve!==73&&ve!==91&&ve!==103&&ve!==P&&ve!==666?X(T,p):(T.state=null,ve===P?X(T,-3):d):p},e.deflateSetDictionary=function(T,ve){var he,q,j,oe,xe,Re,ue,ze,et=ve.length;if(!T||!T.state||(oe=(he=T.state).wrap)===2||oe===1&&he.status!==D||he.lookahead)return p;for(oe===1&&(T.adler=s(T.adler,ve,et,0)),he.wrap=0,et>=he.w_size&&(oe===0&&(H(he.head),he.strstart=0,he.block_start=0,he.insert=0),ze=new o.Buf8(he.w_size),o.arraySet(ze,ve,et-he.w_size,he.w_size,0),ve=ze,et=he.w_size),xe=T.avail_in,Re=T.next_in,ue=T.input,T.avail_in=et,T.next_in=0,T.input=ve,we(he);he.lookahead>=E;){for(q=he.strstart,j=he.lookahead-(E-1);he.ins_h=(he.ins_h<<he.hash_shift^he.window[q+E-1])&he.hash_mask,he.prev[q&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=q,q++,--j;);he.strstart=q,he.lookahead=E-1,we(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=E-1,he.match_available=0,T.next_in=Re,T.input=ue,T.avail_in=xe,he.wrap=oe,d},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,e){"use strict";n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,e){"use strict";n.exports=function(r,o){var i,s,a,l,c,u,d,p,h,f,m,g,v,w,y,k,_,S,E,N,B,D,P,M,W;i=r.state,s=r.next_in,M=r.input,a=s+(r.avail_in-5),l=r.next_out,W=r.output,c=l-(o-r.avail_out),u=l+(r.avail_out-257),d=i.dmax,p=i.wsize,h=i.whave,f=i.wnext,m=i.window,g=i.hold,v=i.bits,w=i.lencode,y=i.distcode,k=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;e:do{v<15&&(g+=M[s++]<<v,v+=8,g+=M[s++]<<v,v+=8),S=w[g&k];t:for(;;){if(g>>>=E=S>>>24,v-=E,(E=S>>>16&255)===0)W[l++]=65535&S;else{if(!(16&E)){if((64&E)==0){S=w[(65535&S)+(g&(1<<E)-1)];continue t}if(32&E){i.mode=12;break e}r.msg="invalid literal/length code",i.mode=30;break e}N=65535&S,(E&=15)&&(v<E&&(g+=M[s++]<<v,v+=8),N+=g&(1<<E)-1,g>>>=E,v-=E),v<15&&(g+=M[s++]<<v,v+=8,g+=M[s++]<<v,v+=8),S=y[g&_];n:for(;;){if(g>>>=E=S>>>24,v-=E,!(16&(E=S>>>16&255))){if((64&E)==0){S=y[(65535&S)+(g&(1<<E)-1)];continue n}r.msg="invalid distance code",i.mode=30;break e}if(B=65535&S,v<(E&=15)&&(g+=M[s++]<<v,(v+=8)<E&&(g+=M[s++]<<v,v+=8)),d<(B+=g&(1<<E)-1)){r.msg="invalid distance too far back",i.mode=30;break e}if(g>>>=E,v-=E,(E=l-c)<B){if(h<(E=B-E)&&i.sane){r.msg="invalid distance too far back",i.mode=30;break e}if(P=m,(D=0)===f){if(D+=p-E,E<N){for(N-=E;W[l++]=m[D++],--E;);D=l-B,P=W}}else if(f<E){if(D+=p+f-E,(E-=f)<N){for(N-=E;W[l++]=m[D++],--E;);if(D=0,f<N){for(N-=E=f;W[l++]=m[D++],--E;);D=l-B,P=W}}}else if(D+=f-E,E<N){for(N-=E;W[l++]=m[D++],--E;);D=l-B,P=W}for(;2<N;)W[l++]=P[D++],W[l++]=P[D++],W[l++]=P[D++],N-=3;N&&(W[l++]=P[D++],1<N&&(W[l++]=P[D++]))}else{for(D=l-B;W[l++]=W[D++],W[l++]=W[D++],W[l++]=W[D++],2<(N-=3););N&&(W[l++]=W[D++],1<N&&(W[l++]=W[D++]))}break}}break}}while(s<a&&l<u);s-=N=v>>3,g&=(1<<(v-=N<<3))-1,r.next_in=s,r.next_out=l,r.avail_in=s<a?a-s+5:5-(s-a),r.avail_out=l<u?u-l+257:257-(l-u),i.hold=g,i.bits=v}},{}],49:[function(t,n,e){"use strict";var r=t("../utils/common"),o=t("./adler32"),i=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),l=1,c=2,u=0,d=-2,p=1,h=852,f=592;function m(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(D){var P;return D&&D.state?(P=D.state,D.total_in=D.total_out=P.total=0,D.msg="",P.wrap&&(D.adler=1&P.wrap),P.mode=p,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new r.Buf32(h),P.distcode=P.distdyn=new r.Buf32(f),P.sane=1,P.back=-1,u):d}function w(D){var P;return D&&D.state?((P=D.state).wsize=0,P.whave=0,P.wnext=0,v(D)):d}function y(D,P){var M,W;return D&&D.state?(W=D.state,P<0?(M=0,P=-P):(M=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?d:(W.window!==null&&W.wbits!==P&&(W.window=null),W.wrap=M,W.wbits=P,w(D))):d}function k(D,P){var M,W;return D?(W=new g,(D.state=W).window=null,(M=y(D,P))!==u&&(D.state=null),M):d}var _,S,E=!0;function N(D){if(E){var P;for(_=new r.Buf32(512),S=new r.Buf32(32),P=0;P<144;)D.lens[P++]=8;for(;P<256;)D.lens[P++]=9;for(;P<280;)D.lens[P++]=7;for(;P<288;)D.lens[P++]=8;for(a(l,D.lens,0,288,_,0,D.work,{bits:9}),P=0;P<32;)D.lens[P++]=5;a(c,D.lens,0,32,S,0,D.work,{bits:5}),E=!1}D.lencode=_,D.lenbits=9,D.distcode=S,D.distbits=5}function B(D,P,M,W){var ie,Z=D.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new r.Buf8(Z.wsize)),W>=Z.wsize?(r.arraySet(Z.window,P,M-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(W<(ie=Z.wsize-Z.wnext)&&(ie=W),r.arraySet(Z.window,P,M-W,ie,Z.wnext),(W-=ie)?(r.arraySet(Z.window,P,M-W,W,0),Z.wnext=W,Z.whave=Z.wsize):(Z.wnext+=ie,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=ie))),0}e.inflateReset=w,e.inflateReset2=y,e.inflateResetKeep=v,e.inflateInit=function(D){return k(D,15)},e.inflateInit2=k,e.inflate=function(D,P){var M,W,ie,Z,X,G,H,V,K,pe,ce,se,we,Ne,Ae,Ce,Je,Ge,vt,kt,T,ve,he,q,j=0,oe=new r.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return d;(M=D.state).mode===12&&(M.mode=13),X=D.next_out,ie=D.output,H=D.avail_out,Z=D.next_in,W=D.input,G=D.avail_in,V=M.hold,K=M.bits,pe=G,ce=H,ve=u;e:for(;;)switch(M.mode){case p:if(M.wrap===0){M.mode=13;break}for(;K<16;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(2&M.wrap&&V===35615){oe[M.check=0]=255&V,oe[1]=V>>>8&255,M.check=i(M.check,oe,2,0),K=V=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&V)<<8)+(V>>8))%31){D.msg="incorrect header check",M.mode=30;break}if((15&V)!=8){D.msg="unknown compression method",M.mode=30;break}if(K-=4,T=8+(15&(V>>>=4)),M.wbits===0)M.wbits=T;else if(T>M.wbits){D.msg="invalid window size",M.mode=30;break}M.dmax=1<<T,D.adler=M.check=1,M.mode=512&V?10:12,K=V=0;break;case 2:for(;K<16;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(M.flags=V,(255&M.flags)!=8){D.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){D.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=V>>8&1),512&M.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,M.check=i(M.check,oe,2,0)),K=V=0,M.mode=3;case 3:for(;K<32;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}M.head&&(M.head.time=V),512&M.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,oe[2]=V>>>16&255,oe[3]=V>>>24&255,M.check=i(M.check,oe,4,0)),K=V=0,M.mode=4;case 4:for(;K<16;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}M.head&&(M.head.xflags=255&V,M.head.os=V>>8),512&M.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,M.check=i(M.check,oe,2,0)),K=V=0,M.mode=5;case 5:if(1024&M.flags){for(;K<16;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}M.length=V,M.head&&(M.head.extra_len=V),512&M.flags&&(oe[0]=255&V,oe[1]=V>>>8&255,M.check=i(M.check,oe,2,0)),K=V=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(G<(se=M.length)&&(se=G),se&&(M.head&&(T=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),r.arraySet(M.head.extra,W,Z,se,T)),512&M.flags&&(M.check=i(M.check,W,se,Z)),G-=se,Z+=se,M.length-=se),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(G===0)break e;for(se=0;T=W[Z+se++],M.head&&T&&M.length<65536&&(M.head.name+=String.fromCharCode(T)),T&&se<G;);if(512&M.flags&&(M.check=i(M.check,W,se,Z)),G-=se,Z+=se,T)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(G===0)break e;for(se=0;T=W[Z+se++],M.head&&T&&M.length<65536&&(M.head.comment+=String.fromCharCode(T)),T&&se<G;);if(512&M.flags&&(M.check=i(M.check,W,se,Z)),G-=se,Z+=se,T)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;K<16;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(V!==(65535&M.check)){D.msg="header crc mismatch",M.mode=30;break}K=V=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),D.adler=M.check=0,M.mode=12;break;case 10:for(;K<32;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}D.adler=M.check=m(V),K=V=0,M.mode=11;case 11:if(M.havedict===0)return D.next_out=X,D.avail_out=H,D.next_in=Z,D.avail_in=G,M.hold=V,M.bits=K,2;D.adler=M.check=1,M.mode=12;case 12:if(P===5||P===6)break e;case 13:if(M.last){V>>>=7&K,K-=7&K,M.mode=27;break}for(;K<3;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}switch(M.last=1&V,K-=1,3&(V>>>=1)){case 0:M.mode=14;break;case 1:if(N(M),M.mode=20,P!==6)break;V>>>=2,K-=2;break e;case 2:M.mode=17;break;case 3:D.msg="invalid block type",M.mode=30}V>>>=2,K-=2;break;case 14:for(V>>>=7&K,K-=7&K;K<32;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if((65535&V)!=(V>>>16^65535)){D.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&V,K=V=0,M.mode=15,P===6)break e;case 15:M.mode=16;case 16:if(se=M.length){if(G<se&&(se=G),H<se&&(se=H),se===0)break e;r.arraySet(ie,W,Z,se,X),G-=se,Z+=se,H-=se,X+=se,M.length-=se;break}M.mode=12;break;case 17:for(;K<14;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(M.nlen=257+(31&V),V>>>=5,K-=5,M.ndist=1+(31&V),V>>>=5,K-=5,M.ncode=4+(15&V),V>>>=4,K-=4,286<M.nlen||30<M.ndist){D.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;K<3;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}M.lens[xe[M.have++]]=7&V,V>>>=3,K-=3}for(;M.have<19;)M.lens[xe[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,he={bits:M.lenbits},ve=a(0,M.lens,0,19,M.lencode,0,M.work,he),M.lenbits=he.bits,ve){D.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;Ce=(j=M.lencode[V&(1<<M.lenbits)-1])>>>16&255,Je=65535&j,!((Ae=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(Je<16)V>>>=Ae,K-=Ae,M.lens[M.have++]=Je;else{if(Je===16){for(q=Ae+2;K<q;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(V>>>=Ae,K-=Ae,M.have===0){D.msg="invalid bit length repeat",M.mode=30;break}T=M.lens[M.have-1],se=3+(3&V),V>>>=2,K-=2}else if(Je===17){for(q=Ae+3;K<q;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}K-=Ae,T=0,se=3+(7&(V>>>=Ae)),V>>>=3,K-=3}else{for(q=Ae+7;K<q;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}K-=Ae,T=0,se=11+(127&(V>>>=Ae)),V>>>=7,K-=7}if(M.have+se>M.nlen+M.ndist){D.msg="invalid bit length repeat",M.mode=30;break}for(;se--;)M.lens[M.have++]=T}}if(M.mode===30)break;if(M.lens[256]===0){D.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,he={bits:M.lenbits},ve=a(l,M.lens,0,M.nlen,M.lencode,0,M.work,he),M.lenbits=he.bits,ve){D.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,he={bits:M.distbits},ve=a(c,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,he),M.distbits=he.bits,ve){D.msg="invalid distances set",M.mode=30;break}if(M.mode=20,P===6)break e;case 20:M.mode=21;case 21:if(6<=G&&258<=H){D.next_out=X,D.avail_out=H,D.next_in=Z,D.avail_in=G,M.hold=V,M.bits=K,s(D,ce),X=D.next_out,ie=D.output,H=D.avail_out,Z=D.next_in,W=D.input,G=D.avail_in,V=M.hold,K=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;Ce=(j=M.lencode[V&(1<<M.lenbits)-1])>>>16&255,Je=65535&j,!((Ae=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(Ce&&(240&Ce)==0){for(Ge=Ae,vt=Ce,kt=Je;Ce=(j=M.lencode[kt+((V&(1<<Ge+vt)-1)>>Ge)])>>>16&255,Je=65535&j,!(Ge+(Ae=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}V>>>=Ge,K-=Ge,M.back+=Ge}if(V>>>=Ae,K-=Ae,M.back+=Ae,M.length=Je,Ce===0){M.mode=26;break}if(32&Ce){M.back=-1,M.mode=12;break}if(64&Ce){D.msg="invalid literal/length code",M.mode=30;break}M.extra=15&Ce,M.mode=22;case 22:if(M.extra){for(q=M.extra;K<q;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}M.length+=V&(1<<M.extra)-1,V>>>=M.extra,K-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;Ce=(j=M.distcode[V&(1<<M.distbits)-1])>>>16&255,Je=65535&j,!((Ae=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if((240&Ce)==0){for(Ge=Ae,vt=Ce,kt=Je;Ce=(j=M.distcode[kt+((V&(1<<Ge+vt)-1)>>Ge)])>>>16&255,Je=65535&j,!(Ge+(Ae=j>>>24)<=K);){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}V>>>=Ge,K-=Ge,M.back+=Ge}if(V>>>=Ae,K-=Ae,M.back+=Ae,64&Ce){D.msg="invalid distance code",M.mode=30;break}M.offset=Je,M.extra=15&Ce,M.mode=24;case 24:if(M.extra){for(q=M.extra;K<q;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}M.offset+=V&(1<<M.extra)-1,V>>>=M.extra,K-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){D.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(H===0)break e;if(se=ce-H,M.offset>se){if((se=M.offset-se)>M.whave&&M.sane){D.msg="invalid distance too far back",M.mode=30;break}we=se>M.wnext?(se-=M.wnext,M.wsize-se):M.wnext-se,se>M.length&&(se=M.length),Ne=M.window}else Ne=ie,we=X-M.offset,se=M.length;for(H<se&&(se=H),H-=se,M.length-=se;ie[X++]=Ne[we++],--se;);M.length===0&&(M.mode=21);break;case 26:if(H===0)break e;ie[X++]=M.length,H--,M.mode=21;break;case 27:if(M.wrap){for(;K<32;){if(G===0)break e;G--,V|=W[Z++]<<K,K+=8}if(ce-=H,D.total_out+=ce,M.total+=ce,ce&&(D.adler=M.check=M.flags?i(M.check,ie,ce,X-ce):o(M.check,ie,ce,X-ce)),ce=H,(M.flags?V:m(V))!==M.check){D.msg="incorrect data check",M.mode=30;break}K=V=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;K<32;){if(G===0)break e;G--,V+=W[Z++]<<K,K+=8}if(V!==(4294967295&M.total)){D.msg="incorrect length check",M.mode=30;break}K=V=0}M.mode=29;case 29:ve=1;break e;case 30:ve=-3;break e;case 31:return-4;case 32:default:return d}return D.next_out=X,D.avail_out=H,D.next_in=Z,D.avail_in=G,M.hold=V,M.bits=K,(M.wsize||ce!==D.avail_out&&M.mode<30&&(M.mode<27||P!==4))&&B(D,D.output,D.next_out,ce-D.avail_out)?(M.mode=31,-4):(pe-=D.avail_in,ce-=D.avail_out,D.total_in+=pe,D.total_out+=ce,M.total+=ce,M.wrap&&ce&&(D.adler=M.check=M.flags?i(M.check,ie,ce,D.next_out-ce):o(M.check,ie,ce,D.next_out-ce)),D.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(pe==0&&ce===0||P===4)&&ve===u&&(ve=-5),ve)},e.inflateEnd=function(D){if(!D||!D.state)return d;var P=D.state;return P.window&&(P.window=null),D.state=null,u},e.inflateGetHeader=function(D,P){var M;return D&&D.state?(2&(M=D.state).wrap)==0?d:((M.head=P).done=!1,u):d},e.inflateSetDictionary=function(D,P){var M,W=P.length;return D&&D.state?(M=D.state).wrap!==0&&M.mode!==11?d:M.mode===11&&o(1,P,W,0)!==M.check?-3:B(D,P,W,W)?(M.mode=31,-4):(M.havedict=1,u):d},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,e){"use strict";var r=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(l,c,u,d,p,h,f,m){var g,v,w,y,k,_,S,E,N,B=m.bits,D=0,P=0,M=0,W=0,ie=0,Z=0,X=0,G=0,H=0,V=0,K=null,pe=0,ce=new r.Buf16(16),se=new r.Buf16(16),we=null,Ne=0;for(D=0;D<=15;D++)ce[D]=0;for(P=0;P<d;P++)ce[c[u+P]]++;for(ie=B,W=15;1<=W&&ce[W]===0;W--);if(W<ie&&(ie=W),W===0)return p[h++]=20971520,p[h++]=20971520,m.bits=1,0;for(M=1;M<W&&ce[M]===0;M++);for(ie<M&&(ie=M),D=G=1;D<=15;D++)if(G<<=1,(G-=ce[D])<0)return-1;if(0<G&&(l===0||W!==1))return-1;for(se[1]=0,D=1;D<15;D++)se[D+1]=se[D]+ce[D];for(P=0;P<d;P++)c[u+P]!==0&&(f[se[c[u+P]]++]=P);if(_=l===0?(K=we=f,19):l===1?(K=o,pe-=257,we=i,Ne-=257,256):(K=s,we=a,-1),D=M,k=h,X=P=V=0,w=-1,y=(H=1<<(Z=ie))-1,l===1&&852<H||l===2&&592<H)return 1;for(;;){for(S=D-X,N=f[P]<_?(E=0,f[P]):f[P]>_?(E=we[Ne+f[P]],K[pe+f[P]]):(E=96,0),g=1<<D-X,M=v=1<<Z;p[k+(V>>X)+(v-=g)]=S<<24|E<<16|N|0,v!==0;);for(g=1<<D-1;V&g;)g>>=1;if(g!==0?(V&=g-1,V+=g):V=0,P++,--ce[D]==0){if(D===W)break;D=c[u+f[P]]}if(ie<D&&(V&y)!==w){for(X===0&&(X=ie),k+=M,G=1<<(Z=D-X);Z+X<W&&!((G-=ce[Z+X])<=0);)Z++,G<<=1;if(H+=1<<Z,l===1&&852<H||l===2&&592<H)return 1;p[w=V&y]=ie<<24|Z<<16|k-h|0}}return V!==0&&(p[k+V]=D-X<<24|64<<16|0),m.bits=ie,0}},{"../utils/common":41}],51:[function(t,n,e){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,e){"use strict";var r=t("../utils/common"),o=0,i=1;function s(j){for(var oe=j.length;0<=--oe;)j[oe]=0}var a=0,l=29,c=256,u=c+1+l,d=30,p=19,h=2*u+1,f=15,m=16,g=7,v=256,w=16,y=17,k=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(2*(u+2));s(B);var D=new Array(2*d);s(D);var P=new Array(512);s(P);var M=new Array(256);s(M);var W=new Array(l);s(W);var ie,Z,X,G=new Array(d);function H(j,oe,xe,Re,ue){this.static_tree=j,this.extra_bits=oe,this.extra_base=xe,this.elems=Re,this.max_length=ue,this.has_stree=j&&j.length}function V(j,oe){this.dyn_tree=j,this.max_code=0,this.stat_desc=oe}function K(j){return j<256?P[j]:P[256+(j>>>7)]}function pe(j,oe){j.pending_buf[j.pending++]=255&oe,j.pending_buf[j.pending++]=oe>>>8&255}function ce(j,oe,xe){j.bi_valid>m-xe?(j.bi_buf|=oe<<j.bi_valid&65535,pe(j,j.bi_buf),j.bi_buf=oe>>m-j.bi_valid,j.bi_valid+=xe-m):(j.bi_buf|=oe<<j.bi_valid&65535,j.bi_valid+=xe)}function se(j,oe,xe){ce(j,xe[2*oe],xe[2*oe+1])}function we(j,oe){for(var xe=0;xe|=1&j,j>>>=1,xe<<=1,0<--oe;);return xe>>>1}function Ne(j,oe,xe){var Re,ue,ze=new Array(f+1),et=0;for(Re=1;Re<=f;Re++)ze[Re]=et=et+xe[Re-1]<<1;for(ue=0;ue<=oe;ue++){var qe=j[2*ue+1];qe!==0&&(j[2*ue]=we(ze[qe]++,qe))}}function Ae(j){var oe;for(oe=0;oe<u;oe++)j.dyn_ltree[2*oe]=0;for(oe=0;oe<d;oe++)j.dyn_dtree[2*oe]=0;for(oe=0;oe<p;oe++)j.bl_tree[2*oe]=0;j.dyn_ltree[2*v]=1,j.opt_len=j.static_len=0,j.last_lit=j.matches=0}function Ce(j){8<j.bi_valid?pe(j,j.bi_buf):0<j.bi_valid&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0}function Je(j,oe,xe,Re){var ue=2*oe,ze=2*xe;return j[ue]<j[ze]||j[ue]===j[ze]&&Re[oe]<=Re[xe]}function Ge(j,oe,xe){for(var Re=j.heap[xe],ue=xe<<1;ue<=j.heap_len&&(ue<j.heap_len&&Je(oe,j.heap[ue+1],j.heap[ue],j.depth)&&ue++,!Je(oe,Re,j.heap[ue],j.depth));)j.heap[xe]=j.heap[ue],xe=ue,ue<<=1;j.heap[xe]=Re}function vt(j,oe,xe){var Re,ue,ze,et,qe=0;if(j.last_lit!==0)for(;Re=j.pending_buf[j.d_buf+2*qe]<<8|j.pending_buf[j.d_buf+2*qe+1],ue=j.pending_buf[j.l_buf+qe],qe++,Re===0?se(j,ue,oe):(se(j,(ze=M[ue])+c+1,oe),(et=_[ze])!==0&&ce(j,ue-=W[ze],et),se(j,ze=K(--Re),xe),(et=S[ze])!==0&&ce(j,Re-=G[ze],et)),qe<j.last_lit;);se(j,v,oe)}function kt(j,oe){var xe,Re,ue,ze=oe.dyn_tree,et=oe.stat_desc.static_tree,qe=oe.stat_desc.has_stree,dt=oe.stat_desc.elems,yn=-1;for(j.heap_len=0,j.heap_max=h,xe=0;xe<dt;xe++)ze[2*xe]!==0?(j.heap[++j.heap_len]=yn=xe,j.depth[xe]=0):ze[2*xe+1]=0;for(;j.heap_len<2;)ze[2*(ue=j.heap[++j.heap_len]=yn<2?++yn:0)]=1,j.depth[ue]=0,j.opt_len--,qe&&(j.static_len-=et[2*ue+1]);for(oe.max_code=yn,xe=j.heap_len>>1;1<=xe;xe--)Ge(j,ze,xe);for(ue=dt;xe=j.heap[1],j.heap[1]=j.heap[j.heap_len--],Ge(j,ze,1),Re=j.heap[1],j.heap[--j.heap_max]=xe,j.heap[--j.heap_max]=Re,ze[2*ue]=ze[2*xe]+ze[2*Re],j.depth[ue]=(j.depth[xe]>=j.depth[Re]?j.depth[xe]:j.depth[Re])+1,ze[2*xe+1]=ze[2*Re+1]=ue,j.heap[1]=ue++,Ge(j,ze,1),2<=j.heap_len;);j.heap[--j.heap_max]=j.heap[1],(function(an,ao){var vs,_i,qu,Mr,R2,rh,rl=ao.dyn_tree,EC=ao.max_code,Tfe=ao.stat_desc.static_tree,Efe=ao.stat_desc.has_stree,Ife=ao.stat_desc.extra_bits,IV=ao.stat_desc.extra_base,dy=ao.stat_desc.max_length,IC=0;for(Mr=0;Mr<=f;Mr++)an.bl_count[Mr]=0;for(rl[2*an.heap[an.heap_max]+1]=0,vs=an.heap_max+1;vs<h;vs++)dy<(Mr=rl[2*rl[2*(_i=an.heap[vs])+1]+1]+1)&&(Mr=dy,IC++),rl[2*_i+1]=Mr,EC<_i||(an.bl_count[Mr]++,R2=0,IV<=_i&&(R2=Ife[_i-IV]),rh=rl[2*_i],an.opt_len+=rh*(Mr+R2),Efe&&(an.static_len+=rh*(Tfe[2*_i+1]+R2)));if(IC!==0){do{for(Mr=dy-1;an.bl_count[Mr]===0;)Mr--;an.bl_count[Mr]--,an.bl_count[Mr+1]+=2,an.bl_count[dy]--,IC-=2}while(0<IC);for(Mr=dy;Mr!==0;Mr--)for(_i=an.bl_count[Mr];_i!==0;)EC<(qu=an.heap[--vs])||(rl[2*qu+1]!==Mr&&(an.opt_len+=(Mr-rl[2*qu+1])*rl[2*qu],rl[2*qu+1]=Mr),_i--)}})(j,oe),Ne(ze,yn,j.bl_count)}function T(j,oe,xe){var Re,ue,ze=-1,et=oe[1],qe=0,dt=7,yn=4;for(et===0&&(dt=138,yn=3),oe[2*(xe+1)+1]=65535,Re=0;Re<=xe;Re++)ue=et,et=oe[2*(Re+1)+1],++qe<dt&&ue===et||(qe<yn?j.bl_tree[2*ue]+=qe:ue!==0?(ue!==ze&&j.bl_tree[2*ue]++,j.bl_tree[2*w]++):qe<=10?j.bl_tree[2*y]++:j.bl_tree[2*k]++,ze=ue,yn=(qe=0)===et?(dt=138,3):ue===et?(dt=6,3):(dt=7,4))}function ve(j,oe,xe){var Re,ue,ze=-1,et=oe[1],qe=0,dt=7,yn=4;for(et===0&&(dt=138,yn=3),Re=0;Re<=xe;Re++)if(ue=et,et=oe[2*(Re+1)+1],!(++qe<dt&&ue===et)){if(qe<yn)for(;se(j,ue,j.bl_tree),--qe!=0;);else ue!==0?(ue!==ze&&(se(j,ue,j.bl_tree),qe--),se(j,w,j.bl_tree),ce(j,qe-3,2)):qe<=10?(se(j,y,j.bl_tree),ce(j,qe-3,3)):(se(j,k,j.bl_tree),ce(j,qe-11,7));ze=ue,yn=(qe=0)===et?(dt=138,3):ue===et?(dt=6,3):(dt=7,4)}}s(G);var he=!1;function q(j,oe,xe,Re){ce(j,(a<<1)+(Re?1:0),3),(function(ue,ze,et,qe){Ce(ue),qe&&(pe(ue,et),pe(ue,~et)),r.arraySet(ue.pending_buf,ue.window,ze,et,ue.pending),ue.pending+=et})(j,oe,xe,!0)}e._tr_init=function(j){he||((function(){var oe,xe,Re,ue,ze,et=new Array(f+1);for(ue=Re=0;ue<l-1;ue++)for(W[ue]=Re,oe=0;oe<1<<_[ue];oe++)M[Re++]=ue;for(M[Re-1]=ue,ue=ze=0;ue<16;ue++)for(G[ue]=ze,oe=0;oe<1<<S[ue];oe++)P[ze++]=ue;for(ze>>=7;ue<d;ue++)for(G[ue]=ze<<7,oe=0;oe<1<<S[ue]-7;oe++)P[256+ze++]=ue;for(xe=0;xe<=f;xe++)et[xe]=0;for(oe=0;oe<=143;)B[2*oe+1]=8,oe++,et[8]++;for(;oe<=255;)B[2*oe+1]=9,oe++,et[9]++;for(;oe<=279;)B[2*oe+1]=7,oe++,et[7]++;for(;oe<=287;)B[2*oe+1]=8,oe++,et[8]++;for(Ne(B,u+1,et),oe=0;oe<d;oe++)D[2*oe+1]=5,D[2*oe]=we(oe,5);ie=new H(B,_,c+1,u,f),Z=new H(D,S,0,d,f),X=new H(new Array(0),E,0,p,g)})(),he=!0),j.l_desc=new V(j.dyn_ltree,ie),j.d_desc=new V(j.dyn_dtree,Z),j.bl_desc=new V(j.bl_tree,X),j.bi_buf=0,j.bi_valid=0,Ae(j)},e._tr_stored_block=q,e._tr_flush_block=function(j,oe,xe,Re){var ue,ze,et=0;0<j.level?(j.strm.data_type===2&&(j.strm.data_type=(function(qe){var dt,yn=4093624447;for(dt=0;dt<=31;dt++,yn>>>=1)if(1&yn&&qe.dyn_ltree[2*dt]!==0)return o;if(qe.dyn_ltree[18]!==0||qe.dyn_ltree[20]!==0||qe.dyn_ltree[26]!==0)return i;for(dt=32;dt<c;dt++)if(qe.dyn_ltree[2*dt]!==0)return i;return o})(j)),kt(j,j.l_desc),kt(j,j.d_desc),et=(function(qe){var dt;for(T(qe,qe.dyn_ltree,qe.l_desc.max_code),T(qe,qe.dyn_dtree,qe.d_desc.max_code),kt(qe,qe.bl_desc),dt=p-1;3<=dt&&qe.bl_tree[2*N[dt]+1]===0;dt--);return qe.opt_len+=3*(dt+1)+5+5+4,dt})(j),ue=j.opt_len+3+7>>>3,(ze=j.static_len+3+7>>>3)<=ue&&(ue=ze)):ue=ze=xe+5,xe+4<=ue&&oe!==-1?q(j,oe,xe,Re):j.strategy===4||ze===ue?(ce(j,2+(Re?1:0),3),vt(j,B,D)):(ce(j,4+(Re?1:0),3),(function(qe,dt,yn,an){var ao;for(ce(qe,dt-257,5),ce(qe,yn-1,5),ce(qe,an-4,4),ao=0;ao<an;ao++)ce(qe,qe.bl_tree[2*N[ao]+1],3);ve(qe,qe.dyn_ltree,dt-1),ve(qe,qe.dyn_dtree,yn-1)})(j,j.l_desc.max_code+1,j.d_desc.max_code+1,et+1),vt(j,j.dyn_ltree,j.dyn_dtree)),Ae(j),Re&&Ce(j)},e._tr_tally=function(j,oe,xe){return j.pending_buf[j.d_buf+2*j.last_lit]=oe>>>8&255,j.pending_buf[j.d_buf+2*j.last_lit+1]=255&oe,j.pending_buf[j.l_buf+j.last_lit]=255&xe,j.last_lit++,oe===0?j.dyn_ltree[2*xe]++:(j.matches++,oe--,j.dyn_ltree[2*(M[xe]+c+1)]++,j.dyn_dtree[2*K(oe)]++),j.last_lit===j.lit_bufsize-1},e._tr_align=function(j){ce(j,2,3),se(j,v,B),(function(oe){oe.bi_valid===16?(pe(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):8<=oe.bi_valid&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)})(j)}},{"../utils/common":41}],53:[function(t,n,e){"use strict";n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,e){(function(r){(function(o,i){"use strict";if(!o.setImmediate){var s,a,l,c,u=1,d={},p=!1,h=o.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(o);f=f&&f.setTimeout?f:o,s={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){g(w)})}:(function(){if(o.postMessage&&!o.importScripts){var w=!0,y=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=y,w}})()?(c="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",v,!1):o.attachEvent("onmessage",v),function(w){o.postMessage(c+w,"*")}):o.MessageChannel?((l=new MessageChannel).port1.onmessage=function(w){g(w.data)},function(w){l.port2.postMessage(w)}):h&&"onreadystatechange"in h.createElement("script")?(a=h.documentElement,function(w){var y=h.createElement("script");y.onreadystatechange=function(){g(w),y.onreadystatechange=null,a.removeChild(y),y=null},a.appendChild(y)}):function(w){setTimeout(g,0,w)},f.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var y=new Array(arguments.length-1),k=0;k<y.length;k++)y[k]=arguments[k+1];var _={callback:w,args:y};return d[u]=_,s(u),u++},f.clearImmediate=m}function m(w){delete d[w]}function g(w){if(p)setTimeout(g,0,w);else{var y=d[w];if(y){p=!0;try{(function(k){var _=k.callback,S=k.args;switch(S.length){case 0:_();break;case 1:_(S[0]);break;case 2:_(S[0],S[1]);break;case 3:_(S[0],S[1],S[2]);break;default:_.apply(i,S)}})(y)}finally{m(w),p=!1}}}}function v(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(c)===0&&g(+w.data.slice(c.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var m5;function NC(){return m5}function lc(t){let n=m5;return m5=t,n}var RV=Symbol("NotFound");function F2(t){return t===RV||t?.name==="\u0275NotFound"}var bi=null,AC=!1,g5=1,Bfe=null,Xr=Symbol("SIGNAL");function Ht(t){let n=bi;return bi=t,n}function RC(){return bi}var ih={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Zu(t){if(AC)throw new Error("");if(bi===null)return;bi.consumerOnSignalRead(t);let n=bi.producersTail;if(n!==void 0&&n.producer===t)return;let e,r=bi.recomputing;if(r&&(e=n!==void 0?n.nextProducer:bi.producers,e!==void 0&&e.producer===t)){bi.producersTail=e,e.lastReadVersion=t.version;return}let o=t.consumersTail;if(o!==void 0&&o.consumer===bi&&(!r||Lfe(o,bi)))return;let i=P2(bi),s={producer:t,consumer:bi,nextProducer:e,prevConsumer:o,lastReadVersion:t.version,nextConsumer:void 0};bi.producersTail=s,n!==void 0?n.nextProducer=s:bi.producers=s,i&&PV(t,s)}function OV(){g5++}function rm(t){if(!(P2(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===g5)){if(!t.producerMustRecompute(t)&&!om(t)){B2(t);return}t.producerRecomputeValue(t),B2(t)}}function v5(t){if(t.consumers===void 0)return;let n=AC;AC=!0;try{for(let e=t.consumers;e!==void 0;e=e.nextConsumer){let r=e.consumer;r.dirty||Pfe(r)}}finally{AC=n}}function w5(){return bi?.consumerAllowSignalWrites!==!1}function Pfe(t){t.dirty=!0,v5(t),t.consumerMarkedDirty?.(t)}function B2(t){t.dirty=!1,t.lastCleanEpoch=g5}function Xu(t){return t&&FV(t),Ht(t)}function FV(t){t.producersTail=void 0,t.recomputing=!0}function sh(t,n){Ht(n),t&&BV(t)}function BV(t){t.recomputing=!1;let n=t.producersTail,e=n!==void 0?n.nextProducer:t.producers;if(e!==void 0){if(P2(t))do e=y5(e);while(e!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function om(t){for(let n=t.producers;n!==void 0;n=n.nextProducer){let e=n.producer,r=n.lastReadVersion;if(r!==e.version||(rm(e),r!==e.version))return!0}return!1}function ah(t){if(P2(t)){let n=t.producers;for(;n!==void 0;)n=y5(n)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function PV(t,n){let e=t.consumersTail,r=P2(t);if(e!==void 0?(n.nextConsumer=e.nextConsumer,e.nextConsumer=n):(n.nextConsumer=void 0,t.consumers=n),n.prevConsumer=e,t.consumersTail=n,!r)for(let o=t.producers;o!==void 0;o=o.nextProducer)PV(o.producer,o)}function y5(t){let n=t.producer,e=t.nextProducer,r=t.nextConsumer,o=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:n.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(n.consumers=r,!P2(n)){let i=n.producers;for(;i!==void 0;)i=y5(i)}return e}function P2(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function fy(t){Bfe?.(t)}function Lfe(t,n){let e=n.producersTail;if(e!==void 0){let r=n.producers;do{if(r===t)return!0;if(r===e)break;r=r.nextProducer}while(r!==void 0)}return!1}function my(t,n){return Object.is(t,n)}function gy(t,n){let e=Object.create($fe);e.computation=t,n!==void 0&&(e.equal=n);let r=()=>{if(rm(e),Zu(e),e.value===Ku)throw e.error;return e.value};return r[Xr]=e,fy(e),r}var oh=Symbol("UNSET"),nm=Symbol("COMPUTING"),Ku=Symbol("ERRORED"),$fe=lt(ae({},ih),{value:oh,dirty:!0,error:null,equal:my,kind:"computed",producerMustRecompute(t){return t.value===oh||t.value===nm},producerRecomputeValue(t){if(t.value===nm)throw new Error("");let n=t.value;t.value=nm;let e=Xu(t),r,o=!1;try{r=t.computation(),Ht(null),o=n!==oh&&n!==Ku&&r!==Ku&&t.equal(n,r)}catch(i){r=Ku,t.error=i}finally{sh(t,e)}if(o){t.value=n;return}t.value=r,t.version++}});function Vfe(){throw new Error}var LV=Vfe;function $V(t){LV(t)}function x5(t){LV=t}var jfe=null;function k5(t,n){let e=Object.create(vy);e.value=t,n!==void 0&&(e.equal=n);let r=()=>VV(e);return r[Xr]=e,fy(e),[r,s=>lh(e,s),s=>OC(e,s)]}function VV(t){return Zu(t),t.value}function lh(t,n){w5()||$V(t),t.equal(t.value,n)||(t.value=n,zfe(t))}function OC(t,n){w5()||$V(t),lh(t,n(t.value))}var vy=lt(ae({},ih),{equal:my,value:void 0,kind:"signal"});function zfe(t){t.version++,OV(),v5(t),jfe?.(t)}function Vt(t){return typeof t=="function"}function L2(t){let e=t(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var FC=L2(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function im(t,n){if(t){let e=t.indexOf(n);0<=e&&t.splice(e,1)}}var Nn=class t{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let i of e)i.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(Vt(r))try{r()}catch(i){n=i instanceof FC?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{jV(i)}catch(s){n=n??[],s instanceof FC?n=[...n,...s.errors]:n.push(s)}}if(n)throw new FC(n)}}add(n){var e;if(n&&n!==this)if(this.closed)jV(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}}_hasParent(n){let{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){let{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&im(e,n)}remove(n){let{_finalizers:e}=this;e&&im(e,n),n instanceof t&&n._removeParent(this)}};Nn.EMPTY=(()=>{let t=new Nn;return t.closed=!0,t})();var _5=Nn.EMPTY;function BC(t){return t instanceof Nn||t&&"closed"in t&&Vt(t.remove)&&Vt(t.add)&&Vt(t.unsubscribe)}function jV(t){Vt(t)?t():t.unsubscribe()}var ol={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $2={setTimeout(t,n,...e){let{delegate:r}=$2;return r?.setTimeout?r.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){let{delegate:n}=$2;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function PC(t){$2.setTimeout(()=>{let{onUnhandledError:n}=ol;if(n)n(t);else throw t})}function sm(){}var zV=b5("C",void 0,void 0);function HV(t){return b5("E",void 0,t)}function UV(t){return b5("N",t,void 0)}function b5(t,n,e){return{kind:t,value:n,error:e}}var am=null;function V2(t){if(ol.useDeprecatedSynchronousErrorHandling){let n=!am;if(n&&(am={errorThrown:!1,error:null}),t(),n){let{errorThrown:e,error:r}=am;if(am=null,e)throw r}}else t()}function GV(t){ol.useDeprecatedSynchronousErrorHandling&&am&&(am.errorThrown=!0,am.error=t)}var lm=class extends Nn{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,BC(n)&&n.add(this)):this.destination=Gfe}static create(n,e,r){return new Yu(n,e,r)}next(n){this.isStopped?M5(UV(n),this):this._next(n)}error(n){this.isStopped?M5(HV(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?M5(zV,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Hfe=Function.prototype.bind;function C5(t,n){return Hfe.call(t,n)}var S5=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(r){LC(r)}}error(n){let{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(r){LC(r)}else LC(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){LC(e)}}},Yu=class extends lm{constructor(n,e,r){super();let o;if(Vt(n)||!n)o={next:n??void 0,error:e??void 0,complete:r??void 0};else{let i;this&&ol.useDeprecatedNextContext?(i=Object.create(n),i.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&C5(n.next,i),error:n.error&&C5(n.error,i),complete:n.complete&&C5(n.complete,i)}):o=n}this.destination=new S5(o)}};function LC(t){ol.useDeprecatedSynchronousErrorHandling?GV(t):PC(t)}function Ufe(t){throw t}function M5(t,n){let{onStoppedNotification:e}=ol;e&&$2.setTimeout(()=>e(t,n))}var Gfe={closed:!0,next:sm,error:Ufe,complete:sm};var j2=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ki(t){return t}function T5(...t){return E5(t)}function E5(t){return t.length===0?Ki:t.length===1?t[0]:function(e){return t.reduce((r,o)=>o(r),e)}}var tn=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new t;return r.source=this,r.operator=e,r}subscribe(e,r,o){let i=qfe(e)?e:new Yu(e,r,o);return V2(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=WV(r),new r((o,i)=>{let s=new Yu({next:a=>{try{e(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[j2](){return this}pipe(...e){return E5(e)(this)}toPromise(e){return e=WV(e),new e((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=n=>new t(n),t})();function WV(t){var n;return(n=t??ol.Promise)!==null&&n!==void 0?n:Promise}function Wfe(t){return t&&Vt(t.next)&&Vt(t.error)&&Vt(t.complete)}function qfe(t){return t&&t instanceof lm||Wfe(t)&&BC(t)}function I5(t){return Vt(t?.lift)}function qt(t){return n=>{if(I5(n))return n.lift(function(e){try{return t(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ut(t,n,e,r,o){return new D5(t,n,e,r,o)}var D5=class extends lm{constructor(n,e,r,o,i,s){super(n),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){n.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function z2(){return qt((t,n)=>{let e=null;t._refCount++;let r=Ut(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){e=null;return}let o=t._connection,i=e;e=null,o&&(!i||o===i)&&o.unsubscribe(),n.unsubscribe()});t.subscribe(r),r.closed||(e=t.connect())})}var H2=class extends tn{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,I5(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Nn;let e=this.getSubject();n.add(this.source.subscribe(Ut(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Nn.EMPTY)}return n}refCount(){return z2()(this)}};var qV=L2(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class t extends tn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new $C(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new qV}next(e){V2(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){V2(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){V2(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:o,observers:i}=this;return r||o?_5:(this.currentObservers=null,i.push(e),new Nn(()=>{this.currentObservers=null,im(i,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:o,isStopped:i}=this;r?e.error(o):i&&e.complete()}asObservable(){let e=new tn;return e.source=this,e}}return t.create=(n,e)=>new $C(n,e),t})(),$C=class extends nt{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,n)}error(n){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,n)}complete(){var n,e;(e=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||e===void 0||e.call(n)}_subscribe(n){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(n))!==null&&r!==void 0?r:_5}};var nr=class extends nt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){let{hasError:n,thrownError:e,_value:r}=this;if(n)throw e;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var wy={now(){return(wy.delegate||Date).now()},delegate:void 0};var Qu=class extends nt{constructor(n=1/0,e=1/0,r=wy){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){let{isStopped:e,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;e||(r.push(n),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!n.closed;s+=r?1:2)n.next(i[s]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){let{_bufferSize:n,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*n;if(n<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=e.now(),a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}};var VC=class extends Nn{constructor(n,e){super()}schedule(n,e=0){return this}};var yy={setInterval(t,n,...e){let{delegate:r}=yy;return r?.setInterval?r.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){let{delegate:n}=yy;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};var jC=class extends VC{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var r;if(this.closed)return this;this.state=n;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,e),this}requestAsyncId(n,e,r=0){return yy.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&yy.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(n,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r=!1,o;try{this.work(n)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:n,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,im(r,this),n!=null&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}};var U2=class t{constructor(n,e=t.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,r){return new this.schedulerActionCtor(this,n).schedule(r,e)}};U2.now=wy.now;var zC=class extends U2{constructor(n,e=U2.now){super(n,e),this.actions=[],this._active=!1}flush(n){let{actions:e}=this;if(this._active){e.push(n);return}let r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=e.shift());if(this._active=!1,r){for(;n=e.shift();)n.unsubscribe();throw r}}};var Ju=new zC(jC),KV=Ju;var Ci=new tn(t=>t.complete());function HC(t){return t&&Vt(t.schedule)}function N5(t){return t[t.length-1]}function UC(t){return Vt(N5(t))?t.pop():void 0}function cc(t){return HC(N5(t))?t.pop():void 0}function ZV(t,n){return typeof N5(t)=="number"?t.pop():n}function YV(t,n,e,r){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,n||[])).next())})}function XV(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function cm(t){return this instanceof cm?(this.v=t,this):new cm(t)}function QV(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(t,n||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(f){return Promise.resolve(f).then(h,d)}}function a(h,f){r[h]&&(o[h]=function(m){return new Promise(function(g,v){i.push([h,m,g,v])>1||l(h,m)})},f&&(o[h]=f(o[h])))}function l(h,f){try{c(r[h](f))}catch(m){p(i[0][3],m)}}function c(h){h.value instanceof cm?Promise.resolve(h.value.v).then(u,d):p(i[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function p(h,f){h(f),i.shift(),i.length&&l(i[0][0],i[0][1])}}function JV(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],e;return n?n.call(t):(t=typeof XV=="function"?XV(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=t[i]&&function(s){return new Promise(function(a,l){s=t[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}}var G2=t=>t&&typeof t.length=="number"&&typeof t!="function";function GC(t){return Vt(t?.then)}function WC(t){return Vt(t[j2])}function qC(t){return Symbol.asyncIterator&&Vt(t?.[Symbol.asyncIterator])}function KC(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Kfe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ZC=Kfe();function XC(t){return Vt(t?.[ZC])}function YC(t){return QV(this,arguments,function*(){let e=t.getReader();try{for(;;){let{value:r,done:o}=yield cm(e.read());if(o)return yield cm(void 0);yield yield cm(r)}}finally{e.releaseLock()}})}function QC(t){return Vt(t?.getReader)}function bn(t){if(t instanceof tn)return t;if(t!=null){if(WC(t))return Zfe(t);if(G2(t))return Xfe(t);if(GC(t))return Yfe(t);if(qC(t))return ej(t);if(XC(t))return Qfe(t);if(QC(t))return Jfe(t)}throw KC(t)}function Zfe(t){return new tn(n=>{let e=t[j2]();if(Vt(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Xfe(t){return new tn(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}function Yfe(t){return new tn(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,PC)})}function Qfe(t){return new tn(n=>{for(let e of t)if(n.next(e),n.closed)return;n.complete()})}function ej(t){return new tn(n=>{eme(t,n).catch(e=>n.error(e))})}function Jfe(t){return ej(YC(t))}function eme(t,n){var e,r,o,i;return YV(this,void 0,void 0,function*(){try{for(e=JV(t);r=yield e.next(),!r.done;){let s=r.value;if(n.next(s),n.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(o)throw o.error}}n.complete()})}function ys(t,n,e,r=0,o=!1){let i=n.schedule(function(){e(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function JC(t,n=0){return qt((e,r)=>{e.subscribe(Ut(r,o=>ys(r,t,()=>r.next(o),n),()=>ys(r,t,()=>r.complete(),n),o=>ys(r,t,()=>r.error(o),n)))})}function e4(t,n=0){return qt((e,r)=>{r.add(t.schedule(()=>e.subscribe(r),n))})}function tj(t,n){return bn(t).pipe(e4(n),JC(n))}function nj(t,n){return bn(t).pipe(e4(n),JC(n))}function rj(t,n){return new tn(e=>{let r=0;return n.schedule(function(){r===t.length?e.complete():(e.next(t[r++]),e.closed||this.schedule())})})}function oj(t,n){return new tn(e=>{let r;return ys(e,n,()=>{r=t[ZC](),ys(e,n,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){e.error(s);return}i?e.complete():e.next(o)},0,!0)}),()=>Vt(r?.return)&&r.return()})}function t4(t,n){if(!t)throw new Error("Iterable cannot be null");return new tn(e=>{ys(e,n,()=>{let r=t[Symbol.asyncIterator]();ys(e,n,()=>{r.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function ij(t,n){return t4(YC(t),n)}function sj(t,n){if(t!=null){if(WC(t))return tj(t,n);if(G2(t))return rj(t,n);if(GC(t))return nj(t,n);if(qC(t))return t4(t,n);if(XC(t))return oj(t,n);if(QC(t))return ij(t,n)}throw KC(t)}function rr(t,n){return n?sj(t,n):bn(t)}function ct(...t){let n=cc(t);return rr(t,n)}function W2(t,n){let e=Vt(t)?t:()=>t,r=o=>o.error(e());return new tn(n?o=>n.schedule(r,0,o):r)}function Gs(t){return!!t&&(t instanceof tn||Vt(t.lift)&&Vt(t.subscribe))}var ed=L2(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function aj(t){return t instanceof Date&&!isNaN(t)}function Et(t,n){return qt((e,r)=>{let o=0;e.subscribe(Ut(r,i=>{r.next(t.call(n,i,o++))}))})}var{isArray:tme}=Array;function nme(t,n){return tme(n)?t(...n):t(n)}function q2(t){return Et(n=>nme(t,n))}var{isArray:rme}=Array,{getPrototypeOf:ome,prototype:ime,keys:sme}=Object;function n4(t){if(t.length===1){let n=t[0];if(rme(n))return{args:n,keys:null};if(ame(n)){let e=sme(n);return{args:e.map(r=>n[r]),keys:e}}}return{args:t,keys:null}}function ame(t){return t&&typeof t=="object"&&ome(t)===ime}function r4(t,n){return t.reduce((e,r,o)=>(e[r]=n[o],e),{})}function xy(...t){let n=cc(t),e=UC(t),{args:r,keys:o}=n4(t);if(r.length===0)return rr([],n);let i=new tn(lme(r,n,o?s=>r4(o,s):Ki));return e?i.pipe(q2(e)):i}function lme(t,n,e=Ki){return r=>{lj(n,()=>{let{length:o}=t,i=new Array(o),s=o,a=o;for(let l=0;l<o;l++)lj(n,()=>{let c=rr(t[l],n),u=!1;c.subscribe(Ut(r,d=>{i[l]=d,u||(u=!0,a--),a||r.next(e(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function lj(t,n,e){t?ys(e,t,n):n()}function cj(t,n,e,r,o,i,s,a){let l=[],c=0,u=0,d=!1,p=()=>{d&&!l.length&&!c&&n.complete()},h=m=>c<r?f(m):l.push(m),f=m=>{i&&n.next(m),c++;let g=!1;bn(e(m,u++)).subscribe(Ut(n,v=>{o?.(v),i?h(v):n.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){let v=l.shift();s?ys(n,s,()=>f(v)):f(v)}p()}catch(v){n.error(v)}}))};return t.subscribe(Ut(n,h,()=>{d=!0,p()})),()=>{a?.()}}function or(t,n,e=1/0){return Vt(n)?or((r,o)=>Et((i,s)=>n(r,i,o,s))(bn(t(r,o))),e):(typeof n=="number"&&(e=n),qt((r,o)=>cj(r,o,t,e)))}function ga(t=1/0){return or(Ki,t)}function uj(){return ga(1)}function il(...t){return uj()(rr(t,cc(t)))}function uc(t){return new tn(n=>{bn(t()).subscribe(n)})}function ky(...t){let n=UC(t),{args:e,keys:r}=n4(t),o=new tn(i=>{let{length:s}=e;if(!s){i.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;bn(e[u]).subscribe(Ut(i,p=>{d||(d=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!d)&&(c||i.next(r?r4(r,a):a),i.complete())}))}});return n?o.pipe(q2(n)):o}var cme=["addListener","removeListener"],ume=["addEventListener","removeEventListener"],dme=["on","off"];function ch(t,n,e,r){if(Vt(e)&&(r=e,e=void 0),r)return ch(t,n,e).pipe(q2(r));let[o,i]=fme(t)?ume.map(s=>a=>t[s](n,a,e)):pme(t)?cme.map(dj(t,n)):hme(t)?dme.map(dj(t,n)):[];if(!o&&G2(t))return or(s=>ch(s,n,e))(bn(t));if(!o)throw new TypeError("Invalid event target");return new tn(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return o(a),()=>i(a)})}function dj(t,n){return e=>r=>t[e](n,r)}function pme(t){return Vt(t.addListener)&&Vt(t.removeListener)}function hme(t){return Vt(t.on)&&Vt(t.off)}function fme(t){return Vt(t.addEventListener)&&Vt(t.removeEventListener)}function K2(t=0,n,e=KV){let r=-1;return n!=null&&(HC(n)?e=n:r=n),new tn(o=>{let i=aj(t)?+t-e.now():t;i<0&&(i=0);let s=0;return e.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}function o4(t=0,n=Ju){return t<0&&(t=0),K2(t,t,n)}function _y(...t){let n=cc(t),e=ZV(t,1/0),r=t;return r.length?r.length===1?bn(r[0]):ga(e)(rr(r,n)):Ci}function pj(t,n){return(e,r)=>!t.call(n,e,r)}function Cn(t,n){return qt((e,r)=>{let o=0;e.subscribe(Ut(r,i=>t.call(n,i,o++)&&r.next(i)))})}function A5(t,n,e){return[Cn(n,e)(bn(t)),Cn(pj(n,e))(bn(t))]}function hj(t){return qt((n,e)=>{let r=!1,o=null,i=null,s=!1,a=()=>{if(i?.unsubscribe(),i=null,r){r=!1;let c=o;o=null,e.next(c)}s&&e.complete()},l=()=>{i=null,s&&e.complete()};n.subscribe(Ut(e,c=>{r=!0,o=c,i||bn(t(c)).subscribe(i=Ut(e,a,l))},()=>{s=!0,(!r||!i||i.closed)&&e.complete()}))})}function i4(t,n=Ju){return hj(()=>K2(t,n))}function td(t){return qt((n,e)=>{let r=null,o=!1,i;r=n.subscribe(Ut(e,void 0,void 0,s=>{i=bn(t(s,td(t)(n))),r?(r.unsubscribe(),r=null,i.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(e))})}function fj(t,n,e,r,o){return(i,s)=>{let a=e,l=n,c=0;i.subscribe(Ut(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}function va(t,n){return Vt(n)?or(t,n,1):or(t,1)}function uh(t,n=Ju){return qt((e,r)=>{let o=null,i=null,s=null,a=()=>{if(o){o.unsubscribe(),o=null;let c=i;i=null,r.next(c)}};function l(){let c=s+t,u=n.now();if(u<c){o=this.schedule(void 0,c-u),r.add(o);return}a()}e.subscribe(Ut(r,c=>{i=c,s=n.now(),o||(o=n.schedule(l,t),r.add(o))},()=>{a(),r.complete()},void 0,()=>{i=o=null}))})}function dh(t){return qt((n,e)=>{let r=!1;n.subscribe(Ut(e,o=>{r=!0,e.next(o)},()=>{r||e.next(t),e.complete()}))})}function Fr(t){return t<=0?()=>Ci:qt((n,e)=>{let r=0;n.subscribe(Ut(e,o=>{++r<=t&&(e.next(o),t<=r&&e.complete())}))})}function mj(){return qt((t,n)=>{t.subscribe(Ut(n,sm))})}function by(t){return Et(()=>t)}function R5(t,n){return n?e=>il(n.pipe(Fr(1),mj()),e.pipe(R5(t))):or((e,r)=>bn(t(e,r)).pipe(Fr(1),by(e)))}function O5(t,n=Ju){let e=K2(t,n);return R5(()=>e)}function Z2(t,n=Ki){return t=t??mme,qt((e,r)=>{let o,i=!0;e.subscribe(Ut(r,s=>{let a=n(s);(i||!t(o,a))&&(i=!1,o=a,r.next(s))}))})}function mme(t,n){return t===n}function s4(t=gme){return qt((n,e)=>{let r=!1;n.subscribe(Ut(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(t())))})}function gme(){return new ed}function um(t){return qt((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function nd(t,n){let e=arguments.length>=2;return r=>r.pipe(t?Cn((o,i)=>t(o,i,r)):Ki,Fr(1),e?dh(n):s4(()=>new ed))}function X2(t){return t<=0?()=>Ci:qt((n,e)=>{let r=[];n.subscribe(Ut(e,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}function F5(t,n){let e=arguments.length>=2;return r=>r.pipe(t?Cn((o,i)=>t(o,i,r)):Ki,X2(1),e?dh(n):s4(()=>new ed))}function B5(t,n){return qt(fj(t,n,arguments.length>=2,!0))}function gj(t={}){let{connector:n=()=>new nt,resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s,a,l,c=0,u=!1,d=!1,p=()=>{a?.unsubscribe(),a=void 0},h=()=>{p(),s=l=void 0,u=d=!1},f=()=>{let m=s;h(),m?.unsubscribe()};return qt((m,g)=>{c++,!d&&!u&&p();let v=l=l??n();g.add(()=>{c--,c===0&&!d&&!u&&(a=P5(f,o))}),v.subscribe(g),!s&&c>0&&(s=new Yu({next:w=>v.next(w),error:w=>{d=!0,p(),a=P5(h,e,w),v.error(w)},complete:()=>{u=!0,p(),a=P5(h,r),v.complete()}}),bn(m).subscribe(s))})(i)}}function P5(t,n,...e){if(n===!0){t();return}if(n===!1)return;let r=new Yu({next:()=>{r.unsubscribe(),t()}});return bn(n(...e)).subscribe(r)}function Cy(t,n,e){let r,o=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:n=1/0,refCount:o=!1,scheduler:e}=t:r=t??1/0,gj({connector:()=>new Qu(r,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function My(t){return Cn((n,e)=>t<=e)}function L5(t){return qt((n,e)=>{let r=!1,o=0;n.subscribe(Ut(e,i=>(r||(r=!t(i,o++)))&&e.next(i)))})}function sl(...t){let n=cc(t);return qt((e,r)=>{(n?il(t,e,n):il(t,e)).subscribe(r)})}function Sr(t,n){return qt((e,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();e.subscribe(Ut(r,l=>{o?.unsubscribe();let c=0,u=i++;bn(t(l,u)).subscribe(o=Ut(r,d=>r.next(n?n(l,d,u,c++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function ln(t){return qt((n,e)=>{bn(t).subscribe(Ut(e,()=>e.complete(),sm)),!e.closed&&n.subscribe(e)})}function $5(t,n=!1){return qt((e,r)=>{let o=0;e.subscribe(Ut(r,i=>{let s=t(i,o++);(s||n)&&r.next(i),!s&&r.complete()}))})}function xo(t,n,e){let r=Vt(t)||n||e?{next:t,error:n,complete:e}:t;return r?qt((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(Ut(i,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),i.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),i.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Ki}function V5(t,n,e){let r=Object.create(vme);r.source=t,r.computation=n,e!=null&&(r.equal=e);let i=()=>{if(rm(r),Zu(r),r.value===Ku)throw r.error;return r.value};return i[Xr]=r,fy(r),i}function vj(t,n){rm(t),lh(t,n),B2(t)}function wj(t,n){rm(t),OC(t,n),B2(t)}var vme=lt(ae({},ih),{value:oh,dirty:!0,error:null,equal:my,kind:"linkedSignal",producerMustRecompute(t){return t.value===oh||t.value===nm},producerRecomputeValue(t){if(t.value===nm)throw new Error("");let n=t.value;t.value=nm;let e=Xu(t),r;try{let o=t.source(),i=n===oh||n===Ku?void 0:{source:t.sourceValue,value:n};r=t.computation(o,i),t.sourceValue=o}catch(o){r=Ku,t.error=o}finally{sh(t,e)}if(n!==oh&&r!==Ku&&t.equal(n,r)){t.value=n;return}t.value=r,t.version++}});function yj(t){let n=Ht(null);try{return t()}finally{Ht(n)}}var xj=lt(ae({},ih),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function kj(t){if(t.dirty=!1,t.version>0&&!om(t))return;t.version++;let n=Xu(t);try{t.cleanup(),t.fn()}finally{sh(t,n)}}var u4="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Te=class extends Error{code;constructor(n,e){super(al(n,e)),this.code=n}};function wme(t){return`NG0${Math.abs(t)}`}function al(t,n){return`${wme(t)}${n?": "+n:""}`}var id=globalThis;function Vn(t){for(let n in t)if(t[n]===Vn)return n;throw Error("")}function Cj(t,n){for(let e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function od(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(od).join(", ")}]`;if(t==null)return""+t;let n=t.overriddenName||t.name;if(n)return`${n}`;let e=t.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function d4(t,n){return t?n?`${t} ${n}`:t:n||""}var yme=Vn({__forward_ref__:Vn});function $r(t){return t.__forward_ref__=$r,t.toString=function(){return od(this())},t}function $o(t){return Q5(t)?t():t}function Q5(t){return typeof t=="function"&&t.hasOwnProperty(yme)&&t.__forward_ref__===$r}function _e(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function jn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Dy(t){return xme(t,p4)}function J5(t){return Dy(t)!==null}function xme(t,n){return t.hasOwnProperty(n)&&t[n]||null}function kme(t){let n=t?.[p4]??null;return n||null}function z5(t){return t&&t.hasOwnProperty(l4)?t[l4]:null}var p4=Vn({\u0275prov:Vn}),l4=Vn({\u0275inj:Vn}),Ee=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,e){this._desc=n,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=_e({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function eA(t){return t&&!!t.\u0275providers}var tA=Vn({\u0275cmp:Vn}),nA=Vn({\u0275dir:Vn}),rA=Vn({\u0275pipe:Vn}),oA=Vn({\u0275mod:Vn}),Ty=Vn({\u0275fac:Vn}),mm=Vn({__NG_ELEMENT_ID__:Vn}),_j=Vn({__NG_ENV_ID__:Vn});function Ny(t){return typeof t=="string"?t:t==null?"":String(t)}function Mj(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ny(t)}var Sj=Vn({ngErrorCode:Vn}),_me=Vn({ngErrorMessage:Vn}),bme=Vn({ngTokenPath:Vn});function iA(t,n){return Tj("",-200,n)}function h4(t,n){throw new Te(-201,!1)}function Tj(t,n,e){let r=new Te(n,t);return r[Sj]=n,r[_me]=t,e&&(r[bme]=e),r}function Cme(t){return t[Sj]}var H5;function Ej(){return H5}function Zi(t){let n=H5;return H5=t,n}function sA(t,n,e){let r=Dy(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&8)return null;if(n!==void 0)return n;h4(t,"Injector")}var Mme={},dm=Mme,U5="__NG_DI_FLAG__",G5=class{injector;constructor(n){this.injector=n}retrieve(n,e){let r=pm(e)||0;try{return this.injector.get(n,r&8?null:dm,r)}catch(o){if(F2(o))return o;throw o}}};function Sme(t,n=0){let e=NC();if(e===void 0)throw new Te(-203,!1);if(e===null)return sA(t,void 0,n);{let r=Tme(n),o=e.retrieve(t,r);if(F2(o)){if(r.optional)return null;throw o}return o}}function rt(t,n=0){return(Ej()||Sme)($o(t),n)}function R(t,n){return rt(t,pm(n))}function pm(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Tme(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function W5(t){let n=[];for(let e=0;e<t.length;e++){let r=$o(t[e]);if(Array.isArray(r)){if(r.length===0)throw new Te(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],l=Eme(a);typeof l=="number"?l===-1?o=a.token:i|=l:o=a}n.push(rt(o,i))}else n.push(rt(r))}return n}function f4(t,n){return t[U5]=n,t.prototype[U5]=n,t}function Eme(t){return t[U5]}function ph(t,n){let e=t.hasOwnProperty(Ty);return e?t[Ty]:null}function Ij(t,n,e){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=n[r];if(e&&(o=e(o),i=e(i)),i!==o)return!1}return!0}function Dj(t){return t.flat(Number.POSITIVE_INFINITY)}function m4(t,n){t.forEach(e=>Array.isArray(e)?m4(e,n):n(e))}function aA(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Ay(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Nj(t,n){let e=[];for(let r=0;r<t;r++)e.push(n);return e}function Aj(t,n,e,r){let o=t.length;if(o==n)t.push(e,r);else if(o===1)t.push(r,t[0]),t[0]=e;else{for(o--,t.push(t[o-1],t[o]);o>n;){let i=o-2;t[o]=t[i],o--}t[n]=e,t[n+1]=r}}function Ry(t,n,e){let r=Q2(t,n);return r>=0?t[r|1]=e:(r=~r,Aj(t,r,n,e)),r}function g4(t,n){let e=Q2(t,n);if(e>=0)return t[e|1]}function Q2(t,n){return Ime(t,n,1)}function Ime(t,n,e){let r=0,o=t.length>>e;for(;o!==r;){let i=r+(o-r>>1),s=t[i<<e];if(n===s)return i<<e;s>n?o=i:r=i+1}return~(o<<e)}var ll={},Mi=[],fh=new Ee(""),lA=new Ee("",-1),cA=new Ee(""),Ey=class{get(n,e=dm){if(e===dm){let o=Tj("",-201);throw o.name="\u0275NotFound",o}return e}};function uA(t){return t[oA]||null}function dc(t){return t[tA]||null}function v4(t){return t[nA]||null}function Rj(t){return t[rA]||null}function mh(t){return{\u0275providers:t}}function Oj(...t){return{\u0275providers:dA(!0,t),\u0275fromNgModule:!0}}function dA(t,...n){let e=[],r=new Set,o,i=s=>{e.push(s)};return m4(n,s=>{let a=s;c4(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&Fj(o,i),e}function Fj(t,n){for(let e=0;e<t.length;e++){let{ngModule:r,providers:o}=t[e];pA(o,i=>{n(i,r)})}}function c4(t,n,e,r){if(t=$o(t),!t)return!1;let o=null,i=z5(t),s=!i&&dc(t);if(!i&&!s){let l=t.ngModule;if(i=z5(l),i)o=l;else return!1}else{if(s&&!s.standalone)return!1;o=t}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)c4(c,n,e,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let c;try{m4(i.imports,u=>{c4(u,n,e,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Fj(c,n)}if(!a){let c=ph(o)||(()=>new o);n({provide:o,useFactory:c,deps:Mi},o),n({provide:cA,useValue:o,multi:!0},o),n({provide:fh,useValue:()=>rt(o),multi:!0},o)}let l=i.providers;if(l!=null&&!a){let c=t;pA(l,u=>{n(u,c)})}}else return!1;return o!==t&&t.providers!==void 0}function pA(t,n){for(let e of t)eA(e)&&(e=e.\u0275providers),Array.isArray(e)?pA(e,n):n(e)}var Dme=Vn({provide:String,useValue:Vn});function Bj(t){return t!==null&&typeof t=="object"&&Dme in t}function Nme(t){return!!(t&&t.useExisting)}function Ame(t){return!!(t&&t.useFactory)}function hm(t){return typeof t=="function"}function Pj(t){return!!t.useClass}var Oy=new Ee(""),a4={},bj={},j5;function J2(){return j5===void 0&&(j5=new Ey),j5}var ir=class{},fm=class extends ir{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,e,r,o){super(),this.parent=e,this.source=r,this.scopes=o,K5(n,s=>this.processProvider(s)),this.records.set(lA,Y2(void 0,this)),o.has("environment")&&this.records.set(ir,Y2(void 0,this));let i=this.records.get(Oy);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(cA,Mi,{self:!0}))}retrieve(n,e){let r=pm(e)||0;try{return this.get(n,dm,r)}catch(o){if(F2(o))return o;throw o}}destroy(){Sy(this),this._destroyed=!0;let n=Ht(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ht(n)}}onDestroy(n){return Sy(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){Sy(this);let e=lc(this),r=Zi(void 0),o;try{return n()}finally{lc(e),Zi(r)}}get(n,e=dm,r){if(Sy(this),n.hasOwnProperty(_j))return n[_j](this);let o=pm(r),i,s=lc(this),a=Zi(void 0);try{if(!(o&4)){let c=this.records.get(n);if(c===void 0){let u=Pme(n)&&Dy(n);u&&this.injectableDefInScope(u)?c=Y2(q5(n),a4):c=null,this.records.set(n,c)}if(c!=null)return this.hydrate(n,c,o)}let l=o&2?J2():this.parent;return e=o&8&&e===dm?null:e,l.get(n,e)}catch(l){let c=Cme(l);throw c===-200||c===-201?new Te(c,null):l}finally{Zi(a),lc(s)}}resolveInjectorInitializers(){let n=Ht(null),e=lc(this),r=Zi(void 0),o;try{let i=this.get(fh,Mi,{self:!0});for(let s of i)s()}finally{lc(e),Zi(r),Ht(n)}}toString(){let n=[],e=this.records;for(let r of e.keys())n.push(od(r));return`R3Injector[${n.join(", ")}]`}processProvider(n){n=$o(n);let e=hm(n)?n:$o(n&&n.provide),r=Ome(n);if(!hm(n)&&n.multi===!0){let o=this.records.get(e);o||(o=Y2(void 0,a4,!0),o.factory=()=>W5(o.multi),this.records.set(e,o)),e=n,o.multi.push(n)}this.records.set(e,r)}hydrate(n,e,r){let o=Ht(null);try{if(e.value===bj)throw iA(od(n));return e.value===a4&&(e.value=bj,e.value=e.factory(void 0,r)),typeof e.value=="object"&&e.value&&Bme(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Ht(o)}}injectableDefInScope(n){if(!n.providedIn)return!1;let e=$o(n.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){let e=this._onDestroyHooks.indexOf(n);e!==-1&&this._onDestroyHooks.splice(e,1)}};function q5(t){let n=Dy(t),e=n!==null?n.factory:ph(t);if(e!==null)return e;if(t instanceof Ee)throw new Te(204,!1);if(t instanceof Function)return Rme(t);throw new Te(204,!1)}function Rme(t){if(t.length>0)throw new Te(204,!1);let e=kme(t);return e!==null?()=>e.factory(t):()=>new t}function Ome(t){if(Bj(t))return Y2(void 0,t.useValue);{let n=hA(t);return Y2(n,a4)}}function hA(t,n,e){let r;if(hm(t)){let o=$o(t);return ph(o)||q5(o)}else if(Bj(t))r=()=>$o(t.useValue);else if(Ame(t))r=()=>t.useFactory(...W5(t.deps||[]));else if(Nme(t))r=(o,i)=>rt($o(t.useExisting),i!==void 0&&i&8?8:void 0);else{let o=$o(t&&(t.useClass||t.provide));if(Fme(t))r=()=>new o(...W5(t.deps));else return ph(o)||q5(o)}return r}function Sy(t){if(t.destroyed)throw new Te(205,!1)}function Y2(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Fme(t){return!!t.deps}function Bme(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Pme(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function K5(t,n){for(let e of t)Array.isArray(e)?K5(e,n):e&&eA(e)?K5(e.\u0275providers,n):n(e)}function Vr(t,n){let e;t instanceof fm?(Sy(t),e=t):e=new G5(t);let r,o=lc(e),i=Zi(void 0);try{return n()}finally{lc(o),Zi(i)}}function Lj(){return Ej()!==void 0||NC()!=null}var cl=0,At=1,Kt=2,Vo=3,ya=4,Xi=5,gm=6,e1=7,lo=8,sd=9,pc=10,Gn=11,t1=12,fA=13,vm=14,Yi=15,gh=16,wm=17,hc=18,Fy=19,mA=20,rd=21,w4=22,ad=23,qs=24,ym=25,xm=26,sr=27,$j=1,gA=6,vh=7,By=8,km=9,Yr=10;function fc(t){return Array.isArray(t)&&typeof t[$j]=="object"}function ul(t){return Array.isArray(t)&&t[$j]===!0}function vA(t){return(t.flags&4)!==0}function ld(t){return t.componentOffset>-1}function n1(t){return(t.flags&1)===1}function dl(t){return!!t.template}function r1(t){return(t[Kt]&512)!==0}function _m(t){return(t[Kt]&256)===256}var wA="svg",Vj="math";function xa(t){for(;Array.isArray(t);)t=t[cl];return t}function yA(t,n){return xa(n[t])}function ka(t,n){return xa(n[t.index])}function Py(t,n){return t.data[n]}function o1(t,n){return t[n]}function xA(t,n,e,r){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=r}function _a(t,n){let e=n[t];return fc(e)?e:e[cl]}function jj(t){return(t[Kt]&4)===4}function y4(t){return(t[Kt]&128)===128}function zj(t){return ul(t[Vo])}function ba(t,n){return n==null?null:t[n]}function kA(t){t[wm]=0}function _A(t){t[Kt]&1024||(t[Kt]|=1024,y4(t)&&wh(t))}function Hj(t,n){for(;t>0;)n=n[vm],t--;return n}function Ly(t){return!!(t[Kt]&9216||t[qs]?.dirty)}function x4(t){t[pc].changeDetectionScheduler?.notify(8),t[Kt]&64&&(t[Kt]|=1024),Ly(t)&&wh(t)}function wh(t){t[pc].changeDetectionScheduler?.notify(0);let n=hh(t);for(;n!==null&&!(n[Kt]&8192||(n[Kt]|=8192,!y4(n)));)n=hh(n)}function bA(t,n){if(_m(t))throw new Te(911,!1);t[rd]===null&&(t[rd]=[]),t[rd].push(n)}function Uj(t,n){if(t[rd]===null)return;let e=t[rd].indexOf(n);e!==-1&&t[rd].splice(e,1)}function hh(t){let n=t[Vo];return ul(n)?n[Vo]:n}function CA(t){return t[e1]??=[]}function MA(t){return t.cleanup??=[]}function Gj(t,n,e,r){let o=CA(n);o.push(e),t.firstCreatePass&&MA(t).push(r,o.length-1)}var un={lFrame:nz(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Z5=!1;function Wj(){return un.lFrame.elementDepthCount}function qj(){un.lFrame.elementDepthCount++}function SA(){un.lFrame.elementDepthCount--}function k4(){return un.bindingsEnabled}function TA(){return un.skipHydrationRootTNode!==null}function EA(t){return un.skipHydrationRootTNode===t}function IA(){un.skipHydrationRootTNode=null}function bt(){return un.lFrame.lView}function mr(){return un.lFrame.tView}function He(t){return un.lFrame.contextLView=t,t[lo]}function Ue(t){return un.lFrame.contextLView=null,t}function ko(){let t=DA();for(;t!==null&&t.type===64;)t=t.parent;return t}function DA(){return un.lFrame.currentTNode}function Kj(){let t=un.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function i1(t,n){let e=un.lFrame;e.currentTNode=t,e.isParent=n}function NA(){return un.lFrame.isParent}function AA(){un.lFrame.isParent=!1}function Zj(){return un.lFrame.contextLView}function RA(){return Z5}function s1(t){let n=Z5;return Z5=t,n}function pl(){let t=un.lFrame,n=t.bindingRootIndex;return n===-1&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Xj(t){return un.lFrame.bindingIndex=t}function cd(){return un.lFrame.bindingIndex++}function OA(t){let n=un.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function Yj(){return un.lFrame.inI18n}function Qj(t,n){let e=un.lFrame;e.bindingIndex=e.bindingRootIndex=t,_4(n)}function Jj(){return un.lFrame.currentDirectiveIndex}function _4(t){un.lFrame.currentDirectiveIndex=t}function ez(t){let n=un.lFrame.currentDirectiveIndex;return n===-1?null:t[n]}function b4(){return un.lFrame.currentQueryIndex}function $y(t){un.lFrame.currentQueryIndex=t}function Lme(t){let n=t[At];return n.type===2?n.declTNode:n.type===1?t[Xi]:null}function FA(t,n,e){if(e&4){let o=n,i=t;for(;o=o.parent,o===null&&!(e&1);)if(o=Lme(i),o===null||(i=i[vm],o.type&10))break;if(o===null)return!1;n=o,t=i}let r=un.lFrame=tz();return r.currentTNode=n,r.lView=t,!0}function C4(t){let n=tz(),e=t[At];un.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function tz(){let t=un.lFrame,n=t===null?null:t.child;return n===null?nz(t):n}function nz(t){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=n),n}function rz(){let t=un.lFrame;return un.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var BA=rz;function M4(){let t=rz();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function oz(t){return(un.lFrame.contextLView=Hj(t,un.lFrame.contextLView))[lo]}function ud(){return un.lFrame.selectedIndex}function yh(t){un.lFrame.selectedIndex=t}function a1(){let t=un.lFrame;return Py(t.tView,t.selectedIndex)}function mc(){un.lFrame.currentNamespace=wA}function iz(){return un.lFrame.currentNamespace}var sz=!0;function S4(){return sz}function Vy(t){sz=t}function X5(t,n=null,e=null,r){let o=PA(t,n,e,r);return o.resolveInjectorInitializers(),o}function PA(t,n=null,e=null,r,o=new Set){let i=[e||Mi,Oj(t)];return r=r||(typeof t=="object"?void 0:od(t)),new fm(i,n||J2(),r||null,o)}var Ct=class t{static THROW_IF_NOT_FOUND=dm;static NULL=new Ey;static create(n,e){if(Array.isArray(n))return X5({name:""},e,n,"");{let r=n.name??"";return X5({name:r},n.parent,n.providers,r)}}static \u0275prov=_e({token:t,providedIn:"any",factory:()=>rt(lA)});static __NG_ELEMENT_ID__=-1},Gt=new Ee(""),gr=(()=>{class t{static __NG_ELEMENT_ID__=$me;static __NG_ENV_ID__=e=>e}return t})(),Iy=class extends gr{_lView;constructor(n){super(),this._lView=n}get destroyed(){return _m(this._lView)}onDestroy(n){let e=this._lView;return bA(e,n),()=>Uj(e,n)}};function $me(){return new Iy(bt())}var Ws=class{_console=console;handleError(n){this._console.error("ERROR",n)}},xs=new Ee("",{providedIn:"root",factory:()=>{let t=R(ir),n;return e=>{t.destroyed&&!n?setTimeout(()=>{throw e}):(n??=t.get(Ws),n.handleError(e))}}}),az={provide:fh,useValue:()=>void R(Ws),multi:!0};function l1(t){return typeof t=="function"&&t[Xr]!==void 0}function Ye(t,n){let[e,r,o]=k5(t,n?.equal),i=e,s=i[Xr];return i.set=r,i.update=o,i.asReadonly=jy.bind(i),i}function jy(){let t=this[Xr];if(t.readonlyFn===void 0){let n=()=>this();n[Xr]=t,t.readonlyFn=n}return t.readonlyFn}function LA(t){return l1(t)&&typeof t.set=="function"}var bm=(()=>{class t{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=Vme}return t})();function Vme(){return new bm(bt(),ko())}var wa=class{},zy=new Ee("",{providedIn:"root",factory:()=>!1});var $A=new Ee(""),VA=new Ee(""),gc=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new nr(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new tn(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new t})}return t})(),c1=(()=>{class t{internalPendingTasks=R(gc);scheduler=R(wa);errorHandler=R(xs);add(){let e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(e))}}run(e){let r=this.add();e().catch(this.errorHandler).finally(r)}static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new t})}return t})();function Cm(...t){}var Hy=(()=>{class t{static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new Y5})}return t})(),Y5=class{dirtyEffectCount=0;queues=new Map;add(n){this.enqueue(n),this.schedule(n)}schedule(n){n.dirty&&this.dirtyEffectCount++}remove(n){let e=n.zone,r=this.queues.get(e);r.has(n)&&(r.delete(n),n.dirty&&this.dirtyEffectCount--)}enqueue(n){let e=n.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(n)||r.add(n)}flush(){for(;this.dirtyEffectCount>0;){let n=!1;for(let[e,r]of this.queues)e===null?n||=this.flushQueue(r):n||=e.run(()=>this.flushQueue(r));n||(this.dirtyEffectCount=0)}}flushQueue(n){let e=!1;for(let r of n)r.dirty&&(this.dirtyEffectCount--,e=!0,r.run());return e}};function v1(t){return{toString:t}.toString()}var T4="__parameters__";function qme(t){return function(...e){if(t){let r=t(...e);for(let o in r)this[o]=r[o]}}}function ER(t,n,e){return v1(()=>{let r=qme(n);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(T4)?l[T4]:Object.defineProperty(l,T4,{value:[]})[T4];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return o.prototype.ngMetadataName=t,o.annotationCls=o,o})}var tx=f4(ER("Inject",t=>({token:t})),-1),nx=f4(ER("Optional"),8);var nM=f4(ER("SkipSelf"),4);function Kme(t){return typeof t=="function"}var B4=class{previousValue;currentValue;firstChange;constructor(n,e,r){this.previousValue=n,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function zz(t,n,e,r){n!==null?n.applyValueToInputSignal(n,r):t[e]=r}var Qr=(()=>{let t=()=>Hz;return t.ngInherit=!0,t})();function Hz(t){return t.type.prototype.ngOnChanges&&(t.setInput=Xme),Zme}function Zme(){let t=Gz(this),n=t?.current;if(n){let e=t.previous;if(e===ll)t.previous=n;else for(let r in n)e[r]=n[r];t.current=null,this.ngOnChanges(n)}}function Xme(t,n,e,r,o){let i=this.declaredInputs[r],s=Gz(t)||Yme(t,{previous:ll,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[i];a[i]=new B4(c&&c.currentValue,e,l===ll),zz(t,n,o,e)}var Uz="__ngSimpleChanges__";function Gz(t){return t[Uz]||null}function Yme(t,n){return t[Uz]=n}var lz=[];var Wn=function(t,n=null,e){for(let r=0;r<lz.length;r++){let o=lz[r];o(t,n,e)}};function Qme(t,n,e){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=n.type.prototype;if(r){let s=Hz(n);(e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s)}o&&(e.preOrderHooks??=[]).push(0-t,o),i&&((e.preOrderHooks??=[]).push(t,i),(e.preOrderCheckHooks??=[]).push(t,i))}function Wz(t,n){for(let e=n.directiveStart,r=n.directiveEnd;e<r;e++){let i=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(t.contentHooks??=[]).push(-e,s),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),l&&(t.viewHooks??=[]).push(-e,l),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),u!=null&&(t.destroyHooks??=[]).push(e,u)}}function N4(t,n,e){qz(t,n,3,e)}function A4(t,n,e,r){(t[Kt]&3)===e&&qz(t,n,e,r)}function jA(t,n){let e=t[Kt];(e&3)===n&&(e&=16383,e+=1,t[Kt]=e)}function qz(t,n,e,r){let o=r!==void 0?t[wm]&65535:0,i=r??-1,s=n.length-1,a=0;for(let l=o;l<s;l++)if(typeof n[l+1]=="number"){if(a=n[l],r!=null&&a>=r)break}else n[l]<0&&(t[wm]+=65536),(a<i||i==-1)&&(Jme(t,e,n,l),t[wm]=(t[wm]&4294901760)+l+2),l++}function cz(t,n){Wn(4,t,n);let e=Ht(null);try{n.call(t)}finally{Ht(e),Wn(5,t,n)}}function Jme(t,n,e,r){let o=e[r]<0,i=e[r+1],s=o?-e[r]:e[r],a=t[s];o?t[Kt]>>14<t[wm]>>16&&(t[Kt]&3)===n&&(t[Kt]+=16384,cz(a,i)):cz(a,i)}var d1=-1,Sm=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,e,r,o){this.factory=n,this.name=o,this.canSeeViewProviders=e,this.injectImpl=r}};function e0e(t){return(t.flags&8)!==0}function t0e(t){return(t.flags&16)!==0}function n0e(t,n,e){let r=0;for(;r<e.length;){let o=e[r];if(typeof o=="number"){if(o!==0)break;r++;let i=e[r++],s=e[r++],a=e[r++];t.setAttribute(n,s,a,i)}else{let i=o,s=e[++r];r0e(i)?t.setProperty(n,i,s):t.setAttribute(n,i,s),r++}}return r}function Kz(t){return t===3||t===4||t===6}function r0e(t){return t.charCodeAt(0)===64}function p1(t,n){if(!(n===null||n.length===0))if(t===null||t.length===0)t=n.slice();else{let e=-1;for(let r=0;r<n.length;r++){let o=n[r];typeof o=="number"?e=o:e===0||(e===-1||e===2?uz(t,e,o,null,n[++r]):uz(t,e,o,null,null))}}return t}function uz(t,n,e,r,o){let i=0,s=t.length;if(n===-1)s=-1;else for(;i<t.length;){let a=t[i++];if(typeof a=="number"){if(a===n){s=-1;break}else if(a>n){s=i-1;break}}}for(;i<t.length;){let a=t[i];if(typeof a=="number")break;if(a===e){o!==null&&(t[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(t.splice(s,0,n),i=s+1),t.splice(i++,0,e),o!==null&&t.splice(i++,0,o)}function Zz(t){return t!==d1}function P4(t){return t&32767}function o0e(t){return t>>16}function L4(t,n){let e=o0e(t),r=n;for(;e>0;)r=r[vm],e--;return r}var YA=!0;function $4(t){let n=YA;return YA=t,n}var i0e=256,Xz=i0e-1,Yz=5,s0e=0,vc={};function a0e(t,n,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(mm)&&(r=e[mm]),r==null&&(r=e[mm]=s0e++);let o=r&Xz,i=1<<o;n.data[t+(o>>Yz)]|=i}function V4(t,n){let e=Qz(t,n);if(e!==-1)return e;let r=n[At];r.firstCreatePass&&(t.injectorIndex=n.length,zA(r.data,t),zA(n,null),zA(r.blueprint,null));let o=IR(t,n),i=t.injectorIndex;if(Zz(o)){let s=P4(o),a=L4(o,n),l=a[At].data;for(let c=0;c<8;c++)n[i+c]=a[s+c]|l[s+c]}return n[i+8]=o,i}function zA(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Qz(t,n){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||n[t.injectorIndex+8]===null?-1:t.injectorIndex}function IR(t,n){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let e=0,r=null,o=n;for(;o!==null;){if(r=rH(o),r===null)return d1;if(e++,o=o[vm],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return d1}function QA(t,n,e){a0e(t,n,e)}function l0e(t,n){if(n==="class")return t.classes;if(n==="style")return t.styles;let e=t.attrs;if(e){let r=e.length,o=0;for(;o<r;){let i=e[o];if(Kz(i))break;if(i===0)o=o+2;else if(typeof i=="number")for(o++;o<r&&typeof e[o]=="string";)o++;else{if(i===n)return e[o+1];o=o+2}}}return null}function Jz(t,n,e){if(e&8||t!==void 0)return t;h4(n,"NodeInjector")}function eH(t,n,e,r){if(e&8&&r===void 0&&(r=null),(e&3)===0){let o=t[sd],i=Zi(void 0);try{return o?o.get(n,r,e&8):sA(n,r,e&8)}finally{Zi(i)}}return Jz(r,n,e)}function tH(t,n,e,r=0,o){if(t!==null){if(n[Kt]&2048&&!(r&2)){let s=p0e(t,n,e,r,vc);if(s!==vc)return s}let i=nH(t,n,e,r,vc);if(i!==vc)return i}return eH(n,e,r,o)}function nH(t,n,e,r,o){let i=u0e(e);if(typeof i=="function"){if(!FA(n,t,r))return r&1?Jz(o,e,r):eH(n,e,r,o);try{let s;if(s=i(r),s==null&&!(r&8))h4(e);else return s}finally{BA()}}else if(typeof i=="number"){let s=null,a=Qz(t,n),l=d1,c=r&1?n[Yi][Xi]:null;for((a===-1||r&4)&&(l=a===-1?IR(t,n):n[a+8],l===d1||!pz(r,!1)?a=-1:(s=n[At],a=P4(l),n=L4(l,n)));a!==-1;){let u=n[At];if(dz(i,a,u.data)){let d=c0e(a,n,e,s,r,c);if(d!==vc)return d}l=n[a+8],l!==d1&&pz(r,n[At].data[a+8]===c)&&dz(i,a,n)?(s=u,a=P4(l),n=L4(l,n)):a=-1}}return o}function c0e(t,n,e,r,o,i){let s=n[At],a=s.data[t+8],l=r==null?ld(a)&&YA:r!=s&&(a.type&3)!==0,c=o&1&&i===a,u=R4(a,s,e,l,c);return u!==null?qy(n,s,u,a,o):vc}function R4(t,n,e,r,o){let i=t.providerIndexes,s=n.data,a=i&1048575,l=t.directiveStart,c=t.directiveEnd,u=i>>20,d=r?a:a+u,p=o?a+u:c;for(let h=d;h<p;h++){let f=s[h];if(h<l&&e===f||h>=l&&f.type===e)return h}if(o){let h=s[l];if(h&&dl(h)&&h.type===e)return l}return null}function qy(t,n,e,r,o){let i=t[e],s=n.data;if(i instanceof Sm){let a=i;if(a.resolving){let h=Mj(s[e]);throw iA(h)}let l=$4(a.canSeeViewProviders);a.resolving=!0;let c=s[e].type||s[e],u,d=a.injectImpl?Zi(a.injectImpl):null,p=FA(t,r,0);try{i=t[e]=a.factory(void 0,o,s,t,r),n.firstCreatePass&&e>=r.directiveStart&&Qme(e,s[e],n)}finally{d!==null&&Zi(d),$4(l),a.resolving=!1,BA()}}return i}function u0e(t){if(typeof t=="string")return t.charCodeAt(0)||0;let n=t.hasOwnProperty(mm)?t[mm]:void 0;return typeof n=="number"?n>=0?n&Xz:d0e:n}function dz(t,n,e){let r=1<<t;return!!(e[n+(t>>Yz)]&r)}function pz(t,n){return!(t&2)&&!(t&1&&n)}var Mm=class{_tNode;_lView;constructor(n,e){this._tNode=n,this._lView=e}get(n,e,r){return tH(this._tNode,this._lView,n,pm(r),e)}};function d0e(){return new Mm(ko(),bt())}function Jr(t){return v1(()=>{let n=t.prototype.constructor,e=n[Ty]||JA(n),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let i=o[Ty]||JA(o);if(i&&i!==e)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function JA(t){return Q5(t)?()=>{let n=JA($o(t));return n&&n()}:ph(t)}function p0e(t,n,e,r,o){let i=t,s=n;for(;i!==null&&s!==null&&s[Kt]&2048&&!r1(s);){let a=nH(i,s,e,r|2,vc);if(a!==vc)return a;let l=i.parent;if(!l){let c=s[mA];if(c){let u=c.get(e,vc,r);if(u!==vc)return u}l=rH(s),s=s[vm]}i=l}return o}function rH(t){let n=t[At],e=n.type;return e===2?n.declTNode:e===1?t[Xi]:null}function rx(t){return l0e(ko(),t)}function h0e(){return w1(ko(),bt())}function w1(t,n){return new Ft(ka(t,n))}var Ft=(()=>{class t{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=h0e}return t})();function oH(t){return t instanceof Ft?t.nativeElement:t}function f0e(){return this._results[Symbol.iterator]()}var dd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new nt}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;let r=Dj(n);(this._changesDetected=!Ij(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=f0e};function iH(t){return(t.flags&128)===128}var DR=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(DR||{}),sH=new Map,m0e=0;function g0e(){return m0e++}function v0e(t){sH.set(t[Fy],t)}function eR(t){sH.delete(t[Fy])}var hz="__ngContext__";function h1(t,n){fc(n)?(t[hz]=n[Fy],v0e(n)):t[hz]=n}function aH(t){return cH(t[t1])}function lH(t){return cH(t[ya])}function cH(t){for(;t!==null&&!ul(t);)t=t[ya];return t}var tR;function NR(t){tR=t}function uH(){if(tR!==void 0)return tR;if(typeof document<"u")return document;throw new Te(210,!1)}var _h=new Ee("",{providedIn:"root",factory:()=>w0e}),w0e="ng",rM=new Ee(""),zo=new Ee("",{providedIn:"platform",factory:()=>"unknown"});var y1=new Ee(""),oM=new Ee("",{providedIn:"root",factory:()=>uH().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var y0e="h",x0e="b";var dH="r";var pH="di";var hH=!1,fH=new Ee("",{providedIn:"root",factory:()=>hH});var AR=new Ee("");var k0e=(t,n,e,r)=>{};function _0e(t,n,e,r){k0e(t,n,e,r)}function iM(t){return(t.flags&32)===32}var b0e=()=>null;function mH(t,n,e=!1){return b0e(t,n,e)}function gH(t,n){let e=t.contentQueries;if(e!==null){let r=Ht(null);try{for(let o=0;o<e.length;o+=2){let i=e[o],s=e[o+1];if(s!==-1){let a=t.data[s];$y(i),a.contentQueries(2,n[s],s)}}}finally{Ht(r)}}}function nR(t,n,e){$y(0);let r=Ht(null);try{n(t,e)}finally{Ht(r)}}function RR(t,n,e){if(vA(n)){let r=Ht(null);try{let o=n.directiveStart,i=n.directiveEnd;for(let s=o;s<i;s++){let a=t.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{Ht(r)}}}var pd=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(pd||{});var E4;function C0e(){if(E4===void 0&&(E4=null,id.trustedTypes))try{E4=id.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return E4}function fz(t){return C0e()?.createScriptURL(t)||t}var j4=class{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${u4})`}};function Im(t){return t instanceof j4?t.changingThisBreaksApplicationSecurity:t}function OR(t,n){let e=vH(t);if(e!=null&&e!==n){if(e==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${u4})`)}return e===n}function vH(t){return t instanceof j4&&t.getTypeName()||null}var M0e=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wH(t){return t=String(t),t.match(M0e)?t:"unsafe:"+t}var sM=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(sM||{});function yH(t){let n=kH();return n?n.sanitize(sM.URL,t)||"":OR(t,"URL")?Im(t):wH(Ny(t))}function xH(t){let n=kH();if(n)return fz(n.sanitize(sM.RESOURCE_URL,t)||"");if(OR(t,"ResourceURL"))return fz(Im(t));throw new Te(904,!1)}function S0e(t,n){return n==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||n==="href"&&(t==="base"||t==="link")?xH:yH}function FR(t,n,e){return S0e(n,e)(t)}function kH(){let t=bt();return t&&t[pc].sanitizer}var T0e=/^>|^->|<!--|-->|--!>|<!-$/g,E0e=/(<|>)/g,I0e="\u200B$1\u200B";function D0e(t){return t.replace(T0e,n=>n.replace(E0e,I0e))}function ni(t){return t.ownerDocument}function _H(t){return t instanceof Function?t():t}function N0e(t,n,e){let r=t.length;for(;;){let o=t.indexOf(n,e);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let i=n.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}e=o+1}}var bH="ng-template";function A0e(t,n,e,r){let o=0;if(r){for(;o<n.length&&typeof n[o]=="string";o+=2)if(n[o]==="class"&&N0e(n[o+1].toLowerCase(),e,0)!==-1)return!0}else if(BR(t))return!1;if(o=n.indexOf(1,o),o>-1){let i;for(;++o<n.length&&typeof(i=n[o])=="string";)if(i.toLowerCase()===e)return!0}return!1}function BR(t){return t.type===4&&t.value!==bH}function R0e(t,n,e){let r=t.type===4&&!e?bH:t.value;return n===r}function O0e(t,n,e){let r=4,o=t.attrs,i=o!==null?P0e(o):0,s=!1;for(let a=0;a<n.length;a++){let l=n[a];if(typeof l=="number"){if(!s&&!hl(r)&&!hl(l))return!1;if(s&&hl(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!R0e(t,l,e)||l===""&&n.length===1){if(hl(r))return!1;s=!0}}else if(r&8){if(o===null||!A0e(t,o,l,e)){if(hl(r))return!1;s=!0}}else{let c=n[++a],u=F0e(l,o,BR(t),e);if(u===-1){if(hl(r))return!1;s=!0;continue}if(c!==""){let d;if(u>i?d="":d=o[u+1].toLowerCase(),r&2&&c!==d){if(hl(r))return!1;s=!0}}}}return hl(r)||s}function hl(t){return(t&1)===0}function F0e(t,n,e,r){if(n===null)return-1;let o=0;if(r||!e){let i=!1;for(;o<n.length;){let s=n[o];if(s===t)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=n[++o];for(;typeof a=="string";)a=n[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return L0e(n,t)}function CH(t,n,e=!1){for(let r=0;r<n.length;r++)if(O0e(t,n[r],e))return!0;return!1}function B0e(t){let n=t.attrs;if(n!=null){let e=n.indexOf(5);if((e&1)===0)return n[e+1]}return null}function P0e(t){for(let n=0;n<t.length;n++){let e=t[n];if(Kz(e))return n}return t.length}function L0e(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){let r=t[e];if(typeof r=="number")return-1;if(r===n)return e;e++}return-1}function $0e(t,n){e:for(let e=0;e<n.length;e++){let r=n[e];if(t.length===r.length){for(let o=0;o<t.length;o++)if(t[o]!==r[o])continue e;return!0}}return!1}function mz(t,n){return t?":not("+n.trim()+")":n}function V0e(t){let n=t[0],e=1,r=2,o="",i=!1;for(;e<t.length;){let s=t[e];if(typeof s=="string")if(r&2){let a=t[++e];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!hl(s)&&(n+=mz(i,o),o=""),r=s,i=i||!hl(r);e++}return o!==""&&(n+=mz(i,o)),n}function j0e(t){return t.map(V0e).join(",")}function z0e(t){let n=[],e=[],r=1,o=2;for(;r<t.length;){let i=t[r];if(typeof i=="string")o===2?i!==""&&n.push(i,t[++r]):o===8&&e.push(i);else{if(!hl(o))break;o=i}r++}return e.length&&n.push(1,...e),n}var Ks={};function H0e(t,n){return t.createText(n)}function U0e(t,n,e){t.setValue(n,e)}function G0e(t,n){return t.createComment(D0e(n))}function MH(t,n,e){return t.createElement(n,e)}function z4(t,n,e,r,o){t.insertBefore(n,e,r,o)}function SH(t,n,e){t.appendChild(n,e)}function gz(t,n,e,r,o){r!==null?z4(t,n,e,r,o):SH(t,n,e)}function TH(t,n,e,r){t.removeChild(null,n,e,r)}function W0e(t,n,e){t.setAttribute(n,"style",e)}function q0e(t,n,e){e===""?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function EH(t,n,e){let{mergedAttrs:r,classes:o,styles:i}=e;r!==null&&n0e(t,n,r),o!==null&&q0e(t,n,o),i!==null&&W0e(t,n,i)}function PR(t,n,e,r,o,i,s,a,l,c,u){let d=sr+r,p=d+o,h=K0e(d,p),f=typeof c=="function"?c():c;return h[At]={type:t,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:n,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:u}}function K0e(t,n){let e=[];for(let r=0;r<n;r++)e.push(r<t?null:Ks);return e}function Z0e(t){let n=t.tView;return n===null||n.incompleteFirstPass?t.tView=PR(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function LR(t,n,e,r,o,i,s,a,l,c,u){let d=n.blueprint.slice();return d[cl]=o,d[Kt]=r|4|128|8|64|1024,(c!==null||t&&t[Kt]&2048)&&(d[Kt]|=2048),kA(d),d[Vo]=d[vm]=t,d[lo]=e,d[pc]=s||t&&t[pc],d[Gn]=a||t&&t[Gn],d[sd]=l||t&&t[sd]||null,d[Xi]=i,d[Fy]=g0e(),d[gm]=u,d[mA]=c,d[Yi]=n.type==2?t[Yi]:d,d}function X0e(t,n,e){let r=ka(n,t),o=Z0e(e),i=t[pc].rendererFactory,s=$R(t,LR(t,o,null,IH(e),r,n,null,i.createRenderer(r,e),null,null,null));return t[n.index]=s}function IH(t){let n=16;return t.signals?n=4096:t.onPush&&(n=64),n}function DH(t,n,e,r){if(e===0)return-1;let o=n.length;for(let i=0;i<e;i++)n.push(r),t.blueprint.push(r),t.data.push(null);return o}function $R(t,n){return t[t1]?t[fA][ya]=n:t[t1]=n,t[fA]=n,n}function ee(t=1){NH(mr(),bt(),ud()+t,!1)}function NH(t,n,e,r){if(!r)if((n[Kt]&3)===3){let i=t.preOrderCheckHooks;i!==null&&N4(n,i,e)}else{let i=t.preOrderHooks;i!==null&&A4(n,i,0,e)}yh(e)}var aM=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(aM||{});function rR(t,n,e,r){let o=Ht(null);try{let[i,s,a]=t.inputs[e],l=null;(s&aM.SignalBased)!==0&&(l=n[i][Xr]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(n,r)),t.setInput!==null?t.setInput(n,l,r,e,i):zz(n,l,i,r)}finally{Ht(o)}}var fl=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(fl||{}),Y0e;function VR(t,n){return Y0e(t,n)}var Tm=new Set,lM=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(lM||{}),bh=new Ee(""),vz=new Set;function Zs(t){vz.has(t)||(vz.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var AH=!1,oR=class extends nt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,Lj()&&(this.destroyRef=R(gr,{optional:!0})??void 0,this.pendingTasks=R(gc,{optional:!0})??void 0)}emit(n){let e=Ht(null);try{super.next(n)}finally{Ht(e)}}subscribe(n,e,r){let o=n,i=e||(()=>null),s=r;if(n&&typeof n=="object"){let l=n;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return n instanceof Nn&&n.add(a),a}wrapInTimeout(n){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{n(e)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},cn=oR;function RH(t){let n,e;function r(){t=Cm;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{t(),r()})),()=>r()}function wz(t){return queueMicrotask(()=>t()),()=>{t=Cm}}var jR="isAngularZone",H4=jR+"_ID",Q0e=0,Zt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new cn(!1);onMicrotaskEmpty=new cn(!1);onStable=new cn(!1);onError=new cn(!1);constructor(n){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=AH}=n;if(typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,tge(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(jR)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Te(909,!1)}run(n,e,r){return this._inner.run(n,e,r)}runTask(n,e,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,n,J0e,Cm,Cm);try{return i.runTask(s,e,r)}finally{i.cancelTask(s)}}runGuarded(n,e,r){return this._inner.runGuarded(n,e,r)}runOutsideAngular(n){return this._outer.run(n)}},J0e={};function zR(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ege(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function n(){RH(()=>{t.callbackScheduled=!1,iR(t),t.isCheckStableRunning=!0,zR(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{n()}):t._outer.run(()=>{n()}),iR(t)}function tge(t){let n=()=>{ege(t)},e=Q0e++;t._inner=t._inner.fork({name:"angular",properties:{[jR]:!0,[H4]:e,[H4+e]:!0},onInvokeTask:(r,o,i,s,a,l)=>{if(nge(l))return r.invokeTask(i,s,a,l);try{return yz(t),r.invokeTask(i,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&n(),xz(t)}},onInvoke:(r,o,i,s,a,l,c)=>{try{return yz(t),r.invoke(i,s,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!rge(l)&&n(),xz(t)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,iR(t),zR(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function iR(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function yz(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xz(t){t._nesting--,zR(t)}var U4=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new cn;onMicrotaskEmpty=new cn;onStable=new cn;onError=new cn;run(n,e,r){return n.apply(e,r)}runGuarded(n,e,r){return n.apply(e,r)}runOutsideAngular(n){return n()}runTask(n,e,r,o){return n.apply(e,r)}};function nge(t){return OH(t,"__ignore_ng_zone__")}function rge(t){return OH(t,"__scheduler_tick__")}function OH(t,n){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[n]===!0}var cM=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new t})}return t})(),HR=[0,1,2,3],UR=(()=>{class t{ngZone=R(Zt);scheduler=R(wa);errorHandler=R(Ws,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(bh,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Wn(16),this.executing=!0;for(let r of HR)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[r]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let i=o.hooks[r];return i(o.pipelinedValue)},o.snapshot))}catch(i){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Wn(17)}register(e){let{view:r}=e;r!==void 0?((r[ym]??=[]).push(e),wh(r),r[Kt]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(lM.AFTER_NEXT_RENDER,e):e()}static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ky=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,e,r,o,i,s=null){this.impl=n,this.hooks=e,this.view=r,this.once=o,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let n=this.view?.[ym];n&&(this.view[ym]=n.filter(e=>e!==this))}};function Si(t,n){let e=n?.injector??R(Ct);return Zs("NgAfterNextRender"),ige(t,e,n,!0)}function oge(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function ige(t,n,e,r){let o=n.get(cM);o.impl??=n.get(UR);let i=n.get(bh,null,{optional:!0}),s=e?.manualCleanup!==!0?n.get(gr):null,a=n.get(bm,null,{optional:!0}),l=new Ky(o.impl,oge(t),a?.view,r,s,i?.snapshot(null));return o.impl.register(l),l}var FH=new Ee("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function BH(t,n,e){let r=t.get(FH);if(Array.isArray(n))for(let o of n)r.queue.add(o),e?.detachedLeaveAnimationFns?.push(o);else r.queue.add(n),e?.detachedLeaveAnimationFns?.push(n);r.scheduler&&r.scheduler(t)}function sge(t,n){let e=t.get(FH);if(n.detachedLeaveAnimationFns){for(let r of n.detachedLeaveAnimationFns)e.queue.delete(r);n.detachedLeaveAnimationFns=void 0}}function age(t,n){for(let[e,r]of n)BH(t,r.animateFns)}function kz(t,n,e,r){let o=t?.[xm]?.enter;n!==null&&o&&o.has(e.index)&&age(r,o)}function u1(t,n,e,r,o,i,s,a){if(o!=null){let l,c=!1;ul(o)?l=o:fc(o)&&(c=!0,o=o[cl]);let u=xa(o);t===0&&r!==null?(kz(a,r,i,e),s==null?SH(n,r,u):z4(n,r,u,s||null,!0)):t===1&&r!==null?(kz(a,r,i,e),z4(n,r,u,s||null,!0)):t===2?_z(a,i,e,d=>{TH(n,u,c,d)}):t===3&&_z(a,i,e,()=>{n.destroyNode(u)}),l!=null&&wge(n,t,e,l,i,r,s)}}function lge(t,n){PH(t,n),n[cl]=null,n[Xi]=null}function cge(t,n,e,r,o,i){r[cl]=o,r[Xi]=n,dM(t,r,e,1,o,i)}function PH(t,n){n[pc].changeDetectionScheduler?.notify(9),dM(t,n,n[Gn],2,null,null)}function uge(t){let n=t[t1];if(!n)return HA(t[At],t);for(;n;){let e=null;if(fc(n))e=n[t1];else{let r=n[Yr];r&&(e=r)}if(!e){for(;n&&!n[ya]&&n!==t;)fc(n)&&HA(n[At],n),n=n[Vo];n===null&&(n=t),fc(n)&&HA(n[At],n),e=n&&n[ya]}n=e}}function GR(t,n){let e=t[km],r=e.indexOf(n);e.splice(r,1)}function uM(t,n){if(_m(n))return;let e=n[Gn];e.destroyNode&&dM(t,n,e,3,null,null),uge(n)}function HA(t,n){if(_m(n))return;let e=Ht(null);try{n[Kt]&=-129,n[Kt]|=256,n[qs]&&ah(n[qs]),hge(t,n),pge(t,n),n[At].type===1&&n[Gn].destroy();let r=n[gh];if(r!==null&&ul(n[Vo])){r!==n[Vo]&&GR(r,n);let o=n[hc];o!==null&&o.detachView(t)}eR(n)}finally{Ht(e)}}function _z(t,n,e,r){let o=t?.[xm];if(o==null||o.leave==null||!o.leave.has(n.index))return r(!1);t&&Tm.add(t),BH(e,()=>{if(o.leave&&o.leave.has(n.index)){let s=o.leave.get(n.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:u}=c();a.push(u)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(a),dge(t,r)}else t&&Tm.delete(t),r(!1)},o)}function dge(t,n){let e=t[xm]?.running;if(e){e.then(()=>{t[xm].running=void 0,Tm.delete(t),n(!0)});return}n(!1)}function pge(t,n){let e=t.cleanup,r=n[e1];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(n[e1]=null);let o=n[rd];if(o!==null){n[rd]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=n[ad];if(i!==null){n[ad]=null;for(let s of i)s.destroy()}}function hge(t,n){let e;if(t!=null&&(e=t.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let o=n[e[r]];if(!(o instanceof Sm)){let i=e[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],l=i[s+1];Wn(4,a,l);try{l.call(a)}finally{Wn(5,a,l)}}else{Wn(4,o,i);try{i.call(o)}finally{Wn(5,o,i)}}}}}function LH(t,n,e){return fge(t,n.parent,e)}function fge(t,n,e){let r=n;for(;r!==null&&r.type&168;)n=r,r=n.parent;if(r===null)return e[cl];if(ld(r)){let{encapsulation:o}=t.data[r.directiveStart+r.componentOffset];if(o===pd.None||o===pd.Emulated)return null}return ka(r,e)}function $H(t,n,e){return gge(t,n,e)}function mge(t,n,e){return t.type&40?ka(t,e):null}var gge=mge,bz;function WR(t,n,e,r){let o=LH(t,r,n),i=n[Gn],s=r.parent||n[Xi],a=$H(s,r,n);if(o!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)gz(i,o,e[l],a,!1);else gz(i,o,e,a,!1);bz!==void 0&&bz(i,r,n,e,o)}function Uy(t,n){if(n!==null){let e=n.type;if(e&3)return ka(n,t);if(e&4)return sR(-1,t[n.index]);if(e&8){let r=n.child;if(r!==null)return Uy(t,r);{let o=t[n.index];return ul(o)?sR(-1,o):xa(o)}}else{if(e&128)return Uy(t,n.next);if(e&32)return VR(n,t)()||xa(t[n.index]);{let r=VH(t,n);if(r!==null){if(Array.isArray(r))return r[0];let o=hh(t[Yi]);return Uy(o,r)}else return Uy(t,n.next)}}}return null}function VH(t,n){if(n!==null){let r=t[Yi][Xi],o=n.projection;return r.projection[o]}return null}function sR(t,n){let e=Yr+t+1;if(e<n.length){let r=n[e],o=r[At].firstChild;if(o!==null)return Uy(r,o)}return n[vh]}function qR(t,n,e,r,o,i,s){for(;e!=null;){let a=r[sd];if(e.type===128){e=e.next;continue}let l=r[e.index],c=e.type;if(s&&n===0&&(l&&h1(xa(l),r),e.flags|=2),!iM(e))if(c&8)qR(t,n,e.child,r,o,i,!1),u1(n,t,a,o,l,e,i,r);else if(c&32){let u=VR(e,r),d;for(;d=u();)u1(n,t,a,o,d,e,i,r);u1(n,t,a,o,l,e,i,r)}else c&16?jH(t,n,r,e,o,i):u1(n,t,a,o,l,e,i,r);e=s?e.projectionNext:e.next}}function dM(t,n,e,r,o,i){qR(e,r,t.firstChild,n,o,i,!1)}function vge(t,n,e){let r=n[Gn],o=LH(t,e,n),i=e.parent||n[Xi],s=$H(i,e,n);jH(r,0,n,e,o,s)}function jH(t,n,e,r,o,i){let s=e[Yi],l=s[Xi].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];u1(n,t,e[sd],o,u,r,i,e)}else{let c=l,u=s[Vo];iH(r)&&(c.flags|=128),qR(t,n,c,u,o,i,!0)}}function wge(t,n,e,r,o,i,s){let a=r[vh],l=xa(r);a!==l&&u1(n,t,e,i,a,o,s);for(let c=Yr;c<r.length;c++){let u=r[c];dM(u[At],u,t,n,i,a)}}function yge(t,n,e,r,o){if(n)o?t.addClass(e,r):t.removeClass(e,r);else{let i=r.indexOf("-")===-1?void 0:fl.DashCase;o==null?t.removeStyle(e,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=fl.Important),t.setStyle(e,r,o,i))}}function zH(t,n,e,r,o){let i=ud(),s=r&2;try{yh(-1),s&&n.length>sr&&NH(t,n,sr,!1),Wn(s?2:0,o,e),e(r,o)}finally{yh(i),Wn(s?3:1,o,e)}}function pM(t,n,e){Cge(t,n,e),(e.flags&64)===64&&Mge(t,n,e)}function ox(t,n,e=ka){let r=n.localNames;if(r!==null){let o=n.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?e(n,t):t[s];t[o++]=a}}}function xge(t,n,e,r){let i=r.get(fH,hH)||e===pd.ShadowDom,s=t.selectRootElement(n,i);return kge(s),s}function kge(t){_ge(t)}var _ge=()=>null;function bge(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function HH(t,n,e,r,o,i){let s=n[At];if(hM(t,s,n,e,r)){ld(t)&&GH(n,t.index);return}t.type&3&&(e=bge(e)),UH(t,n,e,r,o,i)}function UH(t,n,e,r,o,i){if(t.type&3){let s=ka(t,n);r=i!=null?i(r,t.value||"",e):r,o.setProperty(s,e,r)}else t.type&12}function GH(t,n){let e=_a(n,t);e[Kt]&16||(e[Kt]|=64)}function Cge(t,n,e){let r=e.directiveStart,o=e.directiveEnd;ld(e)&&X0e(n,e,t.data[r+e.componentOffset]),t.firstCreatePass||V4(e,n);let i=e.initialInputs;for(let s=r;s<o;s++){let a=t.data[s],l=qy(n,t,s,e);if(h1(l,n),i!==null&&Ege(n,s-r,l,a,e,i),dl(a)){let c=_a(e.index,n);c[lo]=qy(n,t,s,e)}}}function Mge(t,n,e){let r=e.directiveStart,o=e.directiveEnd,i=e.index,s=Jj();try{yh(i);for(let a=r;a<o;a++){let l=t.data[a],c=n[a];_4(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Sge(l,c)}}finally{yh(-1),_4(s)}}function Sge(t,n){t.hostBindings!==null&&t.hostBindings(1,n)}function KR(t,n){let e=t.directiveRegistry,r=null;if(e)for(let o=0;o<e.length;o++){let i=e[o];CH(n,i.selectors,!1)&&(r??=[],dl(i)?r.unshift(i):r.push(i))}return r}function Tge(t,n,e,r,o,i){let s=ka(t,n);WH(n[Gn],s,i,t.value,e,r,o)}function WH(t,n,e,r,o,i,s){if(i==null)t.removeAttribute(n,o,e);else{let a=s==null?Ny(i):s(i,r||"",o);t.setAttribute(n,o,a,e)}}function Ege(t,n,e,r,o,i){let s=i[n];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];rR(r,e,l,c)}}function ZR(t,n,e,r,o){let i=sr+e,s=n[At],a=o(s,n,t,r,e);n[i]=a,i1(t,!0);let l=t.type===2;return l?(EH(n[Gn],a,t),(Wj()===0||n1(t))&&h1(a,n),qj()):h1(a,n),S4()&&(!l||!iM(t))&&WR(s,n,a,t),t}function XR(t){let n=t;return NA()?AA():(n=n.parent,i1(n,!1)),n}function Ige(t,n){let e=t[sd];if(!e)return;let r;try{r=e.get(xs,null)}catch{r=null}r?.(n)}function hM(t,n,e,r,o){let i=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],d=n.data[c];rR(d,e[c],u,o),a=!0}if(i)for(let l of i){let c=e[l],u=n.data[l];rR(u,c,r,o),a=!0}return a}function Dge(t,n){let e=_a(n,t),r=e[At];Nge(r,e);let o=e[cl];o!==null&&e[gm]===null&&(e[gm]=mH(o,e[sd])),Wn(18),YR(r,e,e[lo]),Wn(19,e[lo])}function Nge(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}function YR(t,n,e){C4(n);try{let r=t.viewQuery;r!==null&&nR(1,r,e);let o=t.template;o!==null&&zH(t,n,o,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[hc]?.finishViewCreation(t),t.staticContentQueries&&gH(t,n),t.staticViewQueries&&nR(2,t.viewQuery,e);let i=t.components;i!==null&&Age(n,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{n[Kt]&=-5,M4()}}function Age(t,n){for(let e=0;e<n.length;e++)Dge(t,n[e])}function ix(t,n,e,r){let o=Ht(null);try{let i=n.tView,a=t[Kt]&4096?4096:16,l=LR(t,i,e,a,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[n.index];l[gh]=c;let u=t[hc];return u!==null&&(l[hc]=u.createEmbeddedView(i)),YR(i,l,e),l}finally{Ht(o)}}function f1(t,n){return!n||n.firstChild===null||iH(t)}function Zy(t,n,e,r,o=!1){for(;e!==null;){if(e.type===128){e=o?e.projectionNext:e.next;continue}let i=n[e.index];i!==null&&r.push(xa(i)),ul(i)&&qH(i,r);let s=e.type;if(s&8)Zy(t,n,e.child,r);else if(s&32){let a=VR(e,n),l;for(;l=a();)r.push(l)}else if(s&16){let a=VH(n,e);if(Array.isArray(a))r.push(...a);else{let l=hh(n[Yi]);Zy(l[At],l,a,r,!0)}}e=o?e.projectionNext:e.next}return r}function qH(t,n){for(let e=Yr;e<t.length;e++){let r=t[e],o=r[At].firstChild;o!==null&&Zy(r[At],r,o,n)}t[vh]!==t[cl]&&n.push(t[vh])}function KH(t){if(t[ym]!==null){for(let n of t[ym])n.impl.addSequence(n);t[ym].length=0}}var ZH=[];function Rge(t){return t[qs]??Oge(t)}function Oge(t){let n=ZH.pop()??Object.create(Bge);return n.lView=t,n}function Fge(t){t.lView[qs]!==t&&(t.lView=null,ZH.push(t))}var Bge=lt(ae({},ih),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{wh(t.lView)},consumerOnSignalRead(){this.lView[qs]=this}});function Pge(t){let n=t[qs]??Object.create(Lge);return n.lView=t,n}var Lge=lt(ae({},ih),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let n=hh(t.lView);for(;n&&!XH(n[At]);)n=hh(n);n&&_A(n)},consumerOnSignalRead(){this.lView[qs]=this}});function XH(t){return t.type!==2}function YH(t){if(t[ad]===null)return;let n=!0;for(;n;){let e=!1;for(let r of t[ad])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));n=e&&!!(t[Kt]&8192)}}var $ge=100;function QH(t,n=0){let r=t[pc].rendererFactory,o=!1;o||r.begin?.();try{Vge(t,n)}finally{o||r.end?.()}}function Vge(t,n){let e=RA();try{s1(!0),aR(t,n);let r=0;for(;Ly(t);){if(r===$ge)throw new Te(103,!1);r++,aR(t,1)}}finally{s1(e)}}function jge(t,n,e,r){if(_m(n))return;let o=n[Kt],i=!1,s=!1;C4(n);let a=!0,l=null,c=null;i||(XH(t)?(c=Rge(n),l=Xu(c)):RC()===null?(a=!1,c=Pge(n),l=Xu(c)):n[qs]&&(ah(n[qs]),n[qs]=null));try{kA(n),Xj(t.bindingStartIndex),e!==null&&zH(t,n,e,2,r);let u=(o&3)===3;if(!i)if(u){let h=t.preOrderCheckHooks;h!==null&&N4(n,h,null)}else{let h=t.preOrderHooks;h!==null&&A4(n,h,0,null),jA(n,0)}if(s||zge(n),YH(n),JH(n,0),t.contentQueries!==null&&gH(t,n),!i)if(u){let h=t.contentCheckHooks;h!==null&&N4(n,h)}else{let h=t.contentHooks;h!==null&&A4(n,h,1),jA(n,1)}Uge(t,n);let d=t.components;d!==null&&tU(n,d,0);let p=t.viewQuery;if(p!==null&&nR(2,p,r),!i)if(u){let h=t.viewCheckHooks;h!==null&&N4(n,h)}else{let h=t.viewHooks;h!==null&&A4(n,h,2),jA(n,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),n[w4]){for(let h of n[w4])h();n[w4]=null}i||(KH(n),n[Kt]&=-73)}catch(u){throw i||wh(n),u}finally{c!==null&&(sh(c,l),a&&Fge(c)),M4()}}function JH(t,n){for(let e=aH(t);e!==null;e=lH(e))for(let r=Yr;r<e.length;r++){let o=e[r];eU(o,n)}}function zge(t){for(let n=aH(t);n!==null;n=lH(n)){if(!(n[Kt]&2))continue;let e=n[km];for(let r=0;r<e.length;r++){let o=e[r];_A(o)}}}function Hge(t,n,e){Wn(18);let r=_a(n,t);eU(r,e),Wn(19,r[lo])}function eU(t,n){y4(t)&&aR(t,n)}function aR(t,n){let r=t[At],o=t[Kt],i=t[qs],s=!!(n===0&&o&16);if(s||=!!(o&64&&n===0),s||=!!(o&1024),s||=!!(i?.dirty&&om(i)),s||=!1,i&&(i.dirty=!1),t[Kt]&=-9217,s)jge(r,t,r.template,t[lo]);else if(o&8192){let a=Ht(null);try{YH(t),JH(t,1);let l=r.components;l!==null&&tU(t,l,1),KH(t)}finally{Ht(a)}}}function tU(t,n,e){for(let r=0;r<n.length;r++)Hge(t,n[r],e)}function Uge(t,n){let e=t.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let o=e[r];if(o<0)yh(~o);else{let i=o,s=e[++r],a=e[++r];Qj(s,i);let l=n[i];Wn(24,l),a(2,l),Wn(25,l)}}}finally{yh(-1)}}function QR(t,n){let e=RA()?64:1088;for(t[pc].changeDetectionScheduler?.notify(n);t;){t[Kt]|=e;let r=hh(t);if(r1(t)&&!r)return t;t=r}return null}function nU(t,n,e,r){return[t,!0,0,n,null,r,null,e,null,null]}function rU(t,n){let e=Yr+n;if(e<t.length)return t[e]}function sx(t,n,e,r=!0){let o=n[At];if(Gge(o,n,t,e),r){let s=sR(e,t),a=n[Gn],l=a.parentNode(t[vh]);l!==null&&cge(o,t[Xi],a,n,l,s)}let i=n[gm];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function oU(t,n){let e=Xy(t,n);return e!==void 0&&uM(e[At],e),e}function Xy(t,n){if(t.length<=Yr)return;let e=Yr+n,r=t[e];if(r){let o=r[gh];o!==null&&o!==t&&GR(o,r),n>0&&(t[e-1][ya]=r[ya]);let i=Ay(t,Yr+n);lge(r[At],r);let s=i[hc];s!==null&&s.detachView(i[At]),r[Vo]=null,r[ya]=null,r[Kt]&=-129}return r}function Gge(t,n,e,r){let o=Yr+r,i=e.length;r>0&&(e[o-1][ya]=n),r<i-Yr?(n[ya]=e[o],aA(e,Yr+r,n)):(e.push(n),n[ya]=null),n[Vo]=e;let s=n[gh];s!==null&&e!==s&&iU(s,n);let a=n[hc];a!==null&&a.insertView(t),x4(n),n[Kt]|=128}function iU(t,n){let e=t[km],r=n[Vo];if(fc(r))t[Kt]|=2;else{let o=r[Vo][Yi];n[Yi]!==o&&(t[Kt]|=2)}e===null?t[km]=[n]:e.push(n)}var xh=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let n=this._lView,e=n[At];return Zy(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e}get context(){return this._lView[lo]}set context(n){this._lView[lo]=n}get destroyed(){return _m(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[Vo];if(ul(n)){let e=n[By],r=e?e.indexOf(this):-1;r>-1&&(Xy(n,r),Ay(e,r))}this._attachedToViewContainer=!1}uM(this._lView[At],this._lView)}onDestroy(n){bA(this._lView,n)}markForCheck(){QR(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Kt]&=-129}reattach(){x4(this._lView),this._lView[Kt]|=128}detectChanges(){this._lView[Kt]|=1024,QH(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=r1(this._lView),e=this._lView[gh];e!==null&&!n&&GR(e,this._lView),PH(this._lView[At],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=n;let e=r1(this._lView),r=this._lView[gh];r!==null&&!e&&iU(r,this._lView),x4(this._lView)}};var ti=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Wge;constructor(e,r,o){this._declarationLView=e,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,r){return this.createEmbeddedViewImpl(e,r)}createEmbeddedViewImpl(e,r,o){let i=ix(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:r,dehydratedView:o});return new xh(i)}}return t})();function Wge(){return fM(ko(),bt())}function fM(t,n){return t.type&4?new ti(n,t,w1(t,n)):null}function x1(t,n,e,r,o){let i=t.data[n];if(i===null)i=qge(t,n,e,r,o),Yj()&&(i.flags|=32);else if(i.type&64){i.type=e,i.value=r,i.attrs=o;let s=Kj();i.injectorIndex=s===null?-1:s.injectorIndex}return i1(i,!0),i}function qge(t,n,e,r,o){let i=DA(),s=NA(),a=s?i:i&&i.parent,l=t.data[n]=Zge(t,a,e,n,r,o);return Kge(t,l,i,s),l}function Kge(t,n,e,r){t.firstChild===null&&(t.firstChild=n),e!==null&&(r?e.child==null&&n.parent!==null&&(e.child=n):e.next===null&&(e.next=n,n.prev=e))}function Zge(t,n,e,r,o,i){let s=n?n.injectorIndex:-1,a=0;return TA()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Let=new RegExp(`^(\\d+)*(${x0e}|${y0e})*(.*)`);function Xge(t){let n=t[gA]??[],r=t[Vo][Gn],o=[];for(let i of n)i.data[pH]!==void 0?o.push(i):Yge(i,r);t[gA]=o}function Yge(t,n){let e=0,r=t.firstChild;if(r){let o=t.data[dH];for(;e<o;){let i=r.nextSibling;TH(n,r,!1),r=i,e++}}}var Qge=()=>null,Jge=()=>null;function G4(t,n){return Qge(t,n)}function sU(t,n,e){return Jge(t,n,e)}var aU=class{},mM=class{},lR=class{resolveComponentFactory(n){throw new Te(917,!1)}},ax=class{static NULL=new lR},co=class{},vr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>e2e()}return t})();function e2e(){let t=bt(),n=ko(),e=_a(n.index,t);return(fc(e)?e:t)[Gn]}var lU=(()=>{class t{static \u0275prov=_e({token:t,providedIn:"root",factory:()=>null})}return t})();var O4={},cR=class{injector;parentInjector;constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,r){let o=this.injector.get(n,O4,r);return o!==O4||e===O4?o:this.parentInjector.get(n,e,r)}};function W4(t,n,e){let r=e?t.styles:null,o=e?t.classes:null,i=0;if(n!==null)for(let s=0;s<n.length;s++){let a=n[s];if(typeof a=="number")i=a;else if(i==1)o=d4(o,a);else if(i==2){let l=a,c=n[++s];r=d4(r,l+": "+c+";")}}e?t.styles=r:t.stylesWithoutHost=r,e?t.classes=o:t.classesWithoutHost=o}function Xt(t,n=0){let e=bt();if(e===null)return rt(t,n);let r=ko();return tH(r,e,$o(t),n)}function JR(){let t="invalid";throw new Error(t)}function cU(t,n,e,r,o){let i=r===null?null:{"":-1},s=o(t,e);if(s!==null){let a=s,l=null,c=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(s);break}r2e(t,n,e,a,i,l,c)}i!==null&&r!==null&&t2e(e,r,i)}function t2e(t,n,e){let r=t.localNames=[];for(let o=0;o<n.length;o+=2){let i=e[n[o+1]];if(i==null)throw new Te(-301,!1);r.push(n[o],i)}}function n2e(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function r2e(t,n,e,r,o,i,s){let a=r.length,l=!1;for(let p=0;p<a;p++){let h=r[p];!l&&dl(h)&&(l=!0,n2e(t,e,p)),QA(V4(e,n),t,h.type)}c2e(e,t.data.length,a);for(let p=0;p<a;p++){let h=r[p];h.providersResolver&&h.providersResolver(h)}let c=!1,u=!1,d=DH(t,n,a,null);a>0&&(e.directiveToIndex=new Map);for(let p=0;p<a;p++){let h=r[p];if(e.mergedAttrs=p1(e.mergedAttrs,h.hostAttrs),i2e(t,e,n,d,h),l2e(d,h,o),s!==null&&s.has(h)){let[m,g]=s.get(h);e.directiveToIndex.set(h.type,[d,m+e.directiveStart,g+e.directiveStart])}else(i===null||!i.has(h))&&e.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(e.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(e.flags|=64);let f=h.type.prototype;!c&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),c=!0),!u&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}o2e(t,e,i)}function o2e(t,n,e){for(let r=n.directiveStart;r<n.directiveEnd;r++){let o=t.data[r];if(e===null||!e.has(o))Cz(0,n,o,r),Cz(1,n,o,r),Sz(n,r,!1);else{let i=e.get(o);Mz(0,n,i,r),Mz(1,n,i,r),Sz(n,r,!0)}}}function Cz(t,n,e,r){let o=t===0?e.inputs:e.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;t===0?s=n.inputs??={}:s=n.outputs??={},s[i]??=[],s[i].push(r),uU(n,i)}}function Mz(t,n,e,r){let o=t===0?e.inputs:e.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;t===0?a=n.hostDirectiveInputs??={}:a=n.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),uU(n,s)}}function uU(t,n){n==="class"?t.flags|=8:n==="style"&&(t.flags|=16)}function Sz(t,n,e){let{attrs:r,inputs:o,hostDirectiveInputs:i}=t;if(r===null||!e&&o===null||e&&i===null||BR(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&o.hasOwnProperty(l)){let c=o[l];for(let u of c)if(u===n){s??=[],s.push(l,r[a+1]);break}}else if(e&&i.hasOwnProperty(l)){let c=i[l];for(let u=0;u<c.length;u+=2)if(c[u]===n){s??=[],s.push(c[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function i2e(t,n,e,r,o){t.data[r]=o;let i=o.factory||(o.factory=ph(o.type,!0)),s=new Sm(i,dl(o),Xt,null);t.blueprint[r]=s,e[r]=s,s2e(t,n,r,DH(t,e,o.hostVars,Ks),o)}function s2e(t,n,e,r,o){let i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~n.index;a2e(s)!=a&&s.push(a),s.push(e,r,i)}}function a2e(t){let n=t.length;for(;n>0;){let e=t[--n];if(typeof e=="number"&&e<0)return e}return 0}function l2e(t,n,e){if(e){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)e[n.exportAs[r]]=t;dl(n)&&(e[""]=t)}}function c2e(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function e6(t,n,e,r,o,i,s,a){let l=n[At],c=l.consts,u=ba(c,s),d=x1(l,t,e,r,u);return i&&cU(l,n,d,ba(c,a),o),d.mergedAttrs=p1(d.mergedAttrs,d.attrs),d.attrs!==null&&W4(d,d.attrs,!1),d.mergedAttrs!==null&&W4(d,d.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,d),d}function t6(t,n){Wz(t,n),vA(n)&&t.queries.elementEnd(n)}function u2e(t,n,e,r,o,i){let s=n.consts,a=ba(s,o),l=x1(n,t,e,r,a);if(l.mergedAttrs=p1(l.mergedAttrs,l.attrs),i!=null){let c=ba(s,i);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&W4(l,l.attrs,!1),l.mergedAttrs!==null&&W4(l,l.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,l),l}function n6(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function k1(t,n,e){return t[n]=e}function dU(t,n){return t[n]}function Qi(t,n,e){if(e===Ks)return!1;let r=t[n];return Object.is(r,e)?!1:(t[n]=e,!0)}function q4(t,n,e,r){let o=Qi(t,n,e);return Qi(t,n+1,r)||o}function d2e(t,n,e,r,o){let i=q4(t,n,e,r);return Qi(t,n+2,o)||i}function pU(t,n,e,r,o,i){let s=q4(t,n,e,r);return q4(t,n+2,o,i)||s}function F4(t,n,e){return function r(o){let i=ld(t)?_a(t.index,n):n;QR(i,5);let s=n[lo],a=Tz(n,s,e,o),l=r.__ngNextListenerFn__;for(;l;)a=Tz(n,s,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function Tz(t,n,e,r){let o=Ht(null);try{return Wn(6,n,e),e(r)!==!1}catch(i){return Ige(t,i),!1}finally{Wn(7,n,e),Ht(o)}}function hU(t,n,e,r,o,i,s,a){let l=n1(t),c=!1,u=null;if(!r&&l&&(u=h2e(n,e,i,t.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,c=!0}else{let d=ka(t,e),p=r?r(d):d;_0e(e,p,i,a);let h=o.listen(p,i,a);if(!p2e(i)){let f=r?m=>r(xa(m[t.index])):t.index;fU(f,n,e,i,a,h,!1)}}return c}function p2e(t){return t.startsWith("animation")||t.startsWith("transition")}function h2e(t,n,e,r){let o=t.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===e&&o[i+1]===r){let a=n[e1],l=o[i+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(i+=2)}return null}function fU(t,n,e,r,o,i,s){let a=n.firstCreatePass?MA(n):null,l=CA(e),c=l.length;l.push(o,i),a&&a.push(r,t,c,(c+1)*(s?-1:1))}function Ez(t,n,e,r,o,i){let s=n[e],a=n[At],c=a.data[e].outputs[r],d=s[c].subscribe(i);fU(t.index,a,n,o,i,d,!0)}var uR=Symbol("BINDING");var K4=class extends ax{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let e=dc(n);return new kh(e,this.ngModule)}};function f2e(t){return Object.keys(t).map(n=>{let[e,r,o]=t[n],i={propName:e,templateName:n,isSignal:(r&aM.SignalBased)!==0};return o&&(i.transform=o),i})}function m2e(t){return Object.keys(t).map(n=>({propName:t[n],templateName:n}))}function g2e(t,n,e){let r=n instanceof ir?n:n?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new cR(e,r):e}function v2e(t){let n=t.get(co,null);if(n===null)throw new Te(407,!1);let e=t.get(lU,null),r=t.get(wa,null);return{rendererFactory:n,sanitizer:e,changeDetectionScheduler:r,ngReflect:!1}}function w2e(t,n){let e=mU(t);return MH(n,e,e==="svg"?wA:e==="math"?Vj:null)}function mU(t){return(t.selectors[0][0]||"div").toLowerCase()}var kh=class extends mM{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=f2e(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=m2e(this.componentDef.outputs),this.cachedOutputs}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=j0e(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!e}create(n,e,r,o,i,s){Wn(22);let a=Ht(null);try{let l=this.componentDef,c=y2e(r,l,s,i),u=g2e(l,o||this.ngModule,n),d=v2e(u),p=d.rendererFactory.createRenderer(null,l),h=r?xge(p,r,l.encapsulation,u):w2e(l,p),f=s?.some(Iz)||i?.some(v=>typeof v!="function"&&v.bindings.some(Iz)),m=LR(null,c,null,512|IH(l),null,null,d,p,u,null,mH(h,u,!0));m[sr]=h,C4(m);let g=null;try{let v=e6(sr,m,2,"#host",()=>c.directiveRegistry,!0,0);EH(p,h,v),h1(h,m),pM(c,m,v),RR(c,v,m),t6(c,v),e!==void 0&&k2e(v,this.ngContentSelectors,e),g=_a(v.index,m),m[lo]=g[lo],YR(c,m,null)}catch(v){throw g!==null&&eR(g),eR(m),v}finally{Wn(23),M4()}return new Z4(this.componentType,m,!!f)}finally{Ht(a)}}};function y2e(t,n,e,r){let o=t?["ng-version","20.3.11"]:z0e(n.selectors[0]),i=null,s=null,a=0;if(e)for(let u of e)a+=u[uR].requiredVars,u.create&&(u.targetIdx=0,(i??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let p of d.bindings){a+=p[uR].requiredVars;let h=u+1;p.create&&(p.targetIdx=h,(i??=[]).push(p)),p.update&&(p.targetIdx=h,(s??=[]).push(p))}}let l=[n];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,p=v4(d);l.push(p)}return PR(0,null,x2e(i,s),1,a,l,null,null,null,[o],null)}function x2e(t,n){return!t&&!n?null:e=>{if(e&1&&t)for(let r of t)r.create();if(e&2&&n)for(let r of n)r.update()}}function Iz(t){let n=t[uR].kind;return n==="input"||n==="twoWay"}var Z4=class extends aU{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,e,r){super(),this._rootLView=e,this._hasInputBindings=r,this._tNode=Py(e[At],sr),this.location=w1(this._tNode,e),this.instance=_a(this._tNode.index,e)[lo],this.hostView=this.changeDetectorRef=new xh(e,void 0),this.componentType=n}setInput(n,e){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;let o=this._rootLView,i=hM(r,o[At],o,n,e);this.previousInputValues.set(n,e);let s=_a(r.index,o);QR(s,1)}get injector(){return new Mm(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function k2e(t,n,e){let r=t.projection=[];for(let o=0;o<n.length;o++){let i=e[o];r.push(i!=null&&i.length?Array.from(i):null)}}var _o=(()=>{class t{static __NG_ELEMENT_ID__=_2e}return t})();function _2e(){let t=ko();return vU(t,bt())}var b2e=_o,gU=class extends b2e{_lContainer;_hostTNode;_hostLView;constructor(n,e,r){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=r}get element(){return w1(this._hostTNode,this._hostLView)}get injector(){return new Mm(this._hostTNode,this._hostLView)}get parentInjector(){let n=IR(this._hostTNode,this._hostLView);if(Zz(n)){let e=L4(n,this._hostLView),r=P4(n),o=e[At].data[r+8];return new Mm(o,e)}else return new Mm(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let e=Dz(this._lContainer);return e!==null&&e[n]||null}get length(){return this._lContainer.length-Yr}createEmbeddedView(n,e,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=G4(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(e||{},i,s);return this.insertImpl(a,o,f1(this._hostTNode,s)),a}createComponent(n,e,r,o,i,s,a){let l=n&&!Kme(n),c;if(l)c=e;else{let g=e||{};c=g.index,r=g.injector,o=g.projectableNodes,i=g.environmentInjector||g.ngModuleRef,s=g.directives,a=g.bindings}let u=l?n:new kh(dc(n)),d=r||this.parentInjector;if(!i&&u.ngModule==null){let v=(l?d:this.parentInjector).get(ir,null);v&&(i=v)}let p=dc(u.componentType??{}),h=G4(this._lContainer,p?.id??null),f=h?.firstChild??null,m=u.create(d,o,f,i,s,a);return this.insertImpl(m.hostView,c,f1(this._hostTNode,h)),m}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,r){let o=n._lView;if(zj(o)){let a=this.indexOf(n);if(a!==-1)this.detach(a);else{let l=o[Vo],c=new gU(l,l[Xi],l[Vo]);c.detach(c.indexOf(n))}}let i=this._adjustIndex(e),s=this._lContainer;return sx(s,o,i,r),n.attachToViewContainerRef(),aA(UA(s),i,n),n}move(n,e){return this.insert(n,e)}indexOf(n){let e=Dz(this._lContainer);return e!==null?e.indexOf(n):-1}remove(n){let e=this._adjustIndex(n,-1),r=Xy(this._lContainer,e);r&&(Ay(UA(this._lContainer),e),uM(r[At],r))}detach(n){let e=this._adjustIndex(n,-1),r=Xy(this._lContainer,e);return r&&Ay(UA(this._lContainer),e)!=null?new xh(r):null}_adjustIndex(n,e=0){return n??this.length+e}};function Dz(t){return t[By]}function UA(t){return t[By]||(t[By]=[])}function vU(t,n){let e,r=n[t.index];return ul(r)?e=r:(e=nU(r,n,null,t),n[t.index]=e,$R(n,e)),M2e(e,n,t,r),new gU(e,t,n)}function C2e(t,n){let e=t[Gn],r=e.createComment(""),o=ka(n,t),i=e.parentNode(o);return z4(e,i,r,e.nextSibling(o),!1),r}var M2e=E2e,S2e=()=>!1;function T2e(t,n,e){return S2e(t,n,e)}function E2e(t,n,e,r){if(t[vh])return;let o;e.type&8?o=xa(r):o=C2e(n,e),t[vh]=o}var dR=class t{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},pR=class t{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){let e=n.queries;if(e!==null){let r=n.contentQueries!==null?n.contentQueries[0]:e.length,o=[];for(let i=0;i<r;i++){let s=e.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new t(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)o6(n,e).matches!==null&&this.queries[e].setDirty()}},X4=class{flags;read;predicate;constructor(n,e,r=null){this.flags=e,this.read=r,typeof n=="string"?this.predicate=R2e(n):this.predicate=n}},hR=class t{queries;constructor(n=[]){this.queries=n}elementStart(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let r=0;r<this.length;r++){let o=e!==null?e.length:0,i=this.getByIndex(r).embeddedTView(n,o);i&&(i.indexInDeclarationView=r,e!==null?e.push(i):e=[i])}return e!==null?new t(e):null}template(n,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},fR=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,e=-1){this.metadata=n,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new t(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(n,e,I2e(e,i)),this.matchTNodeWithReadOption(n,e,R4(e,n,i,!1,!1))}else r===ti?e.type&4&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,R4(e,n,r,!1,!1))}matchTNodeWithReadOption(n,e,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===Ft||o===_o||o===ti&&e.type&4)this.addMatch(e.index,-2);else{let i=R4(e,n,o,!1,!1);i!==null&&this.addMatch(e.index,i)}else this.addMatch(e.index,r)}}addMatch(n,e){this.matches===null?this.matches=[n,e]:this.matches.push(n,e)}};function I2e(t,n){let e=t.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===n)return e[r+1]}return null}function D2e(t,n){return t.type&11?w1(t,n):t.type&4?fM(t,n):null}function N2e(t,n,e,r){return e===-1?D2e(n,t):e===-2?A2e(t,n,r):qy(t,t[At],e,n)}function A2e(t,n,e){if(e===Ft)return w1(n,t);if(e===ti)return fM(n,t);if(e===_o)return vU(n,t)}function wU(t,n,e,r){let o=n[hc].queries[r];if(o.matches===null){let i=t.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=i[c];a.push(N2e(n,u,s[l+1],e.metadata.read))}}o.matches=a}return o.matches}function mR(t,n,e,r){let o=t.queries.getByIndex(e),i=o.matches;if(i!==null){let s=wU(t,n,o,e);for(let a=0;a<i.length;a+=2){let l=i[a];if(l>0)r.push(s[a/2]);else{let c=i[a+1],u=n[-l];for(let d=Yr;d<u.length;d++){let p=u[d];p[gh]===p[Vo]&&mR(p[At],p,c,r)}if(u[km]!==null){let d=u[km];for(let p=0;p<d.length;p++){let h=d[p];mR(h[At],h,c,r)}}}}}return r}function r6(t,n){return t[hc].queries[n].queryList}function yU(t,n,e){let r=new dd((e&4)===4);return Gj(t,n,r,r.destroy),(n[hc]??=new pR).queries.push(new dR(r))-1}function xU(t,n,e){let r=mr();return r.firstCreatePass&&(_U(r,new X4(t,n,e),-1),(n&2)===2&&(r.staticViewQueries=!0)),yU(r,bt(),n)}function kU(t,n,e,r){let o=mr();if(o.firstCreatePass){let i=ko();_U(o,new X4(n,e,r),i.index),O2e(o,t),(e&2)===2&&(o.staticContentQueries=!0)}return yU(o,bt(),e)}function R2e(t){return t.split(",").map(n=>n.trim())}function _U(t,n,e){t.queries===null&&(t.queries=new hR),t.queries.track(new fR(n,e))}function O2e(t,n){let e=t.contentQueries||(t.contentQueries=[]),r=e.length?e[e.length-1]:-1;n!==r&&e.push(t.queries.length-1,n)}function o6(t,n){return t.queries.getByIndex(n)}function bU(t,n){let e=t[At],r=o6(e,n);return r.crossesNgTemplate?mR(e,t,n,[]):wU(e,t,r,n)}function i6(t,n,e){let r,o=gy(()=>{r._dirtyCounter();let i=F2e(r,t);if(n&&i===void 0)throw new Te(-951,!1);return i});return r=o[Xr],r._dirtyCounter=Ye(0),r._flatValue=void 0,o}function s6(t){return i6(!0,!1,t)}function a6(t){return i6(!0,!0,t)}function CU(t){return i6(!1,!1,t)}function MU(t,n){let e=t[Xr];e._lView=bt(),e._queryIndex=n,e._queryList=r6(e._lView,n),e._queryList.onDirty(()=>e._dirtyCounter.update(r=>r+1))}function F2e(t,n){let e=t._lView,r=t._queryIndex;if(e===void 0||r===void 0||e[Kt]&4)return n?void 0:Mi;let o=r6(e,r),i=bU(e,r);return o.reset(i,oH),n?o.first:o._changesDetected||t._flatValue===void 0?t._flatValue=o.toArray():t._flatValue}var ml=class{},gM=class{};function l6(t,n){return new Yy(t,n??null,[])}var Yy=class extends ml{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new K4(this);constructor(n,e,r,o=!0){super(),this.ngModuleType=n,this._parent=e;let i=uA(n);this._bootstrapComponents=_H(i.bootstrap),this._r3Injector=PA(n,e,[{provide:ml,useValue:this},{provide:ax,useValue:this.componentFactoryResolver},...r],od(n),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},Y4=class extends gM{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new Yy(this.moduleType,n,[])}};var Qy=class extends ml{injector;componentFactoryResolver=new K4(this);instance=null;constructor(n){super();let e=new fm([...n.providers,{provide:ml,useValue:this},{provide:ax,useValue:this.componentFactoryResolver}],n.parent||J2(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function _1(t,n,e=null){return new Qy({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}var B2e=(()=>{class t{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=dA(!1,e.type),o=r.length>0?_1([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,o)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=_e({token:t,providedIn:"environment",factory:()=>new t(rt(ir))})}return t})();function je(t){return v1(()=>{let n=SU(t),e=lt(ae({},n),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===DR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:n.standalone?o=>o.get(B2e).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||pd.Emulated,styles:t.styles||Mi,_:null,schemas:t.schemas||null,tView:null,id:""});n.standalone&&Zs("NgStandalone"),TU(e);let r=t.dependencies;return e.directiveDefs=Nz(r,P2e),e.pipeDefs=Nz(r,Rj),e.id=V2e(e),e})}function P2e(t){return dc(t)||v4(t)}function qn(t){return v1(()=>({type:t.type,bootstrap:t.bootstrap||Mi,declarations:t.declarations||Mi,imports:t.imports||Mi,exports:t.exports||Mi,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function L2e(t,n){if(t==null)return ll;let e={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],i,s,a,l;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,l=o[3]||null):(i=o,s=o,a=aM.None,l=null),e[i]=[r,a,l],n[i]=s}return e}function $2e(t){if(t==null)return ll;let n={};for(let e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}function ye(t){return v1(()=>{let n=SU(t);return TU(n),n})}function hd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function SU(t){let n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputConfig:t.inputs||ll,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Mi,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:L2e(t.inputs,n),outputs:$2e(t.outputs),debugInfo:null}}function TU(t){t.features?.forEach(n=>n(t))}function Nz(t,n){return t?()=>{let e=typeof t=="function"?t():t,r=[];for(let o of e){let i=n(o);i!==null&&r.push(i)}return r}:null}function V2e(t){let n=0,e=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,e,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let i of r.join("|"))n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function j2e(t){return Object.getPrototypeOf(t.prototype).constructor}function wr(t){let n=j2e(t.type),e=!0,r=[t];for(;n;){let o;if(dl(t))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Te(903,!1);o=n.\u0275dir}if(o){if(e){r.push(o);let s=t;s.inputs=GA(t.inputs),s.declaredInputs=GA(t.declaredInputs),s.outputs=GA(t.outputs);let a=o.hostBindings;a&&W2e(t,a);let l=o.viewQuery,c=o.contentQueries;if(l&&U2e(t,l),c&&G2e(t,c),z2e(t,o),Cj(t.outputs,o.outputs),dl(o)&&o.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(t),a===wr&&(e=!1)}}n=Object.getPrototypeOf(n)}H2e(r)}function z2e(t,n){for(let e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;let r=n.inputs[e];r!==void 0&&(t.inputs[e]=r,t.declaredInputs[e]=n.declaredInputs[e])}}function H2e(t){let n=0,e=null;for(let r=t.length-1;r>=0;r--){let o=t[r];o.hostVars=n+=o.hostVars,o.hostAttrs=p1(o.hostAttrs,e=p1(e,o.hostAttrs))}}function GA(t){return t===ll?{}:t===Mi?[]:t}function U2e(t,n){let e=t.viewQuery;e?t.viewQuery=(r,o)=>{n(r,o),e(r,o)}:t.viewQuery=n}function G2e(t,n){let e=t.contentQueries;e?t.contentQueries=(r,o,i)=>{n(r,o,i),e(r,o,i)}:t.contentQueries=n}function W2e(t,n){let e=t.hostBindings;e?t.hostBindings=(r,o)=>{n(r,o),e(r,o)}:t.hostBindings=n}function Yt(t){let n=e=>{let r=Array.isArray(t);e.hostDirectives===null?(e.resolveHostDirectives=q2e,e.hostDirectives=r?t.map(gR):[t]):r?e.hostDirectives.unshift(...t.map(gR)):e.hostDirectives.unshift(t)};return n.ngInherit=!0,n}function q2e(t){let n=[],e=!1,r=null,o=null;for(let i=0;i<t.length;i++){let s=t[i];if(s.hostDirectives!==null){let a=n.length;r??=new Map,o??=new Map,EU(s,n,r),o.set(s,[a,n.length-1])}i===0&&dl(s)&&(e=!0,n.push(s))}for(let i=e?1:0;i<t.length;i++)n.push(t[i]);return[n,r,o]}function EU(t,n,e){if(t.hostDirectives!==null)for(let r of t.hostDirectives)if(typeof r=="function"){let o=r();for(let i of o)Az(gR(i),n,e)}else Az(r,n,e)}function Az(t,n,e){let r=v4(t.directive);K2e(r.declaredInputs,t.inputs),EU(r,n,e),e.set(r,t),n.push(r)}function gR(t){return typeof t=="function"?{directive:$o(t),inputs:ll,outputs:ll}:{directive:$o(t.directive),inputs:Rz(t.inputs),outputs:Rz(t.outputs)}}function Rz(t){if(t===void 0||t.length===0)return ll;let n={};for(let e=0;e<t.length;e+=2)n[t[e]]=t[e+1];return n}function K2e(t,n){for(let e in n)if(n.hasOwnProperty(e)){let r=n[e],o=t[e];t[r]=o}}function IU(t,n,e,r,o,i,s,a){if(e.firstCreatePass){t.mergedAttrs=p1(t.mergedAttrs,t.attrs);let u=t.tView=PR(2,t,o,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,t),u.queries=e.queries.embeddedTView(t))}a&&(t.flags|=a),i1(t,!1);let l=X2e(e,n,t,r);S4()&&WR(e,n,l,t),h1(l,n);let c=nU(l,n,l,t);n[r+sr]=c,$R(n,c),T2e(c,t,n)}function Z2e(t,n,e,r,o,i,s,a,l,c,u){let d=e+sr,p;return n.firstCreatePass?(p=x1(n,d,4,s||null,a||null),k4()&&cU(n,t,p,ba(n.consts,c),KR),Wz(n,p)):p=n.data[d],IU(p,t,n,e,r,o,i,l),n1(p)&&pM(n,t,p),c!=null&&ox(t,p,u),p}function Jy(t,n,e,r,o,i,s,a,l,c,u){let d=e+sr,p;if(n.firstCreatePass){if(p=x1(n,d,4,s||null,a||null),c!=null){let h=ba(n.consts,c);p.localNames=[];for(let f=0;f<h.length;f+=2)p.localNames.push(h[f],-1)}}else p=n.data[d];return IU(p,t,n,e,r,o,i,l),c!=null&&ox(t,p,u),p}function eo(t,n,e,r,o,i,s,a){let l=bt(),c=mr(),u=ba(c.consts,i);return Z2e(l,c,t,n,e,r,o,u,void 0,s,a),eo}var X2e=Y2e;function Y2e(t,n,e,r){return Vy(!0),n[Gn].createComment("")}var c6=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var u6=new Ee("");function Ch(t){return!!t&&typeof t.then=="function"}function d6(t){return!!t&&typeof t.subscribe=="function"}var p6=new Ee("");function vM(t){return mh([{provide:p6,multi:!0,useValue:t}])}var h6=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=R(p6,{optional:!0})??[];injector=R(Ct);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let o of this.appInits){let i=Vr(this.injector,o);if(Ch(i))e.push(i);else if(d6(i)){let s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(o=>{this.reject(o)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lx=new Ee("");function DU(){x5(()=>{let t="";throw new Te(600,t)})}function NU(t){return t.isBoundToModule}var Q2e=10;var Xs=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(xs);afterRenderManager=R(cM);zonelessEnabled=R(zy);rootEffectScheduler=R(Hy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new nt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(gc);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Et(e=>!e))}constructor(){R(bh,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=R(ir);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,o=Ct.NULL){return this._injector.get(Zt).run(()=>{Wn(10);let s=e instanceof mM;if(!this._injector.get(h6).done){let f="";throw new Te(405,f)}let l;s?l=e:l=this._injector.get(ax).resolveComponentFactory(e),this.componentTypes.push(l.componentType);let c=NU(l)?void 0:this._injector.get(ml),u=r||l.selector,d=l.create(o,[],u,c),p=d.location.nativeElement,h=d.injector.get(u6,null);return h?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),Gy(this.components,d),h?.unregisterApplication(p)}),this._loadComponent(d),Wn(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Wn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(lM.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Te(101,!1);let e=Ht(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ht(e),this.afterTick.next(),Wn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(co,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<Q2e;)Wn(14),this.synchronizeOnce(),Wn(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!Ly(o))continue;let i=r&&!this.zonelessEnabled?0:1;QH(o,i),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Ly(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;Gy(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(e),this._injector.get(lx,[]).forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Gy(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Te(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gy(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function wM(t,n){let e=bt(),r=cd();if(Qi(e,r,n)){let o=mr(),i=a1();if(hM(i,o,e,t,n))ld(i)&&GH(e,i.index);else{let a=ka(i,e);WH(e[Gn],a,null,i.value,t,n,null)}}return wM}function Bt(t,n,e,r){let o=bt(),i=cd();if(Qi(o,i,n)){let s=mr(),a=a1();Tge(a,o,t,n,e,r)}return Bt}var Get=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var vR=class{destroy(n){}updateValue(n,e){}swap(n,e){let r=Math.min(n,e),o=Math.max(n,e),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(n,e){this.attach(e,this.detach(n))}};function WA(t,n,e,r,o){return t===e&&Object.is(n,r)?1:Object.is(o(t,n),o(e,r))?-1:0}function J2e(t,n,e){let r,o,i=0,s=t.length-1,a=void 0;if(Array.isArray(n)){let l=n.length-1;for(;i<=s&&i<=l;){let c=t.at(i),u=n[i],d=WA(i,c,i,u,e);if(d!==0){d<0&&t.updateValue(i,u),i++;continue}let p=t.at(s),h=n[l],f=WA(s,p,l,h,e);if(f!==0){f<0&&t.updateValue(s,h),s--,l--;continue}let m=e(i,c),g=e(s,p),v=e(i,u);if(Object.is(v,g)){let w=e(l,h);Object.is(w,m)?(t.swap(i,s),t.updateValue(s,h),l--,s--):t.move(s,i),t.updateValue(i,u),i++;continue}if(r??=new Q4,o??=Fz(t,i,s,e),wR(t,r,i,v))t.updateValue(i,u),i++,s++;else if(o.has(v))r.set(m,t.detach(i)),s--;else{let w=t.create(i,n[i]);t.attach(i,w),i++,s++}}for(;i<=l;)Oz(t,r,e,i,n[i]),i++}else if(n!=null){let l=n[Symbol.iterator](),c=l.next();for(;!c.done&&i<=s;){let u=t.at(i),d=c.value,p=WA(i,u,i,d,e);if(p!==0)p<0&&t.updateValue(i,d),i++,c=l.next();else{r??=new Q4,o??=Fz(t,i,s,e);let h=e(i,d);if(wR(t,r,i,h))t.updateValue(i,d),i++,s++,c=l.next();else if(!o.has(h))t.attach(i,t.create(i,d)),i++,s++,c=l.next();else{let f=e(i,u);r.set(f,t.detach(i)),s--}}}for(;!c.done;)Oz(t,r,e,t.length,c.value),c=l.next()}for(;i<=s;)t.destroy(t.detach(s--));r?.forEach(l=>{t.destroy(l)})}function wR(t,n,e,r){return n!==void 0&&n.has(r)?(t.attach(e,n.get(r)),n.delete(r),!0):!1}function Oz(t,n,e,r,o){if(wR(t,n,r,e(r,o)))t.updateValue(r,o);else{let i=t.create(r,o);t.attach(r,i)}}function Fz(t,n,e,r){let o=new Set;for(let i=n;i<=e;i++)o.add(r(i,t.at(i)));return o}var Q4=class{kvMap=new Map;_vMap=void 0;has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let e=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(n,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,e){if(this.kvMap.has(n)){let r=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,e)}else this.kvMap.set(n,e)}forEach(n){for(let[e,r]of this.kvMap)if(n(r,e),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),n(r,e)}}};function It(t,n,e,r,o,i,s,a){Zs("NgControlFlow");let l=bt(),c=mr(),u=ba(c.consts,i);return Jy(l,c,t,n,e,r,o,u,256,s,a),b1}function b1(t,n,e,r,o,i,s,a){Zs("NgControlFlow");let l=bt(),c=mr(),u=ba(c.consts,i);return Jy(l,c,t,n,e,r,o,u,512,s,a),b1}function Dt(t,n){Zs("NgControlFlow");let e=bt(),r=cd(),o=e[r]!==Ks?e[r]:-1,i=o!==-1?J4(e,sr+o):void 0,s=0;if(Qi(e,r,t)){let a=Ht(null);try{if(i!==void 0&&oU(i,s),t!==-1){let l=sr+t,c=J4(e,l),u=_R(e[At],l),d=sU(c,u,e),p=ix(e,u,n,{dehydratedView:d});sx(c,p,s,f1(u,d))}}finally{Ht(a)}}else if(i!==void 0){let a=rU(i,s);a!==void 0&&(a[lo]=n)}}var yR=class{lContainer;$implicit;$index;constructor(n,e,r){this.lContainer=n,this.$implicit=e,this.$index=r}get $count(){return this.lContainer.length-Yr}};function Ji(t){return t}function f6(t,n){return n}var xR=class{hasEmptyBlock;trackByFn;liveCollection;constructor(n,e,r){this.hasEmptyBlock=n,this.trackByFn=e,this.liveCollection=r}};function uo(t,n,e,r,o,i,s,a,l,c,u,d,p){Zs("NgControlFlow");let h=bt(),f=mr(),m=l!==void 0,g=bt(),v=a?s.bind(g[Yi][lo]):s,w=new xR(m,v);g[sr+t]=w,Jy(h,f,t+1,n,e,r,o,ba(f.consts,i),256),m&&Jy(h,f,t+2,l,c,u,d,ba(f.consts,p),512)}var kR=class extends vR{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(n,e,r){super(),this.lContainer=n,this.hostLView=e,this.templateTNode=r}get length(){return this.lContainer.length-Yr}at(n){return this.getLView(n)[lo].$implicit}attach(n,e){let r=e[gm];this.needsIndexUpdate||=n!==this.length,sx(this.lContainer,e,n,f1(this.templateTNode,r)),e1e(this.lContainer,n)}detach(n){return this.needsIndexUpdate||=n!==this.length-1,t1e(this.lContainer,n),n1e(this.lContainer,n)}create(n,e){let r=G4(this.lContainer,this.templateTNode.tView.ssrId),o=ix(this.hostLView,this.templateTNode,new yR(this.lContainer,e,n),{dehydratedView:r});return this.operationsCounter?.recordCreate(),o}destroy(n){uM(n[At],n),this.operationsCounter?.recordDestroy()}updateValue(n,e){this.getLView(n)[lo].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[lo].$index=n}getLView(n){return r1e(this.lContainer,n)}};function po(t){let n=Ht(null),e=ud();try{let r=bt(),o=r[At],i=r[e],s=e+1,a=J4(r,s);if(i.liveCollection===void 0){let c=_R(o,s);i.liveCollection=new kR(a,r,c)}else i.liveCollection.reset();let l=i.liveCollection;if(J2e(l,t,i.trackByFn),l.updateIndexes(),i.hasEmptyBlock){let c=cd(),u=l.length===0;if(Qi(r,c,u)){let d=e+2,p=J4(r,d);if(u){let h=_R(o,d),f=sU(p,h,r),m=ix(r,h,void 0,{dehydratedView:f});sx(p,m,0,f1(h,f))}else o.firstUpdatePass&&Xge(p),oU(p,0)}}}finally{Ht(n)}}function J4(t,n){return t[n]}function e1e(t,n){if(t.length<=Yr)return;let e=Yr+n,r=t[e],o=r?r[xm]:void 0;if(r&&o&&o.detachedLeaveAnimationFns&&o.detachedLeaveAnimationFns.length>0){let i=r[sd];sge(i,o),Tm.delete(r),o.detachedLeaveAnimationFns=void 0}}function t1e(t,n){if(t.length<=Yr)return;let e=Yr+n,r=t[e],o=r?r[xm]:void 0;o&&o.leave&&o.leave.size>0&&(o.detachedLeaveAnimationFns=[])}function n1e(t,n){return Xy(t,n)}function r1e(t,n){return rU(t,n)}function _R(t,n){return Py(t,n)}function Ke(t,n,e){let r=bt(),o=cd();if(Qi(r,o,n)){let i=mr(),s=a1();HH(s,r,t,n,r[Gn],e)}return Ke}function bR(t,n,e,r,o){hM(n,t,e,o?"class":"style",r)}function ne(t,n,e,r){let o=bt(),i=o[At],s=t+sr,a=i.firstCreatePass?e6(s,o,2,n,KR,k4(),e,r):i.data[s];if(ZR(a,o,t,n,AU),n1(a)){let l=o[At];pM(l,o,a),RR(l,a,o)}return r!=null&&ox(o,a),ne}function re(){let t=mr(),n=ko(),e=XR(n);return t.firstCreatePass&&t6(t,e),EA(e)&&IA(),SA(),e.classesWithoutHost!=null&&e0e(e)&&bR(t,e,bt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&t0e(e)&&bR(t,e,bt(),e.stylesWithoutHost,!1),re}function We(t,n,e,r){return ne(t,n,e,r),re(),We}function Ca(t,n,e,r){let o=bt(),i=o[At],s=t+sr,a=i.firstCreatePass?u2e(s,i,2,n,e,r):i.data[s];return ZR(a,o,t,n,AU),r!=null&&ox(o,a),Ca}function Ma(){let t=ko(),n=XR(t);return EA(n)&&IA(),SA(),Ma}function fd(t,n,e,r){return Ca(t,n,e,r),Ma(),fd}var AU=(t,n,e,r,o)=>(Vy(!0),MH(n[Gn],r,iz()));function cx(t,n,e){let r=bt(),o=r[At],i=t+sr,s=o.firstCreatePass?e6(i,r,8,"ng-container",KR,k4(),n,e):o.data[i];if(ZR(s,r,t,"ng-container",o1e),n1(s)){let a=r[At];pM(a,r,s),RR(a,s,r)}return e!=null&&ox(r,s),cx}function ux(){let t=mr(),n=ko(),e=XR(n);return t.firstCreatePass&&t6(t,e),ux}function Ti(t,n,e){return cx(t,n,e),ux(),Ti}var o1e=(t,n,e,r,o)=>(Vy(!0),G0e(n[Gn],""));function mn(){return bt()}function zr(t,n,e){let r=bt(),o=cd();if(Qi(r,o,n)){let i=mr(),s=a1();UH(s,r,t,n,r[Gn],e)}return zr}var I4=void 0;function i1e(t){let n=Math.floor(Math.abs(t)),e=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&e===0?1:5}var s1e=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],I4,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],I4,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",I4,"{1} 'at' {0}",I4],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",i1e],Wy={};function m6(t,n,e){typeof n!="string"&&(e=n,n=t[jr.LocaleId]),n=n.toLowerCase().replace(/_/g,"-"),Wy[n]=t,e&&(Wy[n][jr.ExtraData]=e)}function Ys(t){let n=a1e(t),e=Bz(n);if(e)return e;let r=n.split("-")[0];if(e=Bz(r),e)return e;if(r==="en")return s1e;throw new Te(701,!1)}function Bz(t){return t in Wy||(Wy[t]=id.ng&&id.ng.common&&id.ng.common.locales&&id.ng.common.locales[t]),Wy[t]}var jr=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(jr||{});function a1e(t){return t.toLowerCase().replace(/_/g,"-")}var dx="en-US";var l1e=dx;function RU(t){typeof t=="string"&&(l1e=t.toLowerCase().replace(/_/g,"-"))}function Pe(t,n,e){let r=bt(),o=mr(),i=ko();return OU(o,r,r[Gn],i,t,n,e),Pe}function yM(t,n,e){let r=bt(),o=mr(),i=ko();return(i.type&3||e)&&hU(i,o,r,e,r[Gn],t,n,F4(i,r,n)),yM}function OU(t,n,e,r,o,i,s){let a=!0,l=null;if((r.type&3||s)&&(l??=F4(r,n,i),hU(r,t,n,s,e,o,i,l)&&(a=!1)),a){let c=r.outputs?.[o],u=r.hostDirectiveOutputs?.[o];if(u&&u.length)for(let d=0;d<u.length;d+=2){let p=u[d],h=u[d+1];l??=F4(r,n,i),Ez(r,n,p,h,o,l)}if(c&&c.length)for(let d of c)l??=F4(r,n,i),Ez(r,n,d,o,o,l)}}function be(t=1){return oz(t)}function c1e(t,n){let e=null,r=B0e(t);for(let o=0;o<n.length;o++){let i=n[o];if(i==="*"){e=o;continue}if(r===null?CH(t,i,!0):$0e(r,i))return o}return e}function pn(t){let n=bt()[Yi][Xi];if(!n.projection){let e=t?t.length:1,r=n.projection=Nj(e,null),o=r.slice(),i=n.child;for(;i!==null;){if(i.type!==128){let s=t?c1e(i,t):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i)}i=i.next}}}function Nt(t,n=0,e,r,o,i){let s=bt(),a=mr(),l=r?t+1:null;l!==null&&Jy(s,a,l,r,o,i,null,e);let c=x1(a,sr+t,16,null,e||null);c.projection===null&&(c.projection=n),AA();let d=!s[gm]||TA();s[Yi][Xi].projection[c.projection]===null&&l!==null?u1e(s,a,l):d&&!iM(c)&&vge(a,s,c)}function u1e(t,n,e){let r=sr+e,o=n.data[r],i=t[r],s=G4(i,o.tView.ssrId),a=ix(t,o,void 0,{dehydratedView:s});sx(i,a,0,f1(o,s))}function C1(t,n,e,r){kU(t,n,e,r)}function xM(t,n,e){xU(t,n,e)}function md(t){let n=bt(),e=mr(),r=b4();$y(r+1);let o=o6(e,r);if(t.dirty&&jj(n)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let i=bU(n,r);t.reset(i,oH),t.notifyOnChanges()}return!0}return!1}function gd(){return r6(bt(),b4())}function Sa(t,n,e,r,o){MU(n,kU(t,e,r,o))}function es(t,n,e,r){MU(t,xU(n,e,r))}function bo(t=1){$y(b4()+t)}function to(t){let n=Zj();return o1(n,sr+t)}function D4(t,n){return t<<17|n<<2}function Em(t){return t>>17&32767}function d1e(t){return(t&2)==2}function p1e(t,n){return t&131071|n<<17}function CR(t){return t|2}function m1(t){return(t&131068)>>2}function qA(t,n){return t&-131069|n<<2}function h1e(t){return(t&1)===1}function MR(t){return t|1}function f1e(t,n,e,r,o,i){let s=i?n.classBindings:n.styleBindings,a=Em(s),l=m1(s);t[r]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||Q2(d,u)>0)&&(c=!0)}else u=e;if(o)if(l!==0){let p=Em(t[a+1]);t[r+1]=D4(p,a),p!==0&&(t[p+1]=qA(t[p+1],r)),t[a+1]=p1e(t[a+1],r)}else t[r+1]=D4(a,0),a!==0&&(t[a+1]=qA(t[a+1],r)),a=r;else t[r+1]=D4(l,0),a===0?a=r:t[l+1]=qA(t[l+1],r),l=r;c&&(t[r+1]=CR(t[r+1])),Pz(t,u,r,!0),Pz(t,u,r,!1),m1e(n,u,t,r,i),s=D4(a,l),i?n.classBindings=s:n.styleBindings=s}function m1e(t,n,e,r,o){let i=o?t.residualClasses:t.residualStyles;i!=null&&typeof n=="string"&&Q2(i,n)>=0&&(e[r+1]=MR(e[r+1]))}function Pz(t,n,e,r){let o=t[e+1],i=n===null,s=r?Em(o):m1(o),a=!1;for(;s!==0&&(a===!1||i);){let l=t[s],c=t[s+1];g1e(l,n)&&(a=!0,t[s+1]=r?MR(c):CR(c)),s=r?Em(c):m1(c)}a&&(t[e+1]=r?CR(o):MR(o))}function g1e(t,n){return t===null||n==null||(Array.isArray(t)?t[1]:t)===n?!0:Array.isArray(t)&&typeof n=="string"?Q2(t,n)>=0:!1}var jo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FU(t){return t.substring(jo.key,jo.keyEnd)}function v1e(t){return t.substring(jo.value,jo.valueEnd)}function w1e(t){return LU(t),BU(t,g1(t,0,jo.textEnd))}function BU(t,n){let e=jo.textEnd;return e===n?-1:(n=jo.keyEnd=x1e(t,jo.key=n,e),g1(t,n,e))}function y1e(t){return LU(t),PU(t,g1(t,0,jo.textEnd))}function PU(t,n){let e=jo.textEnd,r=jo.key=g1(t,n,e);return e===r?-1:(r=jo.keyEnd=k1e(t,r,e),r=Lz(t,r,e,58),r=jo.value=g1(t,r,e),r=jo.valueEnd=_1e(t,r,e),Lz(t,r,e,59))}function LU(t){jo.key=0,jo.keyEnd=0,jo.value=0,jo.valueEnd=0,jo.textEnd=t.length}function g1(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function x1e(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}function k1e(t,n,e){let r;for(;n<e&&((r=t.charCodeAt(n))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)n++;return n}function Lz(t,n,e,r){return n=g1(t,n,e),n<e&&n++,n}function _1e(t,n,e){let r=-1,o=-1,i=-1,s=n,a=s;for(;s<e;){let l=t.charCodeAt(s++);if(l===59)return a;l===34||l===39?a=s=$z(t,l,s,e):n===s-4&&i===85&&o===82&&r===76&&l===40?a=s=$z(t,41,s,e):l>32&&(a=s),i=o,o=r,r=l&-33}return a}function $z(t,n,e,r){let o=-1,i=e;for(;i<r;){let s=t.charCodeAt(i++);if(s==n&&o!==92)return i;s==92&&o===92?o=0:o=s}throw new Error}function wc(t,n,e){return $U(t,n,e,!1),wc}function no(t,n){return $U(t,n,null,!0),no}function ks(t){VU(HU,b1e,t,!1)}function b1e(t,n){for(let e=y1e(n);e>=0;e=PU(n,e))HU(t,FU(n),v1e(n))}function Le(t){VU(D1e,C1e,t,!0)}function C1e(t,n){for(let e=w1e(n);e>=0;e=BU(n,e))Ry(t,FU(n),!0)}function $U(t,n,e,r){let o=bt(),i=mr(),s=OA(2);if(i.firstUpdatePass&&zU(i,t,s,r),n!==Ks&&Qi(o,s,n)){let a=i.data[ud()];UU(i,a,o,o[Gn],t,o[s+1]=A1e(n,e),r,s)}}function VU(t,n,e,r){let o=mr(),i=OA(2);o.firstUpdatePass&&zU(o,null,i,r);let s=bt();if(e!==Ks&&Qi(s,i,e)){let a=o.data[ud()];if(GU(a,r)&&!jU(o,i)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=d4(l,e||"")),bR(o,a,s,e,r)}else N1e(o,a,s,s[Gn],s[i+1],s[i+1]=I1e(t,n,e),r,i)}}function jU(t,n){return n>=t.expandoStartIndex}function zU(t,n,e,r){let o=t.data;if(o[e+1]===null){let i=o[ud()],s=jU(t,e);GU(i,r)&&n===null&&!s&&(n=!1),n=M1e(o,i,n,r),f1e(o,i,n,e,s,r)}}function M1e(t,n,e,r){let o=ez(t),i=r?n.residualClasses:n.residualStyles;if(o===null)(r?n.classBindings:n.styleBindings)===0&&(e=KA(null,t,n,e,r),e=ex(e,n.attrs,r),i=null);else{let s=n.directiveStylingLast;if(s===-1||t[s]!==o)if(e=KA(o,t,n,e,r),i===null){let l=S1e(t,n,r);l!==void 0&&Array.isArray(l)&&(l=KA(null,t,n,l[1],r),l=ex(l,n.attrs,r),T1e(t,n,r,l))}else i=E1e(t,n,r)}return i!==void 0&&(r?n.residualClasses=i:n.residualStyles=i),e}function S1e(t,n,e){let r=e?n.classBindings:n.styleBindings;if(m1(r)!==0)return t[Em(r)]}function T1e(t,n,e,r){let o=e?n.classBindings:n.styleBindings;t[Em(o)]=r}function E1e(t,n,e){let r,o=n.directiveEnd;for(let i=1+n.directiveStylingLast;i<o;i++){let s=t[i].hostAttrs;r=ex(r,s,e)}return ex(r,n.attrs,e)}function KA(t,n,e,r,o){let i=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(i=n[a],r=ex(r,i.hostAttrs,o),i!==t);)a++;return t!==null&&(e.directiveStylingLast=a),r}function ex(t,n,e){let r=e?1:2,o=-1;if(n!==null)for(let i=0;i<n.length;i++){let s=n[i];typeof s=="number"?o=s:o===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Ry(t,s,e?!0:n[++i]))}return t===void 0?null:t}function I1e(t,n,e){if(e==null||e==="")return Mi;let r=[],o=Im(e);if(Array.isArray(o))for(let i=0;i<o.length;i++)t(r,o[i],!0);else if(typeof o=="object")for(let i in o)o.hasOwnProperty(i)&&t(r,i,o[i]);else typeof o=="string"&&n(r,o);return r}function HU(t,n,e){Ry(t,n,Im(e))}function D1e(t,n,e){let r=String(n);r!==""&&!r.includes(" ")&&Ry(t,r,e)}function N1e(t,n,e,r,o,i,s,a){o===Ks&&(o=Mi);let l=0,c=0,u=0<o.length?o[0]:null,d=0<i.length?i[0]:null;for(;u!==null||d!==null;){let p=l<o.length?o[l+1]:void 0,h=c<i.length?i[c+1]:void 0,f=null,m;u===d?(l+=2,c+=2,p!==h&&(f=d,m=h)):d===null||u!==null&&u<d?(l+=2,f=u):(c+=2,f=d,m=h),f!==null&&UU(t,n,e,r,f,m,s,a),u=l<o.length?o[l]:null,d=c<i.length?i[c]:null}}function UU(t,n,e,r,o,i,s,a){if(!(n.type&3))return;let l=t.data,c=l[a+1],u=h1e(c)?Vz(l,n,e,o,m1(c),s):void 0;if(!eM(u)){eM(i)||d1e(c)&&(i=Vz(l,null,e,o,a,s));let d=yA(ud(),e);yge(r,s,d,o,i)}}function Vz(t,n,e,r,o,i){let s=n===null,a;for(;o>0;){let l=t[o],c=Array.isArray(l),u=c?l[1]:l,d=u===null,p=e[o+1];p===Ks&&(p=d?Mi:void 0);let h=d?g4(p,r):u===r?p:void 0;if(c&&!eM(h)&&(h=g4(l,r)),eM(h)&&(a=h,s))return a;let f=t[o+1];o=s?Em(f):m1(f)}if(n!==null){let l=i?n.residualClasses:n.residualStyles;l!=null&&(a=g4(l,r))}return a}function eM(t){return t!==void 0}function A1e(t,n){return t==null||t===""||(typeof n=="string"?t=t+n:typeof t=="object"&&(t=od(Im(t)))),t}function GU(t,n){return(t.flags&(n?8:16))!==0}function le(t,n=""){let e=bt(),r=mr(),o=t+sr,i=r.firstCreatePass?x1(r,o,1,n,null):r.data[o],s=R1e(r,e,i,n,t);e[o]=s,S4()&&WR(r,e,s,i),i1(i,!1)}var R1e=(t,n,e,r,o)=>(Vy(!0),H0e(n[Gn],r));function WU(t,n,e,r=""){return Qi(t,cd(),e)?n+Ny(e)+r:Ks}function it(t){return Ze("",t),it}function Ze(t,n,e){let r=bt(),o=WU(r,t,n,e);return o!==Ks&&O1e(r,ud(),o),Ze}function O1e(t,n,e){let r=yA(n,t);U0e(t[Gn],r,e)}function hi(t,n,e){LA(n)&&(n=n());let r=bt(),o=cd();if(Qi(r,o,n)){let i=mr(),s=a1();HH(s,r,t,n,r[Gn],e)}return hi}function Ei(t,n){let e=LA(t);return e&&t.set(n),e}function fi(t,n){let e=bt(),r=mr(),o=ko();return OU(r,e,e[Gn],o,t,n),fi}function g6(t,n,e=""){return WU(bt(),t,n,e)}function F1e(t,n,e){let r=mr();if(r.firstCreatePass){let o=dl(t);SR(e,r.data,r.blueprint,o,!0),SR(n,r.data,r.blueprint,o,!1)}}function SR(t,n,e,r,o){if(t=$o(t),Array.isArray(t))for(let i=0;i<t.length;i++)SR(t[i],n,e,r,o);else{let i=mr(),s=bt(),a=ko(),l=hm(t)?t:$o(t.provide),c=hA(t),u=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(hm(t)||!t.multi){let h=new Sm(c,o,Xt,null),f=XA(l,n,o?u:u+p,d);f===-1?(QA(V4(a,s),i,l),ZA(i,t,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),e.push(h),s.push(h)):(e[f]=h,s[f]=h)}else{let h=XA(l,n,u+p,d),f=XA(l,n,u,u+p),m=h>=0&&e[h],g=f>=0&&e[f];if(o&&!g||!o&&!m){QA(V4(a,s),i,l);let v=L1e(o?P1e:B1e,e.length,o,r,c,t);!o&&g&&(e[f].providerFactory=v),ZA(i,t,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),e.push(v),s.push(v)}else{let v=qU(e[o?f:h],c,!o&&r);ZA(i,t,h>-1?h:f,v)}!o&&r&&g&&e[f].componentProviders++}}}function ZA(t,n,e,r){let o=hm(n),i=Pj(n);if(o||i){let l=(i?$o(n.useClass):n).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!o&&n.multi){let u=c.indexOf(e);u===-1?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function qU(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function XA(t,n,e,r){for(let o=e;o<r;o++)if(n[o]===t)return o;return-1}function B1e(t,n,e,r,o){return TR(this.multi,[])}function P1e(t,n,e,r,o){let i=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=qy(r,r[At],this.providerFactory.index,o);s=l.slice(0,a),TR(i,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],TR(i,s);return s}function TR(t,n){for(let e=0;e<t.length;e++){let r=t[e];n.push(r())}return n}function L1e(t,n,e,r,o,i){let s=new Sm(t,e,Xt,null);return s.multi=[],s.index=n,s.componentProviders=0,qU(s,o,r&&!e),s}function pt(t,n=[]){return e=>{e.providersResolver=(r,o)=>F1e(r,o?o(t):t,n)}}function Dm(t,n,e){let r=pl()+t,o=bt();return o[r]===Ks?k1(o,r,e?n.call(e):n()):dU(o,r)}function gl(t,n,e,r){return KU(bt(),pl(),t,n,e,r)}function vd(t,n,e,r,o){return ZU(bt(),pl(),t,n,e,r,o)}function v6(t,n,e,r,o,i){return XU(bt(),pl(),t,n,e,r,o,i)}function w6(t,n,e,r,o,i,s){return YU(bt(),pl(),t,n,e,r,o,i,s)}function y6(t,n,e,r,o,i,s,a){let l=pl()+t,c=bt(),u=pU(c,l,e,r,o,i);return Qi(c,l+4,s)||u?k1(c,l+5,a?n.call(a,e,r,o,i,s):n(e,r,o,i,s)):dU(c,l+5)}function kM(t,n){let e=t[n];return e===Ks?void 0:e}function KU(t,n,e,r,o,i){let s=n+e;return Qi(t,s,o)?k1(t,s+1,i?r.call(i,o):r(o)):kM(t,s+1)}function ZU(t,n,e,r,o,i,s){let a=n+e;return q4(t,a,o,i)?k1(t,a+2,s?r.call(s,o,i):r(o,i)):kM(t,a+2)}function XU(t,n,e,r,o,i,s,a){let l=n+e;return d2e(t,l,o,i,s)?k1(t,l+3,a?r.call(a,o,i,s):r(o,i,s)):kM(t,l+3)}function YU(t,n,e,r,o,i,s,a,l){let c=n+e;return pU(t,c,o,i,s,a)?k1(t,c+4,l?r.call(l,o,i,s,a):r(o,i,s,a)):kM(t,c+4)}function Me(t,n){let e=mr(),r,o=t+sr;e.firstCreatePass?(r=$1e(n,e.pipeRegistry),e.data[o]=r,r.onDestroy&&(e.destroyHooks??=[]).push(o,r.onDestroy)):r=e.data[o];let i=r.factory||(r.factory=ph(r.type,!0)),s,a=Zi(Xt);try{let l=$4(!1),c=i();return $4(l),xA(e,bt(),o,c),c}finally{Zi(a)}}function $1e(t,n){if(n)for(let e=n.length-1;e>=0;e--){let r=n[e];if(t===r.name)return r}}function Se(t,n,e){let r=t+sr,o=bt(),i=o1(o,r);return _M(o,r)?KU(o,pl(),n,i.transform,e,i):i.transform(e)}function x6(t,n,e,r){let o=t+sr,i=bt(),s=o1(i,o);return _M(i,o)?ZU(i,pl(),n,s.transform,e,r,s):s.transform(e,r)}function k6(t,n,e,r,o){let i=t+sr,s=bt(),a=o1(s,i);return _M(s,i)?XU(s,pl(),n,a.transform,e,r,o,a):a.transform(e,r,o)}function _6(t,n,e,r,o,i){let s=t+sr,a=bt(),l=o1(a,s);return _M(a,s)?YU(a,pl(),n,l.transform,e,r,o,i,l):l.transform(e,r,o,i)}function _M(t,n){return t[At].data[n].pure}function ri(t,n){return fM(t,n)}var tM=class{ngModuleFactory;componentFactories;constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}},b6=(()=>{class t{compileModuleSync(e){return new Y4(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),o=uA(e),i=_H(o.declarations).reduce((s,a)=>{let l=dc(a);return l&&s.push(new kh(l)),s},[]);return new tM(r,i)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var V1e=(()=>{class t{zone=R(Zt);changeDetectionScheduler=R(wa);applicationRef=R(Xs);applicationErrorHandler=R(xs);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(e){this.applicationErrorHandler(e)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),QU=new Ee("",{factory:()=>!1});function C6({ngZoneFactory:t,ignoreChangesOutsideZone:n,scheduleInRootZone:e}){return t??=()=>new Zt(lt(ae({},S6()),{scheduleInRootZone:e})),[{provide:Zt,useFactory:t},{provide:fh,multi:!0,useFactory:()=>{let r=R(V1e,{optional:!0});return()=>r.initialize()}},{provide:fh,multi:!0,useFactory:()=>{let r=R(j1e);return()=>{r.initialize()}}},n===!0?{provide:$A,useValue:!0}:[],{provide:VA,useValue:e??AH},{provide:xs,useFactory:()=>{let r=R(Zt),o=R(ir),i;return s=>{r.runOutsideAngular(()=>{o.destroyed&&!i?setTimeout(()=>{throw s}):(i??=o.get(Ws),i.handleError(s))})}}}]}function M6(t){let n=t?.ignoreChangesOutsideZone,e=t?.scheduleInRootZone,r=C6({ngZoneFactory:()=>{let o=S6(t);return o.scheduleInRootZone=e,o.shouldCoalesceEventChangeDetection&&Zs("NgZone_CoalesceEvent"),new Zt(o)},ignoreChangesOutsideZone:n,scheduleInRootZone:e});return mh([{provide:QU,useValue:!0},{provide:zy,useValue:!1},r])}function S6(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var j1e=(()=>{class t{subscription=new Nn;initialized=!1;zone=R(Zt);pendingTasks=R(gc);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Zt.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Zt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var JU=(()=>{class t{applicationErrorHandler=R(xs);appRef=R(Xs);taskService=R(gc);ngZone=R(Zt);zonelessEnabled=R(zy);tracing=R(bh,{optional:!0});disableScheduling=R($A,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Nn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(H4):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(VA,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof U4||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?wz:RH;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(H4+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(e),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,wz(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function z1e(){return typeof $localize<"u"&&$localize.locale||dx}var px=new Ee("",{providedIn:"root",factory:()=>R(px,{optional:!0,skipSelf:!0})||z1e()});var hx=class{destroyed=!1;listeners=null;errorHandler=R(Ws,{optional:!0});destroyRef=R(gr);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(n){if(this.destroyed)throw new Te(953,!1);return(this.listeners??=[]).push(n),{unsubscribe:()=>{let e=this.listeners?.indexOf(n);e!==void 0&&e!==-1&&this.listeners?.splice(e,1)}}}emit(n){if(this.destroyed){console.warn(al(953,!1));return}if(this.listeners===null)return;let e=Ht(null);try{for(let r of this.listeners)try{r(n)}catch(o){this.errorHandler?.handleError(o)}}finally{Ht(e)}}};function wn(t){return yj(t)}function de(t,n){return gy(t,n?.equal)}var T6=class{[Xr];constructor(n){this[Xr]=n}destroy(){this[Xr].destroy()}};function St(t,n){let e=n?.injector??R(Ct),r=n?.manualCleanup!==!0?e.get(gr):null,o,i=e.get(bm,null,{optional:!0}),s=e.get(wa);return i!==null?(o=G1e(i.view,s,t),r instanceof Iy&&r._lView===i.view&&(r=null)):o=W1e(t,e.get(Hy),s),o.injector=e,r!==null&&(o.onDestroyFn=r.onDestroy(()=>o.destroy())),new T6(o)}var tG=lt(ae({},xj),{cleanupFns:void 0,zone:null,onDestroyFn:Cm,run(){let t=s1(!1);try{kj(this)}finally{s1(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=Ht(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],Ht(t)}}}),H1e=lt(ae({},tG),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){ah(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),U1e=lt(ae({},tG),{consumerMarkedDirty(){this.view[Kt]|=8192,wh(this.view),this.notifier.notify(13)},destroy(){ah(this),this.onDestroyFn(),this.cleanup(),this.view[ad]?.delete(this)}});function G1e(t,n,e){let r=Object.create(U1e);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=n,r.fn=nG(r,e),t[ad]??=new Set,t[ad].add(r),r.consumerMarkedDirty(r),r}function W1e(t,n,e){let r=Object.create(H1e);return r.fn=nG(r,t),r.scheduler=n,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function nG(t,n){return()=>{n(e=>(t.cleanupFns??=[]).push(e))}}var q1e=t=>t;function Co(t,n){if(typeof t=="function"){let e=V5(t,q1e,n?.equal);return eG(e,n?.debugName)}else{let e=V5(t.source,t.computation,t.equal);return eG(e,t.debugName)}}function eG(t,n){let e=t[Xr],r=t;return r.set=o=>vj(e,o),r.update=o=>wj(e,o),r.asReadonly=jy.bind(t),r}var CM=Symbol("InputSignalNode#UNSET"),dG=lt(ae({},vy),{transformFn:void 0,applyValueToInputSignal(t,n){lh(t,n)}});function pG(t,n){let e=Object.create(dG);e.value=t,e.transformFn=n?.transform;function r(){if(Zu(e),e.value===CM){let o=null;throw new Te(-950,o)}return e.value}return r[Xr]=e,r}var M1=class{attributeName;constructor(n){this.attributeName=n}__NG_ELEMENT_ID__=()=>rx(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},O6=new Ee("");O6.__NG_ELEMENT_ID__=t=>{let n=ko();if(n===null)throw new Te(204,!1);if(n.type&2)return n.value;if(t&8)return null;throw new Te(204,!1)};function Kn(t){return new hx}function rG(t,n){return pG(t,n)}function sve(t){return pG(CM,t)}var Q=(rG.required=sve,rG);function oG(t,n){return s6(n)}function ave(t,n){return a6(n)}var _s=(oG.required=ave,oG);function iG(t,n){return s6(n)}function lve(t,n){return a6(n)}var wd=(iG.required=lve,iG);function F6(t,n){return CU(n)}function hG(t,n){let e=Object.create(dG),r=new hx;e.value=t;function o(){return Zu(e),sG(e.value),e.value}return o[Xr]=e,o.asReadonly=jy.bind(o),o.set=i=>{e.equal(e.value,i)||(lh(e,i),r.emit(i))},o.update=i=>{sG(e.value),o.set(i(e.value))},o.subscribe=r.subscribe.bind(r),o.destroyRef=r.destroyRef,o}function sG(t){if(t===CM)throw new Te(952,!1)}function aG(t,n){return hG(t,n)}function cve(t){return hG(CM,t)}var Ii=(aG.required=cve,aG);var I6=new Ee(""),uve=new Ee("");function fx(t){return!t.moduleRef}function dve(t){let n=fx(t)?t.r3Injector:t.moduleRef.injector,e=n.get(Zt);return e.run(()=>{fx(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=n.get(xs),o;if(e.runOutsideAngular(()=>{o=e.onError.subscribe({next:r})}),fx(t)){let i=()=>n.destroy(),s=t.platformInjector.get(I6);s.add(i),n.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>t.moduleRef.destroy(),s=t.platformInjector.get(I6);s.add(i),t.moduleRef.onDestroy(()=>{Gy(t.allPlatformModules,t.moduleRef),o.unsubscribe(),s.delete(i)})}return hve(r,e,()=>{let i=n.get(gc),s=i.add(),a=n.get(h6);return a.runInitializers(),a.donePromise.then(()=>{let l=n.get(px,dx);if(RU(l||dx),!n.get(uve,!0))return fx(t)?n.get(Xs):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(fx(t)){let u=n.get(Xs);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return pve?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void i.remove(s))})})}var pve;function hve(t,n,e){try{let r=e();return Ch(r)?r.catch(o=>{throw n.runOutsideAngular(()=>t(o)),o}):r}catch(r){throw n.runOutsideAngular(()=>t(r)),r}}var bM=null;function fve(t=[],n){return Ct.create({name:n,providers:[{provide:Oy,useValue:"platform"},{provide:I6,useValue:new Set([()=>bM=null])},...t]})}function mve(t=[]){if(bM)return bM;let n=fve(t);return bM=n,DU(),gve(n),n}function gve(t){let n=t.get(rM,null);Vr(t,()=>{n?.forEach(e=>e())})}function mx(){return!1}var Br=(()=>{class t{static __NG_ELEMENT_ID__=vve}return t})();function vve(t){return wve(ko(),bt(),(t&16)===16)}function wve(t,n,e){if(ld(t)&&!e){let r=_a(t.index,n);return new xh(r,r)}else if(t.type&175){let r=n[Yi];return new xh(r,n)}return null}var D6=class{constructor(){}supports(n){return n instanceof Map||n6(n)}create(){return new N6}},N6=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let e;for(e=this._mapHead;e!==null;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||n6(n)))throw new Te(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{let i=this._getOrCreateRecordForKey(o,r);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){let r=n._prev;return e._next=n,e._prev=r,n._prev=e,r&&(r._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){let o=this._records.get(n);this._maybeAddToChanges(o,e);let i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}let r=new A6(n);return this._records.set(n,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(r=>e(n[r],r))}},A6=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(n){this.key=n}};function lG(){return new B6([new D6])}var B6=(()=>{class t{static \u0275prov=_e({token:t,providedIn:"root",factory:lG});factories;constructor(e){this.factories=e}static create(e,r){if(r){let o=r.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:()=>{let r=R(t,{optional:!0,skipSelf:!0});return t.create(e,r||lG())}}}find(e){let r=this.factories.find(o=>o.supports(e));if(r)return r;throw new Te(901,!1)}}return t})();function fG(t){let{rootComponent:n,appProviders:e,platformProviders:r,platformRef:o}=t;Wn(8);try{let i=o?.injector??mve(r),s=[C6({}),{provide:wa,useExisting:JU},az,...e||[]],a=new Qy({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return dve({r3Injector:a.injector,platformInjector:i,rootComponent:n})}catch(i){return Promise.reject(i)}finally{Wn(9)}}function wt(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Di(t,n=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):n}var E6=Symbol("NOT_SET"),mG=new Set,yve=lt(ae({},vy),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:E6,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(t){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==E6&&!om(this))return this.signal;try{for(let o of this.cleanup??mG)o()}finally{this.cleanup?.clear()}let n=[];t!==void 0&&n.push(t),n.push(this.registerCleanupFn);let e=Xu(this),r;try{r=this.userFn.apply(null,n)}finally{sh(this,e)}return(this.value===E6||!this.equal(this.value,r))&&(this.value=r,this.version++),this.signal}}),R6=class extends Ky{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];constructor(n,e,r,o,i,s=null){super(n,[void 0,void 0,void 0,void 0],r,!1,i.get(gr),s),this.scheduler=o;for(let a of HR){let l=e[a];if(l===void 0)continue;let c=Object.create(yve);c.sequence=this,c.phase=a,c.userFn=l,c.dirty=!0,c.signal=()=>(Zu(c),c.value),c.signal[Xr]=c,c.registerCleanupFn=u=>(c.cleanup??=new Set).add(u),this.nodes[a]=c,this.hooks[a]=u=>c.phaseFn(u)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){super.destroy();for(let n of this.nodes)if(n)try{for(let e of n.cleanup??mG)e()}finally{ah(n)}}};function gG(t,n){let e=n?.injector??R(Ct),r=e.get(wa),o=e.get(cM),i=e.get(bh,null,{optional:!0});o.impl??=e.get(UR);let s=t;typeof s=="function"&&(s={mixedReadWrite:t});let a=e.get(bm,null,{optional:!0}),l=new R6(o.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],a?.view,r,e,i?.snapshot(null));return o.impl.register(l),l}function MM(t,n){let e=dc(t),r=n.elementInjector||J2();return new kh(e).create(r,n.projectableNodes,n.hostElement,n.environmentInjector,n.directives,n.bindings)}function vG(t){let n=dc(t);if(!n)return null;let e=new kh(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}var xG=null;function Ta(){return xG}function P6(t){xG??=t}var gx=class{},vx=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>R(kG),providedIn:"platform"})}return t})(),L6=new Ee(""),kG=(()=>{class t extends vx{_location;_history;_doc=R(Gt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ta().getBaseHref(this._doc)}onPopState(e){let r=Ta().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=Ta().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){this._history.pushState(e,r,o)}replaceState(e,r,o){this._history.replaceState(e,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function SM(t,n){return t?n?t.endsWith("/")?n.startsWith("/")?t+n.slice(1):t+n:n.startsWith("/")?t+n:`${t}/${n}`:t:n}function wG(t){let n=t.search(/#|\?|$/);return t[n-1]==="/"?t.slice(0,n-1)+t.slice(n):t}function vl(t){return t&&t[0]!=="?"?`?${t}`:t}var Ea=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>R(EM),providedIn:"root"})}return t})(),TM=new Ee(""),EM=(()=>{class t extends Ea{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(Gt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return SM(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+vl(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+vl(i));this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+vl(i));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||t)(rt(vx),rt(TM,8))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yc=(()=>{class t{_subject=new nt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=_ve(wG(yG(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+vl(r))}normalize(e){return t.stripTrailingSlash(kve(this._basePath,yG(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+vl(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+vl(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=vl;static joinWithSlash=SM;static stripTrailingSlash=wG;static \u0275fac=function(r){return new(r||t)(rt(Ea))};static \u0275prov=_e({token:t,factory:()=>xve(),providedIn:"root"})}return t})();function xve(){return new yc(rt(Ea))}function kve(t,n){if(!t||!n.startsWith(t))return n;let e=n.substring(t.length);return e===""||["/",";","?","#"].includes(e[0])?e:n}function yG(t){return t.replace(/\/index.html$/,"")}function _ve(t){if(new RegExp("^(https?:)?//").test(t)){let[,e]=t.split(/\/\/[^\/]+/);return e}return t}var FM=(()=>{class t extends Ea{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=SM(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,i){let s=this.prepareExternalUrl(o+vl(i))||this._platformLocation.pathname;this._platformLocation.pushState(e,r,s)}replaceState(e,r,o,i){let s=this.prepareExternalUrl(o+vl(i))||this._platformLocation.pathname;this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||t)(rt(vx),rt(TM,8))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var Ni=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(Ni||{}),Qn=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(Qn||{}),bs=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(bs||{}),xd={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function MG(t){return Ys(t)[jr.LocaleId]}function SG(t,n,e){let r=Ys(t),o=[r[jr.DayPeriodsFormat],r[jr.DayPeriodsStandalone]],i=Ia(o,n);return Ia(i,e)}function TG(t,n,e){let r=Ys(t),o=[r[jr.DaysFormat],r[jr.DaysStandalone]],i=Ia(o,n);return Ia(i,e)}function EG(t,n,e){let r=Ys(t),o=[r[jr.MonthsFormat],r[jr.MonthsStandalone]],i=Ia(o,n);return Ia(i,e)}function IG(t,n){let r=Ys(t)[jr.Eras];return Ia(r,n)}function wx(t,n){let e=Ys(t);return Ia(e[jr.DateFormat],n)}function yx(t,n){let e=Ys(t);return Ia(e[jr.TimeFormat],n)}function xx(t,n){let r=Ys(t)[jr.DateTimeFormat];return Ia(r,n)}function kx(t,n){let e=Ys(t),r=e[jr.NumberSymbols][n];if(typeof r>"u"){if(n===xd.CurrencyDecimal)return e[jr.NumberSymbols][xd.Decimal];if(n===xd.CurrencyGroup)return e[jr.NumberSymbols][xd.Group]}return r}function DG(t){if(!t[jr.ExtraData])throw new Te(2303,!1)}function NG(t){let n=Ys(t);return DG(n),(n[jr.ExtraData][2]||[]).map(r=>typeof r=="string"?$6(r):[$6(r[0]),$6(r[1])])}function AG(t,n,e){let r=Ys(t);DG(r);let o=[r[jr.ExtraData][0],r[jr.ExtraData][1]],i=Ia(o,n)||[];return Ia(i,e)||[]}function Ia(t,n){for(let e=n;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Te(2304,!1)}function $6(t){let[n,e]=t.split(":");return{hours:+n,minutes:+e}}var Cve=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,IM={},Mve=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function RG(t,n,e,r){let o=Ove(t);n=yd(e,n)||n;let s=[],a;for(;n;)if(a=Mve.exec(n),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;n=u}else{s.push(n);break}let l=o.getTimezoneOffset();r&&(l=FG(r,l),o=Rve(o,r));let c="";return s.forEach(u=>{let d=Nve(u);c+=d?d(o,e,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function OM(t,n,e){let r=new Date(0);return r.setFullYear(t,n,e),r.setHours(0,0,0),r}function yd(t,n){let e=MG(t);if(IM[e]??={},IM[e][n])return IM[e][n];let r="";switch(n){case"shortDate":r=wx(t,bs.Short);break;case"mediumDate":r=wx(t,bs.Medium);break;case"longDate":r=wx(t,bs.Long);break;case"fullDate":r=wx(t,bs.Full);break;case"shortTime":r=yx(t,bs.Short);break;case"mediumTime":r=yx(t,bs.Medium);break;case"longTime":r=yx(t,bs.Long);break;case"fullTime":r=yx(t,bs.Full);break;case"short":let o=yd(t,"shortTime"),i=yd(t,"shortDate");r=DM(xx(t,bs.Short),[o,i]);break;case"medium":let s=yd(t,"mediumTime"),a=yd(t,"mediumDate");r=DM(xx(t,bs.Medium),[s,a]);break;case"long":let l=yd(t,"longTime"),c=yd(t,"longDate");r=DM(xx(t,bs.Long),[l,c]);break;case"full":let u=yd(t,"fullTime"),d=yd(t,"fullDate");r=DM(xx(t,bs.Full),[u,d]);break}return r&&(IM[e][n]=r),r}function DM(t,n){return n&&(t=t.replace(/\{([^}]+)}/g,function(e,r){return n!=null&&r in n?n[r]:e})),t}function wl(t,n,e="-",r,o){let i="";(t<0||o&&t<=0)&&(o?t=-t+1:(t=-t,i=e));let s=String(t);for(;s.length<n;)s="0"+s;return r&&(s=s.slice(s.length-n)),i+s}function Sve(t,n){return wl(t,3).substring(0,n)}function Mo(t,n,e=0,r=!1,o=!1){return function(i,s){let a=Tve(t,i);if((e>0||a>-e)&&(a+=e),t===3)a===0&&e===-12&&(a=12);else if(t===6)return Sve(a,n);let l=kx(s,xd.MinusSign);return wl(a,n,l,r,o)}}function Tve(t,n){switch(t){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate();case 3:return n.getHours();case 4:return n.getMinutes();case 5:return n.getSeconds();case 6:return n.getMilliseconds();case 7:return n.getDay();default:throw new Te(2301,!1)}}function yr(t,n,e=Ni.Format,r=!1){return function(o,i){return Eve(o,i,t,n,e,r)}}function Eve(t,n,e,r,o,i){switch(e){case 2:return EG(n,o,r)[t.getMonth()];case 1:return TG(n,o,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(i){let c=NG(n),u=AG(n,o,r),d=c.findIndex(p=>{if(Array.isArray(p)){let[h,f]=p,m=s>=h.hours&&a>=h.minutes,g=s<f.hours||s===f.hours&&a<f.minutes;if(h.hours<f.hours){if(m&&g)return!0}else if(m||g)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return SG(n,o,r)[s<12?0:1];case 3:return IG(n,r)[t.getFullYear()<=0?0:1];default:let l=e;throw new Te(2302,!1)}}function NM(t){return function(n,e,r){let o=-1*r,i=kx(e,xd.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(t){case 0:return(o>=0?"+":"")+wl(s,2,i)+wl(Math.abs(o%60),2,i);case 1:return"GMT"+(o>=0?"+":"")+wl(s,1,i);case 2:return"GMT"+(o>=0?"+":"")+wl(s,2,i)+":"+wl(Math.abs(o%60),2,i);case 3:return r===0?"Z":(o>=0?"+":"")+wl(s,2,i)+":"+wl(Math.abs(o%60),2,i);default:throw new Te(2310,!1)}}}var Ive=0,RM=4;function Dve(t){let n=OM(t,Ive,1).getDay();return OM(t,0,1+(n<=RM?RM:RM+7)-n)}function OG(t){let n=t.getDay(),e=n===0?-3:RM-n;return OM(t.getFullYear(),t.getMonth(),t.getDate()+e)}function V6(t,n=!1){return function(e,r){let o;if(n){let i=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();o=1+Math.floor((s+i)/7)}else{let i=OG(e),s=Dve(i.getFullYear()),a=i.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return wl(o,t,kx(r,xd.MinusSign))}}function AM(t,n=!1){return function(e,r){let i=OG(e).getFullYear();return wl(i,t,kx(r,xd.MinusSign),n)}}var j6={};function Nve(t){if(j6[t])return j6[t];let n;switch(t){case"G":case"GG":case"GGG":n=yr(3,Qn.Abbreviated);break;case"GGGG":n=yr(3,Qn.Wide);break;case"GGGGG":n=yr(3,Qn.Narrow);break;case"y":n=Mo(0,1,0,!1,!0);break;case"yy":n=Mo(0,2,0,!0,!0);break;case"yyy":n=Mo(0,3,0,!1,!0);break;case"yyyy":n=Mo(0,4,0,!1,!0);break;case"Y":n=AM(1);break;case"YY":n=AM(2,!0);break;case"YYY":n=AM(3);break;case"YYYY":n=AM(4);break;case"M":case"L":n=Mo(1,1,1);break;case"MM":case"LL":n=Mo(1,2,1);break;case"MMM":n=yr(2,Qn.Abbreviated);break;case"MMMM":n=yr(2,Qn.Wide);break;case"MMMMM":n=yr(2,Qn.Narrow);break;case"LLL":n=yr(2,Qn.Abbreviated,Ni.Standalone);break;case"LLLL":n=yr(2,Qn.Wide,Ni.Standalone);break;case"LLLLL":n=yr(2,Qn.Narrow,Ni.Standalone);break;case"w":n=V6(1);break;case"ww":n=V6(2);break;case"W":n=V6(1,!0);break;case"d":n=Mo(2,1);break;case"dd":n=Mo(2,2);break;case"c":case"cc":n=Mo(7,1);break;case"ccc":n=yr(1,Qn.Abbreviated,Ni.Standalone);break;case"cccc":n=yr(1,Qn.Wide,Ni.Standalone);break;case"ccccc":n=yr(1,Qn.Narrow,Ni.Standalone);break;case"cccccc":n=yr(1,Qn.Short,Ni.Standalone);break;case"E":case"EE":case"EEE":n=yr(1,Qn.Abbreviated);break;case"EEEE":n=yr(1,Qn.Wide);break;case"EEEEE":n=yr(1,Qn.Narrow);break;case"EEEEEE":n=yr(1,Qn.Short);break;case"a":case"aa":case"aaa":n=yr(0,Qn.Abbreviated);break;case"aaaa":n=yr(0,Qn.Wide);break;case"aaaaa":n=yr(0,Qn.Narrow);break;case"b":case"bb":case"bbb":n=yr(0,Qn.Abbreviated,Ni.Standalone,!0);break;case"bbbb":n=yr(0,Qn.Wide,Ni.Standalone,!0);break;case"bbbbb":n=yr(0,Qn.Narrow,Ni.Standalone,!0);break;case"B":case"BB":case"BBB":n=yr(0,Qn.Abbreviated,Ni.Format,!0);break;case"BBBB":n=yr(0,Qn.Wide,Ni.Format,!0);break;case"BBBBB":n=yr(0,Qn.Narrow,Ni.Format,!0);break;case"h":n=Mo(3,1,-12);break;case"hh":n=Mo(3,2,-12);break;case"H":n=Mo(3,1);break;case"HH":n=Mo(3,2);break;case"m":n=Mo(4,1);break;case"mm":n=Mo(4,2);break;case"s":n=Mo(5,1);break;case"ss":n=Mo(5,2);break;case"S":n=Mo(6,1);break;case"SS":n=Mo(6,2);break;case"SSS":n=Mo(6,3);break;case"Z":case"ZZ":case"ZZZ":n=NM(0);break;case"ZZZZZ":n=NM(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=NM(1);break;case"OOOO":case"ZZZZ":case"zzzz":n=NM(2);break;default:return null}return j6[t]=n,n}function FG(t,n){t=t.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?n:e}function Ave(t,n){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+n),t}function Rve(t,n,e){let o=t.getTimezoneOffset(),i=FG(n,o);return Ave(t,-1*(i-o))}function Ove(t){if(_G(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[o,i=1,s=1]=t.split("-").map(a=>+a);return OM(o,i-1,s)}let e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let r;if(r=t.match(Cve))return Fve(r)}let n=new Date(t);if(!_G(n))throw new Te(2311,!1);return n}function Fve(t){let n=new Date(0),e=0,r=0,o=t[8]?n.setUTCFullYear:n.setFullYear,i=t[8]?n.setUTCHours:n.setHours;t[9]&&(e=Number(t[9]+t[10]),r=Number(t[9]+t[11])),o.call(n,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-e,a=Number(t[5]||0)-r,l=Number(t[6]||0),c=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return i.call(n,s,a,l,c),n}function _G(t){return t instanceof Date&&!isNaN(t.valueOf())}var z6=/\s+/,bG=[],Nm=(()=>{class t{_ngEl;_renderer;initialClasses=bG;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(z6):bG}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(z6):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let o=this.stateMap.get(e);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(z6).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static \u0275fac=function(r){return new(r||t)(Xt(Ft),Xt(vr))};static \u0275dir=ye({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})(),_x=(()=>{class t{_viewContainerRef;ngComponentOutlet=null;ngComponentOutletInputs;ngComponentOutletInjector;ngComponentOutletEnvironmentInjector;ngComponentOutletContent;ngComponentOutletNgModule;ngComponentOutletNgModuleFactory;_componentRef;_moduleRef;_inputsUsed=new Map;get componentInstance(){return this._componentRef?.instance??null}constructor(e){this._viewContainerRef=e}_needToReCreateNgModuleInstance(e){return e.ngComponentOutletNgModule!==void 0||e.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(e){return e.ngComponentOutlet!==void 0||e.ngComponentOutletContent!==void 0||e.ngComponentOutletInjector!==void 0||e.ngComponentOutletEnvironmentInjector!==void 0||this._needToReCreateNgModuleInstance(e)}ngOnChanges(e){if(this._needToReCreateComponentInstance(e)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let r=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(e)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=l6(this.ngComponentOutletNgModule,CG(r)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(CG(r)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:r,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent,environmentInjector:this.ngComponentOutletEnvironmentInjector})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let e of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(e,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(e){for(let[r,o]of this._inputsUsed)o?(e.setInput(r,this.ngComponentOutletInputs[r]),this._inputsUsed.set(r,!1)):(e.setInput(r,void 0),this._inputsUsed.delete(r))}static \u0275fac=function(r){return new(r||t)(Xt(_o))};static \u0275dir=ye({type:t,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletEnvironmentInjector:"ngComponentOutletEnvironmentInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},exportAs:["ngComponentOutlet"],features:[Qr]})}return t})();function CG(t){return t.get(ml).injector}var bx=(()=>{class t{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,r,o){this._ngEl=e,this._differs=r,this._renderer=o}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){let[o,i]=e.split("."),s=o.indexOf("-")===-1?void 0:fl.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,i?`${r}${i}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,o,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||t)(Xt(Ft),Xt(B6),Xt(vr))};static \u0275dir=ye({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return t})(),S1=(()=>{class t{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,r,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,o):!1,get:(e,r,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,o)}})}static \u0275fac=function(r){return new(r||t)(Xt(_o))};static \u0275dir=ye({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Qr]})}return t})();function Bve(t,n){return new Te(2100,!1)}var Pve="mediumDate",BG=new Ee(""),PG=new Ee(""),H6=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(e,r,o){this.locale=e,this.defaultTimezone=r,this.defaultOptions=o}transform(e,r,o,i){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??Pve,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return RG(e,s,i||this.locale,a)}catch(s){throw Bve(t,s.message)}}static \u0275fac=function(r){return new(r||t)(Xt(px,16),Xt(BG,24),Xt(PG,24))};static \u0275pipe=hd({name:"date",type:t,pure:!0})}return t})();var xr=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({})}return t})();function Cx(t,n){n=encodeURIComponent(n);for(let e of t.split(";")){let r=e.indexOf("="),[o,i]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===n)return decodeURIComponent(i)}return null}var Am=class{};function Rm(t,n,e){return m6(t,n,e)}var G6="browser",$ve="server";function Cs(t){return t===G6}function LG(t){return t===$ve}var $G=(()=>{class t{static \u0275prov=_e({token:t,providedIn:"root",factory:()=>new U6(R(Gt),window)})}return t})(),U6=class{document;window;offset=()=>[0,0];constructor(n,e){this.document=n,this.window=e}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n,e){this.window.scrollTo(lt(ae({},e),{left:n[0],top:n[1]}))}scrollToAnchor(n,e){let r=Vve(this.document,n);r&&(this.scrollToElement(r,e),r.focus())}setHistoryScrollRestoration(n){try{this.window.history.scrollRestoration=n}catch{console.warn(al(2400,!1))}}scrollToElement(n,e){let r=n.getBoundingClientRect(),o=r.left+this.window.pageXOffset,i=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(lt(ae({},e),{left:o-s[0],top:i-s[1]}))}};function Vve(t,n){let e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(n)||i.querySelector(`[name="${n}"]`);if(s)return s}o=r.nextNode()}}return null}var I1=class{},Mh=class{},Sh=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let o=e.slice(0,r),i=e.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,e);let o=(n.op==="a"?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":let i=n.value;if(!i)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(n,e){let r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(n,e){let r=(Array.isArray(e)?e:[e]).map(i=>i.toString()),o=n.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var PM=class{encodeKey(n){return VG(n)}encodeValue(n){return VG(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function jve(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,i)),n.decodeValue(o.slice(i+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var zve=/%(\d[a-f0-9])/gi,Hve={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function VG(t){return encodeURIComponent(t).replace(zve,(n,e)=>Hve[e]??n)}function BM(t){return`${t}`}var kd=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new PM,n.fromString){if(n.fromObject)throw new Te(2805,!1);this.map=jve(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let r=n.fromObject[e],o=Array.isArray(r)?r.map(BM):[BM(r)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(r=>{let o=n[r];Array.isArray(o)?o.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(BM(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],o=r.indexOf(BM(n.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var LM=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function Uve(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function jG(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function zG(t){return typeof Blob<"u"&&t instanceof Blob}function HG(t){return typeof FormData<"u"&&t instanceof FormData}function Gve(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var UG="Content-Type",GG="Accept",WG="X-Request-URL",qG="text/plain",KG="application/json",Wve=`${KG}, ${qG}, */*`,T1=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(n,e,r,o){this.url=e,this.method=n.toUpperCase();let i;if(Uve(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),typeof i.timeout=="number"){if(i.timeout<1||!Number.isInteger(i.timeout))throw new Te(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),this.transferCache=i.transferCache}if(this.headers??=new Sh,this.context??=new LM,!this.params)this.params=new kd,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||jG(this.body)||zG(this.body)||HG(this.body)||Gve(this.body)?this.body:this.body instanceof kd?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||HG(this.body)?null:zG(this.body)?this.body.type||null:jG(this.body)?null:typeof this.body=="string"?qG:this.body instanceof kd?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?KG:null}clone(n={}){let e=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,i=n.keepalive??this.keepalive,s=n.priority||this.priority,a=n.cache||this.cache,l=n.mode||this.mode,c=n.redirect||this.redirect,u=n.credentials||this.credentials,d=n.referrer||this.referrer,p=n.integrity||this.integrity,h=n.transferCache??this.transferCache,f=n.timeout??this.timeout,m=n.body!==void 0?n.body:this.body,g=n.withCredentials??this.withCredentials,v=n.reportProgress??this.reportProgress,w=n.headers||this.headers,y=n.params||this.params,k=n.context??this.context;return n.setHeaders!==void 0&&(w=Object.keys(n.setHeaders).reduce((_,S)=>_.set(S,n.setHeaders[S]),w)),n.setParams&&(y=Object.keys(n.setParams).reduce((_,S)=>_.set(S,n.setParams[S]),y)),new t(e,r,m,{params:y,headers:w,context:k,reportProgress:v,responseType:o,withCredentials:g,transferCache:h,keepalive:i,cache:a,priority:s,timeout:f,mode:l,redirect:c,credentials:u,referrer:d,integrity:p})}},Om=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(Om||{}),D1=class{headers;status;statusText;url;ok;type;redirected;constructor(n,e=200,r="OK"){this.headers=n.headers||new Sh,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.redirected=n.redirected,this.ok=this.status>=200&&this.status<300}},$M=class t extends D1{constructor(n={}){super(n)}type=Om.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Sx=class t extends D1{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=Om.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0,redirected:n.redirected??this.redirected})}},E1=class extends D1{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},qve=200,Kve=204;function W6(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer}}var N1=(()=>{class t{handler;constructor(e){this.handler=e}request(e,r,o={}){let i;if(e instanceof T1)i=e;else{let l;o.headers instanceof Sh?l=o.headers:l=new Sh(o.headers);let c;o.params&&(o.params instanceof kd?c=o.params:c=new kd({fromObject:o.params})),i=new T1(e,r,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials,referrer:o.referrer,integrity:o.integrity,timeout:o.timeout})}let s=ct(i).pipe(va(l=>this.handler.handle(l)));if(e instanceof T1||o.observe==="events")return s;let a=s.pipe(Cn(l=>l instanceof Sx));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(Et(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Te(2806,!1);return l.body}));case"blob":return a.pipe(Et(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Te(2807,!1);return l.body}));case"text":return a.pipe(Et(l=>{if(l.body!==null&&typeof l.body!="string")throw new Te(2808,!1);return l.body}));case"json":default:return a.pipe(Et(l=>l.body))}case"response":return a;default:throw new Te(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new kd().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,W6(o,r))}post(e,r,o={}){return this.request("POST",e,W6(o,r))}put(e,r,o={}){return this.request("PUT",e,W6(o,r))}static \u0275fac=function(r){return new(r||t)(rt(I1))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var Zve=new Ee("");function Xve(t,n){return n(t)}function Yve(t,n,e){return(r,o)=>Vr(e,()=>n(r,i=>t(i,o)))}var ZG=new Ee(""),XG=new Ee(""),YG=new Ee("",{providedIn:"root",factory:()=>!0});var VM=(()=>{class t extends I1{backend;injector;chain=null;pendingTasks=R(c1);contributeToStability=R(YG);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(ZG),...this.injector.get(XG,[])]));this.chain=r.reduceRight((o,i)=>Yve(o,i,this.injector),Xve)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,o=>this.backend.handle(o)).pipe(um(r))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(rt(Mh),rt(ir))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var Qve=/^\)\]\}',?\n/,Jve=RegExp(`^${WG}:`,"m");function ewe(t){return"responseURL"in t&&t.responseURL?t.responseURL:Jve.test(t.getAllResponseHeaders())?t.getResponseHeader(WG):null}var q6=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Te(-2800,!1);let r=this.xhrFactory;return ct(null).pipe(Sr(()=>new tn(i=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((g,v)=>s.setRequestHeader(g,v.join(","))),e.headers.has(GG)||s.setRequestHeader(GG,Wve),!e.headers.has(UG)){let g=e.detectContentTypeHeader();g!==null&&s.setRequestHeader(UG,g)}if(e.timeout&&(s.timeout=e.timeout),e.responseType){let g=e.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let g=s.statusText||"OK",v=new Sh(s.getAllResponseHeaders()),w=ewe(s)||e.url;return l=new $M({headers:v,status:s.status,statusText:g,url:w}),l},u=()=>{let{headers:g,status:v,statusText:w,url:y}=c(),k=null;v!==Kve&&(k=typeof s.response>"u"?s.responseText:s.response),v===0&&(v=k?qve:0);let _=v>=200&&v<300;if(e.responseType==="json"&&typeof k=="string"){let S=k;k=k.replace(Qve,"");try{k=k!==""?JSON.parse(k):null}catch(E){k=S,_&&(_=!1,k={error:E,text:k})}}_?(i.next(new Sx({body:k,headers:g,status:v,statusText:w,url:y||void 0})),i.complete()):i.error(new E1({error:k,headers:g,status:v,statusText:w,url:y||void 0}))},d=g=>{let{url:v}=c(),w=new E1({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:v||void 0});i.error(w)},p=d;e.timeout&&(p=g=>{let{url:v}=c(),w=new E1({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:v||void 0});i.error(w)});let h=!1,f=g=>{h||(i.next(c()),h=!0);let v={type:Om.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),e.responseType==="text"&&s.responseText&&(v.partialText=s.responseText),i.next(v)},m=g=>{let v={type:Om.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),i.next(v)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",p),s.addEventListener("abort",d),e.reportProgress&&(s.addEventListener("progress",f),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),i.next({type:Om.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",p),e.reportProgress&&(s.removeEventListener("progress",f),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(rt(Am))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),QG=new Ee(""),twe="XSRF-TOKEN",nwe=new Ee("",{providedIn:"root",factory:()=>twe}),rwe="X-XSRF-TOKEN",owe=new Ee("",{providedIn:"root",factory:()=>rwe}),Tx=class{},iwe=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r){this.doc=e,this.cookieName=r}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Cx(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||t)(rt(Gt),rt(nwe))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function swe(t,n){let e=t.url.toLowerCase();if(!R(QG)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let r=R(Tx).getToken(),o=R(owe);return r!=null&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,r)})),n(t)}function K6(...t){let n=[N1,q6,VM,{provide:I1,useExisting:VM},{provide:Mh,useFactory:()=>R(Zve,{optional:!0})??R(q6)},{provide:ZG,useValue:swe,multi:!0},{provide:QG,useValue:!0},{provide:Tx,useClass:iwe}];for(let e of t)n.push(...e.\u0275providers);return mh(n)}function awe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var JG=["de",[["AM","PM"]],void 0,[["S","M","D","M","D","F","S"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."]],[["S","M","D","M","D","F","S"],["So","Mo","Di","Mi","Do","Fr","Sa"],["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."]],[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan.","Feb.","M\xE4rz","Apr.","Mai","Juni","Juli","Aug.","Sept.","Okt.","Nov.","Dez."],["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]],[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","M\xE4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]],[["v. Chr.","n. Chr."]],1,[6,0],["dd.MM.yy","dd.MM.y","d. MMMM y","EEEE, d. MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} 'um' {0}",void 0],[",",".",";","%","+","-","E","\xB7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","Euro",{ATS:["\xF6S"],AUD:["AU$","$"],BGM:["BGK"],BGO:["BGJ"],BYN:[void 0,"\u0440."],CUC:[void 0,"Cub$"],DEM:["DM"],FKP:[void 0,"Fl\xA3"],GHS:[void 0,"\u20B5"],GNF:[void 0,"F.G."],KMF:[void 0,"FC"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],RUR:[void 0,"\u0440."],RWF:[void 0,"F.Rw"],SYP:[],THB:["\u0E3F"],TWD:["NT$"],XXX:[],ZMW:[void 0,"K"]},"ltr",awe];function lwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var eW=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",lwe];function cwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return n===1?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var tW=["es",[["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",cwe];function uwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===0||e===1?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var nW=["fr",[["AM","PM"]],void 0,[["D","L","M","M","J","V","S"],["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],["di","lu","ma","me","je","ve","sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["janv.","f\xE9vr.","mars","avr.","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]],void 0,[["av. J.-C.","ap. J.-C."],void 0,["avant J\xE9sus-Christ","apr\xE8s J\xE9sus-Christ"]],1,[6,0],["dd/MM/y","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}","{1}, {0}","{1} '\xE0' {0}",void 0],[",","\u202F",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{ARS:["$AR","$"],AUD:["$AU","$"],BEF:["FB"],BMD:["$BM","$"],BND:["$BN","$"],BYN:[void 0,"\u0440."],BZD:["$BZ","$"],CAD:["$CA","$"],CLP:["$CL","$"],CNY:[void 0,"\xA5"],COP:["$CO","$"],CYP:["\xA3CY"],EGP:[void 0,"\xA3E"],FJD:["$FJ","$"],FKP:["\xA3FK","\xA3"],FRF:["F"],GBP:["\xA3GB","\xA3"],GIP:["\xA3GI","\xA3"],HKD:[void 0,"$"],IEP:["\xA3IE"],ILP:["\xA3IL"],ITL:["\u20A4IT"],JPY:[void 0,"\xA5"],KMF:[void 0,"FC"],LBP:["\xA3LB","\xA3L"],MTP:["\xA3MT"],MXN:["$MX","$"],NAD:["$NA","$"],NIO:[void 0,"$C"],NZD:["$NZ","$"],PHP:[void 0,"\u20B1"],RHD:["$RH"],RON:[void 0,"L"],RWF:[void 0,"FR"],SBD:["$SB","$"],SGD:["$SG","$"],SRD:["$SR","$"],TOP:[void 0,"$T"],TTD:["$TT","$"],TWD:[void 0,"NT$"],USD:["$US","$"],UYU:["$UY","$"],WST:["$WS"],XCD:[void 0,"$"],XPF:["FCFP"],ZMW:[void 0,"Kw"]},"ltr",uwe];function dwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1&&r===0?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var rW=["it",[["m.","p."],["AM","PM"]],void 0,[["D","L","M","M","G","V","S"],["dom","lun","mar","mer","gio","ven","sab"],["domenica","luned\xEC","marted\xEC","mercoled\xEC","gioved\xEC","venerd\xEC","sabato"],["dom","lun","mar","mer","gio","ven","sab"]],void 0,[["G","F","M","A","M","G","L","A","S","O","N","D"],["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]],void 0,[["aC","dC"],["a.C.","d.C."],["avanti Cristo","dopo Cristo"]],1,[6,0],["dd/MM/yy","d MMM y","d MMMM y","EEEE d MMMM y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} {0}",void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{BRL:[void 0,"R$"],BYN:[void 0,"Br"],EGP:[void 0,"\xA3E"],HKD:[void 0,"$"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NOK:[void 0,"NKr"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:[void 0,"$"],VND:[void 0,"\u20AB"]},"ltr",dwe];function pwe(t){let n=t,e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(t.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===Math.floor(e)&&e>=0&&e<=1?1:o===0&&e!==0&&e%1e6===0&&r===0||!(o>=0&&o<=5)?4:5}var oW=["pt",[["AM","PM"]],void 0,[["D","S","T","Q","Q","S","S"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xE1b."],["domingo","segunda-feira","ter\xE7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xE1bado"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xE1b."]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["jan.","fev.","mar.","abr.","mai.","jun.","jul.","ago.","set.","out.","nov.","dez."],["janeiro","fevereiro","mar\xE7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]],void 0,[["a.C.","d.C."],void 0,["antes de Cristo","depois de Cristo"]],0,[6,0],["dd/MM/y","d 'de' MMM 'de' y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4\xA0#,##0.00","#E0"],"BRL","R$","Real brasileiro",{AUD:["AU$","$"],BYN:[void 0,"\u0440."],JPY:["JP\xA5","\xA5"],PHP:[void 0,"\u20B1"],PTE:["Esc."],RON:[void 0,"L"],SYP:[void 0,"S\xA3"],THB:["\u0E3F"],TWD:["NT$"],USD:["US$","$"]},"ltr",pwe];var Ex=class{_doc;constructor(n){this._doc=n}manager},jM=(()=>{class t extends Ex{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o,i){return e.addEventListener(r,o,i),()=>this.removeEventListener(e,r,o,i)}removeEventListener(e,r,o,i){return e.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||t)(rt(Gt))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),HM=new Ee(""),J6=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(s=>{s.manager=this});let o=e.filter(s=>!(s instanceof jM));this._plugins=o.slice().reverse();let i=e.find(s=>s instanceof jM);i&&this._plugins.push(i)}addEventListener(e,r,o,i){return this._findPluginFor(r).addEventListener(e,r,o,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(i=>i.supports(e)),!r)throw new Te(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||t)(rt(HM),rt(Zt))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),Z6="ng-app-id";function iW(t){for(let n of t)n.remove()}function sW(t,n){let e=n.createElement("style");return e.textContent=t,e}function hwe(t,n,e,r){let o=t.head?.querySelectorAll(`style[${Z6}="${n}"],link[${Z6}="${n}"]`);if(o)for(let i of o)i.removeAttribute(Z6),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&e.set(i.textContent,{usage:0,elements:[i]})}function Y6(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var e8=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,r,o,i={}){this.doc=e,this.appId=r,this.nonce=o,hwe(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let o of e)this.addUsage(o,this.inline,sW);r?.forEach(o=>this.addUsage(o,this.external,Y6))}removeStyles(e,r){for(let o of e)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(e,r,o){let i=r.get(e);i?i.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(e,this.doc)))})}removeUsage(e,r){let o=r.get(e);o&&(o.usage--,o.usage<=0&&(iW(o.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])iW(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(e,sW(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(e,Y6(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),e.appendChild(r)}static \u0275fac=function(r){return new(r||t)(rt(Gt),rt(_h),rt(oM,8),rt(zo))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),X6={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},t8=/%COMP%/g;var lW="%COMP%",fwe=`_nghost-${lW}`,mwe=`_ngcontent-${lW}`,gwe=!0,vwe=new Ee("",{providedIn:"root",factory:()=>gwe});function wwe(t){return mwe.replace(t8,t)}function ywe(t){return fwe.replace(t8,t)}function cW(t,n){return n.map(e=>e.replace(t8,t))}var Nx=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,o,i,s,a,l=null,c=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new Ix(e,s,a,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(e,r);return o instanceof zM?o.applyToHost(e):o instanceof Dx&&o.applyStyles(),o}getOrCreateRenderer(e,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case pd.Emulated:i=new zM(l,c,r,this.appId,u,s,a,d,p);break;case pd.ShadowDom:return new Q6(l,c,e,r,s,a,this.nonce,d,p);default:i=new Dx(l,c,r,u,s,a,d,p);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||t)(rt(J6),rt(e8),rt(_h),rt(vwe),rt(Gt),rt(Zt),rt(oM),rt(bh,8))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),Ix=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,r,o,i){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(X6[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(aW(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(aW(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){e.remove()}selectRootElement(n,e){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new Te(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,o){if(o){e=o+":"+e;let i=X6[o];i?n.setAttributeNS(i,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){let o=X6[r];o?n.removeAttributeNS(o,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,o){o&(fl.DashCase|fl.Important)?n.style.setProperty(e,r,o&fl.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&fl.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n!=null&&(n[e]=r)}setValue(n,e){n.nodeValue=e}listen(n,e,r,o){if(typeof n=="string"&&(n=Ta().getGlobalEventTarget(this.doc,n),!n))throw new Te(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(n,e,i)),this.eventManager.addEventListener(n,e,i,o)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;n(e)===!1&&e.preventDefault()}}};function aW(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Q6=class extends Ix{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,r,o,i,s,a,l,c){super(n,i,s,l,c),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=cW(o.id,u);for(let p of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}let d=o.getExternalStyles?.();if(d)for(let p of d){let h=Y6(p,i);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Dx=class extends Ix{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,r,o,i,s,a,l,c){super(n,i,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=c?cW(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Tm.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},zM=class extends Dx{contentAttr;hostAttr;constructor(n,e,r,o,i,s,a,l,c){let u=o+"-"+r.id;super(n,e,r,i,s,a,l,c,u),this.contentAttr=wwe(u),this.hostAttr=ywe(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}};var UM=class t extends gx{supportsDOMEvents=!0;static makeCurrent(){P6(new t)}onAndCancel(n,e,r,o){return n.addEventListener(e,r,o),()=>{n.removeEventListener(e,r,o)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=xwe();return e==null?null:kwe(e)}resetBaseElement(){Ax=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Cx(document.cookie,n)}},Ax=null;function xwe(){return Ax=Ax||document.head.querySelector("base"),Ax?Ax.getAttribute("href"):null}function kwe(t){return new URL(t,document.baseURI).pathname}var _we=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),uW=["alt","control","meta","shift"],bwe={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cwe={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},dW=(()=>{class t extends Ex{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,r,o,i){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ta().onAndCancel(e,s.domEventName,a,i))}static parseEventName(e){let r=e.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),uW.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,r.length!=0||i.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let o=bwe[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(o=e.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),uW.forEach(s=>{if(s!==o){let a=Cwe[s];a(e)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(e,r,o){return i=>{t.matchEventFullKeyCode(i,e)&&o.runGuarded(()=>r(i))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||t)(rt(Gt))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function n8(t,n,e){let r=ae({rootComponent:t,platformRef:e?.platformRef},Mwe(n));return fG(r)}function Mwe(t){return{appProviders:[...Dwe,...t?.providers??[]],platformProviders:Iwe}}function Swe(){UM.makeCurrent()}function Twe(){return new Ws}function Ewe(){return NR(document),document}var Iwe=[{provide:zo,useValue:G6},{provide:rM,useValue:Swe,multi:!0},{provide:Gt,useFactory:Ewe}];var Dwe=[{provide:Oy,useValue:"root"},{provide:Ws,useFactory:Twe},{provide:HM,useClass:jM,multi:!0,deps:[Gt]},{provide:HM,useClass:dW,multi:!0,deps:[Gt]},Nx,e8,J6,{provide:co,useExisting:Nx},{provide:Am,useClass:_we},[]];var pW=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||t)(rt(Gt))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var nn=(function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t})(nn||{}),Da="*";function GM(t,n){return{type:nn.Trigger,name:t,definitions:n,options:{}}}function A1(t,n=null){return{type:nn.Animate,styles:n,timings:t}}function hW(t,n=null){return{type:nn.Sequence,steps:t,options:n}}function Ms(t){return{type:nn.Style,styles:t,offset:null}}function R1(t,n,e=null){return{type:nn.Transition,expr:t,animation:n,options:e}}function Bm(t,n,e=null){return{type:nn.Query,selector:t,animation:n,options:e}}var xc=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(n=0,e=0){this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},Fm=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(n){this.players=n;let e=0,r=0,o=0,i=this.players.length;i==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==i&&this._onFinish()}),s.onDestroy(()=>{++r==i&&this._onDestroy()}),s.onStart(()=>{++o==i&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){let e=n*this.totalTime;this.players.forEach(r=>{let o=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(o)})}getPosition(){let n=this.players.reduce((e,r)=>e===null||r.totalTime>e.totalTime?r:e,null);return n!=null?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},O1="!";function fW(t){return new Te(3e3,!1)}function Awe(){return new Te(3100,!1)}function Rwe(){return new Te(3101,!1)}function Owe(t){return new Te(3001,!1)}function Fwe(t){return new Te(3003,!1)}function Bwe(t){return new Te(3004,!1)}function gW(t,n){return new Te(3005,!1)}function vW(){return new Te(3006,!1)}function wW(){return new Te(3007,!1)}function yW(t,n){return new Te(3008,!1)}function xW(t){return new Te(3002,!1)}function kW(t,n,e,r,o){return new Te(3010,!1)}function _W(){return new Te(3011,!1)}function bW(){return new Te(3012,!1)}function CW(){return new Te(3200,!1)}function MW(){return new Te(3202,!1)}function SW(){return new Te(3013,!1)}function TW(t){return new Te(3014,!1)}function EW(t){return new Te(3015,!1)}function IW(t){return new Te(3016,!1)}function DW(t,n){return new Te(3404,!1)}function Pwe(t){return new Te(3502,!1)}function NW(t){return new Te(3503,!1)}function AW(){return new Te(3300,!1)}function RW(t){return new Te(3504,!1)}function OW(t){return new Te(3301,!1)}function FW(t,n){return new Te(3302,!1)}function BW(t){return new Te(3303,!1)}function PW(t,n){return new Te(3400,!1)}function LW(t){return new Te(3401,!1)}function $W(t){return new Te(3402,!1)}function VW(t,n){return new Te(3505,!1)}function _d(t){switch(t.length){case 0:return new xc;case 1:return t[0];default:return new Fm(t)}}function s8(t,n,e=new Map,r=new Map){let o=[],i=[],s=-1,a=null;if(n.forEach(l=>{let c=l.get("offset"),u=c==s,d=u&&a||new Map;l.forEach((p,h)=>{let f=h,m=p;if(h!=="offset")switch(f=t.normalizePropertyName(f,o),m){case O1:m=e.get(h);break;case Da:m=r.get(h);break;default:m=t.normalizeStyleValue(h,f,m,o);break}d.set(f,m)}),u||i.push(d),a=d,s=c}),o.length)throw Pwe(o);return i}function WM(t,n,e,r){switch(n){case"start":t.onStart(()=>r(e&&r8(e,"start",t)));break;case"done":t.onDone(()=>r(e&&r8(e,"done",t)));break;case"destroy":t.onDestroy(()=>r(e&&r8(e,"destroy",t)));break}}function r8(t,n,e){let r=e.totalTime,o=!!e.disabled,i=qM(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,r??t.totalTime,o),s=t._data;return s!=null&&(i._data=s),i}function qM(t,n,e,r,o="",i=0,s){return{element:t,triggerName:n,fromState:e,toState:r,phaseName:o,totalTime:i,disabled:!!s}}function Ss(t,n,e){let r=t.get(n);return r||t.set(n,r=e),r}function a8(t){let n=t.indexOf(":"),e=t.substring(1,n),r=t.slice(n+1);return[e,r]}var Lwe=typeof document>"u"?null:document.documentElement;function KM(t){let n=t.parentNode||t.host||null;return n===Lwe?null:n}function $we(t){return t.substring(1,6)=="ebkit"}var Pm=null,mW=!1;function jW(t){Pm||(Pm=Vwe()||{},mW=Pm.style?"WebkitAppearance"in Pm.style:!1);let n=!0;return Pm.style&&!$we(t)&&(n=t in Pm.style,!n&&mW&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Pm.style)),n}function Vwe(){return typeof document<"u"?document.body:null}function l8(t,n){for(;n;){if(n===t)return!0;n=KM(n)}return!1}function c8(t,n,e){if(e)return Array.from(t.querySelectorAll(n));let r=t.querySelector(n);return r?[r]:[]}var jwe=1e3,u8="{{",zwe="}}",d8="ng-enter",ZM="ng-leave",Rx="ng-trigger",Ox=".ng-trigger",p8="ng-animating",XM=".ng-animating";function kc(t){if(typeof t=="number")return t;let n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:o8(parseFloat(n[1]),n[2])}function o8(t,n){switch(n){case"s":return t*jwe;default:return t}}function Fx(t,n,e){return t.hasOwnProperty("duration")?t:Uwe(t,n,e)}var Hwe=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Uwe(t,n,e){let r,o=0,i="";if(typeof t=="string"){let s=t.match(Hwe);if(s===null)return n.push(fW(t)),{duration:0,delay:0,easing:""};r=o8(parseFloat(s[1]),s[2]);let a=s[3];a!=null&&(o=o8(parseFloat(a),s[4]));let l=s[5];l&&(i=l)}else r=t;if(!e){let s=!1,a=n.length;r<0&&(n.push(Awe()),s=!0),o<0&&(n.push(Rwe()),s=!0),s&&n.splice(a,0,fW(t))}return{duration:r,delay:o,easing:i}}function zW(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}function yl(t,n,e){n.forEach((r,o)=>{let i=YM(o);e&&!e.has(o)&&e.set(o,t.style[i]),t.style[i]=r})}function Th(t,n){n.forEach((e,r)=>{let o=YM(r);t.style[o]=""})}function F1(t){return Array.isArray(t)?t.length==1?t[0]:hW(t):t}function HW(t,n,e){let r=n.params||{},o=h8(t);o.length&&o.forEach(i=>{r.hasOwnProperty(i)||e.push(Owe(i))})}var i8=new RegExp(`${u8}\\s*(.+?)\\s*${zwe}`,"g");function h8(t){let n=[];if(typeof t=="string"){let e;for(;e=i8.exec(t);)n.push(e[1]);i8.lastIndex=0}return n}function B1(t,n,e){let r=`${t}`,o=r.replace(i8,(i,s)=>{let a=n[s];return a==null&&(e.push(Fwe(s)),a=""),a.toString()});return o==r?t:o}var Gwe=/-+([a-z0-9])/g;function YM(t){return t.replace(Gwe,(...n)=>n[1].toUpperCase())}function UW(t,n){return t===0||n===0}function GW(t,n,e){if(e.size&&n.length){let r=n[0],o=[];if(e.forEach((i,s)=>{r.has(s)||o.push(s),r.set(s,i)}),o.length)for(let i=1;i<n.length;i++){let s=n[i];o.forEach(a=>s.set(a,QM(t,a)))}}return n}function Ts(t,n,e){switch(n.type){case nn.Trigger:return t.visitTrigger(n,e);case nn.State:return t.visitState(n,e);case nn.Transition:return t.visitTransition(n,e);case nn.Sequence:return t.visitSequence(n,e);case nn.Group:return t.visitGroup(n,e);case nn.Animate:return t.visitAnimate(n,e);case nn.Keyframes:return t.visitKeyframes(n,e);case nn.Style:return t.visitStyle(n,e);case nn.Reference:return t.visitReference(n,e);case nn.AnimateChild:return t.visitAnimateChild(n,e);case nn.AnimateRef:return t.visitAnimateRef(n,e);case nn.Query:return t.visitQuery(n,e);case nn.Stagger:return t.visitStagger(n,e);default:throw Bwe(n.type)}}function QM(t,n){return window.getComputedStyle(t)[n]}var D8=(()=>{class t{validateStyleProperty(e){return jW(e)}containsElement(e,r){return l8(e,r)}getParentElement(e){return KM(e)}query(e,r,o){return c8(e,r,o)}computeStyle(e,r,o){return o||""}animate(e,r,o,i,s,a=[],l){return new xc(o,i)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),$m=class{static NOOP=new D8},Vm=class{};var Wwe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),r3=class extends Vm{normalizePropertyName(n,e){return YM(n)}normalizeStyleValue(n,e,r,o){let i="",s=r.toString().trim();if(Wwe.has(e)&&r!==0&&r!=="0")if(typeof r=="number")i="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&o.push(gW(n,r))}return s+i}};var o3="*";function qwe(t,n){let e=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(r=>Kwe(r,e,n)):e.push(t),e}function Kwe(t,n,e){if(t[0]==":"){let l=Zwe(t,e);if(typeof l=="function"){n.push(l);return}t=l}let r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return e.push(EW(t)),n;let o=r[1],i=r[2],s=r[3];n.push(WW(o,s));let a=o==o3&&s==o3;i[0]=="<"&&!a&&n.push(WW(s,o))}function Zwe(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return n.push(IW(t)),"* => *"}}var JM=new Set(["true","1"]),e3=new Set(["false","0"]);function WW(t,n){let e=JM.has(t)||e3.has(t),r=JM.has(n)||e3.has(n);return(o,i)=>{let s=t==o3||t==o,a=n==o3||n==i;return!s&&e&&typeof o=="boolean"&&(s=o?JM.has(t):e3.has(t)),!a&&r&&typeof i=="boolean"&&(a=i?JM.has(n):e3.has(n)),s&&a}}var nq=":self",Xwe=new RegExp(`s*${nq}s*,?`,"g");function rq(t,n,e,r){return new y8(t).build(n,e,r)}var qW="",y8=class{_driver;constructor(n){this._driver=n}build(n,e,r){let o=new x8(e);return this._resetContextStyleTimingState(o),Ts(this,F1(n),o)}_resetContextStyleTimingState(n){n.currentQuerySelector=qW,n.collectedStyles=new Map,n.collectedStyles.set(qW,new Map),n.currentTime=0}visitTrigger(n,e){let r=e.queryCount=0,o=e.depCount=0,i=[],s=[];return n.name.charAt(0)=="@"&&e.errors.push(vW()),n.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==nn.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,i.push(this.visitState(l,e))}),l.name=c}else if(a.type==nn.Transition){let l=this.visitTransition(a,e);r+=l.queryCount,o+=l.depCount,s.push(l)}else e.errors.push(wW())}),{type:nn.Trigger,name:n.name,states:i,transitions:s,queryCount:r,depCount:o,options:null}}visitState(n,e){let r=this.visitStyle(n.styles,e),o=n.options&&n.options.params||null;if(r.containsDynamicStyles){let i=new Set,s=o||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{h8(l).forEach(c=>{s.hasOwnProperty(c)||i.add(c)})})}),i.size&&e.errors.push(yW(n.name,[...i.values()]))}return{type:nn.State,name:n.name,style:r,options:o?{params:o}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;let r=Ts(this,F1(n.animation),e),o=qwe(n.expr,e.errors);return{type:nn.Transition,matchers:o,animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Lm(n.options)}}visitSequence(n,e){return{type:nn.Sequence,steps:n.steps.map(r=>Ts(this,r,e)),options:Lm(n.options)}}visitGroup(n,e){let r=e.currentTime,o=0,i=n.steps.map(s=>{e.currentTime=r;let a=Ts(this,s,e);return o=Math.max(o,e.currentTime),a});return e.currentTime=o,{type:nn.Group,steps:i,options:Lm(n.options)}}visitAnimate(n,e){let r=eye(n.timings,e.errors);e.currentAnimateTimings=r;let o,i=n.styles?n.styles:Ms({});if(i.type==nn.Keyframes)o=this.visitKeyframes(i,e);else{let s=n.styles,a=!1;if(!s){a=!0;let c={};r.easing&&(c.easing=r.easing),s=Ms(c)}e.currentTime+=r.duration+r.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,o=l}return e.currentAnimateTimings=null,{type:nn.Animate,timings:r,style:o,options:null}}visitStyle(n,e){let r=this._makeStyleAst(n,e);return this._validateStyleAst(r,e),r}_makeStyleAst(n,e){let r=[],o=Array.isArray(n.styles)?n.styles:[n.styles];for(let a of o)typeof a=="string"?a===Da?r.push(a):e.errors.push(xW(a)):r.push(new Map(Object.entries(a)));let i=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!i)){for(let l of a.values())if(l.toString().indexOf(u8)>=0){i=!0;break}}}),{type:nn.Style,styles:r,easing:s,offset:n.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(n,e){let r=e.currentAnimateTimings,o=e.currentTime,i=e.currentTime;r&&i>0&&(i-=r.duration+r.delay),n.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l),d=!0;u&&(i!=o&&i>=u.startTime&&o<=u.endTime&&(e.errors.push(kW(l,u.startTime,u.endTime,i,o)),d=!1),i=u.startTime),d&&c.set(l,{startTime:i,endTime:o}),e.options&&HW(a,e.options,e.errors)})})}visitKeyframes(n,e){let r={type:nn.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(_W()),r;let o=1,i=0,s=[],a=!1,l=!1,c=0,u=n.steps.map(v=>{let w=this._makeStyleAst(v,e),y=w.offset!=null?w.offset:Jwe(w.styles),k=0;return y!=null&&(i++,k=w.offset=y),l=l||k<0||k>1,a=a||k<c,c=k,s.push(k),w});l&&e.errors.push(bW()),a&&e.errors.push(CW());let d=n.steps.length,p=0;i>0&&i<d?e.errors.push(MW()):i==0&&(p=o/(d-1));let h=d-1,f=e.currentTime,m=e.currentAnimateTimings,g=m.duration;return u.forEach((v,w)=>{let y=p>0?w==h?1:p*w:s[w],k=y*g;e.currentTime=f+m.delay+k,m.duration=k,this._validateStyleAst(v,e),v.offset=y,r.styles.push(v)}),r}visitReference(n,e){return{type:nn.Reference,animation:Ts(this,F1(n.animation),e),options:Lm(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:nn.AnimateChild,options:Lm(n.options)}}visitAnimateRef(n,e){return{type:nn.AnimateRef,animation:this.visitReference(n.animation,e),options:Lm(n.options)}}visitQuery(n,e){let r=e.currentQuerySelector,o=n.options||{};e.queryCount++,e.currentQuery=n;let[i,s]=Ywe(n.selector);e.currentQuerySelector=r.length?r+" "+i:i,Ss(e.collectedStyles,e.currentQuerySelector,new Map);let a=Ts(this,F1(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:nn.Query,selector:i,limit:o.limit||0,optional:!!o.optional,includeSelf:s,animation:a,originalSelector:n.selector,options:Lm(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(SW());let r=n.timings==="full"?{duration:0,delay:0,easing:"full"}:Fx(n.timings,e.errors,!0);return{type:nn.Stagger,animation:Ts(this,F1(n.animation),e),timings:r,options:null}}};function Ywe(t){let n=!!t.split(/\s*,\s*/).find(e=>e==nq);return n&&(t=t.replace(Xwe,"")),t=t.replace(/@\*/g,Ox).replace(/@\w+/g,e=>Ox+"-"+e.slice(1)).replace(/:animating/g,XM),[t,n]}function Qwe(t){return t?ae({},t):null}var x8=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(n){this.errors=n}};function Jwe(t){if(typeof t=="string")return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){let r=e;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}function eye(t,n){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let i=Fx(t,n).duration;return f8(i,0,"")}let e=t;if(e.split(/\s+/).some(i=>i.charAt(0)=="{"&&i.charAt(1)=="{")){let i=f8(0,0,"");return i.dynamic=!0,i.strValue=e,i}let o=Fx(e,n);return f8(o.duration,o.delay,o.easing)}function Lm(t){return t?(t=ae({},t),t.params&&(t.params=Qwe(t.params))):t={},t}function f8(t,n,e){return{duration:t,delay:n,easing:e}}function N8(t,n,e,r,o,i,s=null,a=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:r,duration:o,delay:i,totalTime:o+i,easing:s,subTimeline:a}}var Px=class{_map=new Map;get(n){return this._map.get(n)||[]}append(n,e){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}},tye=1,nye=":enter",rye=new RegExp(nye,"g"),oye=":leave",iye=new RegExp(oye,"g");function oq(t,n,e,r,o,i=new Map,s=new Map,a,l,c=[]){return new k8().buildKeyframes(t,n,e,r,o,i,s,a,l,c)}var k8=class{buildKeyframes(n,e,r,o,i,s,a,l,c,u=[]){c=c||new Px;let d=new _8(n,e,c,o,i,u,[]);d.options=l;let p=l.delay?kc(l.delay):0;d.currentTimeline.delayNextStep(p),d.currentTimeline.setStyles([s],null,d.errors,l),Ts(this,r,d);let h=d.timelines.filter(f=>f.containsAnimation());if(h.length&&a.size){let f;for(let m=h.length-1;m>=0;m--){let g=h[m];if(g.element===e){f=g;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[N8(e,[],[],[],0,p,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){let r=e.subInstructions.get(e.element);if(r){let o=e.createSubContext(n.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,o,o.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=n}visitAnimateRef(n,e){let r=e.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,r),this.visitReference(n.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,r){for(let o of n){let i=o?.delay;if(i){let s=typeof i=="number"?i:kc(B1(i,o?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(n,e,r){let i=e.currentTimeline.currentTime,s=r.duration!=null?kc(r.duration):null,a=r.delay!=null?kc(r.delay):null;return s!==0&&n.forEach(l=>{let c=e.appendInstructionToTimeline(l,s,a);i=Math.max(i,c.duration+c.delay)}),i}visitReference(n,e){e.updateOptions(n.options,!0),Ts(this,n.animation,e),e.previousNode=n}visitSequence(n,e){let r=e.subContextCount,o=e,i=n.options;if(i&&(i.params||i.delay)&&(o=e.createSubContext(i),o.transformIntoNewTimeline(),i.delay!=null)){o.previousNode.type==nn.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=i3);let s=kc(i.delay);o.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>Ts(this,s,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){let r=[],o=e.currentTimeline.currentTime,i=n.options&&n.options.delay?kc(n.options.delay):0;n.steps.forEach(s=>{let a=e.createSubContext(n.options);i&&a.delayNextStep(i),Ts(this,s,a),o=Math.max(o,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(o),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){let r=n.strValue,o=e.params?B1(r,e.params,e.errors):r;return Fx(o,e.errors)}else return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){let r=e.currentAnimateTimings=this._visitTiming(n.timings,e),o=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),o.snapshotCurrentStyles());let i=n.style;i.type==nn.Keyframes?this.visitKeyframes(i,e):(e.incrementTime(r.duration),this.visitStyle(i,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){let r=e.currentTimeline,o=e.currentAnimateTimings;!o&&r.hasCurrentStyleProperties()&&r.forwardFrame();let i=o&&o.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(i):r.setStyles(n.styles,i,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){let r=e.currentAnimateTimings,o=e.currentTimeline.duration,i=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,n.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*i),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(o+i),e.previousNode=n}visitQuery(n,e){let r=e.currentTimeline.currentTime,o=n.options||{},i=o.delay?kc(o.delay):0;i&&(e.previousNode.type===nn.Style||r==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=i3);let s=r,a=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;let d=e.createSubContext(n.options,c);i&&d.delayNextStep(i),c===e.element&&(l=d.currentTimeline),Ts(this,n.animation,d),d.currentTimeline.applyStylesToKeyframe();let p=d.currentTimeline.currentTime;s=Math.max(s,p)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){let r=e.parentContext,o=e.currentTimeline,i=n.timings,s=Math.abs(i.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let u=e.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;Ts(this,n.animation,e),e.previousNode=n,r.currentStaggerTime=o.currentTime-d+(o.startTime-r.currentTimeline.startTime)}},i3={},_8=class t{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=i3;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(n,e,r,o,i,s,a,l){this._driver=n,this.element=e,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=i,this.errors=s,this.timelines=a,this.currentTimeline=l||new s3(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;let r=n,o=this.options;r.duration!=null&&(o.duration=kc(r.duration)),r.delay!=null&&(o.delay=kc(r.delay));let i=r.params;if(i){let s=o.params;s||(s=this.options.params={}),Object.keys(i).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=B1(i[a],s,this.errors))})}}_copyOptions(){let n={};if(this.options){let e=this.options.params;if(e){let r=n.params={};Object.keys(e).forEach(o=>{r[o]=e[o]})}}return n}createSubContext(n=null,e,r){let o=e||this.element,i=new t(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(n),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(n){return this.previousNode=i3,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,r){let o={duration:e??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},i=new b8(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(i),o}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,r,o,i,s){let a=[];if(o&&a.push(this.element),n.length>0){n=n.replace(rye,"."+this._enterClassName),n=n.replace(iye,"."+this._leaveClassName);let l=r!=1,c=this._driver.query(this.element,n,l);r!==0&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!i&&a.length==0&&s.push(TW(e)),a}},s3=class t{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(n,e,r,o){this._driver=n,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=o,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new t(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=tye,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Da),this._currentKeyframe.set(e,Da);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,r,o){e&&this._previousKeyframe.set("easing",e);let i=o&&o.params||{},s=sye(n,this._globalTimelineStyles);for(let[a,l]of s){let c=B1(l,i,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Da),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,r)=>{let o=this._styleSummary.get(r);(!o||e.time>o.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let n=new Set,e=new Set,r=this._keyframes.size===1&&this.duration===0,o=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{u===O1?n.add(d):u===Da&&e.add(d)}),r||c.set("offset",l/this.duration),o.push(c)});let i=[...n.values()],s=[...e.values()];if(r){let a=o[0],l=new Map(a);a.set("offset",0),l.set("offset",1),o=[a,l]}return N8(this.element,o,i,s,this.duration,this.startTime,this.easing,!1)}},b8=class extends s3{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(n,e,r,o,i,s,a=!1){super(n,e,s.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=i,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){let i=[],s=r+e,a=e/s,l=new Map(n[0]);l.set("offset",0),i.push(l);let c=new Map(n[0]);c.set("offset",KW(a)),i.push(c);let u=n.length-1;for(let d=1;d<=u;d++){let p=new Map(n[d]),h=p.get("offset"),f=e+h*r;p.set("offset",KW(f/s)),i.push(p)}r=s,e=0,o="",n=i}return N8(this.element,n,this.preStyleProps,this.postStyleProps,r,e,o,!0)}};function KW(t,n=3){let e=Math.pow(10,n-1);return Math.round(t*e)/e}function sye(t,n){let e=new Map,r;return t.forEach(o=>{if(o==="*"){r??=n.keys();for(let i of r)e.set(i,Da)}else for(let[i,s]of o)e.set(i,s)}),e}function ZW(t,n,e,r,o,i,s,a,l,c,u,d,p){return{type:0,element:t,triggerName:n,isRemovalTransition:o,fromState:e,fromStyles:i,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:p}}var m8={},a3=class{_triggerName;ast;_stateStyles;constructor(n,e,r){this._triggerName=n,this.ast=e,this._stateStyles=r}match(n,e,r,o){return aye(this.ast.matchers,n,e,r,o)}buildStyles(n,e,r){let o=this._stateStyles.get("*");return n!==void 0&&(o=this._stateStyles.get(n?.toString())||o),o?o.buildStyles(e,r):new Map}build(n,e,r,o,i,s,a,l,c,u){let d=[],p=this.ast.options&&this.ast.options.params||m8,h=a&&a.params||m8,f=this.buildStyles(r,h,d),m=l&&l.params||m8,g=this.buildStyles(o,m,d),v=new Set,w=new Map,y=new Map,k=o==="void",_={params:iq(m,p),delay:this.ast.options?.delay},S=u?[]:oq(n,e,this.ast.animation,i,s,f,g,_,c,d),E=0;return S.forEach(N=>{E=Math.max(N.duration+N.delay,E)}),d.length?ZW(e,this._triggerName,r,o,k,f,g,[],[],w,y,E,d):(S.forEach(N=>{let B=N.element,D=Ss(w,B,new Set);N.preStyleProps.forEach(M=>D.add(M));let P=Ss(y,B,new Set);N.postStyleProps.forEach(M=>P.add(M)),B!==e&&v.add(B)}),ZW(e,this._triggerName,r,o,k,f,g,S,[...v.values()],w,y,E))}};function aye(t,n,e,r,o){return t.some(i=>i(n,e,r,o))}function iq(t,n){let e=ae({},n);return Object.entries(t).forEach(([r,o])=>{o!=null&&(e[r]=o)}),e}var C8=class{styles;defaultParams;normalizer;constructor(n,e,r){this.styles=n,this.defaultParams=e,this.normalizer=r}buildStyles(n,e){let r=new Map,o=iq(n,this.defaultParams);return this.styles.styles.forEach(i=>{typeof i!="string"&&i.forEach((s,a)=>{s&&(s=B1(s,o,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),r.set(a,s)})}),r}};function lye(t,n,e){return new M8(t,n,e)}var M8=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(n,e,r){this.name=n,this.ast=e,this._normalizer=r,e.states.forEach(o=>{let i=o.options&&o.options.params||{};this.states.set(o.name,new C8(o.style,i,r))}),XW(this.states,"true","1"),XW(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new a3(n,o,this.states))}),this.fallbackTransition=cye(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,r,o){return this.transitionFactories.find(s=>s.match(n,e,r,o))||null}matchStyles(n,e,r){return this.fallbackTransition.buildStyles(n,e,r)}};function cye(t,n,e){let r=[(s,a)=>!0],o={type:nn.Sequence,steps:[],options:null},i={type:nn.Transition,animation:o,matchers:r,options:null,queryCount:0,depCount:0};return new a3(t,i,n)}function XW(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}var uye=new Px,S8=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(n,e,r){this.bodyNode=n,this._driver=e,this._normalizer=r}register(n,e){let r=[],o=[],i=rq(this._driver,e,r,o);if(r.length)throw NW(r);this._animations.set(n,i)}_buildPlayer(n,e,r){let o=n.element,i=s8(this._normalizer,n.keyframes,e,r);return this._driver.animate(o,i,n.duration,n.delay,n.easing,[],!0)}create(n,e,r={}){let o=[],i=this._animations.get(n),s,a=new Map;if(i?(s=oq(this._driver,e,i,d8,ZM,new Map,new Map,r,uye,o),s.forEach(u=>{let d=Ss(a,u.element,new Map);u.postStyleProps.forEach(p=>d.set(p,null))})):(o.push(AW()),s=[]),o.length)throw RW(o);a.forEach((u,d)=>{u.forEach((p,h)=>{u.set(h,this._driver.computeStyle(d,h,Da))})});let l=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=_d(l);return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){let e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);let r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(n){let e=this._playersById.get(n);if(!e)throw OW(n);return e}listen(n,e,r,o){let i=qM(e,"","","");return WM(this._getPlayer(n),r,i,o),()=>{}}command(n,e,r,o){if(r=="register"){this.register(n,o[0]);return}if(r=="create"){let s=o[0]||{};this.create(n,e,s);return}let i=this._getPlayer(n);switch(r){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n);break}}},YW="ng-animate-queued",dye=".ng-animate-queued",g8="ng-animate-disabled",pye=".ng-animate-disabled",hye="ng-star-inserted",fye=".ng-star-inserted",mye=[],sq={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},gye={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xl="__ng_removed",Lx=class{namespaceId;value;options;get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;let r=n&&n.hasOwnProperty("value"),o=r?n.value:n;if(this.value=wye(o),r){let i=n,{value:s}=i,a=tm(i,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){let e=n.params;if(e){let r=this.options.params;Object.keys(e).forEach(o=>{r[o]==null&&(r[o]=e[o])})}}},Bx="void",v8=new Lx(Bx),T8=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(n,e,r){this.id=n,this.hostElement=e,this._engine=r,this._hostClassName="ng-tns-"+n,Na(e,this._hostClassName)}listen(n,e,r,o){if(!this._triggers.has(e))throw FW(r,e);if(r==null||r.length==0)throw BW(e);if(!yye(r))throw PW(r,e);let i=Ss(this._elementListeners,n,[]),s={name:e,phase:r,callback:o};i.push(s);let a=Ss(this._engine.statesByElement,n,new Map);return a.has(e)||(Na(n,Rx),Na(n,Rx+"-"+e),a.set(e,v8)),()=>{this._engine.afterFlush(()=>{let l=i.indexOf(s);l>=0&&i.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(n,e){return this._triggers.has(n)?!1:(this._triggers.set(n,e),!0)}_getTrigger(n){let e=this._triggers.get(n);if(!e)throw LW(n);return e}trigger(n,e,r,o=!0){let i=this._getTrigger(e),s=new $x(this.id,e,n),a=this._engine.statesByElement.get(n);a||(Na(n,Rx),Na(n,Rx+"-"+e),this._engine.statesByElement.set(n,a=new Map));let l=a.get(e),c=new Lx(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=v8),!(c.value===Bx)&&l.value===c.value){if(!_ye(l.params,c.params)){let m=[],g=i.matchStyles(l.value,l.params,m),v=i.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Th(n,g),yl(n,v)})}return}let p=Ss(this._engine.playersByElement,n,[]);p.forEach(m=>{m.namespaceId==this.id&&m.triggerName==e&&m.queued&&m.destroy()});let h=i.matchTransition(l.value,c.value,n,c.params),f=!1;if(!h){if(!o)return;h=i.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:h,fromState:l,toState:c,player:s,isFallbackTransition:f}),f||(Na(n,YW),s.onStart(()=>{P1(n,YW)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);let g=this._engine.playersByElement.get(n);if(g){let v=g.indexOf(s);v>=0&&g.splice(v,1)}}),this.players.push(s),p.push(s),s}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(o=>o.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);let e=this._engine.playersByElement.get(n);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){let r=this._engine.driver.query(n,Ox,!0);r.forEach(o=>{if(o[xl])return;let i=this._engine.fetchNamespacesByElement(o);i.size?i.forEach(s=>s.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(n,e,r,o){let i=this._engine.statesByElement.get(n),s=new Map;if(i){let a=[];if(i.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let u=this.trigger(n,c,Bx,o);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,s),r&&_d(a).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){let e=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(e&&r){let o=new Set;e.forEach(i=>{let s=i.name;if(o.has(s))return;o.add(s);let l=this._triggers.get(s).fallbackTransition,c=r.get(s)||v8,u=new Lx(Bx),d=new $x(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(n,e){let r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let o=!1;if(r.totalAnimations){let i=r.players.length?r.playersByQueriedElement.get(n):[];if(i&&i.length)o=!0;else{let s=n;for(;s=s.parentNode;)if(r.statesByElement.get(s)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(n),o)r.markElementAsRemoved(this.id,n,!1,e);else{let i=n[xl];(!i||i===sq)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,e))}}insertNode(n,e){Na(n,this._hostClassName)}drainQueuedTransitions(n){let e=[];return this._queue.forEach(r=>{let o=r.player;if(o.destroyed)return;let i=r.element,s=this._elementListeners.get(i);s&&s.forEach(a=>{if(a.name==r.triggerName){let l=qM(i,r.triggerName,r.fromState.value,r.toState.value);l._data=n,WM(r.player,a.phase,l,a.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(r)}),this._queue=[],e.sort((r,o)=>{let i=r.transition.ast.depCount,s=o.transition.ast.depCount;return i==0||s==0?i-s:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}},E8=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(n,e)=>{};_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,r){this.bodyNode=n,this.driver=e,this._normalizer=r}get queuedPlayers(){let n=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,e){let r=new T8(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,e){let r=this._namespaceList,o=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=o.get(a);if(l){let c=r.indexOf(l);r.splice(c+1,0,n),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(n)}else r.push(n);return o.set(e,n),n}register(n,e){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,e)),r}registerTrigger(n,e,r){let o=this._namespaceLookup[n];o&&o.register(e,r)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(n);this.namespacesByHostElement.delete(r.hostElement);let o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1),r.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){let e=new Set,r=this.statesByElement.get(n);if(r){for(let o of r.values())if(o.namespaceId){let i=this._fetchNamespace(o.namespaceId);i&&e.add(i)}}return e}trigger(n,e,r,o){if(t3(e)){let i=this._fetchNamespace(n);if(i)return i.trigger(e,r,o),!0}return!1}insertNode(n,e,r,o){if(!t3(e))return;let i=e[xl];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){let s=this._fetchNamespace(n);s&&s.insertNode(e,r)}o&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Na(n,g8)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),P1(n,g8))}removeNode(n,e,r){if(t3(e)){let o=n?this._fetchNamespace(n):null;o?o.removeNode(e,r):this.markElementAsRemoved(n,e,!1,r);let i=this.namespacesByHostElement.get(e);i&&i.id!==n&&i.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(n,e,r,o,i){this.collectedLeaveElements.push(e),e[xl]={namespaceId:n,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:i}}listen(n,e,r,o,i){return t3(e)?this._fetchNamespace(n).listen(e,r,o,i):()=>{}}_buildInstruction(n,e,r,o,i){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,o,n.fromState.options,n.toState.options,e,i)}destroyInnerAnimations(n){let e=this.driver.query(n,Ox,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(n,XM,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){let e=this.playersByElement.get(n);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){let e=this.playersByQueriedElement.get(n);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return _d(this.players).onDone(()=>n());n()})}processLeaveNode(n){let e=n[xl];if(e&&e.setForRemoval){if(n[xl]=sq,e.namespaceId){this.destroyInnerAnimations(n);let r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(g8)&&this.markElementAsDisabled(n,!1),this.driver.query(n,pye,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let o=this.collectedEnterElements[r];Na(o,hye)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{e=this._flushAnimations(r,n)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let o=this.collectedLeaveElements[r];this.processLeaveNode(o)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],e.length?_d(e).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(n){throw $W(n)}_flushAnimations(n,e){let r=new Px,o=[],i=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(X=>{u.add(X);let G=this.driver.query(X,dye,!0);for(let H=0;H<G.length;H++)u.add(G[H])});let d=this.bodyNode,p=Array.from(this.statesByElement.keys()),h=eq(p,this.collectedEnterElements),f=new Map,m=0;h.forEach((X,G)=>{let H=d8+m++;f.set(G,H),X.forEach(V=>Na(V,H))});let g=[],v=new Set,w=new Set;for(let X=0;X<this.collectedLeaveElements.length;X++){let G=this.collectedLeaveElements[X],H=G[xl];H&&H.setForRemoval&&(g.push(G),v.add(G),H.hasAnimation?this.driver.query(G,fye,!0).forEach(V=>v.add(V)):w.add(G))}let y=new Map,k=eq(p,Array.from(v));k.forEach((X,G)=>{let H=ZM+m++;y.set(G,H),X.forEach(V=>Na(V,H))}),n.push(()=>{h.forEach((X,G)=>{let H=f.get(G);X.forEach(V=>P1(V,H))}),k.forEach((X,G)=>{let H=y.get(G);X.forEach(V=>P1(V,H))}),g.forEach(X=>{this.processLeaveNode(X)})});let _=[],S=[];for(let X=this._namespaceList.length-1;X>=0;X--)this._namespaceList[X].drainQueuedTransitions(e).forEach(H=>{let V=H.player,K=H.element;if(_.push(V),this.collectedEnterElements.length){let Ce=K[xl];if(Ce&&Ce.setForMove){if(Ce.previousTriggersValues&&Ce.previousTriggersValues.has(H.triggerName)){let Je=Ce.previousTriggersValues.get(H.triggerName),Ge=this.statesByElement.get(H.element);if(Ge&&Ge.has(H.triggerName)){let vt=Ge.get(H.triggerName);vt.value=Je,Ge.set(H.triggerName,vt)}}V.destroy();return}}let pe=!d||!this.driver.containsElement(d,K),ce=y.get(K),se=f.get(K),we=this._buildInstruction(H,r,se,ce,pe);if(we.errors&&we.errors.length){S.push(we);return}if(pe){V.onStart(()=>Th(K,we.fromStyles)),V.onDestroy(()=>yl(K,we.toStyles)),o.push(V);return}if(H.isFallbackTransition){V.onStart(()=>Th(K,we.fromStyles)),V.onDestroy(()=>yl(K,we.toStyles)),o.push(V);return}let Ne=[];we.timelines.forEach(Ce=>{Ce.stretchStartingKeyframe=!0,this.disabledNodes.has(Ce.element)||Ne.push(Ce)}),we.timelines=Ne,r.append(K,we.timelines);let Ae={instruction:we,player:V,element:K};s.push(Ae),we.queriedElements.forEach(Ce=>Ss(a,Ce,[]).push(V)),we.preStyleProps.forEach((Ce,Je)=>{if(Ce.size){let Ge=l.get(Je);Ge||l.set(Je,Ge=new Set),Ce.forEach((vt,kt)=>Ge.add(kt))}}),we.postStyleProps.forEach((Ce,Je)=>{let Ge=c.get(Je);Ge||c.set(Je,Ge=new Set),Ce.forEach((vt,kt)=>Ge.add(kt))})});if(S.length){let X=[];S.forEach(G=>{X.push(VW(G.triggerName,G.errors))}),_.forEach(G=>G.destroy()),this.reportError(X)}let E=new Map,N=new Map;s.forEach(X=>{let G=X.element;r.has(G)&&(N.set(G,G),this._beforeAnimationBuild(X.player.namespaceId,X.instruction,E))}),o.forEach(X=>{let G=X.element;this._getPreviousPlayers(G,!1,X.namespaceId,X.triggerName,null).forEach(V=>{Ss(E,G,[]).push(V),V.destroy()})});let B=g.filter(X=>tq(X,l,c)),D=new Map;JW(D,this.driver,w,c,Da).forEach(X=>{tq(X,l,c)&&B.push(X)});let M=new Map;h.forEach((X,G)=>{JW(M,this.driver,new Set(X),l,O1)}),B.forEach(X=>{let G=D.get(X),H=M.get(X);D.set(X,new Map([...G?.entries()??[],...H?.entries()??[]]))});let W=[],ie=[],Z={};s.forEach(X=>{let{element:G,player:H,instruction:V}=X;if(r.has(G)){if(u.has(G)){H.onDestroy(()=>yl(G,V.toStyles)),H.disabled=!0,H.overrideTotalTime(V.totalTime),o.push(H);return}let K=Z;if(N.size>1){let ce=G,se=[];for(;ce=ce.parentNode;){let we=N.get(ce);if(we){K=we;break}se.push(ce)}se.forEach(we=>N.set(we,K))}let pe=this._buildAnimation(H.namespaceId,V,E,i,M,D);if(H.setRealPlayer(pe),K===Z)W.push(H);else{let ce=this.playersByElement.get(K);ce&&ce.length&&(H.parentPlayer=_d(ce)),o.push(H)}}else Th(G,V.fromStyles),H.onDestroy(()=>yl(G,V.toStyles)),ie.push(H),u.has(G)&&o.push(H)}),ie.forEach(X=>{let G=i.get(X.element);if(G&&G.length){let H=_d(G);X.setRealPlayer(H)}}),o.forEach(X=>{X.parentPlayer?X.syncPlayerEvents(X.parentPlayer):X.destroy()});for(let X=0;X<g.length;X++){let G=g[X],H=G[xl];if(P1(G,ZM),H&&H.hasAnimation)continue;let V=[];if(a.size){let pe=a.get(G);pe&&pe.length&&V.push(...pe);let ce=this.driver.query(G,XM,!0);for(let se=0;se<ce.length;se++){let we=a.get(ce[se]);we&&we.length&&V.push(...we)}}let K=V.filter(pe=>!pe.destroyed);K.length?xye(this,G,K):this.processLeaveNode(G)}return g.length=0,W.forEach(X=>{this.players.push(X),X.onDone(()=>{X.destroy();let G=this.players.indexOf(X);this.players.splice(G,1)}),X.play()}),W}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,r,o,i){let s=[];if(e){let a=this.playersByQueriedElement.get(n);a&&(s=a)}else{let a=this.playersByElement.get(n);if(a){let l=!i||i==Bx;a.forEach(c=>{c.queued||!l&&c.triggerName!=o||s.push(c)})}}return(r||o)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||o&&o!=a.triggerName))),s}_beforeAnimationBuild(n,e,r){let o=e.triggerName,i=e.element,s=e.isRemovalTransition?void 0:n,a=e.isRemovalTransition?void 0:o;for(let l of e.timelines){let c=l.element,u=c!==i,d=Ss(r,c,[]);this._getPreviousPlayers(c,u,s,a,e.toState).forEach(h=>{let f=h.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),h.destroy(),d.push(h)})}Th(i,e.fromStyles)}_buildAnimation(n,e,r,o,i,s){let a=e.triggerName,l=e.element,c=[],u=new Set,d=new Set,p=e.timelines.map(f=>{let m=f.element;u.add(m);let g=m[xl];if(g&&g.removedBeforeQueried)return new xc(f.duration,f.delay);let v=m!==l,w=kye((r.get(m)||mye).map(E=>E.getRealPlayer())).filter(E=>{let N=E;return N.element?N.element===m:!1}),y=i.get(m),k=s.get(m),_=s8(this._normalizer,f.keyframes,y,k),S=this._buildPlayer(f,_,w);if(f.subTimeline&&o&&d.add(m),v){let E=new $x(n,a,m);E.setRealPlayer(S),c.push(E)}return S});c.forEach(f=>{Ss(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>vye(this.playersByQueriedElement,f.element,f))}),u.forEach(f=>Na(f,p8));let h=_d(p);return h.onDestroy(()=>{u.forEach(f=>P1(f,p8)),yl(l,e.toStyles)}),d.forEach(f=>{Ss(o,f,[]).push(h)}),h}_buildPlayer(n,e,r){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,r):new xc(n.duration,n.delay)}},$x=class{namespaceId;triggerName;element;_player=new xc;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(n,e,r){this.namespaceId=n,this.triggerName=e,this.element=r}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,r)=>{e.forEach(o=>WM(n,r,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){let e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){Ss(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){let e=this._player;e.triggerCallback&&e.triggerCallback(n)}};function vye(t,n,e){let r=t.get(n);if(r){if(r.length){let o=r.indexOf(e);r.splice(o,1)}r.length==0&&t.delete(n)}return r}function wye(t){return t??null}function t3(t){return t&&t.nodeType===1}function yye(t){return t=="start"||t=="done"}function QW(t,n){let e=t.style.display;return t.style.display=n??"none",e}function JW(t,n,e,r,o){let i=[];e.forEach(l=>i.push(QW(l)));let s=[];r.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let p=n.computeStyle(c,d,o);u.set(d,p),(!p||p.length==0)&&(c[xl]=gye,s.push(c))}),t.set(c,u)});let a=0;return e.forEach(l=>QW(l,i[a++])),s}function eq(t,n){let e=new Map;if(t.forEach(a=>e.set(a,[])),n.length==0)return e;let r=1,o=new Set(n),i=new Map;function s(a){if(!a)return r;let l=i.get(a);if(l)return l;let c=a.parentNode;return e.has(c)?l=c:o.has(c)?l=r:l=s(c),i.set(a,l),l}return n.forEach(a=>{let l=s(a);l!==r&&e.get(l).push(a)}),e}function Na(t,n){t.classList?.add(n)}function P1(t,n){t.classList?.remove(n)}function xye(t,n,e){_d(e).onDone(()=>t.processLeaveNode(n))}function kye(t){let n=[];return aq(t,n),n}function aq(t,n){for(let e=0;e<t.length;e++){let r=t[e];r instanceof Fm?aq(r.players,n):n.push(r)}}function _ye(t,n){let e=Object.keys(t),r=Object.keys(n);if(e.length!=r.length)return!1;for(let o=0;o<e.length;o++){let i=e[o];if(!n.hasOwnProperty(i)||t[i]!==n[i])return!1}return!0}function tq(t,n,e){let r=e.get(t);if(!r)return!1;let o=n.get(t);return o?r.forEach(i=>o.add(i)):n.set(t,r),e.delete(t),!0}var L1=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(n,e)=>{};constructor(n,e,r){this._driver=e,this._normalizer=r,this._transitionEngine=new E8(n.body,e,r),this._timelineEngine=new S8(n.body,e,r),this._transitionEngine.onRemovalComplete=(o,i)=>this.onRemovalComplete(o,i)}registerTrigger(n,e,r,o,i){let s=n+"-"+o,a=this._triggerCache[s];if(!a){let l=[],c=[],u=rq(this._driver,i,l,c);if(l.length)throw DW(o,l);a=lye(o,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,o,a)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,r,o){this._transitionEngine.insertNode(n,e,r,o)}onRemove(n,e,r){this._transitionEngine.removeNode(n,e,r)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,r,o){if(r.charAt(0)=="@"){let[i,s]=a8(r),a=o;this._timelineEngine.command(i,e,s,a)}else this._transitionEngine.trigger(n,e,r,o)}listen(n,e,r,o,i){if(r.charAt(0)=="@"){let[s,a]=a8(r);return this._timelineEngine.listen(s,e,a,i)}return this._transitionEngine.listen(n,e,r,o,i)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}};function bye(t,n){let e=null,r=null;return Array.isArray(n)&&n.length?(e=w8(n[0]),n.length>1&&(r=w8(n[n.length-1]))):n instanceof Map&&(e=w8(n)),e||r?new Cye(t,e,r):null}var Cye=(()=>{class t{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,r,o){this._element=e,this._startStyles=r,this._endStyles=o;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&yl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(yl(this._element,this._initialStyles),this._endStyles&&(yl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Th(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Th(this._element,this._endStyles),this._endStyles=null),yl(this._element,this._initialStyles),this._state=3)}}return t})();function w8(t){let n=null;return t.forEach((e,r)=>{Mye(r)&&(n=n||new Map,n.set(r,e))}),n}function Mye(t){return t==="display"||t==="position"}var l3=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(n,e,r,o){this.element=n,this.keyframes=e,this.options=r,this._specialStyles=o,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let n=this.keyframes,e=this._triggerWebAnimation(this.element,n,this.options);if(!e)return this._onFinish(),null;this.domPlayer=e,this._finalKeyframe=n.length?n[n.length-1]:new Map;let r=()=>this._onFinish();return e.addEventListener("finish",r),this.onDestroy(()=>{e.removeEventListener("finish",r)}),e}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(n){let e=[];return n.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(n,e,r){let o=this._convertKeyframesToObject(e);try{return n.animate(o,r)}catch{return null}}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){let n=this._buildPlayer();n&&(this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),n.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=n*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,o)=>{o!=="offset"&&n.set(o,this._finished?r:QM(this.element,o))}),this.currentSnapshot=n}triggerCallback(n){let e=n==="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},c3=class{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,e){return l8(n,e)}getParentElement(n){return KM(n)}query(n,e,r){return c8(n,e,r)}computeStyle(n,e,r){return QM(n,e)}animate(n,e,r,o,i,s=[]){let a=o==0?"both":"forwards",l={duration:r,delay:o,fill:a};i&&(l.easing=i);let c=new Map,u=s.filter(h=>h instanceof l3);UW(r,o)&&u.forEach(h=>{h.currentSnapshot.forEach((f,m)=>c.set(m,f))});let d=zW(e).map(h=>new Map(h));d=GW(n,d,c);let p=bye(n,d);return new l3(n,d,l,p)}};var n3="@",lq="@.disabled",u3=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(n,e,r,o){this.namespaceId=n,this.delegate=e,this.engine=r,this._onDestroy=o}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,r,o=!0){this.delegate.insertBefore(n,e,r),this.engine.onInsert(this.namespaceId,e,n,o)}removeChild(n,e,r,o){if(o){this.delegate.removeChild(n,e,r,o);return}this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,r,o){this.delegate.setAttribute(n,e,r,o)}removeAttribute(n,e,r){this.delegate.removeAttribute(n,e,r)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,r,o){this.delegate.setStyle(n,e,r,o)}removeStyle(n,e,r){this.delegate.removeStyle(n,e,r)}setProperty(n,e,r){e.charAt(0)==n3&&e==lq?this.disableAnimations(n,!!r):this.delegate.setProperty(n,e,r)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,r,o){return this.delegate.listen(n,e,r,o)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}},I8=class extends u3{factory;constructor(n,e,r,o,i){super(e,r,o,i),this.factory=n,this.namespaceId=e}setProperty(n,e,r){e.charAt(0)==n3?e.charAt(1)=="."&&e==lq?(r=r===void 0?!0:!!r,this.disableAnimations(n,r)):this.engine.process(this.namespaceId,n,e.slice(1),r):this.delegate.setProperty(n,e,r)}listen(n,e,r,o){if(e.charAt(0)==n3){let i=Sye(n),s=e.slice(1),a="";return s.charAt(0)!=n3&&([s,a]=Tye(s)),this.engine.listen(this.namespaceId,i,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,r,l)})}return this.delegate.listen(n,e,r,o)}};function Sye(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function Tye(t){let n=t.indexOf("."),e=t.substring(0,n),r=t.slice(n+1);return[e,r]}var d3=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(n,e,r){this.delegate=n,this.engine=e,this._zone=r,e.onRemovalComplete=(o,i)=>{i?.removeChild(null,o)}}createRenderer(n,e){let o=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){let c=this._rendererCache,u=c.get(o);if(!u){let d=()=>c.delete(o);u=new u3("",o,this.engine,d),c.set(o,u)}return u}let i=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,n);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(i,s,n,c.name,c)};return e.data.animation.forEach(a),new I8(this,s,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,r){if(n>=0&&n<this._microtaskId){this._zone.run(()=>e(r));return}let o=this._animationCallbacksBuffer;o.length==0&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(i=>{let[s,a]=i;s(a)}),this._animationCallbacksBuffer=[]})}),o.push([e,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(n){this.engine.flush(),this.delegate.componentReplaced?.(n)}};var Iye=(()=>{class t extends L1{constructor(e,r,o){super(e,r,o)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||t)(rt(Gt),rt($m),rt(Vm))};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function Dye(){return new r3}function Nye(t,n,e){return new d3(t,n,e)}var cq=[{provide:Vm,useFactory:Dye},{provide:L1,useClass:Iye},{provide:co,useFactory:Nye,deps:[Nx,L1,Zt]}],yct=[{provide:$m,useClass:D8},{provide:y1,useValue:"NoopAnimations"},...cq],Aye=[{provide:$m,useFactory:()=>new c3},{provide:y1,useFactory:()=>"BrowserAnimations"},...cq];function uq(){return Zs("NgEagerAnimations"),[...Aye]}var rn="primary",Qx=Symbol("RouteTitle"),B8=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Hm(t){return new B8(t)}function wq(t,n,e){let r=e.path.split("/");if(r.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||r.length<t.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=t[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function Rye(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!_c(t[e],n[e]))return!1;return!0}function _c(t,n){let e=t?P8(t):void 0,r=n?P8(n):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let i=0;i<e.length;i++)if(o=e[i],!yq(t[o],n[o]))return!1;return!0}function P8(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function yq(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),r=[...n].sort();return e.every((o,i)=>r[i]===o)}else return t===n}function xq(t){return t.length>0?t[t.length-1]:null}function bd(t){return Gs(t)?t:Ch(t)?rr(Promise.resolve(t)):ct(t)}var Oye={exact:_q,subset:bq},kq={exact:Fye,subset:Bye,ignored:()=>!0};function dq(t,n,e){return Oye[e.paths](t.root,n.root,e.matrixParams)&&kq[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function Fye(t,n){return _c(t,n)}function _q(t,n,e){if(!jm(t.segments,n.segments)||!f3(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!t.children[r]||!_q(t.children[r],n.children[r],e))return!1;return!0}function Bye(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>yq(t[e],n[e]))}function bq(t,n,e){return Cq(t,n,n.segments,e)}function Cq(t,n,e,r){if(t.segments.length>e.length){let o=t.segments.slice(0,e.length);return!(!jm(o,e)||n.hasChildren()||!f3(o,e,r))}else if(t.segments.length===e.length){if(!jm(t.segments,e)||!f3(t.segments,e,r))return!1;for(let o in n.children)if(!t.children[o]||!bq(t.children[o],n.children[o],r))return!1;return!0}else{let o=e.slice(0,t.segments.length),i=e.slice(t.segments.length);return!jm(t.segments,o)||!f3(t.segments,o,r)||!t.children[rn]?!1:Cq(t.children[rn],n,i,r)}}function f3(t,n,e){return n.every((r,o)=>kq[e](t[o].parameters,r.parameters))}var Cc=class{root;queryParams;fragment;_queryParamMap;constructor(n=new Bn([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Hm(this.queryParams),this._queryParamMap}toString(){return $ye.serialize(this)}},Bn=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return m3(this)}},Eh=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Hm(this.parameters),this._parameterMap}toString(){return Sq(this)}};function Pye(t,n){return jm(t,n)&&t.every((e,r)=>_c(e.parameters,n[r].parameters))}function jm(t,n){return t.length!==n.length?!1:t.every((e,r)=>e.path===n[r].path)}function Lye(t,n){let e=[];return Object.entries(t.children).forEach(([r,o])=>{r===rn&&(e=e.concat(n(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==rn&&(e=e.concat(n(o,r)))}),e}var Um=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>new Ih,providedIn:"root"})}return t})(),Ih=class{parse(n){let e=new $8(n);return new Cc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${Vx(n.root,!0)}`,r=zye(n.queryParams),o=typeof n.fragment=="string"?`#${Vye(n.fragment)}`:"";return`${e}${r}${o}`}},$ye=new Ih;function m3(t){return t.segments.map(n=>Sq(n)).join("/")}function Vx(t,n){if(!t.hasChildren())return m3(t);if(n){let e=t.children[rn]?Vx(t.children[rn],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==rn&&r.push(`${o}:${Vx(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=Lye(t,(r,o)=>o===rn?[Vx(t.children[rn],!1)]:[`${o}:${Vx(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[rn]!=null?`${m3(t)}/${e[0]}`:`${m3(t)}/(${e.join("//")})`}}function Mq(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function p3(t){return Mq(t).replace(/%3B/gi,";")}function Vye(t){return encodeURI(t)}function L8(t){return Mq(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function g3(t){return decodeURIComponent(t)}function pq(t){return g3(t.replace(/\+/g,"%20"))}function Sq(t){return`${L8(t.path)}${jye(t.parameters)}`}function jye(t){return Object.entries(t).map(([n,e])=>`;${L8(n)}=${L8(e)}`).join("")}function zye(t){let n=Object.entries(t).map(([e,r])=>Array.isArray(r)?r.map(o=>`${p3(e)}=${p3(o)}`).join("&"):`${p3(e)}=${p3(r)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var Hye=/^[^\/()?;#]+/;function A8(t){let n=t.match(Hye);return n?n[0]:""}var Uye=/^[^\/()?;=#]+/;function Gye(t){let n=t.match(Uye);return n?n[0]:""}var Wye=/^[^=?&#]+/;function qye(t){let n=t.match(Wye);return n?n[0]:""}var Kye=/^[^&#]+/;function Zye(t){let n=t.match(Kye);return n?n[0]:""}var $8=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bn([],{}):new Bn([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[rn]=new Bn(n,e)),r}parseSegment(){let n=A8(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new Te(4009,!1);return this.capture(n),new Eh(g3(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=Gye(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=A8(this.remaining);o&&(r=o,this.capture(r))}n[g3(e)]=g3(r)}parseQueryParam(n){let e=qye(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=Zye(this.remaining);s&&(r=s,this.capture(r))}let o=pq(e),i=pq(r);if(n.hasOwnProperty(o)){let s=n[o];Array.isArray(s)||(s=[s],n[o]=s),s.push(i)}else n[o]=i}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=A8(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new Te(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):n&&(i=rn);let s=this.parseChildren();e[i??rn]=Object.keys(s).length===1&&s[rn]?s[rn]:new Bn([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new Te(4011,!1)}};function Tq(t){return t.segments.length>0?new Bn([],{[rn]:t}):t}function Eq(t){let n={};for(let[r,o]of Object.entries(t.children)){let i=Eq(o);if(r===rn&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))n[s]=a;else(i.segments.length>0||i.hasChildren())&&(n[r]=i)}let e=new Bn(t.segments,n);return Xye(e)}function Xye(t){if(t.numberOfChildren===1&&t.children[rn]){let n=t.children[rn];return new Bn(t.segments.concat(n.segments),n.children)}return t}function Dh(t){return t instanceof Cc}function Iq(t,n,e=null,r=null){let o=Dq(t);return Nq(o,n,e,r)}function Dq(t){let n;function e(i){let s={};for(let l of i.children){let c=e(l);s[l.outlet]=c}let a=new Bn(i.url,s);return i===t&&(n=a),a}let r=e(t.root),o=Tq(r);return n??o}function Nq(t,n,e,r){let o=t;for(;o.parent;)o=o.parent;if(n.length===0)return R8(o,o,o,e,r);let i=Yye(n);if(i.toRoot())return R8(o,o,new Bn([],{}),e,r);let s=Qye(i,o,t),a=s.processChildren?zx(s.segmentGroup,s.index,i.commands):Rq(s.segmentGroup,s.index,i.commands);return R8(o,s.segmentGroup,a,e,r)}function v3(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ux(t){return typeof t=="object"&&t!=null&&t.outlets}function R8(t,n,e,r,o){let i={};r&&Object.entries(r).forEach(([l,c])=>{i[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===n?s=e:s=Aq(t,n,e);let a=Tq(Eq(s));return new Cc(a,i,o)}function Aq(t,n,e){let r={};return Object.entries(t.children).forEach(([o,i])=>{i===n?r[o]=e:r[o]=Aq(i,n,e)}),new Bn(t.segments,r)}var w3=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&v3(r[0]))throw new Te(4003,!1);let o=r.find(Ux);if(o&&o!==xq(r))throw new Te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Yye(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new w3(!0,0,t);let n=0,e=!1,r=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?n++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new w3(e,n,r)}var j1=class{segmentGroup;processChildren;index;constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}};function Qye(t,n,e){if(t.isAbsolute)return new j1(n,!0,0);if(!e)return new j1(n,!1,NaN);if(e.parent===null)return new j1(e,!0,0);let r=v3(t.commands[0])?0:1,o=e.segments.length-1+r;return Jye(e,o,t.numberOfDoubleDots)}function Jye(t,n,e){let r=t,o=n,i=e;for(;i>o;){if(i-=o,r=r.parent,!r)throw new Te(4005,!1);o=r.segments.length}return new j1(r,!1,o-i)}function exe(t){return Ux(t[0])?t[0].outlets:{[rn]:t}}function Rq(t,n,e){if(t??=new Bn([],{}),t.segments.length===0&&t.hasChildren())return zx(t,n,e);let r=txe(t,n,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new Bn(t.segments.slice(0,r.pathIndex),{});return i.children[rn]=new Bn(t.segments.slice(r.pathIndex),t.children),zx(i,0,o)}else return r.match&&o.length===0?new Bn(t.segments,{}):r.match&&!t.hasChildren()?V8(t,n,e):r.match?zx(t,0,o):V8(t,n,e)}function zx(t,n,e){if(e.length===0)return new Bn(t.segments,{});{let r=exe(e),o={};if(Object.keys(r).some(i=>i!==rn)&&t.children[rn]&&t.numberOfChildren===1&&t.children[rn].segments.length===0){let i=zx(t.children[rn],n,e);return new Bn(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=Rq(t.children[i],n,s))}),Object.entries(t.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new Bn(t.segments,o)}}function txe(t,n,e){let r=0,o=n,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=e.length)return i;let s=t.segments[o],a=e[r];if(Ux(a))break;let l=`${a}`,c=r<e.length-1?e[r+1]:null;if(o>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!fq(l,c,s))return i;r+=2}else{if(!fq(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function V8(t,n,e){let r=t.segments.slice(0,n),o=0;for(;o<e.length;){let i=e[o];if(Ux(i)){let l=nxe(i.outlets);return new Bn(r,l)}if(o===0&&v3(e[0])){let l=t.segments[n];r.push(new Eh(l.path,hq(e[0]))),o++;continue}let s=Ux(i)?i.outlets[rn]:`${i}`,a=o<e.length-1?e[o+1]:null;s&&a&&v3(a)?(r.push(new Eh(s,hq(a))),o+=2):(r.push(new Eh(s,{})),o++)}return new Bn(r,{})}function nxe(t){let n={};return Object.entries(t).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[e]=V8(new Bn([],{}),0,r))}),n}function hq(t){let n={};return Object.entries(t).forEach(([e,r])=>n[e]=`${r}`),n}function fq(t,n,e){return t==e.path&&_c(n,e.parameters)}var z1="imperative",Ho=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ho||{}),Js=class{id;url;constructor(n,e){this.id=n,this.url=e}},Nh=class extends Js{type=Ho.NavigationStart;navigationTrigger;restoredState;constructor(n,e,r="imperative",o=null){super(n,e),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ns=class extends Js{urlAfterRedirects;type=Ho.NavigationEnd;constructor(n,e,r){super(n,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ts=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(ts||{}),U1=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(U1||{}),bc=class extends Js{reason;code;type=Ho.NavigationCancel;constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mc=class extends Js{reason;code;type=Ho.NavigationSkipped;constructor(n,e,r,o){super(n,e),this.reason=r,this.code=o}},G1=class extends Js{error;target;type=Ho.NavigationError;constructor(n,e,r,o){super(n,e),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gx=class extends Js{urlAfterRedirects;state;type=Ho.RoutesRecognized;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},y3=class extends Js{urlAfterRedirects;state;type=Ho.GuardsCheckStart;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},x3=class extends Js{urlAfterRedirects;state;shouldActivate;type=Ho.GuardsCheckEnd;constructor(n,e,r,o,i){super(n,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},k3=class extends Js{urlAfterRedirects;state;type=Ho.ResolveStart;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_3=class extends Js{urlAfterRedirects;state;type=Ho.ResolveEnd;constructor(n,e,r,o){super(n,e),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b3=class{route;type=Ho.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},C3=class{route;type=Ho.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},M3=class{snapshot;type=Ho.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},S3=class{snapshot;type=Ho.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},T3=class{snapshot;type=Ho.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E3=class{snapshot;type=Ho.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},W1=class{routerEvent;position;anchor;type=Ho.Scroll;constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},Wx=class{},q1=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function rxe(t){return!(t instanceof Wx)&&!(t instanceof q1)}function oxe(t,n){return t.providers&&!t._injector&&(t._injector=_1(t.providers,n,`Route: ${t.path}`)),t._injector??n}function kl(t){return t.outlet||rn}function ixe(t,n){let e=t.filter(r=>kl(r)===n);return e.push(...t.filter(r=>kl(r)!==n)),e}function Z1(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var I3=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Z1(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Gm(this.rootInjector)}},Gm=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new I3(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||t)(rt(ir))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),D3=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=j8(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){let e=j8(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=z8(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return z8(n,this._root).map(e=>e.value)}};function j8(t,n){if(t===n.value)return n;for(let e of n.children){let r=j8(t,e);if(r)return r}return null}function z8(t,n){if(t===n.value)return[n];for(let e of n.children){let r=z8(t,e);if(r.length)return r.unshift(n),r}return[]}var Qs=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function V1(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var qx=class extends D3{snapshot;constructor(n,e){super(n),this.snapshot=e,X8(this,n)}toString(){return this.snapshot.toString()}};function Oq(t){let n=sxe(t),e=new nr([new Eh("",{})]),r=new nr({}),o=new nr({}),i=new nr({}),s=new nr(""),a=new Sc(e,r,i,s,o,rn,t,n.root);return a.snapshot=n.root,new qx(new Qs(a,[]),n)}function sxe(t){let n={},e={},r={},i=new zm([],n,r,"",e,rn,t,null,{});return new Kx("",new Qs(i,[]))}var Sc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,r,o,i,s,a,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Et(c=>c[Qx]))??ct(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Et(n=>Hm(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Et(n=>Hm(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function N3(t,n,e="emptyOnly"){let r,{routeConfig:o}=t;return n!==null&&(e==="always"||o?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:ae(ae({},n.params),t.params),data:ae(ae({},n.data),t.data),resolve:ae(ae(ae(ae({},t.data),n.data),o?.data),t._resolvedData)}:r={params:ae({},t.params),data:ae({},t.data),resolve:ae(ae({},t.data),t._resolvedData??{})},o&&Bq(o)&&(r.resolve[Qx]=o.title),r}var zm=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Qx]}constructor(n,e,r,o,i,s,a,l,c){this.url=n,this.params=e,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hm(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hm(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},Kx=class extends D3{url;constructor(n,e){super(e),this.url=n,X8(this,e)}toString(){return Fq(this._root)}};function X8(t,n){n.value._routerState=t,n.children.forEach(e=>X8(t,e))}function Fq(t){let n=t.children.length>0?` { ${t.children.map(Fq).join(", ")} } `:"";return`${t.value}${n}`}function O8(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,_c(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),_c(n.params,e.params)||t.paramsSubject.next(e.params),Rye(n.url,e.url)||t.urlSubject.next(e.url),_c(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function H8(t,n){let e=_c(t.params,n.params)&&Pye(t.url,n.url),r=!t.parent!=!n.parent;return e&&!r&&(!t.parent||H8(t.parent,n.parent))}function Bq(t){return typeof t.title=="string"||t.title===null}var Pq=new Ee(""),Wm=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=rn;activateEvents=new cn;deactivateEvents=new cn;attachEvents=new cn;detachEvents=new cn;routerOutletData=Q();parentContexts=R(Gm);location=R(_o);changeDetector=R(Br);inputBinder=R(Jx,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Te(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Te(4013,!1);this._activatedRoute=e;let o=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new U8(e,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Qr]})}return t})(),U8=class{route;childContexts;parent;outletData;constructor(n,e,r,o){this.route=n,this.childContexts=e,this.parent=r,this.outletData=o}get(n,e){return n===Sc?this.route:n===Gm?this.childContexts:n===Pq?this.outletData:this.parent.get(n,e)}},Jx=new Ee(""),Y8=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,o=xy([r.queryParams,r.params,r.data]).pipe(Sr(([i,s,a],l)=>(a=ae(ae(ae({},i),s),a),l===0?ct(a):Promise.resolve(a)))).subscribe(i=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let s=vG(r.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(e,o)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),Q8=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&We(0,"router-outlet")},dependencies:[Wm],encapsulation:2})}return t})();function J8(t){let n=t.children&&t.children.map(J8),e=n?lt(ae({},t),{children:n}):ae({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==rn&&(e.component=Q8),e}function axe(t,n,e){let r=Zx(t,n._root,e?e._root:void 0);return new qx(r,n)}function Zx(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=n.value;let o=lxe(t,n,e);return new Qs(r,o)}else{if(t.shouldAttach(n.value)){let i=t.retrieve(n.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>Zx(t,a)),s}}let r=cxe(n.value),o=n.children.map(i=>Zx(t,i));return new Qs(r,o)}}function lxe(t,n,e){return n.children.map(r=>{for(let o of e.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return Zx(t,r,o);return Zx(t,r)})}function cxe(t){return new Sc(new nr(t.url),new nr(t.params),new nr(t.queryParams),new nr(t.fragment),new nr(t.data),t.outlet,t.component,t)}var Ah=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},Lq="ngNavigationCancelingError";function A3(t,n){let{redirectTo:e,navigationBehaviorOptions:r}=Dh(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=$q(!1,ts.Redirect);return o.url=e,o.navigationBehaviorOptions=r,o}function $q(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[Lq]=!0,e.cancellationCode=n,e}function uxe(t){return Vq(t)&&Dh(t.url)}function Vq(t){return!!t&&t[Lq]}var dxe=(t,n,e,r)=>Et(o=>(new G8(n,o.targetRouterState,o.currentRouterState,e,r).activate(t),o)),G8=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,r,o,i){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(n){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),O8(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){let o=V1(e);n.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(n,e,r){let o=n.value,i=e?e.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=V1(n);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){let r=e.getContext(n.value.outlet),o=r&&n.value.component?r.children:e,i=V1(n);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){let o=V1(e);n.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new E3(i.value.snapshot))}),n.children.length&&this.forwardEvent(new S3(n.value.snapshot))}activateRoutes(n,e,r){let o=n.value,i=e?e.value:null;if(O8(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),O8(a.route.value),this.activateChildRoutes(n,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(n,null,s.children)}else this.activateChildRoutes(n,null,r)}},R3=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},H1=class{component;route;constructor(n,e){this.component=n,this.route=e}};function pxe(t,n,e){let r=t._root,o=n?n._root:null;return jx(r,o,e,[r.value])}function hxe(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function X1(t,n){let e=Symbol(),r=n.get(t,e);return r===e?typeof t=="function"&&!J5(t)?t:n.get(t):r}function jx(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=V1(n);return t.children.forEach(s=>{fxe(s,i[s.value.outlet],e,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>Hx(a,e.getContext(s),o)),o}function fxe(t,n,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let l=mxe(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new R3(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?jx(t,n,a?a.children:null,r,o):jx(t,n,e,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new H1(a.outlet.component,s))}else s&&Hx(n,a,o),o.canActivateChecks.push(new R3(r)),i.component?jx(t,null,a?a.children:null,r,o):jx(t,null,e,r,o);return o}function mxe(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!jm(t.url,n.url);case"pathParamsOrQueryParamsChange":return!jm(t.url,n.url)||!_c(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!H8(t,n)||!_c(t.queryParams,n.queryParams);case"paramsChange":default:return!H8(t,n)}}function Hx(t,n,e){let r=V1(t),o=t.value;Object.entries(r).forEach(([i,s])=>{o.component?n?Hx(s,n.children.getContext(i),e):Hx(s,null,e):Hx(s,n,e)}),o.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new H1(n.outlet.component,o)):e.canDeactivateChecks.push(new H1(null,o)):e.canDeactivateChecks.push(new H1(null,o))}function ek(t){return typeof t=="function"}function gxe(t){return typeof t=="boolean"}function vxe(t){return t&&ek(t.canLoad)}function wxe(t){return t&&ek(t.canActivate)}function yxe(t){return t&&ek(t.canActivateChild)}function xxe(t){return t&&ek(t.canDeactivate)}function kxe(t){return t&&ek(t.canMatch)}function jq(t){return t instanceof ed||t?.name==="EmptyError"}var h3=Symbol("INITIAL_VALUE");function K1(){return Sr(t=>xy(t.map(n=>n.pipe(Fr(1),sl(h3)))).pipe(Et(n=>{for(let e of n)if(e!==!0){if(e===h3)return h3;if(e===!1||_xe(e))return e}return!0}),Cn(n=>n!==h3),Fr(1)))}function _xe(t){return Dh(t)||t instanceof Ah}function bxe(t,n){return or(e=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=e;return s.length===0&&i.length===0?ct(lt(ae({},e),{guardsResult:!0})):Cxe(s,r,o,t).pipe(or(a=>a&&gxe(a)?Mxe(r,i,t,n):ct(a)),Et(a=>lt(ae({},e),{guardsResult:a})))})}function Cxe(t,n,e,r){return rr(t).pipe(or(o=>Dxe(o.component,o.route,e,n,r)),nd(o=>o!==!0,!0))}function Mxe(t,n,e,r){return rr(n).pipe(va(o=>il(Txe(o.route.parent,r),Sxe(o.route,r),Ixe(t,o.path,e),Exe(t,o.route,e))),nd(o=>o!==!0,!0))}function Sxe(t,n){return t!==null&&n&&n(new T3(t)),ct(!0)}function Txe(t,n){return t!==null&&n&&n(new M3(t)),ct(!0)}function Exe(t,n,e){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return ct(!0);let o=r.map(i=>uc(()=>{let s=Z1(n)??e,a=X1(i,s),l=wxe(a)?a.canActivate(n,t):Vr(s,()=>a(n,t));return bd(l).pipe(nd())}));return ct(o).pipe(K1())}function Ixe(t,n,e){let r=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(s=>hxe(s)).filter(s=>s!==null).map(s=>uc(()=>{let a=s.guards.map(l=>{let c=Z1(s.node)??e,u=X1(l,c),d=yxe(u)?u.canActivateChild(r,t):Vr(c,()=>u(r,t));return bd(d).pipe(nd())});return ct(a).pipe(K1())}));return ct(i).pipe(K1())}function Dxe(t,n,e,r,o){let i=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!i||i.length===0)return ct(!0);let s=i.map(a=>{let l=Z1(n)??o,c=X1(a,l),u=xxe(c)?c.canDeactivate(t,n,e,r):Vr(l,()=>c(t,n,e,r));return bd(u).pipe(nd())});return ct(s).pipe(K1())}function Nxe(t,n,e,r){let o=n.canLoad;if(o===void 0||o.length===0)return ct(!0);let i=o.map(s=>{let a=X1(s,t),l=vxe(a)?a.canLoad(n,e):Vr(t,()=>a(n,e));return bd(l)});return ct(i).pipe(K1(),zq(r))}function zq(t){return T5(xo(n=>{if(typeof n!="boolean")throw A3(t,n)}),Et(n=>n===!0))}function Axe(t,n,e,r){let o=n.canMatch;if(!o||o.length===0)return ct(!0);let i=o.map(s=>{let a=X1(s,t),l=kxe(a)?a.canMatch(n,e):Vr(t,()=>a(n,e));return bd(l)});return ct(i).pipe(K1(),zq(r))}var Xx=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Yx=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function $1(t){return W2(new Xx(t))}function Rxe(t){return W2(new Te(4e3,!1))}function Oxe(t){return W2($q(!1,ts.GuardRejected))}var W8=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return ct(r);if(o.numberOfChildren>1||!o.children[rn])return Rxe(`${n.redirectTo}`);o=o.children[rn]}}applyRedirectCommands(n,e,r,o,i){return Fxe(e,o,i).pipe(Et(s=>{if(s instanceof Cc)throw new Yx(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),n,r);if(s[0]==="/")throw new Yx(a);return a}))}applyRedirectCreateUrlTree(n,e,r,o){let i=this.createSegmentGroup(n,e.root,r,o);return new Cc(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let r={};return Object.entries(n).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=e[a]}else r[o]=i}),r}createSegmentGroup(n,e,r,o){let i=this.createSegments(n,e.segments,r,o),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(n,l,r,o)}),new Bn(i,s)}createSegments(n,e,r,o){return e.map(i=>i.path[0]===":"?this.findPosParam(n,i,o):this.findOrReturn(i,r))}findPosParam(n,e,r){let o=r[e.path.substring(1)];if(!o)throw new Te(4001,!1);return o}findOrReturn(n,e){let r=0;for(let o of e){if(o.path===n.path)return e.splice(r),o;r++}return n}};function Fxe(t,n,e){if(typeof t=="string")return ct(t);let r=t,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:l,params:c,data:u,title:d}=n;return bd(Vr(e,()=>r({params:c,data:u,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:l,title:d})))}var q8={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Bxe(t,n,e,r,o){let i=Hq(t,n,e);return i.matched?(r=oxe(n,r),Axe(r,n,e,o).pipe(Et(s=>s===!0?i:ae({},q8)))):ct(i)}function Hq(t,n,e){if(n.path==="**")return Pxe(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?ae({},q8):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let o=(n.matcher||wq)(e,t,n);if(!o)return ae({},q8);let i={};Object.entries(o.posParams??{}).forEach(([a,l])=>{i[a]=l.path});let s=o.consumed.length>0?ae(ae({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Pxe(t){return{matched:!0,parameters:t.length>0?xq(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function mq(t,n,e,r){return e.length>0&&Vxe(t,e,r)?{segmentGroup:new Bn(n,$xe(r,new Bn(e,t.children))),slicedSegments:[]}:e.length===0&&jxe(t,e,r)?{segmentGroup:new Bn(t.segments,Lxe(t,e,r,t.children)),slicedSegments:e}:{segmentGroup:new Bn(t.segments,t.children),slicedSegments:e}}function Lxe(t,n,e,r){let o={};for(let i of e)if(F3(t,n,i)&&!r[kl(i)]){let s=new Bn([],{});o[kl(i)]=s}return ae(ae({},r),o)}function $xe(t,n){let e={};e[rn]=n;for(let r of t)if(r.path===""&&kl(r)!==rn){let o=new Bn([],{});e[kl(r)]=o}return e}function Vxe(t,n,e){return e.some(r=>F3(t,n,r)&&kl(r)!==rn)}function jxe(t,n,e){return e.some(r=>F3(t,n,r))}function F3(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function zxe(t,n,e){return n.length===0&&!t.children[e]}var K8=class{};function Hxe(t,n,e,r,o,i,s="emptyOnly"){return new Z8(t,n,e,r,o,s,i).recognize()}var Uxe=31,Z8=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,r,o,i,s,a){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new W8(this.urlSerializer,this.urlTree)}noMatchError(n){return new Te(4002,`'${n.segmentGroup}'`)}recognize(){let n=mq(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(Et(({children:e,rootSnapshot:r})=>{let o=new Qs(r,e),i=new Kx("",o),s=Iq(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(n){let e=new zm([],Object.freeze({}),Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),rn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,rn,e).pipe(Et(r=>({children:r,rootSnapshot:e})),td(r=>{if(r instanceof Yx)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xx?this.noMatchError(r):r}))}processSegmentGroup(n,e,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,e,r,i):this.processSegment(n,e,r,r.segments,o,!0,i).pipe(Et(s=>s instanceof Qs?[s]:[]))}processChildren(n,e,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return rr(i).pipe(va(s=>{let a=r.children[s],l=ixe(e,s);return this.processSegmentGroup(n,l,a,s,o)}),B5((s,a)=>(s.push(...a),s)),dh(null),F5(),or(s=>{if(s===null)return $1(r);let a=Uq(s);return Gxe(a),ct(a)}))}processSegment(n,e,r,o,i,s,a){return rr(e).pipe(va(l=>this.processSegmentAgainstRoute(l._injector??n,e,l,r,o,i,s,a).pipe(td(c=>{if(c instanceof Xx)return ct(null);throw c}))),nd(l=>!!l),td(l=>{if(jq(l))return zxe(r,o,i)?ct(new K8):$1(r);throw l}))}processSegmentAgainstRoute(n,e,r,o,i,s,a,l){return kl(r)!==s&&(s===rn||!F3(o,i,r))?$1(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,o,r,i,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(n,o,e,r,i,s,l):$1(o)}expandSegmentAgainstRouteUsingRedirect(n,e,r,o,i,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=Hq(e,o,i);if(!l)return $1(e);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Uxe&&(this.allowRedirects=!1));let h=new zm(i,c,Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,gq(o),kl(o),o.component??o._loadedComponent??null,o,vq(o)),f=N3(h,a,this.paramsInheritanceStrategy);return h.params=Object.freeze(f.params),h.data=Object.freeze(f.data),this.applyRedirects.applyRedirectCommands(u,o.redirectTo,d,h,n).pipe(Sr(g=>this.applyRedirects.lineralizeSegments(o,g)),or(g=>this.processSegment(n,r,e,g.concat(p),s,!1,a)))}matchSegmentAgainstRoute(n,e,r,o,i,s){let a=Bxe(e,r,o,n,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(Sr(l=>l.matched?(n=r._injector??n,this.getChildConfig(n,r,o).pipe(Sr(({routes:c})=>{let u=r._loadedInjector??n,{parameters:d,consumedSegments:p,remainingSegments:h}=l,f=new zm(p,d,Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,gq(r),kl(r),r.component??r._loadedComponent??null,r,vq(r)),m=N3(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(m.params),f.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:v}=mq(e,p,h,c);if(v.length===0&&g.hasChildren())return this.processChildren(u,c,g,f).pipe(Et(y=>new Qs(f,y)));if(c.length===0&&v.length===0)return ct(new Qs(f,[]));let w=kl(r)===i;return this.processSegment(u,c,g,v,w?rn:i,!0,f).pipe(Et(y=>new Qs(f,y instanceof Qs?[y]:[])))}))):$1(e)))}getChildConfig(n,e,r){return e.children?ct({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?ct({routes:e._loadedRoutes,injector:e._loadedInjector}):Nxe(n,e,r,this.urlSerializer).pipe(or(o=>o?this.configLoader.loadChildren(n,e).pipe(xo(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):Oxe(e))):ct({routes:[],injector:n})}};function Gxe(t){t.sort((n,e)=>n.value.outlet===rn?-1:e.value.outlet===rn?1:n.value.outlet.localeCompare(e.value.outlet))}function Wxe(t){let n=t.value.routeConfig;return n&&n.path===""}function Uq(t){let n=[],e=new Set;for(let r of t){if(!Wxe(r)){n.push(r);continue}let o=n.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),e.add(o)):n.push(r)}for(let r of e){let o=Uq(r.children);n.push(new Qs(r.value,o))}return n.filter(r=>!e.has(r))}function gq(t){return t.data||{}}function vq(t){return t.resolve||{}}function qxe(t,n,e,r,o,i){return or(s=>Hxe(t,n,e,r,s.extractedUrl,o,i).pipe(Et(({state:a,tree:l})=>lt(ae({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function Kxe(t,n){return or(e=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return ct(e);let i=new Set(o.map(l=>l.route)),s=new Set;for(let l of i)if(!s.has(l))for(let c of Gq(l))s.add(c);let a=0;return rr(s).pipe(va(l=>i.has(l)?Zxe(l,r,t,n):(l.data=N3(l,l.parent,t).resolve,ct(void 0))),xo(()=>a++),X2(1),or(l=>a===s.size?ct(e):Ci))})}function Gq(t){let n=t.children.map(e=>Gq(e)).flat();return[t,...n]}function Zxe(t,n,e,r){let o=t.routeConfig,i=t._resolve;return o?.title!==void 0&&!Bq(o)&&(i[Qx]=o.title),uc(()=>(t.data=N3(t,t.parent,e).resolve,Xxe(i,t,n,r).pipe(Et(s=>(t._resolvedData=s,t.data=ae(ae({},t.data),s),null)))))}function Xxe(t,n,e,r){let o=P8(t);if(o.length===0)return ct({});let i={};return rr(o).pipe(or(s=>Yxe(t[s],n,e,r).pipe(nd(),xo(a=>{if(a instanceof Ah)throw A3(new Ih,a);i[s]=a}))),X2(1),Et(()=>i),td(s=>jq(s)?Ci:W2(s)))}function Yxe(t,n,e,r){let o=Z1(n)??r,i=X1(t,o),s=i.resolve?i.resolve(n,e):Vr(o,()=>i(n,e));return bd(s)}function F8(t){return Sr(n=>{let e=t(n);return e?rr(e).pipe(Et(()=>n)):ct(n)})}var eO=(()=>{class t{buildTitle(e){let r,o=e.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===rn);return r}getResolvedTitleForRoute(e){return e.data[Qx]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>R(Wq),providedIn:"root"})}return t})(),Wq=(()=>{class t extends eO{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(rt(pW))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Rh=new Ee("",{providedIn:"root",factory:()=>({})}),qm=new Ee(""),B3=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(b6);loadComponent(e,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ct(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=bd(Vr(e,()=>r.loadComponent())).pipe(Et(Kq),Sr(Zq),xo(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),um(()=>{this.componentLoaders.delete(r)})),i=new H2(o,()=>new nt).pipe(z2());return this.componentLoaders.set(r,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=qq(r,this.compiler,e,this.onLoadEndListener).pipe(um(()=>{this.childrenLoaders.delete(r)})),s=new H2(i,()=>new nt).pipe(z2());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qq(t,n,e,r){return bd(Vr(e,()=>t.loadChildren())).pipe(Et(Kq),Sr(Zq),or(o=>o instanceof gM||Array.isArray(o)?ct(o):rr(n.compileModuleAsync(o))),Et(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(e).injector,s=i.get(qm,[],{optional:!0,self:!0}).flat()),{routes:s.map(J8),injector:i}}))}function Qxe(t){return t&&typeof t=="object"&&"default"in t}function Kq(t){return Qxe(t)?t.default:t}function Zq(t){return ct(t)}var P3=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>R(Jxe),providedIn:"root"})}return t})(),Jxe=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tO=new Ee(""),nO=new Ee("");function Xq(t,n,e){let r=t.get(nO),o=t.get(Gt);if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let i,s=new Promise(c=>{i=c}),a=o.startViewTransition(()=>(i(),eke(t)));a.ready.catch(c=>{});let{onViewTransitionCreated:l}=r;return l&&Vr(t,()=>l({transition:a,from:n,to:e})),s}function eke(t){return new Promise(n=>{Si({read:()=>setTimeout(n)},{injector:t})})}var rO=new Ee(""),L3=(()=>{class t{currentNavigation=Ye(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new nt;transitionAbortWithErrorSubject=new nt;configLoader=R(B3);environmentInjector=R(ir);destroyRef=R(gr);urlSerializer=R(Um);rootContexts=R(Gm);location=R(yc);inputBindingEnabled=R(Jx,{optional:!0})!==null;titleStrategy=R(eO);options=R(Rh,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(P3);createViewTransition=R(tO,{optional:!0});navigationErrorHandler=R(rO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ct(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=o=>this.events.next(new b3(o)),r=o=>this.events.next(new C3(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;wn(()=>{this.transitions?.next(lt(ae({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(e){return this.transitions=new nr(null),this.transitions.pipe(Cn(r=>r!==null),Sr(r=>{let o=!1;return ct(r).pipe(Sr(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ts.SupersededByNewNavigation),Ci;this.currentTransition=r,this.currentNavigation.set({id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?lt(ae({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()});let s=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=i.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Mc(i.id,this.urlSerializer.serialize(i.rawUrl),"",U1.IgnoredSameUrlNavigation)),i.resolve(!1),Ci;if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return ct(i).pipe(Sr(l=>(this.events.next(new Nh(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Ci:Promise.resolve(l))),qxe(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),xo(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=l.urlAfterRedirects,u));let c=new Gx(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:l,extractedUrl:c,source:u,restoredState:d,extras:p}=i,h=new Nh(l,this.urlSerializer.serialize(c),u,d);this.events.next(h);let f=Oq(this.rootComponentType).snapshot;return this.currentTransition=r=lt(ae({},i),{targetSnapshot:f,urlAfterRedirects:c,extras:lt(ae({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(m=>(m.finalUrl=c,m)),ct(r)}else return this.events.next(new Mc(i.id,this.urlSerializer.serialize(i.extractedUrl),"",U1.IgnoredByUrlHandlingStrategy)),i.resolve(!1),Ci}),xo(i=>{let s=new y3(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(s)}),Et(i=>(this.currentTransition=r=lt(ae({},i),{guards:pxe(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),r)),bxe(this.environmentInjector,i=>this.events.next(i)),xo(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw A3(this.urlSerializer,i.guardsResult);let s=new x3(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(s)}),Cn(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",ts.GuardRejected),!1)),F8(i=>{if(i.guards.canActivateChecks.length!==0)return ct(i).pipe(xo(s=>{let a=new k3(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Sr(s=>{let a=!1;return ct(s).pipe(Kxe(this.paramsInheritanceStrategy,this.environmentInjector),xo({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",ts.NoDataFromResolver)}}))}),xo(s=>{let a=new _3(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),F8(i=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let c=Z1(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,a.routeConfig).pipe(xo(u=>{a.component=u}),Et(()=>{})))}for(let c of a.children)l.push(...s(c));return l};return xy(s(i.targetSnapshot.root)).pipe(dh(null),Fr(1))}),F8(()=>this.afterPreactivation()),Sr(()=>{let{currentSnapshot:i,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,s.root);return a?rr(a).pipe(Et(()=>r)):ct(r)}),Et(i=>{let s=axe(e.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r=lt(ae({},i),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),xo(()=>{this.events.next(new Wx)}),dxe(this.rootContexts,e.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),Fr(1),ln(new tn(i=>{let s=r.abortController.signal,a=()=>i.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Cn(()=>!o&&!r.targetRouterState),xo(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",ts.Aborted)}))),xo({next:i=>{o=!0,this.lastSuccessfulNavigation=wn(this.currentNavigation),this.events.next(new ns(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{o=!0}}),ln(this.transitionAbortWithErrorSubject.pipe(xo(i=>{throw i}))),um(()=>{o||this.cancelNavigationTransition(r,"",ts.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),td(i=>{if(this.destroyed)return r.resolve(!1),Ci;if(o=!0,Vq(i))this.events.next(new bc(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),uxe(i)?this.events.next(new q1(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{let s=new G1(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{let a=Vr(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Ah){let{message:l,cancellationCode:c}=A3(this.urlSerializer,a);this.events.next(new bc(r.id,this.urlSerializer.serialize(r.extractedUrl),l,c)),this.events.next(new q1(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),i}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Ci}))}))}cancelNavigationTransition(e,r,o){let i=new bc(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(i),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=wn(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return e.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tke(t){return t!==z1}var Yq=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>R(nke),providedIn:"root"})}return t})(),O3=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},nke=(()=>{class t extends O3{static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Qq=(()=>{class t{urlSerializer=R(Um);options=R(Rh,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(yc);urlHandlingStrategy=R(P3);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Cc;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:o}){let i=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,s=o??i;return s instanceof Cc?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:o}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=e):this.rawUrlTree=o}routerState=Oq(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:()=>R(rke),providedIn:"root"})}return t})(),rke=(()=>{class t extends Qq{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Nh?this.updateStateMemento():e instanceof Mc?this.commitTransition(r):e instanceof Gx?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof Wx?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof bc&&e.code!==ts.SupersededByNewNavigation&&e.code!==ts.Redirect?this.restoreHistory(r):e instanceof G1?this.restoreHistory(r,!0):e instanceof ns&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(e)||i){let a=this.browserPageId,l=ae(ae({},s),this.generateNgRouterState(o,a));this.location.replaceState(e,"",l)}else{let a=ae(ae({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===e.finalUrl&&i===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $3(t,n){t.events.pipe(Cn(e=>e instanceof ns||e instanceof bc||e instanceof G1||e instanceof Mc),Et(e=>e instanceof ns||e instanceof Mc?0:(e instanceof bc?e.code===ts.Redirect||e.code===ts.SupersededByNewNavigation:!1)?2:1),Cn(e=>e!==2),Fr(1)).subscribe(()=>{n()})}var oke={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ike={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Uo=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(c6);stateManager=R(Qq);options=R(Rh,{optional:!0})||{};pendingTasks=R(gc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(L3);urlSerializer=R(Um);location=R(yc);urlHandlingStrategy=R(P3);injector=R(ir);_events=new nt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(Yq);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(qm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(Jx,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Nn;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=wn(this.navigationTransitions.currentNavigation);if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof bc&&r.code!==ts.Redirect&&r.code!==ts.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ns)this.navigated=!0;else if(r instanceof q1){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l=ae({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||tke(o.source)},s);this.scheduleNavigation(a,z1,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}rxe(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),z1,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,o)=>{this.navigateToSyncWithBrowser(e,o,r)})}navigateToSyncWithBrowser(e,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=ae({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(i.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,i).catch(l=>{this.disposed||this.injector.get(xs)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return wn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(J8),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=ae(ae({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let p=o?o.snapshot:this.routerState.snapshot.root;d=Dq(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return Nq(d,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){let o=Dh(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,z1,null,r)}navigate(e,r={skipLocationChange:!1}){return ske(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(al(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,r){let o;if(r===!0?o=ae({},oke):r===!1?o=ae({},ike):o=r,Dh(e))return dq(this.currentUrlTree,e,o);let i=this.parseUrl(e);return dq(this.currentUrlTree,i,o)}removeEmptyProps(e){return Object.entries(e).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(e,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,p)=>{a=d,l=p});let u=this.pendingTasks.add();return $3(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ske(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new Te(4008,!1)}var Y1=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ye(null);get href(){return wn(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new nt;applicationErrorHandler=R(xs);options=R(Rh,{optional:!0});constructor(e,r,o,i,s,a){this.router=e,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new M1("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,r=o=>o==="merge"||o==="preserve";e||=r(this.queryParamsHandling),e||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(o=>{o instanceof ns&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Dh(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,o,i,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||o||i||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(c=>{this.applicationErrorHandler(c)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,r){let o=this.renderer,i=this.el.nativeElement;r!==null?o.setAttribute(i,e,r):o.removeAttribute(i,e)}get urlTree(){return this.routerLinkInput===null?null:Dh(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Xt(Uo),Xt(Sc),rx("tabindex"),Xt(vr),Xt(Ft),Xt(Ea))};static \u0275dir=ye({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,o){r&1&&Pe("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Bt("href",o.reactiveHref(),FR)("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",wt],skipLocationChange:[2,"skipLocationChange","skipLocationChange",wt],replaceUrl:[2,"replaceUrl","replaceUrl",wt],routerLink:"routerLink"},features:[Qr]})}return t})(),iO=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new cn;constructor(e,r,o,i,s){this.router=e,this.element=r,this.renderer=o,this.cdr=i,this.link=s,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof ns&&this.update()})}ngAfterContentInit(){ct(this.links.changes,ct(null)).pipe(ga()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=rr(e).pipe(ga()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=ake(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let i=o.urlTree;return i?e.isActive(i,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||t)(Xt(Uo),Xt(Ft),Xt(vr),Xt(Br),Xt(Y1,8))};static \u0275dir=ye({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,o,i){if(r&1&&C1(i,Y1,5),r&2){let s;md(s=gd())&&(o.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Qr]})}return t})();function ake(t){return!!t.paths}var tk=class{};var Jq=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,o,i){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=i}setUpPreloading(){this.subscription=this.router.events.pipe(Cn(e=>e instanceof ns),va(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let o=[];for(let i of r){i.providers&&!i._injector&&(i._injector=_1(i.providers,e,`Route: ${i.path}`));let s=i._injector??e,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return rr(o).pipe(ga())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(e,r):o=ct(null);let i=o.pipe(or(s=>s===null?ct(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(e,r);return rr([i,s]).pipe(ga())}else return i})}static \u0275fac=function(r){return new(r||t)(rt(Uo),rt(ir),rt(tk),rt(B3))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eK=new Ee(""),lke=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=z1;restoredId=0;store={};constructor(e,r,o,i,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Nh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ns?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Mc&&e.code===U1.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{if(!(e instanceof W1))return;let r={behavior:"instant"};e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position,r):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>z(this,null,function*(){yield new Promise(o=>{setTimeout(o),typeof requestAnimationFrame<"u"&&requestAnimationFrame(o)}),this.zone.run(()=>{this.transitions.events.next(new W1(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){JR()};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function sO(t,...n){return mh([{provide:qm,multi:!0,useValue:t},[],{provide:Sc,useFactory:tK,deps:[Uo]},{provide:lx,multi:!0,useFactory:nK},n.map(e=>e.\u0275providers)])}function tK(t){return t.routerState.root}function Q1(t,n){return{\u0275kind:t,\u0275providers:n}}function nK(){let t=R(Ct);return n=>{let e=t.get(Xs);if(n!==e.components[0])return;let r=t.get(Uo),o=t.get(rK);t.get(aO)===1&&r.initialNavigation(),t.get(sK,null,{optional:!0})?.setUpPreloading(),t.get(eK,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var rK=new Ee("",{factory:()=>new nt}),aO=new Ee("",{providedIn:"root",factory:()=>1});function oK(){let t=[{provide:AR,useValue:!0},{provide:aO,useValue:0},vM(()=>{let n=R(Ct);return n.get(L6,Promise.resolve()).then(()=>new Promise(r=>{let o=n.get(Uo),i=n.get(rK);$3(o,()=>{r(!0)}),n.get(L3).afterPreactivation=()=>(r(!0),i.closed?ct(void 0):i),o.initialNavigation()}))})];return Q1(2,t)}function iK(){let t=[vM(()=>{R(Uo).setUpLocationChangeListener()}),{provide:aO,useValue:2}];return Q1(3,t)}var sK=new Ee("");function aK(t){return Q1(0,[{provide:sK,useExisting:Jq},{provide:tk,useExisting:t}])}function lO(){return Q1(6,[{provide:Ea,useClass:FM}])}function V3(){return Q1(8,[Y8,{provide:Jx,useExisting:Y8}])}function lK(t){Zs("NgRouterViewTransitions");let n=[{provide:tO,useValue:Xq},{provide:nO,useValue:ae({skipNextTransition:!!t?.skipInitialTransition},t)}];return Q1(9,n)}var cK=[yc,{provide:Um,useClass:Ih},Uo,Gm,{provide:Sc,useFactory:tK,deps:[Uo]},B3,[]],nk=(()=>{class t{constructor(){}static forRoot(e,r){return{ngModule:t,providers:[cK,[],{provide:qm,multi:!0,useValue:e},[],r?.errorHandler?{provide:rO,useValue:r.errorHandler}:[],{provide:Rh,useValue:r||{}},r?.useHash?uke():dke(),cke(),r?.preloadingStrategy?aK(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?pke(r):[],r?.bindToComponentInputs?V3().\u0275providers:[],r?.enableViewTransitions?lK().\u0275providers:[],hke()]}}static forChild(e){return{ngModule:t,providers:[{provide:qm,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({})}return t})();function cke(){return{provide:eK,useFactory:()=>{let t=R($G),n=R(Zt),e=R(Rh),r=R(L3),o=R(Um);return e.scrollOffset&&t.setOffset(e.scrollOffset),new lke(o,r,t,n,e)}}}function uke(){return{provide:Ea,useClass:FM}}function dke(){return{provide:Ea,useClass:EM}}function pke(t){return[t.initialNavigation==="disabled"?iK().\u0275providers:[],t.initialNavigation==="enabledBlocking"?oK().\u0275providers:[]]}var oO=new Ee("");function hke(){return[{provide:oO,useFactory:nK},{provide:lx,multi:!0,useExisting:oO}]}var ik=class{},pK=(()=>{class t{handle(e){return e.key}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),J1=class{},hK=(()=>{class t extends J1{compile(e,r){return e}compileTranslations(e,r){return e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),Fh=class{},fK=(()=>{class t extends Fh{getTranslation(e){return ct({})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function j3(t,n){if(t===n)return!0;if(t===null||n===null)return!1;if(t!==t&&n!==n)return!0;let e=typeof t,r=typeof n,o;if(e==r&&e=="object")if(Array.isArray(t)){if(!Array.isArray(n))return!1;if((o=t.length)==n.length){for(let i=0;i<o;i++)if(!j3(t[i],n[i]))return!1;return!0}}else{if(Array.isArray(n))return!1;if(Cd(t)&&Cd(n)){let i=Object.create(null);for(let s in t){if(!j3(t[s],n[s]))return!1;i[s]=!0}for(let s in n)if(!(s in i)&&typeof n[s]<"u")return!1;return!0}}return!1}function Oh(t){return typeof t<"u"&&t!==null}function dK(t){return t!==void 0}function Cd(t){return ok(t)&&!Km(t)&&t!==null}function ok(t){return typeof t=="object"&&t!==null}function Km(t){return Array.isArray(t)}function z3(t){return typeof t=="string"}function fke(t){return typeof t=="function"}function H3(t){if(Km(t))return t.map(n=>H3(n));if(Cd(t)){let n={};return Object.keys(t).forEach(e=>{n[e]=H3(t[e])}),n}else return t}function pO(t,n){if(!ok(t))return H3(n);let e=H3(t);return ok(e)&&ok(n)&&Object.keys(n).forEach(r=>{Cd(n[r])?r in t?e[r]=pO(t[r],n[r]):Object.assign(e,{[r]:n[r]}):Object.assign(e,{[r]:n[r]})}),e}function mK(t,n){let e=n.split(".");n="";do{n+=e.shift();let r=!e.length;if(Oh(t)){if(Cd(t)&&dK(t[n])&&(Cd(t[n])||Km(t[n])||r)){t=t[n],n="";continue}if(Km(t)){let o=parseInt(n,10);if(dK(t[o])&&(Cd(t[o])||Km(t[o])||r)){t=t[o],n="";continue}}}if(r){t=void 0;continue}n+="."}while(e.length);return t}function mke(t,n,e){return pO(t,gke(n,e))}function gke(t,n){return t.split(".").reduceRight((e,r)=>({[r]:e}),n)}var ev=class{},gK=(()=>{class t extends ev{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,r){if(z3(e))return this.interpolateString(e,r);if(fke(e))return this.interpolateFunction(e,r)}interpolateFunction(e,r){return e(r)}interpolateString(e,r){return r?e.replace(this.templateMatcher,(o,i)=>{let s=this.getInterpolationReplacement(r,i);return s!==void 0?s:o}):e}getInterpolationReplacement(e,r){return this.formatValue(mK(e,r))}formatValue(e){if(z3(e))return e;if(typeof e=="number"||typeof e=="boolean")return e.toString();if(e===null)return"null";if(Km(e))return e.join(", ");if(ok(e))return typeof e.toString=="function"&&e.toString!==Object.prototype.toString?e.toString():JSON.stringify(e)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),cO=(()=>{class t{_onTranslationChange=new nt;_onLangChange=new nt;_onFallbackLangChange=new nt;fallbackLang=null;currentLang;translations={};languages=[];getTranslations(e){return this.translations[e]}setTranslations(e,r,o){this.translations[e]=o&&this.hasTranslationFor(e)?pO(this.translations[e],r):r,this.addLanguages([e]),this._onTranslationChange.next({lang:e,translations:this.getTranslations(e)})}getLanguages(){return this.languages}getCurrentLang(){return this.currentLang}getFallbackLang(){return this.fallbackLang}setFallbackLang(e,r=!0){this.fallbackLang=e,r&&this._onFallbackLangChange.next({lang:e,translations:this.translations[e]})}setCurrentLang(e,r=!0){this.currentLang=e,r&&this._onLangChange.next({lang:e,translations:this.translations[e]})}get onTranslationChange(){return this._onTranslationChange.asObservable()}get onLangChange(){return this._onLangChange.asObservable()}get onFallbackLangChange(){return this._onFallbackLangChange.asObservable()}addLanguages(e){this.languages=Array.from(new Set([...this.languages,...e]))}hasTranslationFor(e){return typeof this.translations[e]<"u"}deleteTranslations(e){delete this.translations[e]}getTranslation(e){let r=this.getValue(this.currentLang,e);return r===void 0&&this.fallbackLang!=null&&this.fallbackLang!==this.currentLang&&(r=this.getValue(this.fallbackLang,e)),r}getValue(e,r){return mK(this.getTranslations(e),r)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),uO=new Ee("TRANSLATE_CONFIG"),rk=t=>Gs(t)?t:ct(t);var sk=(()=>{class t{loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;currentLoader=R(Fh);compiler=R(J1);parser=R(ev);missingTranslationHandler=R(ik);store=R(cO);extend=!1;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onFallbackLangChange(){return this.store.onFallbackLangChange}get onDefaultLangChange(){return this.store.onFallbackLangChange}constructor(){let e=ae({extend:!1,fallbackLang:null},R(uO,{optional:!0}));e.lang&&this.use(e.lang),e.fallbackLang&&this.setFallbackLang(e.fallbackLang),e.extend&&(this.extend=!0)}setFallbackLang(e){this.getFallbackLang()||this.store.setFallbackLang(e,!1);let r=this.loadOrExtendLanguage(e);return Gs(r)?(r.pipe(Fr(1)).subscribe({next:()=>{this.store.setFallbackLang(e)},error:()=>{}}),r):(this.store.setFallbackLang(e),ct(this.store.getTranslations(e)))}use(e){this.lastUseLanguage=e,this.getCurrentLang()||this.store.setCurrentLang(e,!1);let r=this.loadOrExtendLanguage(e);return Gs(r)?(r.pipe(Fr(1)).subscribe({next:()=>{this.changeLang(e)},error:()=>{}}),r):(this.changeLang(e),ct(this.store.getTranslations(e)))}loadOrExtendLanguage(e){if(!this.store.hasTranslationFor(e)||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}changeLang(e){e===this.lastUseLanguage&&this.store.setCurrentLang(e)}getCurrentLang(){return this.store.getCurrentLang()}loadAndCompileTranslations(e){this.pending=!0;let r=this.currentLoader.getTranslation(e).pipe(Cy(1),Fr(1));return this.loadingTranslations=r.pipe(Et(o=>this.compiler.compileTranslations(o,e)),Cy(1),Fr(1)),this.loadingTranslations.subscribe({next:o=>{this.store.setTranslations(e,o,this.extend),this.pending=!1},error:o=>{this.pending=!1}}),r}setTranslation(e,r,o=!1){let i=this.compiler.compileTranslations(r,e);this.store.setTranslations(e,i,o||this.extend)}getLangs(){return this.store.getLanguages()}addLangs(e){this.store.addLanguages(e)}getParsedResultForKey(e,r){let o=this.getTextToInterpolate(e);if(Oh(o))return this.runInterpolation(o,r);let i=this.missingTranslationHandler.handle(ae({key:e,translateService:this},r!==void 0&&{interpolateParams:r}));return i!==void 0?i:e}getFallbackLang(){return this.store.getFallbackLang()}getTextToInterpolate(e){return this.store.getTranslation(e)}runInterpolation(e,r){if(Oh(e))return Km(e)?this.runInterpolationOnArray(e,r):Cd(e)?this.runInterpolationOnDict(e,r):this.parser.interpolate(e,r)}runInterpolationOnArray(e,r){return e.map(o=>this.runInterpolation(o,r))}runInterpolationOnDict(e,r){let o={};for(let i in e){let s=this.runInterpolation(e[i],r);s!==void 0&&(o[i]=s)}return o}getParsedResult(e,r){return e instanceof Array?this.getParsedResultForArray(e,r):this.getParsedResultForKey(e,r)}getParsedResultForArray(e,r){let o={},i=!1;for(let a of e)o[a]=this.getParsedResultForKey(a,r),i=i||Gs(o[a]);if(!i)return o;let s=e.map(a=>rk(o[a]));return ky(s).pipe(Et(a=>{let l={};return a.forEach((c,u)=>{l[e[u]]=c}),l}))}get(e,r){if(!Oh(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(va(()=>rk(this.getParsedResult(e,r)))):rk(this.getParsedResult(e,r))}getStreamOnTranslationChange(e,r){if(!Oh(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return il(uc(()=>this.get(e,r)),this.onTranslationChange.pipe(Sr(()=>{let o=this.getParsedResult(e,r);return rk(o)})))}stream(e,r){if(!Oh(e)||!e.length)throw new Error('Parameter "key" required');return il(uc(()=>this.get(e,r)),this.onLangChange.pipe(Sr(()=>{let o=this.getParsedResult(e,r);return rk(o)})))}instant(e,r){if(!Oh(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let o=this.getParsedResult(e,r);return Gs(o)?Array.isArray(e)?e.reduce((i,s)=>(i[s]=s,i),{}):e:o}set(e,r,o=this.getCurrentLang()){this.store.setTranslations(o,mke(this.store.getTranslations(o),e,z3(r)?this.compiler.compile(r,o):this.compiler.compileTranslations(r,o)),!1)}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],this.store.deleteTranslations(e)}static getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}static getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}getBrowserLang(){return t.getBrowserLang()}getBrowserCultureLang(){return t.getBrowserCultureLang()}get defaultLang(){return this.getFallbackLang()}get currentLang(){return this.store.getCurrentLang()}get langs(){return this.store.getLanguages()}setDefaultLang(e){return this.setFallbackLang(e)}getDefaultLang(){return this.getFallbackLang()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();var So=(()=>{class t{translate=R(sk);_ref=R(Br);value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onFallbackLangChange;updateValue(e,r,o){let i=s=>{this.value=s!==void 0?s:e,this.lastKey=e,this._ref.markForCheck()};if(o){let s=this.translate.getParsedResult(e,r);Gs(s)?s.subscribe(i):i(s)}this.translate.get(e,r).subscribe(i)}transform(e,...r){if(!e||!e.length)return e;if(j3(e,this.lastKey)&&j3(r,this.lastParams))return this.value;let o;if(Oh(r[0])&&r.length)if(z3(r[0])&&r[0].length){let i=r[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{o=JSON.parse(i)}catch(s){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${r[0]}`)}}else Cd(r[0])&&(o=r[0]);return this.lastKey=e,this.lastParams=r,this.updateValue(e,o),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(i=>{(this.lastKey&&i.lang===this.translate.getCurrentLang()||i.lang===this.translate.getFallbackLang())&&(this.lastKey=null,this.updateValue(e,o,i.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(i=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,o,i.translations))})),this.onFallbackLangChange||(this.onFallbackLangChange=this.translate.onFallbackLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,o))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onFallbackLangChange<"u"&&(this.onFallbackLangChange.unsubscribe(),this.onFallbackLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=hd({name:"translate",type:t,pure:!1});static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function vK(t){return{provide:Fh,useClass:t}}function wK(t){return{provide:J1,useClass:t}}function yK(t){return{provide:ev,useClass:t}}function xK(t){return{provide:ik,useClass:t}}function kK(t={}){return dO(ae({compiler:wK(hK),parser:yK(gK),loader:vK(fK),missingTranslationHandler:xK(pK)},t),!0)}function dO(t={},n){let e=[];t.loader&&e.push(t.loader),t.compiler&&e.push(t.compiler),t.parser&&e.push(t.parser),t.missingTranslationHandler&&e.push(t.missingTranslationHandler),n&&e.push(cO),(t.useDefaultLang||t.defaultLanguage)&&(console.warn("The `useDefaultLang` and `defaultLanguage` options are deprecated. Please use `fallbackLang` instead."),t.useDefaultLang===!0&&t.defaultLanguage&&(t.fallbackLang=t.defaultLanguage));let r={fallbackLang:t.fallbackLang??null,lang:t.lang,extend:t.extend??!1};return e.push({provide:uO,useValue:r}),e.push({provide:sk,useClass:sk,deps:[cO,Fh,J1,ev,ik,uO]}),e}var To=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[...dO(ae({compiler:wK(hK),parser:yK(gK),loader:vK(fK),missingTranslationHandler:xK(pK)},e),!0)]}}static forChild(e={}){return{ngModule:t,providers:[...dO(e,e.isolate??!1)]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({})}return t})();var hO=new Ee("TRANSLATE_HTTP_LOADER_CONFIG"),vke=(()=>{class t{http;config;constructor(){this.config=ae({prefix:"/assets/i18n/",suffix:".json",enforceLoading:!1,useHttpBackend:!1},R(hO)),this.http=this.config.useHttpBackend?new N1(R(Mh)):R(N1)}getTranslation(e){let r=this.config.enforceLoading?`?enforceLoading=${Date.now()}`:"";return this.http.get(`${this.config.prefix}${e}${this.config.suffix}${r}`)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})();function _K(t={}){let n=t.useHttpBackend??!1;return[{provide:hO,useValue:t},{provide:Fh,useClass:vke,deps:[n?Mh:N1,hO]}]}var Tc=4e3,zn=class t{constructor(n){this.translate=n;this.translate.addLangs(this.languageList),this.translate.setDefaultLang("en"),this.language=Ye(localStorage.getItem("language")??this.translate.getBrowserLang()??"en"),St(()=>{this.translate.use(this.language()),localStorage.setItem("language",this.language())}),this.grid=Ye(localStorage.getItem("grid")!=="false"),St(()=>localStorage.setItem("grid",this.grid().toString())),this.highContrast.set(localStorage.getItem("highContrast")==="true"),St(()=>localStorage.setItem("highContrast",this.highContrast().toString())),this._zoom.set(parseFloat(localStorage.getItem("zoom")??"1")??1),St(()=>localStorage.setItem("zoom",this._zoom().toString()))}language;languageList=["en","es","fr","pt","it","de"];grid;highContrast=Ye(!1);size=de(()=>Tc);_zoom=Ye(1);zoom=this._zoom.asReadonly();static openFile(n,e){return z(this,null,function*(){let r=document.createElement("input");return r.type="file",r.value="",n&&(r.accept=n),e&&(r.multiple=e),new Promise((o,i)=>{r.onchange=s=>z(null,null,function*(){let a=s.target.files;if(yield new Promise(l=>setTimeout(l,1e3)),a)if(e)o([...a]);else{let l=new FileReader;l.onload=()=>o(l.result),l.readAsText(a[0])}else i();r.remove()}),r.oncancel=()=>i(),r.click()})})}static saveFile(n,e,r){return z(this,null,function*(){let o=new Blob([e],{type:r}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download=n,yield new Promise(s=>setTimeout(s,1e3)),i.click(),URL.revokeObjectURL(i.href),i.remove()})}zoomIn(){this._zoom()>=2||this._zoom.set(this._zoom()+.1)}zoomOut(){this._zoom()<=.5||this._zoom.set(this._zoom()-.1)}resetZoom(){this._zoom.set(1)}static \u0275fac=function(e){return new(e||t)(rt(sk))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})};var bK=/\/\*[\s\S]*?\*\/|\/\/.*/g,wke=/(?:function|const|let|var)\s+((intcp(_router|_iot|_computer)?|cmd_[A-Za-z0-9$_]+|atk_[A-Za-z0-9$_]+))\s*=?\s*\([A-Za-z0-9$_,.\s]*\)\s*(?:=>)?\s*{/g,yke=/(?:function|const|let|var)\s+((analyze))\s*=?\s*\([A-Za-z0-9$_,.\s]*\)\s*(?:=>)?\s*{/g,xke=/\(([^)]*)\)/,CK=t=>{t=t.replace(bK,"");let n=[...t.matchAll(wke)].map(e=>e[1]);return t=t.concat(`
`,"return { ",n.join(", "),` };
`),new Function(t)},mO=t=>{if(t=t.replace(bK,""),[...t.matchAll(yke)].map(e=>e[1]).length===0)throw new Error("No se encontr\xF3 la funci\xF3n analyze");return t=t.concat(`
`,`return { analyze };
`),new Function("tf","model",t)},U3=t=>{let e=t.toString().match(xke);if(!e)return 0;let r=e[1].split(",").map(i=>i.trim());return r.find(i=>i.includes("..."))?1/0:r.length};function kke(t,n){t&1&&(mc(),Ca(0,"svg",0),fd(1,"path",2),Ma())}function _ke(t,n){t&1&&(mc(),Ca(0,"svg",0),fd(1,"path",3),Ma())}function bke(t,n){t&1&&(mc(),Ca(0,"svg",0),fd(1,"path",4),Ma())}function Cke(t,n){t&1&&(mc(),Ca(0,"svg",1),fd(1,"path",5)(2,"path",6),Ma())}function Mke(t,n){t&1&&fd(0,"div",2)}var Ske=["toastRef"],TK=[[["","loading-icon",""]],[["","success-icon",""]],[["","error-icon",""]],[["","warning-icon",""]],[["","info-icon",""]]],EK=["[loading-icon]","[success-icon]","[error-icon]","[warning-icon]","[info-icon]"];function Tke(t,n){if(t&1){let e=mn();ne(0,"button",3),Pe("click",function(){He(e);let o=be();return Ue(o.onCloseButtonClick())}),mc(),ne(1,"svg",4),We(2,"line",5)(3,"line",6),re()()}if(t&2){let e,r=be();Le(r.cn(r.classes().closeButton,(e=r.toast().classes)==null?null:e.closeButton)),Bt("data-disabled",r.disabled())}}function Eke(t,n){t&1&&Ti(0)}function Ike(t,n){if(t&1&&(eo(0,Eke,1,0,"ng-container",7),Me(1,"asComponent")),t&2){let e=be();Ke("ngComponentOutlet",Se(1,2,e.toast().component))("ngComponentOutletInputs",e.toast().componentProps)}}function Dke(t,n){t&1&&Nt(0)}function Nke(t,n){t&1&&Ti(0)}function Ake(t,n){if(t&1&&(eo(0,Nke,1,0,"ng-container",7),Me(1,"asComponent")),t&2){let e=be(3);Ke("ngComponentOutlet",Se(1,2,e.toast().icon))("ngComponentOutletInputs",e.toast().componentProps)}}function Rke(t,n){t&1&&Nt(0,1)}function Oke(t,n){t&1&&Nt(0,2)}function Fke(t,n){t&1&&Nt(0,3)}function Bke(t,n){t&1&&Nt(0,4)}function Pke(t,n){if(t&1&&It(0,Rke,1,0)(1,Oke,1,0)(2,Fke,1,0)(3,Bke,1,0),t&2){let e,r=be(3);Dt((e=r.toastType())==="success"?0:e==="error"?1:e==="warning"?2:e==="info"?3:-1)}}function Lke(t,n){if(t&1&&(ne(0,"div",8),It(1,Dke,1,0),It(2,Ake,2,4,"ng-container")(3,Pke,4,1),re()),t&2){let e=be(2);ee(),Dt(e.toastType()==="loading"&&!e.toast().icon?1:-1),ee(),Dt(e.toast().icon?2:3)}}function $ke(t,n){if(t&1&&le(0),t&2){let e=be(3);Ze(" ",e.toast().title," ")}}function Vke(t,n){t&1&&Ti(0)}function jke(t,n){if(t&1&&(eo(0,Vke,1,0,"ng-container",7),Me(1,"asComponent")),t&2){let e=be(),r=be(2);Ke("ngComponentOutlet",Se(1,2,e))("ngComponentOutletInputs",r.toast().componentProps)}}function zke(t,n){if(t&1&&(ne(0,"div",14),It(1,$ke,1,1),Me(2,"isString"),b1(3,jke,2,4,"ng-container"),re()),t&2){let e,r=be(2);Le(r.cn(r.classes().title,(e=r.toast().classes)==null?null:e.title)),ee(),Dt(Se(2,3,n)?1:3)}}function Hke(t,n){if(t&1&&le(0),t&2){let e=be(3);Ze(" ",e.toast().description," ")}}function Uke(t,n){t&1&&Ti(0)}function Gke(t,n){if(t&1&&(eo(0,Uke,1,0,"ng-container",7),Me(1,"asComponent")),t&2){let e=be(),r=be(2);Ke("ngComponentOutlet",Se(1,2,e))("ngComponentOutletInputs",r.toast().componentProps)}}function Wke(t,n){if(t&1&&(ne(0,"div",15),It(1,Hke,1,1),Me(2,"isString"),b1(3,Gke,2,4,"ng-container"),re()),t&2){let e,r=be(2);Le(r.cn(r.descriptionClass(),r.toastDescriptionClass(),r.classes().description,(e=r.toast().classes)==null?null:e.description)),ee(),Dt(Se(2,3,n)?1:3)}}function qke(t,n){if(t&1){let e=mn();ne(0,"button",16),Pe("click",function(){He(e);let o=be(2);return Ue(o.onCancelClick())}),le(1),re()}if(t&2){let e,r=be(2);ks(r.cancelButtonStyle()??r.toast().cancelButtonStyle),Le(r.cn(r.classes().cancelButton,(e=r.toast().classes)==null?null:e.cancelButton)),ee(),Ze(" ",n.label," ")}}function Kke(t,n){if(t&1){let e=mn();ne(0,"button",17),Pe("click",function(o){He(e);let i=be(2);return Ue(i.onActionClick(o))}),le(1),re()}if(t&2){let e,r=be(2);ks(r.actionButtonStyle()??r.toast().actionButtonStyle),Le(r.cn(r.classes().actionButton,(e=r.toast().classes)==null?null:e.actionButton)),ee(),Ze(" ",n.label," ")}}function Zke(t,n){if(t&1&&(It(0,Lke,4,2,"div",8),ne(1,"div",9),It(2,zke,4,5,"div",10),It(3,Wke,4,5,"div",11),re(),It(4,qke,2,5,"button",12),It(5,Kke,2,5,"button",13)),t&2){let e,r,o,i,s=be();Dt(s.toastType()!=="default"||s.toast().icon||s.toast().promise?0:-1),ee(2),Dt((e=s.toast().title)?2:-1,e),ee(),Dt((r=s.toast().description)?3:-1,r),ee(),Dt((o=s.toast().cancel)?4:-1,o),ee(),Dt((i=s.toast().action)?5:-1,i)}}var Xke=["listRef"],Yke=()=>({}),Qke=(t,n)=>n.id;function Jke(t,n){if(t&1&&We(0,"ngx-sonner-loader",6),t&2){let e=be().$implicit;Ke("isVisible",e.type==="loading")}}function e_e(t,n){t&1&&We(0,"ngx-sonner-icon",7)}function t_e(t,n){t&1&&We(0,"ngx-sonner-icon",8)}function n_e(t,n){t&1&&We(0,"ngx-sonner-icon",9)}function r_e(t,n){t&1&&We(0,"ngx-sonner-icon",10)}function o_e(t,n){if(t&1&&(ne(0,"ngx-sonner-toast",5),Nt(1,0,["loading-icon",""],Jke,1,1),Nt(3,1,["success-icon",""],e_e,1,0),Nt(5,2,["error-icon",""],t_e,1,0),Nt(7,3,["warning-icon",""],n_e,1,0),Nt(9,4,["info-icon",""],r_e,1,0),re()),t&2){let e=n.$implicit,r=n.$index,o=be(3);Le(o.toastOptions().class??""),Ke("index",r)("toast",e)("invert",o.invert())("visibleToasts",o.visibleToasts())("closeButton",o.closeButton())("interacting",o.interacting())("position",o.position())("expandByDefault",o.expand())("expanded",o.expanded())("actionButtonStyle",o.toastOptions().actionButtonStyle)("cancelButtonStyle",o.toastOptions().cancelButtonStyle)("descriptionClass",o.toastOptions().descriptionClass??"")("classes",o.toastOptions().classes??Dm(17,Yke))("duration",o.toastOptions().duration??o.duration())("unstyled",o.toastOptions().unstyled??!1)}}function i_e(t,n){if(t&1){let e=mn();ne(0,"ol",3,0),Pe("blur",function(o){He(e);let i=be(2);return Ue(i.handleBlur(o))})("focus",function(o){He(e);let i=be(2);return Ue(i.handleFocus(o))})("mouseenter",function(){He(e);let o=be(2);return Ue(o.expanded.set(!0))})("mousemove",function(){He(e);let o=be(2);return Ue(o.expanded.set(!0))})("mouseleave",function(){He(e);let o=be(2);return Ue(o.handleMouseLeave())})("pointerdown",function(o){He(e);let i=be(2);return Ue(i.handlePointerDown(o))})("pointerup",function(){He(e);let o=be(2);return Ue(o.interacting.set(!1))}),uo(2,o_e,11,18,"ngx-sonner-toast",4,Qke),Me(4,"toastFilter"),re()}if(t&2){let e=n.$implicit,r=n.$index,o=be(2);ks(o.toasterStyles()),Le(o._class()),Ke("tabIndex",-1),Bt("data-theme",o.actualTheme())("data-rich-colors",o.richColors())("dir",o.dir()==="auto"?o.getDocumentDirection():o.dir())("data-y-position",e.split("-")[0])("data-x-position",e.split("-")[1]),ee(2),po(k6(4,10,o.toasts(),r,e))}}function s_e(t,n){if(t&1&&(ne(0,"section",1),uo(1,i_e,5,14,"ol",2,f6),re()),t&2){let e=be();Ke("tabIndex",-1),Bt("aria-label","Notifications "+e.hotKeyLabel()),ee(),po(e.possiblePositions())}}var MK=0;function a_e(){let t=Ye([]),n=Ye([]);function e(v){t.update(w=>[v,...w])}function r(v){let N=v,{message:w}=N,y=tm(N,["message"]),k=typeof v?.id=="number"||v.id&&v.id?.length>0?v.id:MK++,_=v.dismissible??!0,S=v.type??"default";return t().find(B=>B.id===k)?t.update(B=>B.map(D=>D.id===k?lt(ae(ae({},D),v),{id:k,title:w,dismissible:_,type:S,updated:!0}):lt(ae({},D),{updated:!1}))):e(lt(ae({},y),{id:k,title:w,dismissible:_,type:S})),k}function o(v){if(v===void 0){t.set([]);return}return t.update(w=>w.filter(y=>y.id!==v)),v}function i(v,w){return r(lt(ae({},w),{type:"default",message:v}))}function s(v,w){return r(lt(ae({},w),{type:"error",message:v}))}function a(v,w){return r(lt(ae({},w),{type:"success",message:v}))}function l(v,w){return r(lt(ae({},w),{type:"info",message:v}))}function c(v,w){return r(lt(ae({},w),{type:"warning",message:v}))}function u(v,w){return r(lt(ae({},w),{type:"loading",message:v}))}function d(v,w){if(!w)return;let y;w.loading!==void 0&&(y=r(lt(ae({},w),{promise:v,type:"loading",message:w.loading})));let k=v instanceof Promise?v:v(),_=y!==void 0;return k.then(S=>{if(S&&typeof S.ok=="boolean"&&!S.ok){_=!1;let E=typeof w.error=="function"?w.error(`HTTP error! status: ${S.status}`):w.error;r({id:y,type:"error",message:E})}else if(w.success!==void 0){_=!1;let E=typeof w.success=="function"?w.success(S):w.success;r({id:y,type:"success",message:E})}}).catch(S=>{if(w.error!==void 0){_=!1;let E=typeof w.error=="function"?w.error(S):w.error;r({id:y,type:"error",message:E})}}).finally(()=>{_&&(o(y),y=void 0),w.finally?.()}),y}function p(v,w){let y=w?.id??MK++;return r(ae({component:v,id:y},w)),y}function h(v){n.update(w=>w.filter(y=>y.toastId!==v))}function f(v){n.update(w=>[v,...w].sort(m))}let m=(v,w)=>t().findIndex(y=>y.id===v.toastId)-t().findIndex(y=>y.id===w.toastId);function g(){t.set([]),n.set([])}return{create:r,addToast:e,dismiss:o,message:i,error:s,success:a,info:l,warning:c,loading:u,promise:d,custom:p,removeHeight:h,addHeight:f,reset:g,toasts:t.asReadonly(),heights:n.asReadonly()}}var oi=a_e();function l_e(t,n){return oi.create(ae({message:t},n))}var c_e=l_e,Es=Object.assign(c_e,{success:oi.success,info:oi.info,warning:oi.warning,error:oi.error,custom:oi.custom,message:oi.message,promise:oi.promise,dismiss:oi.dismiss,loading:oi.loading}),u_e=(()=>{let n=class n{constructor(){this.type=Q("default")}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=je({type:n,selectors:[["ngx-sonner-icon"]],inputs:{type:[1,"type"]},decls:4,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","height","20","width","20"],["viewBox","0 0 64 64","fill","currentColor","height","20","width","20","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule","evenodd"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z","clip-rule","evenodd"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z","clip-rule","evenodd"],["d","M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"],["d","M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"]],template:function(o,i){if(o&1&&It(0,kke,2,0,":svg:svg",0)(1,_ke,2,0,":svg:svg",0)(2,bke,2,0,":svg:svg",0)(3,Cke,3,0,":svg:svg",1),o&2){let s;Dt((s=i.type())==="success"?0:s==="error"?1:s==="info"?2:s==="warning"?3:-1)}},encapsulation:2,changeDetection:0});let t=n;return t})(),d_e=3,p_e="32px",G3=4e3,h_e=356,IK=14,f_e=20,m_e=200,g_e={toast:"",title:"",description:"",loader:"",closeButton:"",cancelButton:"",actionButton:"",action:"",warning:"",error:"",success:"",default:"",info:"",loading:""},v_e=(()=>{let n=class n{constructor(){this.isVisible=Q.required({transform:wt}),this.bars=Array(12).fill(0)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=je({type:n,selectors:[["ngx-sonner-loader"]],inputs:{isVisible:[1,"isVisible"]},decls:4,vars:1,consts:[[1,"sonner-loading-wrapper"],[1,"sonner-spinner"],[1,"sonner-loading-bar"]],template:function(o,i){o&1&&(Ca(0,"div",0)(1,"div",1),uo(2,Mke,1,0,"div",2,Ji),Ma()()),o&2&&(Bt("data-visible",i.isVisible()),ee(2),po(i.bars))},encapsulation:2,changeDetection:0});let t=n;return t})(),w_e=(()=>{let n=class n{transform(r,o,i){return r.filter(s=>!s.position&&o===0||s.position===i)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=hd({name:"toastFilter",type:n,pure:!0});let t=n;return t})();function SK(...t){return t.filter(Boolean).join(" ")}var y_e=(()=>{let n=class n{transform(r){return r}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=hd({name:"asComponent",type:n,pure:!0});let t=n;return t})(),x_e=(()=>{let n=class n{transform(r){return typeof r=="string"}};n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=hd({name:"isString",type:n,pure:!0});let t=n;return t})(),k_e=(()=>{let n=class n{constructor(){this.cn=SK,this.toasts=oi.toasts,this.heights=oi.heights,this.removeHeight=oi.removeHeight,this.addHeight=oi.addHeight,this.dismiss=oi.dismiss,this.toast=Q.required(),this.index=Q.required(),this.expanded=Q.required(),this._invert=Q.required({alias:"invert"}),this.position=Q.required(),this.visibleToasts=Q.required(),this.expandByDefault=Q.required(),this._closeButton=Q.required({alias:"closeButton"}),this.interacting=Q.required(),this.cancelButtonStyle=Q(),this.actionButtonStyle=Q(),this.duration=Q(G3),this.descriptionClass=Q(""),this._classes=Q({},{alias:"classes"}),this.unstyled=Q(!1),this._class=Q("",{alias:"class"}),this._style=Q({},{alias:"style"}),this.mounted=Ye(!1),this.removed=Ye(!1),this.swiping=Ye(!1),this.swipeOut=Ye(!1),this.offsetBeforeRemove=Ye(0),this.initialHeight=Ye(0),this.toastRef=_s.required("toastRef"),this.classes=de(()=>ae(ae({},g_e),this._classes())),this.isFront=de(()=>this.index()===0),this.isVisible=de(()=>this.index()+1<=this.visibleToasts()),this.toastType=de(()=>this.toast().type??"default"),this.toastClass=de(()=>this.toast().class??""),this.toastPosition=de(()=>this.toast().position??this.position()),this.toastDescriptionClass=de(()=>this.toast().descriptionClass??""),this.heightIndex=de(()=>this.heights().findIndex(r=>r.toastId===this.toast().id)),this.offset=Co({source:()=>({heightIndex:this.heightIndex(),toastsHeightBefore:this.toastsHeightBefore()}),computation:({heightIndex:r,toastsHeightBefore:o})=>Math.round(r*IK+o)}),this.closeTimerStartTimeRef=0,this.lastCloseTimerStartTimeRef=0,this.pointerStartRef=null,this.coords=de(()=>this.toastPosition().split("-")),this.toastsHeightBefore=de(()=>this.heights().reduce((r,o,i)=>i>=this.heightIndex()?r:r+o.height,0)),this.invert=de(()=>this.toast().invert??this._invert()),this.closeButton=de(()=>this.toast().closeButton??this._closeButton()),this.disabled=de(()=>this.toastType()==="loading"),this.remainingTime=0,this.isPromiseLoadingOrInfiniteDuration=de(()=>this.toast().promise&&this.toastType()==="loading"||this.toast().duration===Number.POSITIVE_INFINITY),this.toastClasses=de(()=>SK(this._class(),this.toastClass(),this.classes().toast,this.toast().classes?.toast,this.classes()[this.toastType()],this.toast().classes?.[this.toastType()])),this.toastStyle=de(()=>ae({"--index":`${this.index()}`,"--toasts-before":`${this.index()}`,"--z-index":`${this.toasts().length-this.index()}`,"--offset":`${this.removed()?this.offsetBeforeRemove():this.offset()}px`,"--initial-height":this.expandByDefault()?"auto":`${this.initialHeight()}px`},this._style())),St(()=>{this.toast().updated&&(clearTimeout(this.timeoutId),this.remainingTime=this.toast().duration??this.duration()??G3,this.startTimer())}),gG(r=>{this.isPromiseLoadingOrInfiniteDuration()||(this.expanded()||this.interacting()?this.pauseTimer():this.startTimer()),r(()=>clearTimeout(this.timeoutId))}),St(()=>{this.toast().delete&&this.deleteToast()})}ngAfterViewInit(){this.remainingTime=this.toast().duration??this.duration()??G3,this.mounted.set(!0);let r=this.toastRef().nativeElement.getBoundingClientRect().height;this.initialHeight.set(r),this.addHeight({toastId:this.toast().id,height:r})}ngOnDestroy(){clearTimeout(this.timeoutId),this.removeHeight(this.toast().id)}deleteToast(){this.removed.set(!0),this.offsetBeforeRemove.set(this.offset()),this.removeHeight(this.toast().id),setTimeout(()=>{this.dismiss(this.toast().id)},m_e)}pauseTimer(){if(this.lastCloseTimerStartTimeRef<this.closeTimerStartTimeRef){let r=new Date().getTime()-this.closeTimerStartTimeRef;this.remainingTime=this.remainingTime-r}this.lastCloseTimerStartTimeRef=new Date().getTime()}startTimer(){this.closeTimerStartTimeRef=new Date().getTime(),this.timeoutId=setTimeout(()=>{this.toast().onAutoClose?.(this.toast()),this.deleteToast()},this.remainingTime)}onPointerDown(r){if(this.disabled()||!this.toast().dismissible)return;this.offsetBeforeRemove.set(this.offset());let o=r.target;o.setPointerCapture(r.pointerId),o.tagName!=="BUTTON"&&(this.swiping.set(!0),this.pointerStartRef={x:r.clientX,y:r.clientY})}onPointerUp(){if(this.swipeOut()||!this.toast().dismissible)return;this.pointerStartRef=null;let r=Number(this.toastRef().nativeElement.style.getPropertyValue("--swipe-amount").replace("px","")||0);if(Math.abs(r)>=f_e){this.offsetBeforeRemove.set(this.offset()),this.toast().onDismiss?.(this.toast()),this.deleteToast(),this.swipeOut.set(!0);return}this.toastRef().nativeElement.style.setProperty("--swipe-amount","0px"),this.swiping.set(!1)}onPointerMove(r){if(!this.pointerStartRef||!this.toast().dismissible)return;let o=r.clientY-this.pointerStartRef.y,i=r.clientX-this.pointerStartRef.x,a=(this.coords()[0]==="top"?Math.min:Math.max)(0,o),l=r.pointerType==="touch"?10:2;Math.abs(a)>l?this.toastRef().nativeElement.style.setProperty("--swipe-amount",`${o}px`):Math.abs(i)>l&&(this.pointerStartRef=null)}onCloseButtonClick(){this.disabled()||!this.toast().dismissible||(this.deleteToast(),this.toast().onDismiss?.(this.toast()))}onCancelClick(){let r=this.toast();r.dismissible&&(this.deleteToast(),r.cancel?.onClick&&r.cancel.onClick())}onActionClick(r){this.toast().action?.onClick(r),!r.defaultPrevented&&this.deleteToast()}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=je({type:n,selectors:[["ngx-sonner-toast"]],viewQuery:function(o,i){o&1&&es(i.toastRef,Ske,5),o&2&&bo()},inputs:{toast:[1,"toast"],index:[1,"index"],expanded:[1,"expanded"],_invert:[1,"invert","_invert"],position:[1,"position"],visibleToasts:[1,"visibleToasts"],expandByDefault:[1,"expandByDefault"],_closeButton:[1,"closeButton","_closeButton"],interacting:[1,"interacting"],cancelButtonStyle:[1,"cancelButtonStyle"],actionButtonStyle:[1,"actionButtonStyle"],duration:[1,"duration"],descriptionClass:[1,"descriptionClass"],_classes:[1,"classes","_classes"],unstyled:[1,"unstyled"],_class:[1,"class","_class"],_style:[1,"style","_style"]},ngContentSelectors:EK,decls:5,vars:22,consts:[["toastRef",""],["data-sonner-toast","","aria-atomic","true","role","status","tabindex","0",3,"pointerdown","pointerup","pointermove"],["aria-label","Close toast","data-close-button","",3,"class"],["aria-label","Close toast","data-close-button","",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","12","height","12","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[4,"ngComponentOutlet","ngComponentOutletInputs"],["data-icon",""],["data-content",""],["data-title","",3,"class"],["data-description","",3,"class"],["data-button","","data-cancel","",3,"style","class"],["data-button","",3,"style","class"],["data-title",""],["data-description",""],["data-button","","data-cancel","",3,"click"],["data-button","",3,"click"]],template:function(o,i){if(o&1){let s=mn();pn(TK),ne(0,"li",1,0),Pe("pointerdown",function(l){return He(s),Ue(i.onPointerDown(l))})("pointerup",function(){return He(s),Ue(i.onPointerUp())})("pointermove",function(l){return He(s),Ue(i.onPointerMove(l))}),It(2,Tke,4,3,"button",2),It(3,Ike,2,4,"ng-container")(4,Zke,6,5),re()}o&2&&(ks(i.toastStyle()),Le(i.toastClasses()),Bt("aria-live",i.toast().important?"assertive":"polite")("data-styled",!(i.toast().component||i.toast().unstyled||i.unstyled()))("data-mounted",i.mounted())("data-promise",!!i.toast().promise)("data-removed",i.removed())("data-visible",i.isVisible())("data-y-position",i.coords()[0])("data-x-position",i.coords()[1])("data-index",i.index())("data-front",i.isFront())("data-swiping",i.swiping())("data-dismissible",i.toast().dismissible)("data-type",i.toastType())("data-invert",i.invert())("data-swipe-out",i.swipeOut())("data-expanded",i.expanded()||i.expandByDefault()&&i.mounted()),ee(2),Dt(i.closeButton()&&!i.toast().component?2:-1),ee(),Dt(i.toast().component?3:4))},dependencies:[_x,x_e,y_e],encapsulation:2,changeDetection:0});let t=n;return t})(),DK=(()=>{let n=class n{constructor(){this.platformId=R(zo),this.toasts=oi.toasts,this.heights=oi.heights,this.reset=oi.reset,this.invert=Q(!1,{transform:wt}),this.theme=Q("light"),this.position=Q("bottom-right"),this.hotKey=Q(["altKey","KeyT"]),this.richColors=Q(!1,{transform:wt}),this.expand=Q(!1,{transform:wt}),this.duration=Q(G3,{transform:Di}),this.visibleToasts=Q(d_e,{transform:Di}),this.closeButton=Q(!1,{transform:wt}),this.toastOptions=Q({}),this.offset=Q(null),this.dir=Q(this.getDocumentDirection()),this._class=Q("",{alias:"class"}),this._style=Q({},{alias:"style"}),this.possiblePositions=de(()=>Array.from(new Set([this.position(),...this.toasts().filter(r=>r.position).map(r=>r.position)].filter(Boolean)))),this.expanded=Co({source:this.toasts,computation:r=>r.length<1}),this.actualTheme=Co({source:this.theme,computation:r=>this.getActualTheme(r)}),this.interacting=Ye(!1),this.listRef=_s("listRef"),this.lastFocusedElementRef=Ye(null),this.isFocusWithinRef=Ye(!1),this.hotKeyLabel=de(()=>this.hotKey().join("+").replace(/Key/g,"").replace(/Digit/g,"")),this.toasterStyles=de(()=>ae({"--front-toast-height":`${this.heights()[0]?.height}px`,"--offset":typeof this.offset()=="number"?`${this.offset()}px`:this.offset()??`${p_e}`,"--width":`${h_e}px`,"--gap":`${IK}px`},this._style())),this.handleKeydown=r=>{let o=this.listRef()?.nativeElement;if(!o)return;this.hotKey().every(s=>r[s]||r.code===s)&&(this.expanded.set(!0),o.focus()),r.code==="Escape"&&(document.activeElement===o||o.contains(document.activeElement))&&this.expanded.set(!1)},this.handleThemePreferenceChange=({matches:r})=>{this.theme()==="system"&&this.actualTheme.set(r?"dark":"light")},this.reset(),Cs(this.platformId)&&(document.addEventListener("keydown",this.handleKeydown),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.handleThemePreferenceChange))}ngOnDestroy(){Cs(this.platformId)&&(document.removeEventListener("keydown",this.handleKeydown),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",this.handleThemePreferenceChange))}handleBlur(r){this.isFocusWithinRef()&&!r.target.contains(r.relatedTarget)&&(this.isFocusWithinRef.set(!1),this.lastFocusedElementRef()&&(this.lastFocusedElementRef()?.focus({preventScroll:!0}),this.lastFocusedElementRef.set(null)))}handleFocus(r){r.target instanceof HTMLElement&&r.target.dataset.dismissible==="false"||this.isFocusWithinRef()||(this.isFocusWithinRef.set(!0),this.lastFocusedElementRef.set(r.relatedTarget))}handlePointerDown(r){r.target instanceof HTMLElement&&r.target.dataset.dismissible==="false"||this.interacting.set(!0)}handleMouseLeave(){this.interacting()||this.expanded.set(!1)}getActualTheme(r){return r!=="system"?r:Cs(this.platformId)&&window.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light"}getDocumentDirection(){if(typeof window>"u"||typeof document>"u")return"ltr";let r=document.documentElement.getAttribute("dir");return!r||r==="auto"?window.getComputedStyle(document.documentElement).direction:r}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=je({type:n,selectors:[["ngx-sonner-toaster"]],viewQuery:function(o,i){o&1&&es(i.listRef,Xke,5),o&2&&bo()},inputs:{invert:[1,"invert"],theme:[1,"theme"],position:[1,"position"],hotKey:[1,"hotKey"],richColors:[1,"richColors"],expand:[1,"expand"],duration:[1,"duration"],visibleToasts:[1,"visibleToasts"],closeButton:[1,"closeButton"],toastOptions:[1,"toastOptions"],offset:[1,"offset"],dir:[1,"dir"],_class:[1,"class","_class"],_style:[1,"style","_style"]},ngContentSelectors:EK,decls:1,vars:1,consts:[["listRef",""],[3,"tabIndex"],["data-sonner-toaster","",3,"tabIndex","class","style"],["data-sonner-toaster","",3,"blur","focus","mouseenter","mousemove","mouseleave","pointerdown","pointerup","tabIndex"],[3,"index","toast","invert","visibleToasts","closeButton","interacting","position","expandByDefault","expanded","actionButtonStyle","cancelButtonStyle","class","descriptionClass","classes","duration","unstyled"],[3,"index","toast","invert","visibleToasts","closeButton","interacting","position","expandByDefault","expanded","actionButtonStyle","cancelButtonStyle","descriptionClass","classes","duration","unstyled"],[3,"isVisible"],["type","success"],["type","error"],["type","warning"],["type","info"]],template:function(o,i){o&1&&(pn(TK),It(0,s_e,3,2,"section",1)),o&2&&Dt(i.toasts().length>0?0:-1)},dependencies:[k_e,w_e,u_e,v_e],styles:[`html[dir=ltr],[data-sonner-toaster][dir=ltr]{--toast-icon-margin-start: var(--ngx-sonner-toast-icon-margin-start, -3px);--toast-icon-margin-end: var(--ngx-sonner-toast-icon-margin-end, 4px);--toast-svg-margin-start: var(--ngx-sonner-toast-svg-margin-start,-1px);--toast-svg-margin-end: var(--ngx-sonner-toast-svg-margin-end, 0px);--toast-button-margin-start: var(--ngx-sonner-toast-button-margin-start, auto);--toast-button-margin-end: var(--ngx-sonner-toast-button-margin-end, 0);--toast-close-button-start: var(--ngx-sonner-toast-close-button-start, 0);--toast-close-button-end: var(--ngx-sonner-toast-close-button-end, unset);--toast-close-button-transform: var(--ngx-sonner-toast-close-button-transform, translate(-35%, -35%))}html[dir=rtl],[data-sonner-toaster][dir=rtl]{--toast-icon-margin-start: var(--ngx-sonner-rtl-toast-icon-margin-start, 4px);--toast-icon-margin-end: var(--ngx-sonner-rtl-toast-icon-margin-end, -3px);--toast-svg-margin-start: var(--ngx-sonner-rtl-toast-svg-margin-start, 0px);--toast-svg-margin-end: var(--ngx-sonner-rtl-toast-svg-margin-end, -1px);--toast-button-margin-start: var(--ngx-sonner-rtl-toast-button-margin-start, 0);--toast-button-margin-end: var(--ngx-sonner-rtl-toast-button-margin-end, auto);--toast-close-button-start: var(--ngx-sonner-rtl-toast-close-button-start, unset);--toast-close-button-end: var(--ngx-sonner-rtl-toast-close-button-end, 0);--toast-close-button-transform: var(--ngx-sonner-rtl-toast-close-button-transform, translate(35%, -35%))}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:var(--ngx-sonner-font-family, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji);--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: var(--ngx-sonner-border-radius, 8px);box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}[data-sonner-toaster][data-x-position=right]{right:max(var(--offset),env(safe-area-inset-right))}[data-sonner-toaster][data-x-position=left]{left:max(var(--offset),env(safe-area-inset-left))}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translate(-50%)}[data-sonner-toaster][data-y-position=top]{top:max(var(--offset),env(safe-area-inset-top))}[data-sonner-toaster][data-y-position=bottom]{bottom:max(var(--offset),env(safe-area-inset-bottom))}[data-sonner-toast]{--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast][data-y-position=top]{top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}[data-sonner-toast] [data-description]{font-weight:400;line-height:1.4;color:inherit}[data-sonner-toast] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast] [data-icon]>*{flex-shrink:0}[data-sonner-toast] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast] [data-button]:focus-visible{box-shadow:var(--ngx-sonner-toast-focus-box-shadow, 0 0 0 2px rgba(0, 0, 0, .4))}[data-sonner-toast] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast] [data-cancel]{color:var(--normal-text);background:#00000014}[data-sonner-toast][data-theme=dark] [data-cancel]{background:#ffffff4d}[data-sonner-toast] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--ngx-sonner-toast-close-button-background, var(--gray1));color:var(--ngx-sonner-toast-close-button-color, var(--gray12));border:var(--ngx-sonner-toast-close-button-border, 1px solid var(--gray4));transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]:focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}[data-sonner-toast] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast]:hover [data-close-button]:hover{background:var(--ngx-sonner-toast-close-button-hover-background, var(--gray2));color:var(--ngx-sonner-toast-close-button-hover-color, var(--gray12));border-color:var(--ngx-sonner-toast-close-button-hover-border-color, var(--gray5))}[data-sonner-toast][data-swiping=true]:before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]:before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]:before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]:before{content:"";position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]:after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y: translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y: translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]:before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - 32px)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: var(--ngx-sonner-toast-normal-background, #fff);--normal-border: var(--ngx-sonner-toast-normal-border-color, var(--gray4));--normal-text: var(--ngx-sonner-toast-normal-color, var(--gray12));--success-bg: var(--ngx-sonner-toast-success-background, hsl(143, 85%, 96%));--success-border: var(--ngx-sonner-toast-success-border, hsl(145, 92%, 91%));--success-text: var(--ngx-sonner-toast-success-color, hsl(140, 100%, 27%));--info-bg: var(--ngx-sonner-toast-info-background, hsl(208, 100%, 97%));--info-border: var(--ngx-sonner-toast-info-border, hsl(221, 91%, 91%));--info-text: var(--ngx-sonner-toast-info-color, hsl(210, 92%, 45%));--warning-bg: var(--ngx-sonner-toast-warning-background, hsl(49, 100%, 97%));--warning-border: var(--ngx-sonner-toast-warning-border, hsl(49, 91%, 91%));--warning-text: var(--ngx-sonner-toast-warning-color, hsl(31, 92%, 45%));--error-bg: var(--ngx-sonner-toast-error-background, hsl(359, 100%, 97%));--error-border: var(--ngx-sonner-toast-error-border, hsl(359, 100%, 94%));--error-text: var(--ngx-sonner-toast-error-color, hsl(360, 100%, 45%))}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: var(--ngx-sonner-toast-inverse-normal-background, #000);--normal-border: var(--ngx-sonner-toast-inverse-normal-border-color, hsl(0, 0%, 20%));--normal-text: var(--ngx-sonner-toast-inverse-normal-color, var(--gray1))}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: var(--ngx-sonner-toast-inverse-dark-normal-background, #fff);--normal-border: var(--ngx-sonner-toast-inverse-dark-normal-border-color, var(--gray3));--normal-text: var(--ngx-sonner-toast-inverse-dark-normal-color, var(--gray12))}[data-sonner-toaster][data-theme=dark]{--normal-bg: var(--ngx-sonner-toast-dark-normal-background, #000);--normal-border: var(--ngx-sonner-toast-dark-normal-border-color, hsl(0, 0%, 20%));--normal-text: var(--ngx-sonner-toast-dark-normal-color, var(--gray1));--success-bg: var(--ngx-sonner-toast-dark-success-background, hsl(150, 100%, 6%));--success-border: var(--ngx-sonner-toast-dark-success-border, hsl(147, 100%, 12%));--success-text: var(--ngx-sonner-toast-dark-success-color, hsl(150, 86%, 65%));--info-bg: var(--ngx-sonner-toast-dark-info-background, hsl(215, 100%, 6%));--info-border: var(--ngx-sonner-toast-dark-info-border, hsl(223, 100%, 12%));--info-text: var(--ngx-sonner-toast-dark-info-color, hsl(216, 87%, 65%));--warning-bg: var(--ngx-sonner-toast-dark-warning-background, hsl(64, 100%, 6%));--warning-border: var(--ngx-sonner-toast-dark-warning-border, hsl(60, 100%, 12%));--warning-text: var(--ngx-sonner-toast-dark-warning-color, hsl(46, 87%, 65%));--error-bg: var(--ngx-sonner-toast-dark-error-background, hsl(358, 76%, 10%));--error-border: var(--ngx-sonner-toast-dark-error-border, hsl(357, 89%, 16%));--error-text: var(--ngx-sonner-toast-dark-error-color, hsl(358, 100%, 81%))}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=info],[data-rich-colors=true] [data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true] [data-sonner-toast][data-type=warning],[data-rich-colors=true] [data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`],encapsulation:2,changeDetection:0});let t=n;return t})();var bl=class t{constructor(n){this.config=n;let e=localStorage.getItem("library");e&&this._load(e)}static _instance;static get instance(){return t._instance}_library=void 0;get library(){return this._library}_librarySubject=new nr(void 0);get library$(){return this._librarySubject.asObservable()}static init(n){return t.instance||(t._instance=new t(n)),t.instance}_load(n){this._library=CK(n),this._librarySubject.next(this._library),localStorage.setItem("library",n)}loadFromFile(){Es.promise(zn.openFile(".js").then(n=>this._load(n)),{loading:this.config.translate.instant("LIBRARY_LOADING"),success:()=>this.config.translate.instant("LIBRARY_LOADED"),error:n=>(console.error(n),this.config.translate.instant("LIBRARY_NOT_LOADED"))})}deleteFile(){localStorage.removeItem("library"),this._library=void 0,this._librarySubject.next(this._library),Es.success(this.config.translate.instant("LIBRARY_DELETED"))}static \u0275fac=function(e){return new(e||t)(rt(zn))};static \u0275prov=_e({token:t,factory:t.\u0275fac})};var a$={};Qt(a$,{Abs:()=>Lh,Acos:()=>Nc,Acosh:()=>Ac,AdadeltaOptimizer:()=>yf,AdagradOptimizer:()=>xf,AdamOptimizer:()=>kf,AdamaxOptimizer:()=>_f,Add:()=>Rc,AddN:()=>Sd,All:()=>sv,Any:()=>av,ArgMax:()=>Td,ArgMin:()=>Ed,Asin:()=>Oc,Asinh:()=>Fc,Atan:()=>Bc,Atan2:()=>Lc,Atanh:()=>Pc,AvgPool:()=>Id,AvgPool3D:()=>Dd,AvgPool3DGrad:()=>Jm,AvgPoolGrad:()=>Qm,BatchMatMul:()=>Nd,BatchToSpaceND:()=>Ad,Bincount:()=>e0,BitwiseAnd:()=>$h,BroadcastArgs:()=>t0,BroadcastTo:()=>CO,Callback:()=>H_,CallbackList:()=>T_,Cast:()=>Ml,Ceil:()=>$c,ClipByValue:()=>Vc,Complex:()=>n0,ComplexAbs:()=>Rd,Concat:()=>Od,Conv2D:()=>Fd,Conv2DBackpropFilter:()=>r0,Conv2DBackpropInput:()=>Bd,Conv3D:()=>Pd,Conv3DBackpropFilterV2:()=>o0,Conv3DBackpropInputV2:()=>i0,Cos:()=>Vh,Cosh:()=>jc,CropAndResize:()=>a0,Cumprod:()=>s0,Cumsum:()=>Ld,CustomCallback:()=>I_,DataStorage:()=>Bh,DenseBincount:()=>l0,DepthToSpace:()=>c0,DepthwiseConv2dNative:()=>$d,DepthwiseConv2dNativeBackpropFilter:()=>u0,DepthwiseConv2dNativeBackpropInput:()=>d0,Diag:()=>p0,Dilation2D:()=>Vd,Dilation2DBackpropFilter:()=>cv,Dilation2DBackpropInput:()=>lv,Draw:()=>uv,ENV:()=>K3,EarlyStopping:()=>U_,Einsum:()=>h0,Elu:()=>jd,EluGrad:()=>f0,Environment:()=>iv,Equal:()=>zh,Erf:()=>jh,Exp:()=>Hh,ExpandDims:()=>zd,Expm1:()=>Hc,FFT:()=>dv,Fill:()=>m0,FlipLeftRight:()=>g0,Floor:()=>Uc,FloorDiv:()=>Gc,FromPixels:()=>pv,FusedBatchNorm:()=>Hd,FusedConv2D:()=>sf,FusedDepthwiseConv2D:()=>af,GPGPUContext:()=>Lf,GatherNd:()=>v0,GatherV2:()=>Ud,GraphModel:()=>Jv,Greater:()=>Uh,GreaterEqual:()=>Wc,History:()=>E_,IFFT:()=>w0,Identity:()=>Sl,Imag:()=>y0,InputSpec:()=>Dn,IsFinite:()=>qc,IsInf:()=>Kc,IsNan:()=>Zc,KernelBackend:()=>Ec,LRN:()=>k0,LRNGrad:()=>_0,LayerVariable:()=>jv,LayersModel:()=>Ka,LeakyRelu:()=>Gd,Less:()=>Gh,LessEqual:()=>Wh,LinSpace:()=>x0,Log:()=>qh,Log1p:()=>Xc,LogSoftmax:()=>MO,LogicalAnd:()=>Kh,LogicalNot:()=>Zh,LogicalOr:()=>Xh,LogicalXor:()=>U_e,LowerBound:()=>G_e,MathBackendCPU:()=>wE,MathBackendWebGL:()=>wI,MatrixBandPart:()=>W_e,Max:()=>b0,MaxPool:()=>Wd,MaxPool3D:()=>qd,MaxPool3DGrad:()=>M0,MaxPoolGrad:()=>C0,MaxPoolWithArgmax:()=>S0,Maximum:()=>Yc,Mean:()=>Kd,Min:()=>T0,Minimum:()=>Qc,MirrorPad:()=>Zd,Mod:()=>Yh,MomentumOptimizer:()=>bf,Multinomial:()=>E0,Multiply:()=>Jc,Neg:()=>I0,NonMaxSuppressionV3:()=>D0,NonMaxSuppressionV4:()=>N0,NonMaxSuppressionV5:()=>A0,NotEqual:()=>Qh,OP_SCOPE_SUFFIX:()=>oS,OneHot:()=>Yd,OnesLike:()=>Xd,Optimizer:()=>Ko,OptimizerConstructors:()=>Rv,Pack:()=>Qd,PadV2:()=>Jd,Pool:()=>q_e,Pow:()=>Jh,Prelu:()=>ep,Prod:()=>tp,RMSPropOptimizer:()=>Cf,RNN:()=>Kl,RaggedGather:()=>R0,RaggedRange:()=>O0,RaggedTensorToTensor:()=>F0,Range:()=>B0,Rank:()=>OO,Real:()=>P0,RealDiv:()=>zc,Reciprocal:()=>eu,Reduction:()=>Er,Relu:()=>tu,Relu6:()=>nu,Reshape:()=>np,ResizeBilinear:()=>op,ResizeBilinearGrad:()=>$0,ResizeNearestNeighbor:()=>rp,ResizeNearestNeighborGrad:()=>L0,Reverse:()=>ip,RotateWithOffset:()=>rg,Round:()=>ru,Rsqrt:()=>ou,SGDOptimizer:()=>bu,ScatterNd:()=>V0,SearchSorted:()=>z0,Select:()=>sp,Selu:()=>iu,Sequential:()=>P_,Sigmoid:()=>lu,Sign:()=>au,Sin:()=>ef,Sinh:()=>su,Slice:()=>ap,Softmax:()=>up,Softplus:()=>cu,SpaceToBatchND:()=>lp,SparseFillEmptyRows:()=>U0,SparseReshape:()=>G0,SparseSegmentMean:()=>W0,SparseSegmentSum:()=>q0,SparseToDense:()=>K0,SplitV:()=>cp,Sqrt:()=>uu,Square:()=>Z0,SquaredDifference:()=>du,StaticRegexReplace:()=>tf,Step:()=>hu,StridedSlice:()=>X0,StringNGrams:()=>Y0,StringSplit:()=>Q0,StringToHashBucketFast:()=>J0,Sub:()=>nf,Sum:()=>H0,SymbolicTensor:()=>ci,Tan:()=>rf,Tanh:()=>pu,Tensor:()=>Rt,TensorBuffer:()=>gn,TensorScatterUpdate:()=>j0,Tile:()=>Tl,TopK:()=>eg,Transform:()=>tg,Transpose:()=>El,Unique:()=>ng,Unpack:()=>dp,UnsortedSegmentSum:()=>pp,UpperBound:()=>K_e,Variable:()=>mu,ZerosLike:()=>hp,_FusedMatMul:()=>of,abs:()=>Pn,acos:()=>xk,acosh:()=>kk,add:()=>fe,addN:()=>XO,all:()=>mg,any:()=>hf,argMax:()=>Rl,argMin:()=>_k,asin:()=>bk,asinh:()=>Ck,atan:()=>Mk,atan2:()=>Sk,atanh:()=>Tk,avgPool:()=>wp,avgPool3d:()=>Dk,backend:()=>vk,backend_util:()=>O,basicLSTMCell:()=>eF,batchNorm:()=>Ol,batchNorm2d:()=>Nk,batchNorm3d:()=>Ak,batchNorm4d:()=>Rk,batchToSpaceND:()=>yp,bincount:()=>Ok,bitwiseAnd:()=>tF,booleanMaskAsync:()=>mX,broadcastArgs:()=>nF,broadcastTo:()=>Fl,broadcast_util:()=>os,browser:()=>x_,buffer:()=>ot,callbacks:()=>Zee,cast:()=>me,ceil:()=>Fk,clipByValue:()=>ho,clone:()=>mi,complex:()=>Oi,concat:()=>hn,concat1d:()=>Bk,concat2d:()=>Pk,concat3d:()=>Lk,concat4d:()=>$k,constraints:()=>BB,conv1d:()=>vg,conv2d:()=>Bi,conv2dTranspose:()=>wg,conv3d:()=>Vk,conv3dTranspose:()=>jk,copyRegisteredKernels:()=>Q_e,cos:()=>xp,cosh:()=>yg,cosineWindow:()=>Nv,cumprod:()=>ff,cumsum:()=>xg,customGrad:()=>vi,data:()=>u7,denseBincount:()=>Tv,deprecationWarn:()=>hZ,depthToSpace:()=>zk,depthwiseConv2d:()=>Bl,deregisterOp:()=>Qee,device_util:()=>fp,diag:()=>rF,dilation2d:()=>Hk,disableDeprecationWarnings:()=>Cbe,dispose:()=>ht,disposeVariables:()=>Mbe,div:()=>Be,divNoNan:()=>Uk,dot:()=>Gk,dropout:()=>yS,einsum:()=>kp,elu:()=>Pl,enableDebugMode:()=>bbe,enableProdMode:()=>_be,enclosingPowerOfTwo:()=>xS,engine:()=>na,ensureShape:()=>oF,env:()=>Y,equal:()=>Io,erf:()=>kg,euclideanNorm:()=>qk,exp:()=>cr,expandDims:()=>ur,expm1:()=>Kk,eye:()=>mf,fft:()=>Np,fill:()=>ia,findBackend:()=>Dbe,findBackendFactory:()=>Nbe,floor:()=>Ll,floorDiv:()=>fg,forceHalfFloat:()=>V9,fused:()=>Rp,gather:()=>$l,gatherND:()=>xX,gather_util:()=>iB,getBackend:()=>VO,getGradient:()=>Z3,getKernel:()=>og,getKernelsForBackend:()=>uk,gpgpu_util:()=>uI,grad:()=>WZ,grads:()=>qZ,greater:()=>Zn,greaterEqual:()=>gi,ifft:()=>_u,imag:()=>_p,image:()=>yi,inTopKAsync:()=>_X,initializers:()=>PB,input:()=>kT,io:()=>qr,irfft:()=>Fg,isFinite:()=>Zk,isInf:()=>Xk,isNaN:()=>Yk,keep:()=>Hn,kernel_impls:()=>Zo,layers:()=>rL,leakyRelu:()=>bp,less:()=>xu,lessEqual:()=>is,linalg:()=>DS,linspace:()=>cF,loadGraphModel:()=>Dte,loadGraphModelSync:()=>Nte,loadLayersModel:()=>qv,localResponseNormalization:()=>Qk,log:()=>mo,log1p:()=>Cp,logSigmoid:()=>e_,logSoftmax:()=>_g,logSumExp:()=>Mp,logicalAnd:()=>No,logicalNot:()=>Sp,logicalOr:()=>bg,logicalXor:()=>t_,losses:()=>dY,lowerBound:()=>uF,matMul:()=>Pt,math:()=>oB,max:()=>fo,maxPool:()=>Tp,maxPool3d:()=>n_,maxPoolWithArgmax:()=>dF,maximum:()=>Pi,mean:()=>Rn,memory:()=>xv,meshgrid:()=>pF,metrics:()=>oL,min:()=>wu,minimum:()=>As,mirrorPad:()=>r_,mod:()=>o_,model:()=>Dee,models:()=>iL,moments:()=>gf,movingAverage:()=>gX,mul:()=>L,multiRNNCell:()=>hF,multinomial:()=>fF,neg:()=>Wt,nextFrame:()=>Ov,norm:()=>yu,notEqual:()=>La,oneHot:()=>Vl,ones:()=>Tr,onesLike:()=>oo,op:()=>I,outerProduct:()=>mF,pad:()=>wi,pad1d:()=>gF,pad2d:()=>vF,pad3d:()=>wF,pad4d:()=>yF,pool:()=>i_,pow:()=>qo,prelu:()=>Ip,print:()=>yk,prod:()=>s_,profile:()=>Sbe,raggedGather:()=>xF,raggedRange:()=>kF,raggedTensorToTensor:()=>_F,rand:()=>bF,randomGamma:()=>OF,randomNormal:()=>vf,randomStandardNormal:()=>FF,randomUniform:()=>ss,randomUniformInt:()=>BF,range:()=>jl,ready:()=>Ebe,real:()=>ku,reciprocal:()=>l_,registerBackend:()=>gk,registerCallbackConstructor:()=>Aee,registerGradient:()=>SO,registerKernel:()=>fv,registerOp:()=>Yee,regularizers:()=>sL,relu:()=>Ao,relu6:()=>Sg,removeBackend:()=>Ibe,reshape:()=>$,reverse:()=>Ur,reverse1d:()=>PF,reverse2d:()=>LF,reverse3d:()=>$F,reverse4d:()=>VF,rfft:()=>Ap,round:()=>Tg,rsqrt:()=>Eg,scalar:()=>$e,scatterND:()=>vX,scatter_util:()=>h_,searchSorted:()=>Ev,selu:()=>Ig,separableConv2d:()=>Dg,sequential:()=>Nee,serialization:()=>ge,setBackend:()=>fZ,setPlatform:()=>Abe,setWebGLContext:()=>UE,setdiff1dAsync:()=>jF,shared:()=>nb,sigmoid:()=>ai,sign:()=>c_,signal:()=>uY,sin:()=>Ng,sinh:()=>Ag,slice:()=>Tt,slice1d:()=>Rg,slice2d:()=>Iv,slice3d:()=>Og,slice4d:()=>wf,slice_util:()=>go,softmax:()=>Dp,softplus:()=>Pa,spaceToBatchND:()=>Ep,sparse:()=>pY,sparseToDense:()=>yX,spectral:()=>cY,split:()=>Gr,sqrt:()=>Mn,square:()=>jt,squaredDifference:()=>Bg,squeeze:()=>as,stack:()=>Xn,step:()=>sa,stridedSlice:()=>u_,string:()=>hY,sub:()=>Oe,sum:()=>Ve,sumOutType:()=>uf,tan:()=>d_,tanh:()=>Fa,tensor:()=>Hr,tensor1d:()=>Yn,tensor2d:()=>$a,tensor3d:()=>p_,tensor4d:()=>zF,tensor5d:()=>HF,tensor6d:()=>UF,tensorScatterUpdate:()=>WF,tensor_util:()=>ta,test_util:()=>RF,tidy:()=>te,tile:()=>Do,time:()=>Tbe,topk:()=>f_,train:()=>Mf,transpose:()=>Lt,truncatedNormal:()=>Pg,unique:()=>m_,unregisterGradient:()=>Y_e,unregisterKernel:()=>X_e,unsortedSegmentSum:()=>Lg,unstack:()=>Wr,upcastType:()=>Lr,upperBound:()=>qF,util:()=>x,valueAndGrad:()=>KZ,valueAndGrads:()=>ZZ,variable:()=>g_,variableGrads:()=>Jk,version:()=>G7e,version_converter:()=>tE,version_core:()=>FS,version_cpu:()=>LE,version_layers:()=>Df,version_webgl:()=>yI,webgl:()=>RFe,webgl_util:()=>i2,where:()=>En,whereAsync:()=>v_,zeros:()=>On,zerosLike:()=>at});var Bh=class{constructor(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)}set(n,e){this.dataIdsCount++,this.data.set(n,e)}has(n){return this.data.has(n)}delete(n){return this.dataIdsCount--,this.data.delete(n)}numDataIds(){return this.dataIdsCount}},Ec=class{refCount(n){return Is("refCount")}incRef(n){return Is("incRef")}timerAvailable(){return!0}time(n){return Is("time")}read(n){return Is("read")}readSync(n){return Is("readSync")}readToGPU(n,e){return Is("readToGPU")}numDataIds(){return Is("numDataIds")}disposeData(n,e){return Is("disposeData")}write(n,e,r){return Is("write")}move(n,e,r,o,i){return Is("move")}createTensorFromGPUData(n,e,r){return Is("createTensorFromGPUData")}memory(){return Is("memory")}floatPrecision(){return Is("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Is("dispose")}};function Is(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function NK(t){let n=t.length,e=0;for(;n>0;)e=Math.random()*n|0,n--,W3(t,n,e)}function b_e(t,n){if(t.length!==n.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${n.length}`);let e=t.length,r=0;for(;e>0;)r=Math.random()*e|0,e--,W3(t,e,r),W3(n,e,r)}function tv(t,n,e){return Math.max(t,Math.min(n,e))}function C_e(t){return t%2===0?t:t+1}function W3(t,n,e){let r=t[n];t[n]=t[e],t[e]=r}function M_e(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n}function S_e(t,n){let e=Math.random();return n*e+(1-e)*t}function T_e(t,n){let e=0;for(let r=0;r<t.length;r++){let o=Number(t[r])-Number(n[r]);e+=o*o}return e}function F(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function Jn(t,n,e=""){F(Ai(t,n),()=>e+` Shapes ${t} and ${n} must match`)}function ea(t){F(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Jt(t){if(t.length===0)return 1;let n=t[0];for(let e=1;e<t.length;e++)n*=t[e];return n}function E_e(t){return t.length===0}function gO(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==null&&n[e]!==null&&t[e]!==n[e])return!1;return!0}function Ai(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function Md(t){return t%1===0}function I_e(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let n=Math.exp(2*t);return(n-1)/(n+1)}}function D_e(t){let n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function N_e(t){let n=new Uint32Array(t);for(let e=0;e<t;++e)n[e]=e;return NK(n),n}function Xm(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function A_e(t,n=o=>0,e,r){return new Promise((o,i)=>{let s=0,a=()=>{if(t()){o();return}s++;let l=n(s);if(e!=null&&s>=e){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function R_e(t,n){let e=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(n>0&&n!==e)throw Error(`Size(${n}) must match the product of shape ${t}`);return t}if(e===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(n%e!==0)throw Error(`The implicit shape can't be a fractional number. Got ${n} / ${e}`);let o=t.slice();return o[r]=n/e,o}function ro(t,n){let e=n.length;return t=t==null?n.map((r,o)=>o):[].concat(t),F(t.every(r=>r>=-e&&r<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${t}`),F(t.every(r=>Md(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?e+r:r)}function vO(t,n){let e=[],r=[],o=n!=null&&Array.isArray(n)&&n.length===0,i=n==null||o?null:ro(n,t).sort(),s=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[s]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[s]==null||i[s]>a)&&t[a]===1&&(e.push(t[a]),r.push(a)),i[s]<=a&&s++}t[a]!==1&&(e.push(t[a]),r.push(a))}return{newShape:e,keptDims:r}}function wO(t,n){return q3(t,n)}function q3(t,n){let e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else if(t==="string")e=new Array(n);else throw new Error(`Unknown data type ${t}`);return e}function yO(t,n){for(let e=0;e<t.length;e++){let r=t[e];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${n} being uploaded contains ${r}.`)}}function xO(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function O_e(t,n){return!(n==="complex64"||n==="float32"&&t!=="complex64"||n==="int32"&&t!=="float32"&&t!=="complex64"||n==="bool"&&t==="bool")}function nv(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function kO(t){if(t==null)return 0;let n=0;return t.forEach(e=>n+=e.length),n}function Cl(t){return typeof t=="string"||t instanceof String}function AK(t){return typeof t=="boolean"}function RK(t){return typeof t=="number"}function Ph(t){return Array.isArray(t)?Ph(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":RK(t)?"float32":Cl(t)?"string":AK(t)?"bool":"float32"}function Ic(t){return!!(t&&t.constructor&&t.call&&t.apply)}function rv(t,n){for(let e=n;e<t;++e)if(t%e===0)return e;return t}function Dc(t){let n=t.length;if(n<2)return[];let e=new Array(n-1);e[n-2]=t[n-1];for(let r=n-3;r>=0;--r)e[r]=e[r+1]*t[r+1];return e}function OK(t,n,e,r=!1){let o=new Array;if(n.length===1){let i=n[0]*(r?2:1);for(let s=0;s<i;s++)o[s]=e[t+s]}else{let i=n[0],s=n.slice(1),a=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)o[l]=OK(t+l*a,s,e,r)}return o}function Zm(t,n,e=!1){if(t.length===0)return n[0];let r=t.reduce((o,i)=>o*i)*(e?2:1);if(r===0)return[];if(r!==n.length)throw new Error(`[${t}] does not match the input size ${n.length}${e?" for a complex tensor":""}.`);return OK(0,t,n,e)}function F_e(t,n){if(Array.isArray(t))return t;if(n==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(n==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(n==="bool"||n==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${n}`)}function ak(t,n){let e=ov(t,n);for(let r=0;r<e.length;r++)e[r]=1;return e}function ov(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${n}`)}function B_e(t,n){let e=t.reduce((r,o)=>r*o,1);if(n==null||n==="float32")return Zm(t,new Float32Array(e));if(n==="int32")return Zm(t,new Int32Array(e));if(n==="bool")return Zm(t,new Uint8Array(e));throw new Error(`Unknown data type ${n}`)}function ar(t){t.forEach(n=>{F(Number.isInteger(n)&&n>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function P_e(t,n,e){if(n===0)return 0;if(n===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=e[o]*t[o];return r}function L_e(t,n,e){if(n===0)return[];if(n===1)return[t];let r=new Array(n);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/e[o]),t-=r[o]*e[o];return r[r.length-1]=t,r}function Ym(t){return t&&t.then&&typeof t.then=="function"}var FK="tfjsflags",iv=class{constructor(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=V_e,this.populateURLFlags()}setPlatform(n,e){this.platform!=null&&(Y().getBool("IS_TEST")||Y().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`)),this.platformName=n,this.platform=e}registerFlag(n,e,r){if(this.flagRegistry[n]={evaluationFn:e,setHook:r},this.urlFlags[n]!=null){let o=this.urlFlags[n];Y().getBool("IS_TEST")||Y().getBool("PROD")||console.warn(`Setting feature override from URL ${n}: ${o}.`),this.set(n,o)}}getAsync(n){return z(this,null,function*(){return n in this.flags?this.flags[n]:(this.flags[n]=yield this.evaluateFlag(n),this.flags[n])})}get(n){if(n in this.flags)return this.flags[n];let e=this.evaluateFlag(n);if(Ym(e))throw new Error(`Flag ${n} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[n]=e,this.flags[n]}getNumber(n){return this.get(n)}getBool(n){return this.get(n)}getString(n){return this.get(n)}getFlags(){return this.flags}get features(){return this.flags}set(n,e){if(this.flagRegistry[n]==null)throw new Error(`Cannot set flag ${n} as it has not been registered.`);this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)}evaluateFlag(n){if(this.flagRegistry[n]==null)throw new Error(`Cannot evaluate flag '${n}': no evaluation function found.`);return this.flagRegistry[n].evaluationFn()}setFlags(n){this.flags=Object.assign({},n)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let n=this.getQueryParams(this.global.location.search);FK in n&&n[FK].split(",").forEach(r=>{let[o,i]=r.split(":");this.urlFlags[o]=z_e(o,i)})}};function V_e(t){let n={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...r)=>(j_e(n,r[0],r[1]),r.join("="))),n}function j_e(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}function z_e(t,n){let e=n.toLowerCase();return e==="true"||e==="false"?e==="true":`${+e}`===e?+e:n}function Y(){return K3}var K3=null;function BK(t){K3=t}var _O;function bO(){if(_O==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");_O=t}return _O}function H_e(){let t=bO();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function lk(t,n){let e=H_e();if(e.has(t))return e.get(t);{let r=n();return e.set(t,r),e.get(t)}}var Lh="Abs",Nc="Acos",Ac="Acosh",Rc="Add",Sd="AddN",sv="All",av="Any",Td="ArgMax",Ed="ArgMin",Oc="Asin",Fc="Asinh",Bc="Atan",Pc="Atanh",Lc="Atan2",Id="AvgPool",Qm="AvgPoolGrad",Dd="AvgPool3D",Jm="AvgPool3DGrad",Nd="BatchMatMul",Ad="BatchToSpaceND",e0="Bincount",$h="BitwiseAnd",CO="BroadcastTo",t0="BroadcastArgs",Ml="Cast",$c="Ceil",Vc="ClipByValue",n0="Complex",Rd="ComplexAbs",Od="Concat",Fd="Conv2D",r0="Conv2DBackpropFilter",Bd="Conv2DBackpropInput",Pd="Conv3D",o0="Conv3DBackpropFilterV2",i0="Conv3DBackpropInputV2",Vh="Cos",jc="Cosh",s0="Cumprod",Ld="Cumsum",a0="CropAndResize",l0="DenseBincount",c0="DepthToSpace",$d="DepthwiseConv2dNative",u0="DepthwiseConv2dNativeBackpropFilter",d0="DepthwiseConv2dNativeBackpropInput",p0="Diag",Vd="Dilation2D",lv="Dilation2DBackpropInput",cv="Dilation2DBackpropFilter",uv="Draw",zc="RealDiv",h0="Einsum",jd="Elu",f0="EluGrad",jh="Erf",zh="Equal",Hh="Exp",zd="ExpandDims",Hc="Expm1",dv="FFT",m0="Fill",g0="FlipLeftRight",Uc="Floor",Gc="FloorDiv",Hd="FusedBatchNorm",Ud="GatherV2",v0="GatherNd",Uh="Greater",Wc="GreaterEqual",Sl="Identity",w0="IFFT",y0="Imag",qc="IsFinite",Kc="IsInf",Zc="IsNan",Gd="LeakyRelu",Gh="Less",Wh="LessEqual",x0="LinSpace",qh="Log",Xc="Log1p",Kh="LogicalAnd",Zh="LogicalNot",Xh="LogicalOr",U_e="LogicalXor",MO="LogSoftmax",G_e="LowerBound",k0="LRN",_0="LRNGrad",W_e="MatrixBandPart",b0="Max",Yc="Maximum",Wd="MaxPool",C0="MaxPoolGrad",qd="MaxPool3D",M0="MaxPool3DGrad",S0="MaxPoolWithArgmax",Kd="Mean",T0="Min",Qc="Minimum",Zd="MirrorPad",Yh="Mod",E0="Multinomial",Jc="Multiply",I0="Neg",Qh="NotEqual",D0="NonMaxSuppressionV3",N0="NonMaxSuppressionV4",A0="NonMaxSuppressionV5",Xd="OnesLike",Yd="OneHot",Qd="Pack",Jd="PadV2",q_e="Pool",Jh="Pow",ep="Prelu",tp="Prod",R0="RaggedGather",O0="RaggedRange",F0="RaggedTensorToTensor",B0="Range",P0="Real",eu="Reciprocal",tu="Relu",np="Reshape",rp="ResizeNearestNeighbor",L0="ResizeNearestNeighborGrad",op="ResizeBilinear",$0="ResizeBilinearGrad",nu="Relu6",ip="Reverse",ru="Round",ou="Rsqrt",V0="ScatterNd",j0="TensorScatterUpdate",z0="SearchSorted",sp="Select",iu="Selu",ap="Slice",ef="Sin",su="Sinh",au="Sign",lu="Sigmoid",cu="Softplus",uu="Sqrt",H0="Sum",lp="SpaceToBatchND",cp="SplitV",up="Softmax",U0="SparseFillEmptyRows",G0="SparseReshape",W0="SparseSegmentMean",q0="SparseSegmentSum",K0="SparseToDense",du="SquaredDifference",Z0="Square",tf="StaticRegexReplace",X0="StridedSlice",Y0="StringNGrams",Q0="StringSplit",J0="StringToHashBucketFast",nf="Sub",rf="Tan",pu="Tanh",Tl="Tile",eg="TopK",tg="Transform",El="Transpose",ng="Unique",dp="Unpack",pp="UnsortedSegmentSum",K_e="UpperBound",hp="ZerosLike",hu="Step",pv="FromPixels",rg="RotateWithOffset",of="_FusedMatMul",sf="FusedConv2D",af="FusedDepthwiseConv2D";function fu(...t){Y().getBool("IS_TEST")||Y().getBool("PROD")||console.warn(...t)}function Z_e(...t){Y().getBool("IS_TEST")||Y().getBool("PROD")||console.log(...t)}var hv=lk("kernelRegistry",()=>new Map),ck=lk("gradRegistry",()=>new Map);function og(t,n){let e=TO(t,n);return hv.get(e)}function Z3(t){return ck.get(t)}function uk(t){let n=hv.entries(),e=[];for(;;){let{done:r,value:o}=n.next();if(r)break;let[i,s]=o,[a]=i.split("_");a===t&&e.push(s)}return e}function fv(t){let{kernelName:n,backendName:e}=t,r=TO(n,e);hv.has(r)&&fu(`The kernel '${n}' for backend '${e}' is already registered`),hv.set(r,t)}function SO(t){let{kernelName:n}=t;ck.has(n)&&Y().getBool("DEBUG")&&fu(`Overriding the gradient for '${n}'`),ck.set(n,t)}function X_e(t,n){let e=TO(t,n);if(!hv.has(e))throw new Error(`The kernel '${t}' for backend '${n}' is not registered`);hv.delete(e)}function Y_e(t){if(!ck.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);ck.delete(t)}function Q_e(t,n){uk(t).forEach(r=>{let o=Object.assign({},r,{backendName:n});fv(o)})}function TO(t,n){return`${n}_${t}`}var x={};Qt(x,{arraysEqual:()=>Ai,arraysEqualWithNull:()=>gO,assert:()=>F,assertNonNegativeIntegerDimensions:()=>ar,assertNonNull:()=>ea,assertShapesMatch:()=>Jn,bytesFromStringArray:()=>kO,bytesPerElement:()=>nv,checkConversionForErrors:()=>yO,clamp:()=>tv,computeStrides:()=>Dc,convertBackendValuesAndArrayBuffer:()=>F_e,createScalarValue:()=>ibe,createShuffledIndices:()=>N_e,decodeString:()=>wv,distSquared:()=>T_e,encodeString:()=>cf,fetch:()=>abe,fingerPrint64:()=>obe,flatten:()=>Dl,getArrayFromDType:()=>q3,getTypedArrayFromDType:()=>wO,hasEncodingLoss:()=>O_e,hexToLong:()=>dk,indexToLoc:()=>L_e,inferDtype:()=>Ph,inferFromImplicitShape:()=>R_e,isBoolean:()=>AK,isFunction:()=>Ic,isInt:()=>Md,isNumber:()=>RK,isPromise:()=>Ym,isScalarShape:()=>E_e,isString:()=>Cl,isTypedArray:()=>Pr,isValidDtype:()=>xO,locToIndex:()=>P_e,makeOnesTypedArray:()=>ak,makeZerosNestedTypedArray:()=>B_e,makeZerosTypedArray:()=>ov,nearestDivisor:()=>rv,nearestLargerEven:()=>C_e,now:()=>cg,parseAxisParam:()=>ro,randUniform:()=>S_e,repeatedTry:()=>A_e,rightPad:()=>Xm,shuffle:()=>NK,shuffleCombo:()=>b_e,sizeFromShape:()=>Jt,sizeToSquarishShape:()=>D_e,squeezeShape:()=>vO,sum:()=>M_e,swap:()=>W3,tanh:()=>I_e,toNestedArray:()=>Zm,toTypedArray:()=>vv});function X3(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var NO=O2(KK());var lg=NO.default||NO;function dk(t){return lg.fromString(t,!0,16)}var XK=dk("c3a5c85c97cb3127"),ag=dk("b492b66fbe98f273"),Ri=dk("9ae16a3b2f90404f");function DO(t){return t.xor(t.shru(47))}function YK(t,n,e){let r=t.slice(n,n+e);return lg.fromBytes(Array.from(r),!0,!0)}function lr(t,n){return YK(t,n,8)}function ZK(t,n){return YK(t,n,4)}function Go(t,n){return n===0?t:t.shru(n).or(t.shl(64-n))}function lf(t,n,e=dk("9ddfea08eb382d69")){let r=t.xor(n).mul(e);r=r.xor(r.shru(47));let o=n.xor(r).mul(e);return o=o.xor(o.shru(47)),o=o.mul(e),o}function ebe(t,n,e,r,o,i){o=o.add(t),i=Go(i.add(o).add(r),21);let s=o;return o=o.add(n),o=o.add(e),i=i.add(Go(o,44)),[o.add(r),i.add(s)]}function Q3(t,n,e,r){return ebe(lr(t,n),lr(t,n+8),lr(t,n+16),lr(t,n+24),e,r)}function tbe(t,n=t.length){if(n>=8){let e=Ri.add(n*2),r=lr(t,0).add(Ri),o=lr(t,n-8),i=Go(o,37).mul(e).add(r),s=Go(r,25).add(o).mul(e);return lf(i,s,e)}if(n>=4){let e=Ri.add(n*2),r=ZK(t,0);return lf(r.shl(3).add(n),ZK(t,n-4),e)}if(n>0){let e=t[0],r=t[n>>1],o=t[n-1],i=e+(r<<8),s=n+(o<<2);return DO(Ri.mul(i).xor(XK.mul(s))).mul(Ri)}return Ri}function nbe(t,n=t.length){let e=Ri.add(n*2),r=lr(t,0).mul(ag),o=lr(t,8),i=lr(t,n-8).mul(e),s=lr(t,n-16).mul(Ri);return lf(Go(r.add(o),43).add(Go(i,30)).add(s),r.add(Go(o.add(Ri),18)).add(i),e)}function rbe(t,n=t.length){let e=Ri.add(n*2),r=lr(t,0).mul(Ri),o=lr(t,8),i=lr(t,n-8).mul(e),s=lr(t,n-16).mul(Ri),a=Go(r.add(o),43).add(Go(i,30)).add(s),l=lf(a,r.add(Go(o.add(Ri),18)).add(i),e),c=lr(t,16).mul(e),u=lr(t,24),d=a.add(lr(t,n-32)).mul(e),p=l.add(lr(t,n-24)).mul(e);return lf(Go(c.add(u),43).add(Go(d,30)).add(p),c.add(Go(u.add(r),18)).add(d),e)}function obe(t,n=t.length){let e=lg.fromNumber(81,!0);if(n<=32)return n<=16?tbe(t,n):nbe(t,n);if(n<=64)return rbe(t,n);let r=e,o=e.mul(ag).add(113),i=DO(o.mul(Ri).add(113)).mul(Ri),s=[lg.UZERO,lg.UZERO],a=[lg.UZERO,lg.UZERO];r=r.mul(Ri).add(lr(t,0));let l=0,c=(n-1>>6)*64,u=c+(n-1&63)-63;do r=Go(r.add(o).add(s[0]).add(lr(t,l+8)),37).mul(ag),o=Go(o.add(s[1]).add(lr(t,l+48)),42).mul(ag),r=r.xor(a[1]),o=o.add(s[0]).add(lr(t,l+40)),i=Go(i.add(a[0]),33).mul(ag),s=Q3(t,l,s[1].mul(ag),r.add(a[0])),a=Q3(t,l+32,i.add(a[1]),o.add(lr(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);let d=ag.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(n-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=Go(r.add(o).add(s[0]).add(lr(t,l+8)),37).mul(d),o=Go(o.add(s[1]).add(lr(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(s[0].mul(9).add(lr(t,l+40))),i=Go(i.add(a[0]),33).mul(d),s=Q3(t,l,s[1].mul(d),r.add(a[0])),a=Q3(t,l+32,i.add(a[1]),o.add(lr(t,l+16))),[i,r]=[r,i],lf(lf(s[0],a[0],d).add(DO(o).mul(XK)).add(i),lf(s[1],a[1],d).add(r),d)}function ibe(t,n){return n==="string"?cf(t):vv([t],n)}function sbe(t,n){return t instanceof Float32Array&&n==="float32"||t instanceof Int32Array&&n==="int32"||t instanceof Uint8Array&&n==="bool"}function vv(t,n){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Dl(t)),Y().getBool("DEBUG")&&yO(t,n),sbe(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){let e=new Uint8Array(t.length);for(let r=0;r<e.length;++r)Math.round(t[r])!==0&&(e[r]=1);return e}else throw new Error(`Unknown data type ${n}`)}function cg(){return Y().platform.now()}function abe(t,n){return Y().platform.fetch(t,n)}function cf(t,n="utf-8"){return n=n||"utf-8",Y().platform.encode(t,n)}function wv(t,n="utf-8"){return n=n||"utf-8",Y().platform.decode(t,n)}function Pr(t){return Y().platform.isTypedArray!=null?Y().platform.isTypedArray(t):X3(t)}function Dl(t,n=[],e=!1){if(n==null&&(n=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Ym(t)||t==null||Pr(t)&&e)n.push(t);else if(Array.isArray(t)||Pr(t))for(let r=0;r<t.length;++r)Dl(t[r],n,e);else{let r=-1;for(let o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)Dl(t[o],n,e)}return n}var J3=class{constructor(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new AO)}profileKernel(n,e,r){let o,i=()=>{o=r()},s,a=cg();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(let c of o)c.dataSync();s=Promise.resolve({kernelMs:cg()-a})}if(Y().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let u=o[c];u.data().then(d=>{lbe(d,u.dtype,n)})}return{kernelName:n,outputs:o,inputs:e,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(n){let{kernelName:e,outputs:r,timeMs:o,inputs:i,extraInfo:s}=n;r.forEach(a=>{Promise.all([a.data(),o,s]).then(l=>{this.logger.logKernelProfile(e,a,l[0],l[1],i,l[2])})})}};function lbe(t,n,e){if(n!=="float32")return!1;for(let r=0;r<t.length;r++){let o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${e}'`),!0}return!1}var AO=class{logKernelProfile(n,e,r,o,i,s){let a=typeof o=="number"?Xm(`${o}ms`,9):o.error,l=Xm(n,25),c=e.rank,u=e.size,d=Xm(e.shape.toString(),14),p="";for(let h in i){let f=i[h];if(f!=null){let m=f.shape||e.shape,g=m.length;p+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function QK(t,n,e){let r={},o={};for(let l=0;l<n.length;l++)r[n[l].id]=!0;for(let l=0;l<t.length;l++){let c=t[l],u=c.inputs;for(let d in u){let p=u[d],h=!1;for(let f=0;f<n.length;f++)if(r[p.id]){c.outputs.forEach(m=>r[m.id]=!0),h=!0,o[c.id]=!0;break}if(h)break}}let i={};i[e.id]=!0;let s={};for(let l=t.length-1;l>=0;l--){let c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(let p in u)i[u[p].id]=!0,s[c.id]=!0;break}}let a=[];for(let l=0;l<t.length;l++){let c=t[l];if(o[c.id]&&s[c.id]){let u={};for(let p in c.inputs){let h=c.inputs[p];r[h.id]&&(u[p]=h)}let d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function JK(t,n,e,r){for(let o=n.length-1;o>=0;o--){let i=n[o],s=[];if(i.outputs.forEach(l=>{let c=t[l.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let a=i.gradient(s);for(let l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);let c=e(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);let u=i.inputs[l];if(!Ai(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{let d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}var eZ=20,pk=3,RO=7;function tZ(t,n,e,r){let o=Dc(n),i=cbe(t,n,e,o),s=n.length,a=eS(t,n,e,o,i),l=["Tensor"];return r&&(l.push(`  dtype: ${e}`),l.push(`  rank: ${s}`),l.push(`  shape: [${n}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function cbe(t,n,e,r){let o=Jt(n),i=r[r.length-1],s=new Array(i).fill(0),a=n.length,l=e==="complex64"?fk(t):t;if(a>1)for(let c=0;c<o/i;c++){let u=c*i;for(let d=0;d<i;d++)s[d]=Math.max(s[d],hk(l[u+d],0,e).length)}return s}function hk(t,n,e){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(RO))} + ${parseFloat(t[1].toFixed(RO))}j`:Cl(t)?r=`'${t}'`:e==="bool"?r=nZ(t):r=parseFloat(t.toFixed(RO)).toString(),Xm(r,n)}function nZ(t){return t===0?"false":"true"}function eS(t,n,e,r,o,i=!0){let s=e==="complex64"?2:1,a=n[0],l=n.length;if(l===0){if(e==="complex64"){let m=fk(t);return[hk(m[0],0,e)]}return e==="bool"?[nZ(t[0])]:[t[0].toString()]}if(l===1){if(a>eZ){let g=pk*s,v=Array.from(t.slice(0,g)),w=Array.from(t.slice((a-pk)*s,a*s));return e==="complex64"&&(v=fk(v),w=fk(w)),["["+v.map((y,k)=>hk(y,o[k],e)).join(", ")+", ..., "+w.map((y,k)=>hk(y,o[a-pk+k],e)).join(", ")+"]"]}return["["+(e==="complex64"?fk(t):Array.from(t)).map((g,v)=>hk(g,o[v],e)).join(", ")+"]"]}let c=n.slice(1),u=r.slice(1),d=r[0]*s,p=[];if(a>eZ){for(let m=0;m<pk;m++){let g=m*d,v=g+d;p.push(...eS(t.slice(g,v),c,e,u,o,!1))}p.push("...");for(let m=a-pk;m<a;m++){let g=m*d,v=g+d;p.push(...eS(t.slice(g,v),c,e,u,o,m===a-1))}}else for(let m=0;m<a;m++){let g=m*d,v=g+d;p.push(...eS(t.slice(g,v),c,e,u,o,m===a-1))}let h=l===2?",":"";p[0]="["+(a>0?p[0]+h:"");for(let m=1;m<p.length-1;m++)p[m]=" "+p[m]+h;let f=`,
`;for(let m=2;m<l;m++)f+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":f),p}function fk(t){let n=[];for(let e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var gn=class{constructor(n,e,r){if(this.dtype=e,this.shape=n.slice(),this.size=Jt(n),r!=null){let o=r.length;F(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||q3(e,this.size),this.strides=Dc(n)}set(n,...e){e.length===0&&(e=[0]),F(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);let r=this.locToIndex(e);this.values[r]=n}get(...n){n.length===0&&(n=[0]);let e=0;for(let o of n){if(o<0||o>=this.shape[e]){let i=`Requested out of range element at ${n}.   Buffer shape=${this.shape}`;throw new Error(i)}e++}let r=n[n.length-1];for(let o=0;o<n.length-1;++o)r+=this.strides[o]*n[o];return this.values[r]}locToIndex(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];let e=n[n.length-1];for(let r=0;r<n.length-1;++r)e+=this.strides[r]*n[r];return e}indexToLoc(n){if(this.rank===0)return[];if(this.rank===1)return[n];let e=new Array(this.shape.length);for(let r=0;r<e.length-1;++r)e[r]=Math.floor(n/this.strides[r]),n-=e[r]*this.strides[r];return e[e.length-1]=n,e}get rank(){return this.shape.length}toTensor(){return Nl().makeTensor(this.values,this.shape,this.dtype)}},Nl=null,yv=null,ube=null;function rZ(t){Nl=t}function oZ(t){yv=t}function iZ(t){ube=t}var Rt=class{constructor(n,e,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=Jt(n),this.strides=Dc(n),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return z(this,null,function*(){let n=yield this.data();return yv.buffer(this.shape,this.dtype,n)})}bufferSync(){return yv.buffer(this.shape,this.dtype,this.dataSync())}array(){return z(this,null,function*(){let n=yield this.data();return Zm(this.shape,n,this.dtype==="complex64")})}arraySync(){return Zm(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return z(this,null,function*(){this.throwIfDisposed();let n=Nl().read(this.dataId);if(this.dtype==="string"){let e=yield n;try{return e.map(r=>wv(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return n})}dataToGPU(n){return this.throwIfDisposed(),Nl().readToGPU(this.dataId,n)}dataSync(){this.throwIfDisposed();let n=Nl().readSync(this.dataId);if(this.dtype==="string")try{return n.map(e=>wv(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n}bytes(){return z(this,null,function*(){this.throwIfDisposed();let n=yield Nl().read(this.dataId);return this.dtype==="string"?n:new Uint8Array(n.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Nl().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(n=!1){return yv.print(this,n)}clone(){return this.throwIfDisposed(),yv.clone(this)}toString(n=!1){let e=this.dataSync();return tZ(e,this.shape,this.dtype,n)}cast(n){return this.throwIfDisposed(),yv.cast(this,n)}variable(n=!0,e,r){return this.throwIfDisposed(),Nl().makeVariable(this,n,e,r)}};Object.defineProperty(Rt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function U(){return lk("Tensor",()=>Rt)}U();var mu=class extends Rt{constructor(n,e,r,o){super(n.shape,n.dtype,n.dataId,o),this.trainable=e,this.name=r}assign(n){if(n.dtype!==this.dtype)throw new Error(`dtype of the new value (${n.dtype}) and previous value (${this.dtype}) must match`);if(!Ai(n.shape,this.shape))throw new Error(`shape of the new value (${n.shape}) and previous value (${this.shape}) must match`);Nl().disposeTensor(this),this.dataId=n.dataId,Nl().incRef(this,null)}dispose(){Nl().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(mu,Symbol.hasInstance,{value:t=>t instanceof Rt&&t.assign!=null&&t.assign instanceof Function});var ta={};Qt(ta,{assertTypesMatch:()=>FO,getTensorsInContainer:()=>mk,isTensorInList:()=>pbe,makeTypesMatch:()=>en});var OO=(function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t})(OO||{}),sZ=(function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t})(sZ||{}),aZ=(function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t})(aZ||{}),lZ=(function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t})(lZ||{}),cZ=(function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t})(cZ||{}),dbe={float32:lZ,int32:sZ,bool:aZ,complex64:cZ};function Lr(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error(`Can not upcast ${t} with ${n}`)}return dbe[t][n]}function uf(t){return Lr(t,"int32")}function tS(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function nS(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}function en(t,n){if(t.dtype===n.dtype)return[t,n];let e=Lr(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function FO(t,n){F(t.dtype===n.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${n.dtype}) input must match`)}function pbe(t,n){return n.some(e=>e.id===t.id)}function mk(t){let n=[];return uZ(t,n,new Set),n}function uZ(t,n,e){if(t==null)return;if(t instanceof Rt){n.push(t);return}if(!hbe(t))return;let r=t;for(let o in r){let i=r[o];e.has(i)||(e.add(i),uZ(i,n,e))}}function hbe(t){return Array.isArray(t)||typeof t=="object"}function BO(t){return t.kernelName!=null}var rS=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(n=>n.name)))}}}dispose(){for(let n in this.registeredVariables)this.registeredVariables[n].dispose()}},fbe=(()=>{class t{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new rS}ready(){return z(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let r=0;r<e.length;r++){let o=e[r];if(yield this.initializeBackend(o).success){yield this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:r}=this.initializeBackend(e);if(r)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,r,o=1){return e in this.registryFactory?(fu(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:r,priority:o},!0)}setBackend(e){return z(this,null,function*(){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(e);if(!(o?yield r:r))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new J3(this.backendInstance),!0})}setupRegisteredKernels(){uk(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){uk(e).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[e])})}initializeBackend(e){let r=this.registryFactory[e];if(r==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof Ec)&&typeof o.then=="function"){let i=++this.pendingBackendInitId,s=o.then(a=>i<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,fu(`Initialization of backend ${e} failed`),fu(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=o,{success:!0,asyncInit:!1}}catch(o){return fu(`Initialization of backend ${e} failed`),fu(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,r)=>this.registryFactory[r].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let r=0;r<e.length;r++){let o=e[r],{success:i,asyncInit:s}=this.initializeBackend(o);if(s||i)return{name:o,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,r){let o=this.state.tensorInfo.get(r),i=o.backend,s=this.readSync(r),a=i.refCount(r);i.disposeData(r,!0),o.backend=e,e.move(r,s,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,r){let o=null;if(r==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");r=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}let i;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(i),()=>(i=r(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,r,o){e();try{let i=o();return r(),i}catch(i){throw r(),i}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(e){let r=A.runKernel(Sl,{x:e}),o={x:e},i=a=>({x:()=>{let l="float32",c={x:a},u={dtype:l};return A.runKernel(Ml,c,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,o,[r],i,s,{}),r}runKernel(e,r,o){if(this.backendName==null&&this.backend,!(og(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,r,o){let i=this.backend.numDataIds(),s=0;o.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=i-r-s-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let r,o=[],i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c,u=BO(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(BO(e)){let{kernelName:m,inputs:g,attrs:v}=e;this.backendName==null&&this.backend;let w=og(m,this.backendName);F(w!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),l=()=>{let y=this.backend.numDataIds();c=w.kernelFunc({inputs:g,attrs:v,backend:this.backend});let k=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,y,k);let _=k.map(S=>S.rank!=null?S:this.makeTensorFromTensorInfo(S));if(i){let S=this.getTensorsForGradient(m,g,_);o=this.saveTensorsForBackwardMode(S)}return _}}else{let{forwardFunc:m}=e,g=v=>{i&&(o=v.map(w=>this.keep(this.clone(w))))};l=()=>{let v=this.backend.numDataIds();c=this.tidy(()=>m(this.backend,g));let w=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,v,w),w}}let{inputs:d,attrs:p}=e,h=BO(e)?null:e.backwardsFunc,f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=l():(f=this.profiler.profileKernel(u,d,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),r=f.outputs)}),i&&this.addTapeNode(u,d,r,h,o,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(m=>d[m]!=null?d[m].shape:null),outputShapes:r.map(m=>m.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(e){return e.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(e,r,o){let i=Z3(e);if(i!=null){let s=i.inputsToSave||[],a=i.outputsToSave||[],l;i.saveAllInputs?(F(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(r).map(u=>r[u])):l=s.map(u=>r[u]);let c=o.filter((u,d)=>a[d]);return l.concat(c)}return[]}makeTensor(e,r,o,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",i=i||this.backend;let s=e;o==="string"&&Cl(e[0])&&(s=e.map(c=>cf(c)));let a=i.write(s,r,o),l=new Rt(r,o,a,this.nextTensorId());if(this.trackTensor(l,i),o==="string"){let c=this.state.tensorInfo.get(a),u=kO(s);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(e,r,o,i){o=o||"float32";let s={dataId:e,shape:r,dtype:o};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,r){let{dataId:o,shape:i,dtype:s}=e,a=new Rt(i,s,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(e,r=!0,o,i){o=o||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));let s=new mu(e,r,o,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,r){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*nv(e.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:r||this.backend,dtype:e.dtype,shape:e.shape,bytes:o})),e instanceof mu||this.track(e)}incRef(e,r){this.trackTensor(e,r),this.backend.incRef(e.dataId)}removeDataId(e,r){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===r&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let r=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let o=e.size*nv(e.dtype);this.state.numBytes-=o}r.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,r.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let r=this.state.registeredVariables[e];this.disposeVariable(r)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}profile(e){return z(this,null,function*(){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=yield i.kernelTimeMs,i.extraInfo=yield i.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,r,o,i,s,a){let l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:r,outputs:o,saved:s},c=Z3(e);c!=null&&(i=c.gradFunc),i!=null&&(l.gradient=u=>(u=u.map((d,p)=>{if(d==null){let h=o[p],f=ov(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return d}),i(u.length>1?u:u[0],s,a))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(r.name=e),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(e){let r=mk(e),o=new Set(r.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!o.has(a.id)&&a.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,r,o,i=!1){if(F(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));F(s instanceof Rt,()=>"The result y returned by f() must be a tensor.");let a=QK(this.state.activeTape,r,s);if(!i&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let l={};l[s.id]=o??mbe(s.shape),JK(l,a,u=>this.tidy(u),gbe);let c=r.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let d of u.saved)d.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(e){return F(Ic(e),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{F(r.every(l=>l instanceof Rt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,i={};r.forEach((l,c)=>{i[c]=l});let s=(l,c)=>(o=e(...r,c),F(o.value instanceof Rt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),F(Ic(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(l,c)=>{let u=o.gradFunc(l,c),d=Array.isArray(u)?u:[u];F(d.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),F(d.every(h=>h instanceof Rt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((h,f)=>{p[f]=()=>h}),p};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,r){return this.state.tensorInfo.get(e).backend.readToGPU(e,r)}time(e){return z(this,null,function*(){let r=cg(),o=yield this.backend.time(e);return o.wallMs=cg()-r,o})}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new rS;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function mbe(t){let n=ak(Jt(t),"float32");return A.makeTensor(n,t,"float32")}function PO(){let t=bO();if(t._tfengine==null){let n=new iv(t);t._tfengine=new fbe(n)}return BK(t._tfengine.ENV),rZ(()=>t._tfengine),t._tfengine}var A=PO();function gbe(t,n){let e={a:t,b:n};return A.runKernel("Add",e)}var fp={};Qt(fp,{isBrowser:()=>$O,isMobile:()=>ybe,mockIsMobile:()=>wbe});function vbe(){return typeof navigator<"u"&&navigator!=null}var LO;function wbe(t){LO=t}function ybe(t){if(LO!==void 0)return LO;if(t||vbe()){if(t||(t=navigator),t.product==="ReactNative")return!0;let n=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!n){let e=t;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))}return!1}function $O(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var rs=Y();rs.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});rs.registerFlag("IS_BROWSER",()=>$O());rs.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");rs.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));rs.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));rs.registerFlag("PROD",()=>!1);rs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>rs.getBool("DEBUG"));rs.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);rs.registerFlag("IS_TEST",()=>!1);rs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>rs.getBool("DEBUG"));rs.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);rs.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);rs.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function ii(t,n){let e=t;if(Pr(t))return n==="string"?[]:[t.length];if(tS(t)){let o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(nS(t))return[t.buffer.size/(n==null?4:nv(n))];if(!Array.isArray(t))return[];let r=[];for(;Array.isArray(e)||Pr(e)&&n!=="string";)r.push(e.length),e=e[0];return Array.isArray(t)&&Y().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&pZ(t,r,[]),r}function pZ(t,n,e){if(e=e||[],!Array.isArray(t)&&!Pr(t)){F(n.length===0,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);return}F(n.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${t.length} elements`),F(t.length===n[0],()=>`Element arr[${e.join("][")}] should have ${n[0]} elements, but has ${t.length} elements`);let r=n.slice(1);for(let o=0;o<t.length;++o)pZ(t[o],r,e.concat(o))}function dZ(t,n,e,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==n||t==="numeric"&&n==="string")throw new Error(`Argument '${e}' passed to '${r}' must be ${t} tensor, but got ${n} tensor`)}}function b(t,n,e,r="numeric"){if(t instanceof U())return dZ(r,t.dtype,n,e),t;let o=Ph(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),dZ(r,o,n,e),t==null||!Pr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let l=t==null?"null":t.constructor.name;throw new Error(`Argument '${n}' passed to '${e}' must be a Tensor or TensorLike, but got '${l}'`)}let i=ii(t,o);!Pr(t)&&!Array.isArray(t)&&(t=[t]);let a=o!=="string"?vv(t,o):Dl(t,[],!0);return A.makeTensor(a,i,o)}function mp(t,n,e,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${n} passed to ${e} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,s)=>b(i,`${n}[${s}]`,e,r))}var oS="__op";function I(t){let n=Object.keys(t);if(n.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${n.length} keys.`);let e=n[0],r=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e=e+oS;let o=(...i)=>{A.startScope(e);try{let s=r(...i);return Ym(s)&&console.error("Cannot return a Promise inside of tidy."),A.endScope(s),s}catch(s){throw A.endScope(null),s}};return Object.defineProperty(o,"name",{value:e,configurable:!0}),o}function xbe(t,n){let e=b(t,"real","complex"),r=b(n,"imag","complex");Jn(e.shape,r.shape,`real and imag shapes, ${e.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:e,imag:r};return A.runKernel(n0,o)}var Oi=I({complex_:xbe});function Fi(t,n,e,r){if(r==null)r=Ph(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(nS(t)||tS(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return A.backend.createTensorFromGPUData(t,n||e,r)}if(!Pr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){ar(n);let o=Jt(n),i=Jt(e);F(o===i,()=>`Based on the provided shape, [${n}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<e.length;++s){let a=e[s],l=s===e.length-1?a!==Jt(n.slice(s)):!0;F(e[s]===n[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${n}). `)}}return!Pr(t)&&!Array.isArray(t)&&(t=[t]),n=n||e,t=r!=="string"?vv(t,r):Dl(t,[],!0),A.makeTensor(t,n,r)}function Hr(t,n,e){let r=ii(t,e);return Fi(t,n,r,e)}var gp={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var si=class t{static join(n){return new t(n).slice()}constructor(n){if(this.shards=[],this.previousShardIndex=0,n==null||(n instanceof Array||(n=[n]),n=n.map(r=>Pr(r)?r.buffer:r),n.length===0))return;this.bufferUniformSize=n[0].byteLength;let e=0;for(let r=0;r<n.length;r++){let o=n[r];r!==n.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=e+o.byteLength;this.shards.push({buffer:o,start:e,end:i}),e=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(n=0,e=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(n=isNaN(Number(n))?0:n,e=isNaN(Number(e))?0:e,n=Math.max(0,n),e=Math.min(this.byteLength,e),e<=n)return new ArrayBuffer(0);let r=this.findShardForByte(n);if(r===-1)throw new Error(`Could not find start shard for byte ${n}`);let o=e-n,i=new ArrayBuffer(o),s=new Uint8Array(i),a=0;for(let l=r;l<this.shards.length;l++){let c=this.shards[l],d=n+a-c.start,p=a,f=Math.min(e,c.end)-c.start,m=new Uint8Array(c.buffer,d,f-d);if(s.set(m,p),a+=m.length,e<c.end)break}return i}findShardForByte(n){if(this.shards.length===0||n<0||n>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(n/this.bufferUniformSize),this.previousShardIndex;function e(o){return n<o.start?-1:n>=o.end?1:0}if(e(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=kbe(this.shards,e);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function kbe(t,n){let e=0,r=t.length;for(;e<=r;){let o=Math.floor((r-e)/2)+e,i=n(t[o]);if(i===0)return o;i<0?r=o:e=o+1}return-1}function _be(){Y().set("PROD",!0)}function bbe(){Y().set("DEBUG",!0)}function Cbe(){Y().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function hZ(t){Y().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}iZ(hZ);function Mbe(){A.disposeVariables()}function na(){return A}function xv(){return A.memory()}function Sbe(t){return A.profile(t)}function te(t,n){return A.tidy(t,n)}function ht(t){mk(t).forEach(e=>e.dispose())}function Hn(t){return A.keep(t)}function Tbe(t){return A.time(t)}function fZ(t){return A.setBackend(t)}function Ebe(){return A.ready()}function VO(){return A.backendName}function Ibe(t){A.removeBackend(t)}function Dbe(t){return A.findBackend(t)}function Nbe(t){return A.findBackendFactory(t)}function gk(t,n,e=1){return A.registerBackend(t,n,e)}function vk(){return A.backend}function Abe(t,n){Y().setPlatform(t,n)}var df=4;function vZ(t,n){return z(this,null,function*(){let e=[],r=[],o=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<o.length;++s){let a=o[s],l=Array.isArray(t)?t[s].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);let c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(d=>z(null,null,function*(){let p=yield l.bytes(),h=p.reduce((g,v)=>g+v.length,0)+df*p.length,f=new Uint8Array(h),m=0;for(let g=0;g<p.length;g++){let v=p[g],w=new Uint8Array(new Uint32Array([v.length]).buffer);f.set(w,m),m+=df,f.set(v,m),m+=v.length}d(f)}));r.push(u)}else r.push(l.data());n!=null&&(c.group=n),e.push(c)}let i=yield Promise.all(r);return{data:Fbe(i),specs:e}})}function iS(t,n){let e=new si(t),r={},o=0;for(let i of n){let s=Rbe(i,(a,l)=>e.slice(o+a,o+l));r[i.name]=wZ(i,e.slice(o,o+s)),o+=s}return r}function Rbe(t,n){let e=Jt(t.shape),r;if("quantization"in t){let o=t.quantization;r=gp[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<e;i++)o+=df+new Uint32Array(n(o,o+df))[0];return o}else r=gp[t.dtype];return e*r}function Obe(t,n){return z(this,null,function*(){let e=Jt(t.shape),r;if("quantization"in t){let o=t.quantization;r=gp[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<e;i++)o+=df+new Uint32Array(yield n(o,o+df))[0];return o}else r=gp[t.dtype];return e*r})}function wZ(t,n){let e=t.name,r=t.dtype,o=t.shape,i=Jt(o),s,a=0;if("quantization"in t){let l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=gp[l.dtype],u=l.dtype==="uint8"?new Uint8Array(n):new Uint16Array(n);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){s=new Float32Array(u.length);for(let d=0;d<u.length;d++){let p=u[d];s[d]=p*l.scale+l.min}}else if(l.dtype==="float16")s=$be()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(u.length);for(let d=0;d<u.length;d++){let p=u[d];s[d]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${e}': ${r}`);a+=i*c}else if(r==="string"){let l=Jt(t.shape);s=[];for(let c=0;c<l;c++){let u=new Uint32Array(n.slice(a,a+df))[0];a+=df;let d=new Uint8Array(n.slice(a,a+u));s.push(d),a+=u}}else{let l=gp[r];if(r==="float32")s=new Float32Array(n);else if(r==="int32")s=new Int32Array(n);else if(r==="bool")s=new Uint8Array(n);else if(r==="complex64"){s=new Float32Array(n);let c=new Float32Array(s.length/2),u=new Float32Array(s.length/2);for(let f=0;f<c.length;f++)c[f]=s[f*2],u[f]=s[f*2+1];let d=Hr(c,o,"float32"),p=Hr(u,o,"float32"),h=Oi(d,p);return d.dispose(),p.dispose(),h}else throw new Error(`Unsupported dtype in weight '${e}': ${r}`);a+=i*l}return Hr(s,o,r)}function mZ(t,n,e){return z(this,null,function*(){let r=new Uint8Array(n);for(;r.byteLength<e;){let{done:o,value:i}=yield t.read();if(o&&i==null){let a=e-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer})}function sS(t,n){return z(this,null,function*(){let e={},r=t.getReader(),o=new ArrayBuffer(0);for(let i of n){let s=yield Obe(i,(c,u)=>z(null,null,function*(){return o=yield mZ(r,o,u),o.slice(c,u)}));o=yield mZ(r,o,s);let a=o.slice(0,s);o=o.slice(s);let l=wZ(i,a);if(e[i.name]=l,VO()==="webgpu"){let c=vk();"uploadToGPU"in c&&Jt(l.shape)>=Y().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return e})}function Fbe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let n=0,e=[];t.forEach(i=>{if(n+=i.byteLength,e.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let r=new Uint8Array(n),o=0;return e.forEach(i=>{r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var jO=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function gZ(t){return jO?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function yZ(t){if(jO)return Buffer.from(t).toString("base64");let n=new Uint8Array(t),e="";for(let r=0,o=n.length;r<o;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function xZ(t){if(jO){let r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let n=atob(t),e=new Uint8Array(n.length);for(let r=0;r<n.length;++r)e.set([n.charCodeAt(r)],r);return e.buffer}function kZ(t){return si.join(t)}function zO(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);let e=t.split("/");return e[e.length-1]}function aS(t,n){let e={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n};return t.signature!=null&&(e.signature=t.signature),t.userDefinedMetadata!=null&&(e.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(e.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(e.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(e.trainingConfig=t.trainingConfig),e}function HO(t,n,e){let r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!n)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!e)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=n,r.weightData=e}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}function kv(t,n){return z(this,null,function*(){let e,r;return t.weightsManifest!=null&&([e,r]=yield n(t.weightsManifest)),HO(t,e,r)})}function gu(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:gZ(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:gZ(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new si(t.weightData).byteLength}}function wk(t){let n=[];for(let e of t)n.push(...e.weights);return n}function Bbe(){let t=e=>{let r=e<<13,o=0;for(;(r&8388608)===0;)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},n=new Uint32Array(2048);n[0]=0;for(let e=1;e<1024;e++)n[e]=t(e);for(let e=1024;e<2048;e++)n[e]=939524096+(e-1024<<13);return n}function Pbe(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let n=1;n<31;n++)t[n]=n<<23;for(let n=33;n<63;n++)t[n]=2147483648+(n-32<<23);return t}function Lbe(){let t=new Uint32Array(64);for(let n=0;n<64;n++)t[n]=1024;return t[0]=t[32]=0,t}function $be(){let t=Bbe(),n=Pbe(),e=Lbe();return r=>{let o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let s=0;s<r.length;s++){let a=r[s],l=t[e[a>>10]+(a&1023)]+n[a>>10];i[s]=l}return new Float32Array(o)}}var Eo=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(n){t.getInstance().saveRouters.push(n)}static registerLoadRouter(n){t.getInstance().loadRouters.push(n)}static getSaveHandlers(n){return t.getHandlers(n,"save")}static getLoadHandlers(n,e){return t.getHandlers(n,"load",e)}static getHandlers(n,e,r){let o=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(s=>{let a=s(n,r);a!==null&&o.push(a)}),o}},_Z=t=>Eo.registerSaveRouter(t),bZ=t=>Eo.registerLoadRouter(t),CZ=t=>Eo.getSaveHandlers(t),MZ=(t,n)=>Eo.getLoadHandlers(t,n);var UO="tensorflowjs",GO=1,ug="models_store",pf="model_info_store";function SZ(){if(!Y().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function WO(t){let n=t.result;n.createObjectStore(ug,{keyPath:"modelPath"}),n.createObjectStore(pf,{keyPath:"modelPath"})}var dg=(()=>{class t{constructor(e){if(this.indexedDB=SZ(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}save(e){return z(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)})}load(){return z(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(e,r){return new Promise((o,i)=>{let s=this.indexedDB.open(UO,GO);s.onupgradeneeded=()=>WO(s),s.onsuccess=()=>{let a=s.result;if(r==null){let l=a.transaction(ug,"readonly"),u=l.objectStore(ug).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(u.result.modelArtifacts)},u.onerror=d=>(a.close(),i(u.error)),l.oncomplete=()=>a.close()}else{r.weightData=si.join(r.weightData);let l=gu(r),c=a.transaction(pf,"readwrite"),u=c.objectStore(pf),d;try{d=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(h){return i(h)}let p;d.onsuccess=()=>{p=a.transaction(ug,"readwrite");let h=p.objectStore(ug),f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:l})}catch(m){return i(m)}f.onsuccess=()=>o({modelArtifactsInfo:l}),f.onerror=m=>{u=c.objectStore(pf);let g=u.delete(this.modelPath);g.onsuccess=()=>(a.close(),i(f.error)),g.onerror=v=>(a.close(),i(f.error))}},d.onerror=h=>(a.close(),i(d.error)),c.oncomplete=()=>{p==null?a.close():p.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}return t.URL_SCHEME="indexeddb://",t})();var TZ=t=>Y().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(dg.URL_SCHEME)?Vbe(t.slice(dg.URL_SCHEME.length)):null;Eo.registerSaveRouter(TZ);Eo.registerLoadRouter(TZ);function Vbe(t){return new dg(t)}function jbe(t){return t.startsWith(dg.URL_SCHEME)?t.slice(dg.URL_SCHEME.length):t}var lS=class{constructor(){this.indexedDB=SZ()}listModels(){return z(this,null,function*(){return new Promise((n,e)=>{let r=this.indexedDB.open(UO,GO);r.onupgradeneeded=()=>WO(r),r.onsuccess=()=>{let o=r.result,i=o.transaction(pf,"readonly"),a=i.objectStore(pf).getAll();a.onsuccess=()=>{let l={};for(let c of a.result)l[c.modelPath]=c.modelArtifactsInfo;n(l)},a.onerror=l=>(o.close(),e(a.error)),i.oncomplete=()=>o.close()},r.onerror=o=>e(r.error)})})}removeModel(n){return z(this,null,function*(){return n=jbe(n),new Promise((e,r)=>{let o=this.indexedDB.open(UO,GO);o.onupgradeneeded=()=>WO(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(pf,"readwrite"),a=s.objectStore(pf),l=a.get(n),c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${n}' in IndexedDB.`));{let u=a.delete(n),d=()=>{c=i.transaction(ug,"readwrite");let h=c.objectStore(ug).delete(n);h.onsuccess=()=>e(l.result.modelArtifactsInfo),h.onerror=f=>r(l.error)};u.onsuccess=d,u.onerror=p=>(d(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),s.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},o.onerror=i=>r(o.error)})})}};var vp="/",_v="tensorflowjs_models",EZ="info",zbe="model_topology",Hbe="weight_specs",Ube="weight_data",Gbe="model_metadata";function IZ(t){return{info:[_v,t,EZ].join(vp),topology:[_v,t,zbe].join(vp),weightSpecs:[_v,t,Hbe].join(vp),weightData:[_v,t,Ube].join(vp),modelMetadata:[_v,t,Gbe].join(vp)}}function DZ(t){for(let n of Object.values(t))window.localStorage.removeItem(n)}function Wbe(t){let n=t.split(vp);if(n.length<3)throw new Error(`Invalid key format: ${t}`);return n.slice(1,n.length-1).join(vp)}function qbe(t){return t.startsWith(pg.URL_SCHEME)?t.slice(pg.URL_SCHEME.length):t}var pg=(()=>{class t{constructor(e){if(!Y().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=IZ(this.modelPath)}save(e){return z(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(e.modelTopology),o=JSON.stringify(e.weightSpecs),i=gu(e),s=si.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,yZ(s));let a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw DZ(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}})}load(){return z(this,null,function*(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=i;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let l=JSON.parse(s);r.format=l.format,r.generatedBy=l.generatedBy,r.convertedBy=l.convertedBy,l.signature!=null&&(r.signature=l.signature),l.userDefinedMetadata!=null&&(r.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(r.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(r.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(r.trainingConfig=l.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=xZ(a),r})}}return t.URL_SCHEME="localstorage://",t})();var NZ=t=>Y().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(pg.URL_SCHEME)?Kbe(t.slice(pg.URL_SCHEME.length)):null;Eo.registerSaveRouter(NZ);Eo.registerLoadRouter(NZ);function Kbe(t){return new pg(t)}var cS=class{constructor(){F(Y().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),F(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return z(this,null,function*(){let n={},e=_v+vp,r=vp+EZ;for(let o=0;o<this.LS.length;++o){let i=this.LS.key(o);if(i.startsWith(e)&&i.endsWith(r)){let s=Wbe(i);n[s]=JSON.parse(this.LS.getItem(i))}}return n})}removeModel(n){return z(this,null,function*(){n=qbe(n);let e=IZ(n);if(this.LS.getItem(e.info)==null)throw new Error(`Cannot find model at path '${n}'`);let r=JSON.parse(this.LS.getItem(e.info));return DZ(e),r})}};var bv="://",Al=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(n,e){F(n!=null,()=>"scheme must not be undefined or null."),n.endsWith(bv)&&(n=n.slice(0,n.indexOf(bv))),F(n.length>0,()=>"scheme must not be an empty string.");let r=t.getInstance();F(r.managers[n]==null,()=>`A model store manager is already registered for scheme '${n}'.`),r.managers[n]=e}static getManager(n){let e=t.getInstance().managers[n];if(e==null)throw new Error(`Cannot find model manager for scheme '${n}'`);return e}static getSchemes(){return Object.keys(t.getInstance().managers)}};function uS(t){if(t.indexOf(bv)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Al.getSchemes().join(",")}`);return{scheme:t.split(bv)[0],path:t.split(bv)[1]}}function AZ(t,n,e=!1){return z(this,null,function*(){F(t!==n,()=>`Old path and new path are the same: '${t}'`);let r=Eo.getLoadHandlers(t);F(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),F(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);let o=r[0],i=Eo.getSaveHandlers(n);F(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${n}.`),F(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${n}.`);let s=i[0],a=uS(t).scheme,l=uS(t).path,c=a===uS(t).scheme,u=yield o.load();e&&c&&(yield Al.getManager(a).removeModel(l));let d=yield s.save(u);return e&&!c&&(yield Al.getManager(a).removeModel(l)),d.modelArtifactsInfo})}function RZ(){return z(this,null,function*(){let t=Al.getSchemes(),n={};for(let e of t){let r=yield Al.getManager(e).listModels();for(let o in r){let i=e+bv+o;n[i]=r[o]}}return n})}function OZ(t){return z(this,null,function*(){let n=uS(t);return Al.getManager(n.scheme).removeModel(n.path)})}function FZ(t,n){return z(this,null,function*(){return AZ(t,n,!1)})}function BZ(t,n){return z(this,null,function*(){return AZ(t,n,!0)})}var qO=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(n,e){return fetch(n,e)}now(){return performance.now()}encode(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)}decode(n,e){return new TextDecoder(e).decode(n)}setTimeoutCustom(n,e){if(typeof window>"u"||!Y().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(n,e);return}this.functionRefs.push(n),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(n){return X3(n)}};if(Y().get("IS_BROWSER")){Y().setPlatform("browser",new qO);try{Al.registerManager(pg.URL_SCHEME,new cS)}catch{}try{Al.registerManager(dg.URL_SCHEME,new lS)}catch{}}var Xbe={importFetch:()=>LZ()},KO;var ZO=class{constructor(){this.util=$Z(),this.textEncoder=new this.util.TextEncoder}fetch(n,e){return Y().global.fetch!=null?Y().global.fetch(n,e):(KO==null&&(KO=Xbe.importFetch()),KO(n,e))}now(){let n=process.hrtime();return n[0]*1e3+n[1]/1e6}encode(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(n)}decode(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)}isTypedArray(n){return this.util.types.isFloat32Array(n)||this.util.types.isInt32Array(n)||this.util.types.isUint8Array(n)||this.util.types.isUint8ClampedArray(n)}};Y().get("IS_NODE")&&!Y().get("IS_BROWSER")&&Y().setPlatform("node",new ZO);function ot(t,n="float32",e){return n=n||"float32",ar(t),new gn(t,n,e)}function Ybe(t,n){let e=b(t,"x","cast");if(!xO(n))throw new Error(`Failed to cast to unknown dtype ${n}`);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:e},o={dtype:n};return A.runKernel(Ml,r,o)}var me=I({cast_:Ybe});function Qbe(t){let e={x:b(t,"x","clone","string_or_numeric")};return A.runKernel(Sl,e)}var mi=I({clone_:Qbe});function yk(t,n=!1){console.log(t.toString(n))}PO();var Jbe={buffer:ot,cast:me,clone:mi,print:yk};oZ(Jbe);function eCe(t,n){let e=b(t,"a","add"),r=b(n,"b","add");[e,r]=en(e,r);let o={a:e,b:r};return A.runKernel("Add",o)}var fe=I({add_:eCe});function tCe(t,n){let e=b(t,"a","floorDiv"),r=b(n,"b","floorDiv");[e,r]=en(e,r);let o={a:e,b:r};return A.runKernel(Gc,o)}var fg=I({floorDiv_:tCe});function nCe(t,n){let e=b(t,"a","div"),r=b(n,"b","div");if([e,r]=en(e,r),e.dtype==="int32"&&r.dtype==="int32")return fg(e,r);let o={a:e,b:r},i={};return A.runKernel(zc,o,i)}var Be=I({div_:nCe});function rCe(t,n){let e=b(t,"a","mul"),r=b(n,"b","mul");[e,r]=en(e,r);let o={a:e,b:r};return A.runKernel(Jc,o)}var L=I({mul_:rCe});function oCe(t){let n=b(t,"x","abs");if(n.dtype==="complex64"){let e={x:n};return A.runKernel(Rd,e)}else{let e={x:n};return A.runKernel("Abs",e)}}var Pn=I({abs_:oCe});function iCe(t){let e={x:b(t,"x","acos")};return A.runKernel(Nc,e)}var xk=I({acos_:iCe});function sCe(t){let e={x:b(t,"x","acosh")};return A.runKernel(Ac,e)}var kk=I({acosh_:sCe});function aCe(t){F(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),F(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let n=t.map((o,i)=>b(o,`tensors${i}`,"addN")),e=n[0];n.forEach(o=>{if(o.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(o=>{if(!Ai(o.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=n;return A.runKernel(Sd,r)}var XO=I({addN_:aCe});function lCe(t,n=null,e=!1){let o={x:b(t,"x","all","bool")},i={axis:n,keepDims:e};return A.runKernel("All",o,i)}var mg=I({all_:lCe});function cCe(t,n=null,e=!1){let o={x:b(t,"x","any","bool")},i={axis:n,keepDims:e};return A.runKernel("Any",o,i)}var hf=I({any_:cCe});function uCe(t,n=0){let r={x:b(t,"x","argMax")},o={axis:n};return A.runKernel(Td,r,o)}var Rl=I({argMax_:uCe});function dCe(t,n=0){let r={x:b(t,"x","argMin")},o={axis:n};return A.runKernel(Ed,r,o)}var _k=I({argMin_:dCe});function pCe(t){let e={x:b(t,"x","asin")};return A.runKernel(Oc,e)}var bk=I({asin_:pCe});function hCe(t){let e={x:b(t,"x","asinh")};return A.runKernel(Fc,e)}var Ck=I({asinh_:hCe});function fCe(t){let e={x:b(t,"x","atan")};return A.runKernel(Bc,e)}var Mk=I({atan_:fCe});function mCe(t,n){let e=b(t,"a","atan2"),r=b(n,"b","atan2");[e,r]=en(e,r);let o={a:e,b:r};return A.runKernel(Lc,o)}var Sk=I({atan2_:mCe});function gCe(t){let e={x:b(t,"x","atanh")};return A.runKernel(Pc,e)}var Tk=I({atanh_:gCe});function vCe(t,n,e,r,o="NHWC",i){let s=t[3],a=[...n,s],l=jZ(o);return gg(t,a,e,i,r,null,null,l)}function QO(t,n,e,r,o,i,s="channelsLast"){let[a,l]=Ek(n),c;if(s==="channelsLast")c=[a,l,t[3],t[3]];else if(s==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return gg(t,c,e,r,o,i,!1,s)}function wCe(t,n,e,r,o,i,s="NDHWC"){let[a,l,c]=YO(n),u,d;if(s==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(s==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return VZ(t,u,e,r,o,!1,d,i)}function gg(t,n,e,r,o,i,s=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);let[p,h,,f]=n,[m,g]=Ek(e),[v,w]=Ek(r),y=Mv(p,v),k=Mv(h,w),{padInfo:_,outHeight:S,outWidth:E}=kCe(o,c,u,m,g,y,k,i,a),N=s?f*d:f,B;return a==="channelsFirst"?B=[l,N,S,E]:a==="channelsLast"&&(B=[l,S,E,N]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:S,outWidth:E,outChannels:N,padInfo:_,strideHeight:m,strideWidth:g,filterHeight:p,filterWidth:h,effectiveFilterHeight:y,effectiveFilterWidth:k,dilationHeight:v,dilationWidth:w,inShape:t,outShape:B,filterShape:n}}function VZ(t,n,e,r,o,i=!1,s="channelsLast",a){let[l,c,u,d,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,d,p]=t;else if(s==="channelsFirst")[l,p,c,u,d]=t;else throw new Error(`Unknown dataFormat ${s}`);let[h,f,m,,g]=n,[v,w,y]=YO(e),[k,_,S]=YO(r),E=Mv(h,k),N=Mv(f,_),B=Mv(m,S),{padInfo:D,outDepth:P,outHeight:M,outWidth:W}=_Ce(o,c,u,d,v,w,y,E,N,B,a),ie=i?g*p:g,Z;return s==="channelsFirst"?Z=[l,ie,P,M,W]:s==="channelsLast"&&(Z=[l,P,M,W,ie]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:d,inChannels:p,outDepth:P,outHeight:M,outWidth:W,outChannels:ie,padInfo:D,strideDepth:v,strideHeight:w,strideWidth:y,filterDepth:h,filterHeight:f,filterWidth:m,effectiveFilterDepth:E,effectiveFilterHeight:N,effectiveFilterWidth:B,dilationDepth:k,dilationHeight:_,dilationWidth:S,inShape:t,outShape:Z,filterShape:n}}function yCe(t,n,e,r,o){r==null&&(r=JO(t,n,e));let i=t[0],s=t[1],a=Ik((i-n+2*r)/e+1,o),l=Ik((s-n+2*r)/e+1,o);return[a,l]}function xCe(t,n,e,r,o,i){o==null&&(o=JO(t,n[0],r[0]));let s=[0,0,0,e];for(let a=0;a<3;a++)t[a]+2*o>=n[a]&&(s[a]=Ik((t[a]-n[a]+2*o)/r[a]+1,i));return s}function JO(t,n,e,r=1){let o=Mv(n,r);return Math.floor((t[0]*(e-1)-e+o)/2)}function Ek(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function YO(t){return typeof t=="number"?[t,t,t]:t}function Mv(t,n){return n<=1?t:t+(t-1)*(n-1)}function kCe(t,n,e,r,o,i,s,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let h=yCe([n,e],i,r,t,a);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(n/r),d=Math.ceil(e/o);let p=Math.max(0,(u-1)*r+i-n),h=Math.max(0,(d-1)*o+s-e),f=Math.floor(p/2),m=p-f,g=Math.floor(h/2),v=h-g;c={top:f,bottom:m,left:g,right:v,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((n-i+1)/r),d=Math.ceil((e-s+1)/o);else if(typeof t=="object"){let p=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],f=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:h,left:f,right:m,type:p===0&&h===0&&f===0&&m===0?"VALID":"EXPLICIT"},u=Ik((n-i+p+h)/r+1,a),d=Ik((e-s+f+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function _Ce(t,n,e,r,o,i,s,a,l,c,u){let d,p,h,f;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let g=xCe([n,e,r,1],[a,l,c],1,[o,i,s],t,u);p=g[0],h=g[1],f=g[2]}else if(t==="same"){p=Math.ceil(n/o),h=Math.ceil(e/i),f=Math.ceil(r/s);let m=(p-1)*o+a-n,g=(h-1)*i+l-e,v=(f-1)*s+c-r,w=Math.floor(m/2),y=m-w,k=Math.floor(g/2),_=g-k,S=Math.floor(v/2),E=v-S;d={top:k,bottom:_,left:S,right:E,front:w,back:y,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:h,outWidth:f}}function Ik(t,n){if(!n)return Math.trunc(t);switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${n}`)}}function ra(t){let[n,e,r]=Ek(t);return n===1&&e===1&&r===1}function Wo(t,n){return ra(t)||ra(n)}function vu(t){return Ek(t).every(n=>n>0)}function jZ(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ln(t,n,e){if(e!=null){if(typeof n=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);if(typeof n=="number")F(Md(n),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);else if(typeof n=="object")n.forEach(r=>{r.forEach(o=>{F(Md(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${n}`)}}function bCe(t,n){let r={x:b(t,"x","reshape","string_or_numeric")},o={shape:n};return A.runKernel(np,r,o)}var $=I({reshape_:bCe});function CCe(t,n,e,r,o){let i=b(t,"x","avgPool","float32"),s=1;F(Wo(e,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=$(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Ln("avgPool",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o},d=A.runKernel(Id,c,u);return d=me(d,i.dtype),l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var wp=I({avgPool_:CCe});function MCe(t,n,e,r,o,i="NDHWC"){let s=b(t,"x","avgPool3d","float32"),a=s,l=!1;s.rank===4&&(l=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),F(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),F(typeof e=="number"&&e>0||Array.isArray(e)&&e[0]>0&&e[1]>0&&e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${e}'`),Ln("avgPool3d",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o,dataFormat:i},d=A.runKernel(Dd,c,u);return d=me(d,a.dtype),l?$(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var Dk=I({avgPool3d_:MCe});function SCe(t,n=0){F(t.length>=1,()=>"Pass at least one tensor to concat");let e=mp(t,"tensors","concat","string_or_numeric");if(e[0].dtype==="complex64"&&e.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),e.length===1)return mi(e[0]);let r=e,o={axis:n};return A.runKernel(Od,r,o)}var hn=I({concat_:SCe});function TCe(t,n,e=!1,r=!1){let o=b(t,"a","matMul"),i=b(n,"b","matMul");[o,i]=en(o,i);let s={a:o,b:i},a={transposeA:e,transposeB:r};return A.runKernel(Nd,s,a)}var Pt=I({matMul_:TCe});function ECe(t){let e={x:b(t,"x","sigmoid","float32")};return A.runKernel(lu,e)}var ai=I({sigmoid_:ECe});function ICe(t,n,e){let r=b(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},i={begin:n,size:e};return A.runKernel(ap,o,i)}var Tt=I({slice_:ICe});function DCe(t){let e={x:b(t,"x","tanh","float32")};return A.runKernel(pu,e)}var Fa=I({tanh_:DCe});function NCe(t,n,e,r,o,i){let s=b(t,"forgetBias","basicLSTMCell"),a=b(n,"lstmKernel","basicLSTMCell"),l=b(e,"lstmBias","basicLSTMCell"),c=b(r,"data","basicLSTMCell"),u=b(o,"c","basicLSTMCell"),d=b(i,"h","basicLSTMCell"),p=hn([c,d],1),h=Pt(p,a),f=fe(h,l),m=f.shape[0],g=f.shape[1]/4,v=[m,g],w=Tt(f,[0,0],v),y=Tt(f,[0,g],v),k=Tt(f,[0,g*2],v),_=Tt(f,[0,g*3],v),S=fe(L(ai(w),Fa(y)),L(u,ai(fe(s,k)))),E=L(Fa(S),ai(_));return[S,E]}var eF=I({basicLSTMCell_:NCe});function ACe(t,n,e){let r=b(t,"x","batchToSpaceND"),o=n.reduce((a,l)=>a*l);F(r.rank>=1+n.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${n.length}`),F(e.length===n.length,()=>`crops.length is ${e.length} but should be equal to blockShape.length  ${n.length}`),F(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${n.join(" * ")} === ${o}`);let i={x:r},s={blockShape:n,crops:e};return A.runKernel(Ad,i,s)}var yp=I({batchToSpaceND_:ACe});function zZ(t){let n;return t.rank===0||t.rank===1?n=$(t,[1,1,1,t.size]):t.rank===2?n=$(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?n=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]):n=t,n}function RCe(t,n,e,r,o,i){i==null&&(i=.001);let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;r!=null&&(u=b(r,"offset","batchNorm")),F(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),F(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),F(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:zZ(s),scale:c,offset:u,mean:a,variance:l},h={varianceEpsilon:i},f=A.runKernel(Hd,p,h);return $(f,s.shape)}var Ol=I({batchNorm_:RCe});function OCe(t,n,e,r,o,i){let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;return r!=null&&(u=b(r,"offset","batchNorm")),F(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),F(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),F(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Ol(s,a,l,u,c,i)}var Nk=I({batchNorm2d_:OCe});function FCe(t,n,e,r,o,i){let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;return r!=null&&(u=b(r,"offset","batchNorm")),F(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),F(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),F(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Ol(s,a,l,u,c,i)}var Ak=I({batchNorm3d_:FCe});function BCe(t,n,e,r,o,i){let s=b(t,"x","batchNorm"),a=b(n,"mean","batchNorm"),l=b(e,"variance","batchNorm"),c;o!=null&&(c=b(o,"scale","batchNorm"));let u;return r!=null&&(u=b(r,"offset","batchNorm")),F(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),F(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),F(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&F(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&F(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Ol(s,a,l,u,c,i)}var Rk=I({batchNorm4d_:BCe});function PCe(t,n,e){let r=b(t,"x","bincount"),o=b(n,"weights","bincount");F(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),F(e>=0,()=>`size must be non-negative, but got ${e}.`),F(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let i={x:r,weights:o},s={size:e};return A.runKernel(e0,i,s)}var Ok=I({bincount_:PCe});function LCe(t,n){let e=b(t,"x","bitwiseAnd"),r=b(n,"y","bitwiseAnd");if(!Ai(e.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${e.shape}, y: ${r.shape}`);if(e.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${e.dtype} and type of y: ${r.dtype}`);let o={a:e,b:r};return A.runKernel($h,o)}var tF=I({bitwiseAnd_:LCe});function $Ce(t,n){let e=b(t,"s0","broadcastArgs","int32"),r=b(n,"s1","broadcastArgs","int32");if(e.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${e.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:e,s1:r};return A.runKernel(t0,o)}var nF=I({broadcastArgs_:$Ce});function VCe(t,n){let e=b(t,"broadcastTo","x"),r=e.shape;if(ar(n),n.length<e.rank)throw new Error(`broadcastTo(): shape.length=${n.length} < input.rank=${e.rank}.`);if(n.length>e.rank){let c=e.shape.slice();for(;c.length<n.length;)c.unshift(1);e=$(e,c)}let o=e.shape,i=Array.from(n);for(let c=n.length-1;c>=0;c--)if(o[c]===n[c])i[c]=1;else if(e.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${n}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return mi(e);let a={x:e},l={reps:i};return A.runKernel(Tl,a,l)}var Fl=I({broadcastTo_:VCe});function jCe(t){let e={x:b(t,"x","ceil","float32")};return A.runKernel($c,e)}var Fk=I({ceil_:jCe});function ia(t,n,e){ar(t),e=e||Ph(n);let r={shape:t,value:n,dtype:e};return A.runKernel(m0,{},r)}function zCe(t,n,e){let r=b(t,"x","clipByValue");if(F(n<=e,()=>`Error in clip: min (${n}) must be less than or equal to max (${e}).`),n===e)return ia(r.shape,n,r.dtype);let o={x:r},i={clipValueMin:n,clipValueMax:e};return A.runKernel(Vc,o,i)}var ho=I({clipByValue_:zCe});function HCe(t){return hn(t,0)}var Bk=I({concat1d_:HCe});function UCe(t,n){return hn(t,n)}var Pk=I({concat2d_:UCe});function GCe(t,n){return hn(t,n)}var Lk=I({concat3d_:GCe});function WCe(t,n){return hn(t,n)}var $k=I({concat4d_:WCe});function qCe(t,n,e,r,o="NHWC",i=[1,1],s){let a=b(t,"x","conv2d","float32"),l=b(n,"filter","conv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Ln("conv2d",r,s);let d=o==="NHWC"?c.shape[3]:c.shape[1];F(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),F(Wo(e,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`),F(vu(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),F(vu(e),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:l},h={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},f=A.runKernel(Fd,p,h);return u?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Bi=I({conv2d_:qCe});function KCe(t,n,e,r,o="NWC",i=1,s){let a=b(t,"x","conv1d"),l=b(n,"filter","conv1d"),c=a,u=!1;a.rank===2&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1]])),F(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),F(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Ln("conv1d",r,s),F(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),F(Wo(e,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${e} and dilation '${i}'`),F(vu(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),F(vu(e),()=>"Error in conv1D: Stride should be larger than 0."),F(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let d=$(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=$(c,[c.shape[0],1,c.shape[1],c.shape[2]]),g=Bi(p,d,[1,e],r,"NHWC",[1,i],s);return u?$(g,[g.shape[2],g.shape[3]]):$(g,[g.shape[0],g.shape[2],g.shape[3]])}var vg=I({conv1d_:KCe});function ZCe(t,n,e,r,o,i="NHWC",s){F(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let a=t,l=n,c=!1;n.rank===3&&(c=!0,l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]),a=[1,t[0],t[1],t[2]]),F(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),F(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),F(e.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${e.rank}`);let u=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?l.shape[3]:l.shape[1];F(u===e.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${e.shape[2]}.`),F(d===e.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${e.shape[3]}.`),Ln("conv2dDerInput",o,s);let p={dy:l,filter:e},h={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},f=A.runKernel(Bd,p,h);return c?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Sv=I({conv2DBackpropInput_:ZCe});function XCe(t,n,e,r,o,i){let s=b(t,"x","conv2dTranspose"),a=b(n,"filter","conv2dTranspose");return Sv(e,s,a,r,o,"NHWC",i)}var wg=I({conv2dTranspose_:XCe});function YCe(t,n,e,r,o="NDHWC",i=[1,1,1]){let s=b(t,"x","conv3d"),a=b(n,"filter","conv3d"),l=s,c=!1;s.rank===4&&(c=!0,l=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),F(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),F(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),F(Wo(e,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`),F(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),F(vu(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),F(vu(e),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:a},d={strides:e,pad:r,dataFormat:o,dilations:i},p=A.runKernel(Pd,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Vk=I({conv3d_:YCe});function QCe(t,n,e,r,o){F(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let i=t,s=n,a=!1;n.rank===4&&(a=!0,s=$(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);let l=i[4],c=s.shape[4];F(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),F(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),F(e.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${e.rank}`),F(l===e.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${e.shape[3]}.`),F(c===e.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${e.shape[4]}.`);let u={dy:s,filter:e},d={pad:o,strides:r,inputShape:i},p=A.runKernel(i0,u,d);return a?$(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var dS=I({conv3DBackpropInput_:QCe});function JCe(t,n,e,r,o){let i=b(t,"x","conv3dTranspose"),s=b(n,"filter","conv3dTranspose");return dS(e,i,s,r,o)}var jk=I({conv3dTranspose_:JCe});function e4e(t){let e={x:b(t,"x","cos","float32")};return A.runKernel("Cos",e)}var xp=I({cos_:e4e});function t4e(t){let e={x:b(t,"x","cosh","float32")};return A.runKernel(jc,e)}var yg=I({cosh_:t4e});function n4e(t,n=0,e=!1,r=!1){let i={x:b(t,"x","cumprod")},s={axis:n,exclusive:e,reverse:r};return A.runKernel(s0,i,s)}var ff=I({cumprod_:n4e});function r4e(t,n=0,e=!1,r=!1){let i={x:b(t,"x","cumsum")},s={axis:n,exclusive:e,reverse:r};return A.runKernel(Ld,i,s)}var xg=I({cumsum_:r4e});function o4e(t,n,e,r=!1){let o=b(t,"x","denseBincount"),i=b(n,"weights","denseBincount");F(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),F(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),F(e>=0,()=>`size must be non-negative, but got ${e}.`),F(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:e,binaryOutput:r};return A.runKernel(l0,s,a)}var Tv=I({denseBincount_:o4e});function i4e(t,n,e="NHWC"){let r=b(t,"x","depthToSpace","float32"),o=e==="NHWC"?r.shape[1]:r.shape[2],i=e==="NHWC"?r.shape[2]:r.shape[3],s=e==="NHWC"?r.shape[3]:r.shape[1];F(n>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${n}`),F(o*n>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${n}  for depthToSpace with input shape
    ${r.shape}`),F(i*n>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${n} for depthToSpace with input shape
        ${r.shape}`),F(s%(n*n)===0,()=>`Dimension size must be evenly divisible by ${n*n} but is ${s} for depthToSpace with input shape ${r.shape}`);let a={x:r},l={blockSize:n,dataFormat:e};return A.runKernel(c0,a,l)}var zk=I({depthToSpace_:i4e});function s4e(t,n,e,r,o="NHWC",i=[1,1],s){let a=b(t,"x","depthwiseConv2d","float32"),l=b(n,"filter","depthwiseConv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),F(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let d=o==="NHWC"?c.shape[3]:c.shape[1];F(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Ln("depthwiseConv2d",r,s);let p={x:c,filter:l},h={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},f=A.runKernel($d,p,h);return u?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Bl=I({depthwiseConv2d_:s4e});function a4e(t){let e={x:b(t,"x","diag")};return A.runKernel(p0,e)}var rF=I({diag_:a4e});function l4e(t,n,e,r,o=[1,1],i="NHWC"){let s=b(t,"x","dilation2d"),a=b(n,"filter","dilation2d");F(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),F(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),F(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=s,c=!1;s.rank===3&&(l=$(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),F(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);let u={x:l,filter:a},d={strides:e,pad:r,dilations:o},p=A.runKernel(Vd,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var Hk=I({dilation2d_:l4e});var os={};Qt(os,{assertAndGetBroadcastShape:()=>Ot,getBroadcastDims:()=>HZ,getReductionAxes:()=>An});function HZ(t,n){let e=t.length,r=[];for(let o=0;o<e;o++){let i=e-1-o,s=t[i]||1;(n[n.length-1-o]||1)>1&&s===1&&r.unshift(i)}return r}function An(t,n){let e=[];for(let r=0;r<n.length;r++){let o=t[t.length-r-1],i=n.length-r-1,s=n[i];(o==null||o===1&&s>1)&&e.unshift(i)}return e}function Ot(t,n){let e=Math.max(t.length,n.length),r=new Array(e);for(let o=0;o<e;o++){let i=t[t.length-o-1];i==null&&(i=1);let s=n[n.length-o-1];if(s==null&&(s=1),i===1)r[e-o-1]=s;else if(s===1)r[e-o-1]=i;else if(i!==s){let a=`Operands could not be broadcast together with shapes ${t} and ${n}.`;throw Error(a)}else r[e-o-1]=i}return r}function c4e(t,n){let e=b(t,"a","equal","string_or_numeric"),r=b(n,"b","equal","string_or_numeric");[e,r]=en(e,r),Ot(e.shape,r.shape);let o={a:e,b:r};return A.runKernel(zh,o)}var Io=I({equal_:c4e});function u4e(t,n,e){let r=b(n,"a","where"),o=b(e,"b","where"),i=b(t,"condition","where","bool"),s=Ot(Ot(i.shape,r.shape),o.shape),a=Fl(i,s),l=Fl(r,s),c=Fl(o,s),u={condition:a,t:l,e:c};return A.runKernel(sp,u)}var En=I({where_:u4e});function d4e(t){let e={x:b(t,"x","zerosLike")};return A.runKernel(hp,e)}var at=I({zerosLike_:d4e});function p4e(t,n){let e=b(t,"a","div"),r=b(n,"b","div");[e,r]=en(e,r);let o=Be(e,r),i=at(o),s=Io(r,i);return En(s,i,o)}var Uk=I({divNoNan_:p4e});function h4e(t,n){let e=b(t,"t1","dot"),r=b(n,"t2","dot");F((e.rank===1||e.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${e.rank} and ${r.rank}.`);let o=e.rank===1?e.size:e.shape[1],i=r.rank===1?r.size:r.shape[0];if(F(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),e.rank===1&&r.rank===1){let s=$(e,[1,-1]),a=$(r,[-1,1]),l=Pt(s,a);return $(l,[])}else if(e.rank===1&&r.rank===2){let s=$(e,[1,-1]),a=$(r,[r.shape[0],r.shape[1]]),l=Pt(s,a);return $(l,[l.size])}else if(e.rank===2&&r.rank===1){let s=$(r,[-1,1]),a=Pt(e,s);return $(a,[a.size])}else{let s=$(r,[r.shape[0],r.shape[1]]);return Pt(e,s)}}var Gk=I({dot_:h4e});function f4e(t,...n){let e=n.map((o,i)=>b(o,`tensors${i}`,"einsum")),r={equation:t};return A.runKernel(h0,e,r)}var kp=I({einsum_:f4e});function m4e(t){let e={x:b(t,"x","elu","float32")};return A.runKernel("Elu",e)}var Pl=I({elu_:m4e});function g4e(t,n){let e=b(t,"x","ensureShape","string_or_numeric");if(!gO(e.shape,n))throw new Error(`EnsureShape: Shape of tensor ${e.shape} is not compatible with expected shape ${n}`);return t}var oF=I({ensureShape_:g4e});function v4e(t){let n=b(t,"x","erf");F(n.dtype==="int32"||n.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),n.dtype==="int32"&&(n=me(n,"float32"));let e={x:n};return A.runKernel("Erf",e)}var kg=I({erf_:v4e});function iF(t,n){for(let e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function UZ(t,n,e){let r=t.length+n.length,o=[],i=0,s=0;for(let a=0;a<r;a++)e.indexOf(a)===-1?o.push(t[i++]):o.push(n[s++]);return o}function sF(t,n){let e=[],r=t.length;for(let i=0;i<r;i++)n.indexOf(i)===-1&&e.push(t[i]);let o=n.map(i=>t[i]);return[e,o]}function Ba(t,n){let e=n.map(r=>1);return UZ(t,e,n)}function w4e(t,n,e){F(iF(n,e),()=>`${t} supports only inner-most axes for now. Got axes ${n} and rank-${e} input.`)}function aF(t,n){if(iF(t,n))return null;let e=[];for(let r=0;r<n;++r)t.indexOf(r)===-1&&e.push(r);return t.forEach(r=>e.push(r)),e}function Wk(t){return t.map((n,e)=>[e,n]).sort((n,e)=>n[1]-e[1]).map(n=>n[0])}function y4e(t,n){let e=[];for(let r=n-t;r<n;++r)e.push(r);return e}function x4e(t,n=null,e=!1){let o={x:b(t,"x","max")},i={reductionIndices:n,keepDims:e};return A.runKernel("Max",o,i)}var fo=I({max_:x4e});function k4e(t,n=null,e=!1){let o={x:b(t,"x","min")},i={axis:n,keepDims:e};return A.runKernel("Min",o,i)}var wu=I({min_:k4e});function _4e(t,n){let e=b(t,"base","pow"),r=b(n,"exp","pow");[e,r]=en(e,r);let o={a:e,b:r};return A.runKernel("Pow",o)}var qo=I({pow_:_4e});function $e(t,n){if((Pr(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&Pr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Fi(t,[],[],n)}function b4e(t){let e={x:b(t,"x","sqrt","float32")};return A.runKernel(uu,e)}var Mn=I({sqrt_:b4e});function C4e(t){let n=b(t,"x","square"),e={};return A.runKernel("Square",{x:n},e)}var jt=I({square_:C4e});function M4e(t,n=null,e=!1){let r=b(t,"x","sum");r.dtype==="bool"&&(r=me(r,"int32"));let o={x:r},i={axis:n,keepDims:e};return A.runKernel("Sum",o,i)}var Ve=I({sum_:M4e});function S4e(t,n="euclidean",e=null,r=!1){t=b(t,"x","norm");let o=GZ(t,n,e),i=o.shape;if(r){let s=ro(e,t.shape);i=Ba(o.shape,s)}return $(o,i)}function GZ(t,n,e=null){if(t.rank===0)return Pn(t);if(t.rank!==1&&e===null)return GZ($(t,[-1]),n,e);if(t.rank===1||typeof e=="number"||Array.isArray(e)&&e.length===1){if(n===1)return Ve(Pn(t),e);if(n===1/0)return fo(Pn(t),e);if(n===-1/0)return wu(Pn(t),e);if(n==="euclidean"||n===2)return Mn(Ve(qo(Pn(t),$e(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(e)&&e.length===2){if(n===1)return fo(Ve(Pn(t),e[0]),e[1]-1);if(n===1/0)return fo(Ve(Pn(t),e[1]),e[0]);if(n===-1/0)return wu(Ve(Pn(t),e[1]),e[0]);if(n==="fro"||n==="euclidean")return Mn(Ve(jt(t),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}var yu=I({norm_:S4e});function T4e(t,n=null,e=!1){return yu(t,"euclidean",n,e)}var qk=I({euclideanNorm_:T4e});function E4e(t){let e={x:b(t,"x","exp")};return A.runKernel("Exp",e)}var cr=I({exp_:E4e});function I4e(t,n=0){let e=b(t,"x","expandDims","string_or_numeric");F(n<=e.rank,()=>"Axis must be <= rank of the tensor");let r={input:e},o={dim:n};return A.runKernel(zd,r,o)}var ur=I({expandDims_:I4e});function D4e(t){let e={x:b(t,"x","expm1")};return A.runKernel(Hc,e)}var Kk=I({expm1_:D4e});function N4e(t,n){let e=b(t,"x","tile","string_or_numeric");F(e.rank===n.length,()=>`Error in transpose: rank of input ${e.rank} must match length of reps ${n}.`);let r={x:e},o={reps:n};return A.runKernel(Tl,r,o)}var Do=I({tile_:N4e});function A4e(t,n,e,r="float32"){n==null&&(n=t);let o=ot([t,n],r),i=t<=n?t:n;for(let a=0;a<i;++a)o.set(1,a,a);let s=$(o.toTensor(),[t,n]);if(e==null)return s;if(e.length===1)return Do(ur(s,0),[e[0],1,1]);if(e.length===2)return Do(ur(ur(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return Do(ur(ur(ur(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${e.length}D.`)}var mf=I({eye_:A4e});function R4e(t){let e={x:b(t,"x","floor","float32")};return A.runKernel(Uc,e)}var Ll=I({floor_:R4e});function O4e(t,n,e=0,r=0){let o=b(t,"x","gather"),i=b(n,"indices","gather","int32"),s={x:o,indices:i},a={axis:e,batchDims:r};return A.runKernel(Ud,s,a)}var $l=I({gather_:O4e});function F4e(t,n){let e=b(t,"a","greater","string_or_numeric"),r=b(n,"b","greater","string_or_numeric");[e,r]=en(e,r),Ot(e.shape,r.shape);let o={a:e,b:r};return A.runKernel(Uh,o)}var Zn=I({greater_:F4e});function B4e(t,n){let e=b(t,"a","greaterEqual","string_or_numeric"),r=b(n,"b","greaterEqual","string_or_numeric");[e,r]=en(e,r),Ot(e.shape,r.shape);let o={a:e,b:r};return A.runKernel(Wc,o)}var gi=I({greaterEqual_:B4e});function P4e(t){let e={input:b(t,"input","imag")};return A.runKernel(y0,e)}var _p=I({imag_:P4e});function L4e(t){let e={x:b(t,"x","isFinite")};return A.runKernel(qc,e)}var Zk=I({isFinite_:L4e});function $4e(t){let e={x:b(t,"x","isInf")};return A.runKernel(Kc,e)}var Xk=I({isInf_:$4e});function V4e(t){let e={x:b(t,"x","isNaN")};return A.runKernel(Zc,e)}var Yk=I({isNaN_:V4e});function j4e(t,n=.2){let r={x:b(t,"x","leakyRelu")},o={alpha:n};return A.runKernel(Gd,r,o)}var bp=I({leakyRelu_:j4e});function z4e(t,n){let e=b(t,"a","less","string_or_numeric"),r=b(n,"b","less","string_or_numeric");[e,r]=en(e,r),Ot(e.shape,r.shape);let o={a:e,b:r};return A.runKernel(Gh,o)}var xu=I({less_:z4e});function H4e(t,n){let e=b(t,"a","lessEqual","string_or_numeric"),r=b(n,"b","lessEqual","string_or_numeric");[e,r]=en(e,r),Ot(e.shape,r.shape);let o={a:e,b:r};return A.runKernel(Wh,o)}var is=I({lessEqual_:H4e});function cF(t,n,e){if(e<=0)throw new Error("The number of values should be positive.");let r={start:t,stop:n,num:e};return A.runKernel(x0,{},r)}function U4e(t,n=5,e=1,r=1,o=.5){let i=b(t,"x","localResponseNormalization");F(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),F(Md(n),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${n}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=$(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},c={depthRadius:n,bias:e,alpha:r,beta:o},u=A.runKernel("LRN",l,c);return a?$(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var Qk=I({localResponseNormalization_:U4e});function G4e(t){let e={x:b(t,"x","log","float32")};return A.runKernel("Log",e)}var mo=I({log_:G4e});function W4e(t){let e={x:b(t,"x","log1p")};return A.runKernel(Xc,e)}var Cp=I({log1p_:W4e});function WZ(t){return F(Ic(t),()=>"The f passed in grad(f) must be a function"),(n,e)=>{let r=b(n,"x","tf.grad","string_or_numeric"),o=e!=null?b(e,"dy","tf.grad"):null;return A.tidy(()=>{let{value:i,grads:s}=A.gradients(()=>t(r),[r],o);return o!=null&&Jn(i.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),pS(s),s[0]})}}function qZ(t){return F(Ic(t),()=>"The f passed in grads(f) must be a function"),(n,e)=>{F(Array.isArray(n),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=mp(n,"args","tf.grads","string_or_numeric"),o=e!=null?b(e,"dy","tf.grads"):null;return A.tidy(()=>{let{value:i,grads:s}=A.gradients(()=>t(...r),r,o);return o!=null&&Jn(i.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),pS(s),s})}}function KZ(t){return F(Ic(t),()=>"The f passed in valueAndGrad(f) must be a function"),(n,e)=>{F(n instanceof Rt,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),F(e==null||e instanceof Rt,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:o}=A.gradients(()=>t(n),[n],e);return pS(r),{grad:r[0],value:o}}}function ZZ(t){return F(Ic(t),()=>"The f passed in valueAndGrads(f) must be a function"),(n,e)=>{F(Array.isArray(n)&&n.every(o=>o instanceof Rt),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),F(e==null||e instanceof Rt,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=A.gradients(()=>t(...n),n,e);return e!=null&&Jn(r.value.shape,e.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),pS(r.grads),r}}function Jk(t,n){F(Ic(t),()=>"The f passed in variableGrads(f) must be a function"),F(n==null||Array.isArray(n)&&n.every(c=>c instanceof mu),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let e=n!=null;if(!e){n=[];for(let c in A.registeredVariables)n.push(A.registeredVariables[c])}let r=e?n.filter(c=>!c.trainable):null,o=n.length;n=n.filter(c=>c.trainable),F(n.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let i=!0,{value:s,grads:a}=A.gradients(t,n,null,i);F(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),F(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return n.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r?.forEach(c=>l[c.name]=null),{value:s,grads:l}}function vi(t){return A.customGrad(t)}function pS(t){if(t.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function q4e(t){let e={x:b(t,"x","neg")};return A.runKernel("Neg",e)}var Wt=I({neg_:q4e});function K4e(t){let e={x:b(t,"x","softplus")};return A.runKernel(cu,e)}var Pa=I({softplus_:K4e});function Z4e(t){let n=b(t,"x","logSigmoid");return vi(r=>({value:Wt(Pa(Wt(r))),gradFunc:s=>L(s,ai(Wt(r)))}))(n)}var e_=I({logSigmoid_:Z4e});function X4e(t,n){let e=b(t,"a","sub"),r=b(n,"b","sub");[e,r]=en(e,r);let o={a:e,b:r};return A.runKernel("Sub",o)}var Oe=I({sub_:X4e});function Y4e(t,n=-1){let e=b(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${n}`);return vi((o,i)=>{let a=fo(o,n,!0),l=Oe(o,a),c=Oe(me(l,"float32"),mo(Ve(cr(l),n,!0)));return i([c]),{value:c,gradFunc:(d,p)=>{let[h]=p,f=!0,m=cr(h);return Oe(d,L(Ve(d,n,f),m))}}})(e)}var _g=I({logSoftmax_:Y4e});function Q4e(t,n=null,e=!1){let r=b(t,"x","logSumExp"),o=ro(n,r.shape),i=fo(r,o,!0),s=Oe(r,i),a=cr(s),l=Ve(a,o),c=mo(l),u=fe($(i,c.shape),c);if(e){let d=Ba(u.shape,o);return $(u,d)}return u}var Mp=I({logSumExp_:Q4e});function J4e(t,n){let e=b(t,"a","logicalAnd","bool"),r=b(n,"b","logicalAnd","bool");Ot(e.shape,r.shape);let o={a:e,b:r};return A.runKernel(Kh,o)}var No=I({logicalAnd_:J4e});function eMe(t){let e={x:b(t,"x","logicalNot","bool")};return A.runKernel(Zh,e)}var Sp=I({logicalNot_:eMe});function tMe(t,n){let e=b(t,"a","logicalOr","bool"),r=b(n,"b","logicalOr","bool");Ot(e.shape,r.shape);let o={a:e,b:r};return A.runKernel(Xh,o)}var bg=I({logicalOr_:tMe});function nMe(t,n){let e=b(t,"a","logicalXor","bool"),r=b(n,"b","logicalXor","bool");return Ot(e.shape,r.shape),No(bg(t,n),Sp(No(t,n)))}var t_=I({logicalXor_:nMe});var hS=2147483648;function rMe(t,n,e="left"){let r=b(t,"sortedSequence","searchSorted"),o=b(n,"values","searchSorted"),i=r.shape[r.shape.length-1],s=o.shape[o.shape.length-1],a=$(r,[-1,i]),l=$(o,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Jt(l.shape)>=hS)throw new Error(`values tensor size must less than ${hS}`);if(a.shape[1]>=hS)throw new Error(`trailing dim_size must less than ${hS} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:l},u={side:e};return A.runKernel(z0,c,u)}var Ev=I({searchSorted_:rMe});function uF(t,n){return Ev(t,n,"left")}function oMe(t,n,e,r,o){let i=b(t,"x","maxPool"),s=1,a=i,l=!1;i.rank===3&&(l=!0,a=$(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),F(Wo(e,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`),Ln("maxPool",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o},d=A.runKernel(Wd,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Tp=I({maxPool_:oMe});function iMe(t,n=[1,1,1],e,r,o,i="NDHWC"){let s=b(t,"x","maxPool3d"),a=s,l=!1;s.rank===4&&(l=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),F(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Ln("maxPool3d",r,o);let c={x:a},u={filterSize:n,strides:e,pad:r,dimRoundingMode:o,dataFormat:i},d=A.runKernel(qd,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var n_=I({maxPool3d_:iMe});function sMe(t,n,e,r,o=!1){let s={x:b(t,"x","maxPoolWithArgmax")},a={filterSize:n,strides:e,pad:r,includeBatchInIndex:o},l=A.runKernel(S0,s,a);return{result:l[0],indexes:l[1]}}var dF=I({maxPoolWithArgmax_:sMe});function aMe(t,n){let e=b(t,"a","maximum"),r=b(n,"b","maximum");[e,r]=en(e,r),e.dtype==="bool"&&(e=me(e,"int32"),r=me(r,"int32")),Ot(e.shape,r.shape);let o={a:e,b:r};return A.runKernel(Yc,o)}var Pi=I({maximum_:aMe});function lMe(t,n=null,e=!1){let o={x:b(t,"x","mean")},i={axis:n,keepDims:e};return A.runKernel(Kd,o,i)}var Rn=I({mean_:lMe});function On(t,n="float32"){if(ar(t),n==="complex64"){let r=On(t,"float32"),o=On(t,"float32");return Oi(r,o)}let e=ov(Jt(t),n);return A.makeTensor(e,t,n)}function Tr(t,n="float32"){if(ar(t),n==="complex64"){let r=Tr(t,"float32"),o=On(t,"float32");return Oi(r,o)}let e=ak(Jt(t),n);return A.makeTensor(e,t,n)}function pF(t,n,{indexing:e="xy"}={}){if(e!=="xy"&&e!=="ij")throw new TypeError(`${e} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=b(t,"x","meshgrid",t instanceof Rt?t.dtype:"float32");if(n===void 0)return[r];let o=b(n,"y","meshgrid",n instanceof Rt?n.dtype:"float32"),i=Jt(r.shape),s=Jt(o.shape);return e==="xy"?(r=$(r,[1,-1]),o=$(o,[-1,1]),[Pt(Tr([s,1],r.dtype),r),Pt(o,Tr([1,i],o.dtype))]):(r=$(r,[-1,1]),o=$(o,[1,-1]),[Pt(r,Tr([1,s],r.dtype)),Pt(Tr([i,1],o.dtype),o)])}function cMe(t,n){let e=b(t,"a","minimum"),r=b(n,"b","minimum");[e,r]=en(e,r),e.dtype==="bool"&&(e=me(e,"int32"),r=me(r,"int32")),Ot(e.shape,r.shape);let o={a:e,b:r};return A.runKernel(Qc,o)}var As=I({minimum_:cMe});function uMe(t,n,e){F(e==="reflect"||e==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`);let r=b(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");F(n.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${n.length}.`);let o=e==="reflect"?1:0;for(let a=0;a<r.rank;a++)F(n[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),F(n[a][0]>=0&&n[a][0]<=r.shape[a]-o&&n[a][1]>=0&&n[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let i={paddings:n,mode:e},s={x:r};return A.runKernel(Zd,s,i)}var r_=I({mirrorPad_:uMe});function dMe(t,n){let e=b(t,"a","mod"),r=b(n,"b","mod");[e,r]=en(e,r);let o={a:e,b:r};return A.runKernel("Mod",o)}var o_=I({mod_:dMe});function pMe(t,n=null,e=!1){t=b(t,"x","moments");let r=ro(n,t.shape),o=Rn(t,r,e),i=o.shape;e||(i=Ba(o.shape,r));let s=jt(Oe(me(t,"float32"),$(o,i))),a=Rn(s,r,e);return{mean:o,variance:a}}var gf=I({moments_:pMe});function hMe(t,n,e,r){let o=b(n,"data","multiRNNCell"),i=mp(e,"c","multiRNNCell"),s=mp(r,"h","multiRNNCell"),a=o,l=[];for(let d=0;d<t.length;d++){let p=t[d](a,i[d],s[d]);l.push(p[0]),l.push(p[1]),a=p[1]}let c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}var hF=I({multiRNNCell_:hMe});function fMe(t,n,e,r=!1){let o=b(t,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);e=e||Math.random();let l={logits:s===1?$(o,[1,-1]):o},c={numSamples:n,seed:e,normalized:r},u=A.runKernel(E0,l,c);return s===1?$(u,[u.size]):u}var fF=I({multinomial_:fMe});function mMe(t,n){let e=b(t,"a","notEqual","string_or_numeric"),r=b(n,"b","notEqual","string_or_numeric");[e,r]=en(e,r),Ot(e.shape,r.shape);let o={a:e,b:r};return A.runKernel(Qh,o)}var La=I({notEqual_:mMe});function gMe(t,n,e=1,r=0,o="int32"){if(n<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${n}`);let s={indices:b(t,"indices","oneHot","int32")},a={dtype:o,depth:n,onValue:e,offValue:r};return A.runKernel(Yd,s,a)}var Vl=I({oneHot_:gMe});function vMe(t){let e={x:b(t,"x","onesLike")};return A.runKernel(Xd,e)}var oo=I({onesLike_:vMe});function wMe(t,n){let e=b(t,"v1","outerProduct"),r=b(n,"v2","outerProduct");F(e.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${e.rank} and ${r.rank}.`);let o=$(e,[-1,1]),i=$(r,[1,-1]);return Pt(o,i)}var mF=I({outerProduct_:wMe});function yMe(t,n,e=0){let r=b(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:n,constantValue:e},i={x:r};return A.runKernel(Jd,i,o)}var wi=I({pad_:yMe});function xMe(t,n,e=0){return F(n.length===2,()=>"Invalid number of paddings. Must be length of 2."),wi(t,[n],e)}var gF=I({pad1d_:xMe});function kMe(t,n,e=0){return F(n.length===2&&n[0].length===2&&n[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),wi(t,n,e)}var vF=I({pad2d_:kMe});function _Me(t,n,e=0){return F(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),wi(t,n,e)}var wF=I({pad3d_:_Me});function bMe(t,n,e=0){return F(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),wi(t,n,e)}var yF=I({pad4d_:bMe});function CMe(t,n,e){let r=b(t,"x","spaceToBatchND");F(r.rank>=1+n.length,()=>`input rank ${r.rank} should be > than [blockShape] ${n.length}`),F(e.length===n.length,()=>`paddings.shape[0] ${e.length} must be equal to [blockShape] ${n.length}`),F(r.shape.reduce((s,a,l)=>l>0&&l<=n.length?s&&(a+e[l-1][0]+e[l-1][1])%n[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${e.toString()} must be divisible by blockShapes ${n.toString()}`);let o={x:r},i={blockShape:n,paddings:e};return A.runKernel(lp,o,i)}var Ep=I({spaceToBatchND_:CMe});function MMe(t,n,e,r,o,i,s){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");let a=b(t,"x","maxPool"),l=a,c=!1;a.rank===3&&(c=!0,l=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),F(Wo(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);let u=QO(l.shape,n,i,o,r),d=[u.dilationHeight,u.dilationWidth],p;r==="same"?p=TMe([u.filterHeight,u.filterWidth],d):p=[[0,0],[0,0]];let h=d[0]===1&&d[1]===1,[f,m]=SMe([u.inHeight,u.inWidth],d,p),g=h?r:"valid",v=h?l:Ep(l,d,f),y=(e==="avg"?()=>wp(v,n,i,g,s):()=>Tp(v,n,i,g,s))(),k=h?y:yp(y,d,m);return c?$(k,[k.shape[1],k.shape[2],k.shape[3]]):k}function SMe(t,n,e){let r=e.map(u=>u[0]),o=e.map(u=>u[1]),i=t.concat(r,o),s=n.map((u,d)=>(u-i[d]%u)%u),a=o.map((u,d)=>u+s[d]),l=n.map((u,d)=>[r[d],a[d]]),c=n.map((u,d)=>[0,s[d]]);return[l,c]}function TMe(t,n){let r=t.map((s,a)=>s+(s-1)*(n[a]-1)).map(s=>s-1),o=r.map(s=>Math.floor(s/2)),i=r.map((s,a)=>s-o[a]);return r.map((s,a)=>[o[a],i[a]])}var i_=I({pool_:MMe});function EMe(t,n){let e=b(t,"x","prelu"),r=b(n,"alpha","prelu"),o={x:e,alpha:r};return A.runKernel(ep,o)}var Ip=I({prelu_:EMe});function IMe(t,n=null,e=!1){let r=b(t,"x","prod");r.dtype==="bool"&&(r=me(r,"int32"));let o={x:r},i={axis:n,keepDims:e};return A.runKernel(tp,o,i)}var s_=I({prod_:IMe});function DMe(t,n,e,r){let o=t.map((u,d)=>b(u,`tensors${d}`,"raggedGather","int32")),i=b(n,"paramsDenseValues","raggedGather"),s=b(e,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:i,indices:s},l={outputRaggedRank:r},c=A.runKernel(R0,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var xF=I({raggedGather_:DMe});function NMe(t,n,e){let r=b(t,"starts","raggedRange"),o=b(n,"limits","raggedRange",r.dtype),i=b(e,"deltas","raggedRange",r.dtype),s={starts:r,limits:o,deltas:i},a=A.runKernel(O0,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var kF=I({raggedRange_:NMe});function AMe(t,n,e,r,o){let i=b(t,"shape","raggedTensorToTensor","int32"),s=b(n,"values","raggedTensorToTensor"),a=b(e,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((d,p)=>b(d,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:o};return A.runKernel(F0,c,u)}var _F=I({raggedTensorToTensor_:AMe});function RMe(t,n,e){ar(t);let r=Jt(t),o=null;if(e==null||e==="float32")o=new Float32Array(r);else if(e==="int32")o=new Int32Array(r);else if(e==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${e}`);for(let i=0;i<r;i++)o[i]=n();return A.makeTensor(o,t,e)}var bF=I({rand_:RMe});var vS=O2(a_());var RF={};Qt(RF,{TEST_EPSILON_FLOAT16:()=>pX,createVideoElement:()=>qMe,encodeStrings:()=>hX,expectArrayBuffersEqual:()=>WMe,expectArraysClose:()=>jMe,expectArraysEqual:()=>HMe,expectNumbersClose:()=>UMe,expectPromiseToFail:()=>zMe,expectValuesInRange:()=>GMe,play:()=>KMe,testEpsilon:()=>NF});var VMe=.001,pX=.1;function jMe(t,n,e){return e==null&&(e=NF()),DF(t,n,(r,o)=>AF(r,o,e))}function NF(){return A.backend.floatPrecision()===32?VMe:pX}function DF(t,n,e){let r=!0;if((Pr(t)||Pr(n))&&(r=!1),Pr(t)&&Pr(n)&&(r=!0),r){let s=t.constructor.name,a=n.constructor.name;if(s!==a)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(n)){let s=ii(t),a=ii(n);if(!Ai(s,a))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${a}]`)}let o=Pr(t)?t:Dl(t),i=Pr(n)?n:Dl(n);if(o.length!==i.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${i.length}.
Actual:   ${o}.
Expected: ${i}.`);for(let s=0;s<i.length;++s){let a=o[s],l=i[s];if(!e(a,l))throw new Error(`Arrays differ: actual[${s}] = ${a}, expected[${s}] = ${l}.
Actual:   ${o}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function zMe(t,n){t().then(()=>n.fail(),()=>n()),typeof expect<"u"&&expect().nothing()}function HMe(t,n){let e=typeof n=="string"||typeof n=="number"||typeof n=="boolean"?[n]:n;return Cl(t)||Cl(t[0])||Cl(n)||Cl(n[0])?DF(t,e,(r,o)=>r==o):DF(t,n,(r,o)=>AF(r,o,0))}function UMe(t,n,e){if(e==null&&(e=NF()),!AF(t,n,e))throw new Error(`Numbers differ: actual === ${t}, expected === ${n}`);typeof expect<"u"&&expect().nothing()}function AF(t,n,e){return!isFinite(t)&&!isFinite(n)?!0:!(isNaN(t)||isNaN(n)||Math.abs(t-n)>e)}function GMe(t,n,e){for(let r=0;r<t.length;r++)if(t[r]<n||t[r]>e)throw new Error(`Value out of range:${t[r]} low: ${n}, high: ${e}`)}function WMe(t,n){let e=new Float32Array(t),r=new Float32Array(n);if(e.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${e.length}`);for(let o=0;o<r.length;o++)if(e[o]!==r[o])throw new Error(`Expected ArrayBuffer value at ${o} to be ${r[o]} but got ${e[o]} instead`)}function hX(t){for(let n=0;n<t.length;n++){let e=t[n];Array.isArray(e)?hX(e):t[n]=cf(e)}return t}function qMe(t){let n=document.createElement("video");return"playsInline"in n&&(n.playsInline=!0),n.muted=!0,n.loop=!0,n.style.position="fixed",n.style.left="0px",n.style.top="0px",n.preload="auto",n.appendChild(t),new Promise(e=>{n.addEventListener("loadeddata",r=>e(n)),n.load()})}function KMe(t){return z(this,null,function*(){yield t.play(),"requestVideoFrameCallback"in t&&(yield new Promise(n=>{t.requestVideoFrameCallback(n)}))})}var Mg=class{constructor(n,e,r,o,i){this.mean=n,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=i||Math.random();this.random=vS.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let n,e,r=!1;for(;!r;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*o*a,e=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(n))&&(r=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(n)}convertValue(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)}isValidTruncated(n){return n<=this.upper&&n>=this.lower}},mS=class{constructor(n,e,r,o){this.alpha=n,this.beta=1/e,this.dtype=r;let i=o||Math.random();this.randu=vS.alea(i.toString()),this.randn=new Mg(0,1,r,!1,this.randu()),n<1?this.d=n+2/3:this.d=n-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let n,e,r,o,i,s;for(;;){do o=this.randn.nextValue(),s=1+this.c*o;while(s<=0);if(s*=s*s,n=o*o,e=1-.331*n*n,r=.5*n+this.d*(1-s+Math.log(s)),i=this.randu(),i<e||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(n){return this.dtype==="float32"?n:Math.round(n)}},gS=class{constructor(n=0,e=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=n,this.range=e-n,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${n} - ${e} <= 1 and dtype is not float`);this.random=vS.alea(o)}convertValue(n){return this.canReturnFloat()?n:Math.round(n)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function ZMe(t,n,e=1,r="float32",o){if(ar(t),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let i=new mS(n,e,r,o),s=ot(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var OF=I({randomGamma_:ZMe});function XMe(t,n=0,e=1,r,o){if(ar(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let i=new Mg(n,e,r,!1,o),s=ot(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var vf=I({randomNormal_:XMe});function YMe(t,n,e){if(n!=null&&n==="bool")throw new Error(`Unsupported data type ${n}`);return vf(t,0,1,n,e)}var FF=I({randomStandardNormal_:YMe});function QMe(t,n=0,e=1,r="float32",o){ar(t);let i=ot(t,r),s=new gS(n,e,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var ss=I({randomUniform_:QMe});function JMe(t,n,e,r){return ss(t,n,e,"int32",r)}var BF=I({randomUniformInt_:JMe});function jl(t,n,e=1,r="float32"){if(e===0)throw new Error("Cannot have a step of zero");let o={start:t,stop:n,step:e,dtype:r};return A.runKernel(B0,{},o)}function e3e(t){let e={input:b(t,"input","real")};return A.runKernel(P0,e)}var ku=I({real_:e3e});function t3e(t){let e={x:b(t,"x","reciprocal")};return A.runKernel(eu,e)}var l_=I({reciprocal_:t3e});function n3e(t){let e={x:b(t,"x","relu")};return A.runKernel(tu,e)}var Ao=I({relu_:n3e});function r3e(t){let e={x:b(t,"x","relu6")};return A.runKernel(nu,e)}var Sg=I({relu6_:r3e});function o3e(t,n){let r={x:b(t,"x","reverse")},o={dims:n};return A.runKernel(ip,r,o)}var Ur=I({reverse_:o3e});function i3e(t){let n=b(t,"x","reverse");return F(n.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${n.rank}.`),Ur(n,0)}var PF=I({reverse1d_:i3e});function s3e(t,n){let e=b(t,"x","reverse");return F(e.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${e.rank}.`),Ur(e,n)}var LF=I({reverse2d_:s3e});function a3e(t,n){let e=b(t,"x","reverse");return F(e.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${e.rank}.`),Ur(e,n)}var $F=I({reverse3d_:a3e});function l3e(t,n){let e=b(t,"x","reverse");return F(e.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${e.rank}.`),Ur(e,n)}var VF=I({reverse4d_:l3e});function c3e(t){let e={x:b(t,"x","round")};return A.runKernel(ru,e)}var Tg=I({round_:c3e});function u3e(t){let e={x:b(t,"x","rsqrt","float32")};return A.runKernel(ou,e)}var Eg=I({rsqrt_:u3e});function d3e(t){let e={x:b(t,"x","selu")};return A.runKernel(iu,e)}var Ig=I({selu_:d3e});function p3e(t,n,e,r,o,i=[1,1],s="NHWC"){let a=b(t,"x","separableConv2d"),l=b(n,"depthwiseFilter","separableConv2d"),c=b(e,"pointwiseFilter","separableConv2d"),u=a,d=!1;if(a.rank===3&&(d=!0,u=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");F(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),F(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),F(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),F(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),F(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=l.shape[2],h=l.shape[3];F(c.shape[2]===p*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${c.shape[2]}.`);let f=Bl(u,l,r,o,s,i),g=Bi(f,c,1,"valid",s);return d?$(g,[g.shape[1],g.shape[2],g.shape[3]]):g}var Dg=I({separableConv2d_:p3e});function h3e(t,n){return z(this,null,function*(){let e=b(t,"x","setdiff1d"),r=b(n,"y","setdiff1d");F(e.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${e.dtype}) and y (${r.dtype}).`),F(e.rank===1,()=>`x should be 1D tensor, but got x (${e.shape}).`),F(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=yield e.data(),i=yield r.data(),s=new Set(i),a=0;for(let u=0;u<o.length;u++)s.has(o[u])||a++;let l=new gn([a],e.dtype),c=new gn([a],"int32");for(let u=0,d=0;u<o.length;u++)s.has(o[u])||(l.values[d]=o[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]})}var jF=h3e;function f3e(t){let e={x:b(t,"x","sign")};return A.runKernel(au,e)}var c_=I({sign_:f3e});function m3e(t){let e={x:b(t,"x","sin","float32")};return A.runKernel("Sin",e)}var Ng=I({sin_:m3e});function g3e(t){let e={x:b(t,"x","sinh")};return A.runKernel(su,e)}var Ag=I({sinh_:g3e});function v3e(t,n,e){let r=b(t,"x","slice1d");return F(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Tt(r,[n],[e])}var Rg=I({slice1d_:v3e});function w3e(t,n,e){let r=b(t,"x","slice2d");return F(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Tt(r,n,e)}var Iv=I({slice2d_:w3e});function y3e(t,n,e){let r=b(t,"x","slice3d");return F(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Tt(r,n,e)}var Og=I({slice3d_:y3e});function x3e(t,n,e){let r=b(t,"x","slice4d");return F(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Tt(r,n,e)}var wf=I({slice4d_:x3e});function k3e(t,n=-1){let e=b(t,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and dim was ${n}`);let r={logits:e},o={dim:n};return A.runKernel(up,r,o)}var Dp=I({softmax_:k3e});function _3e(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let n={input:t};return A.runKernel("FFT",n)}var Np=I({fft_:_3e});function b3e(t){F(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let n={input:t};return A.runKernel(w0,n)}var _u=I({ifft_:b3e});function C3e(t){let n=t.shape[t.shape.length-1],e=t.size/n,r;if(n<=2){let o=$(t,[e,n]);r=_u(o)}else{let o=[e,2*(n-1)],i=$(ku(t),[e,n]),s=$(_p(t),[e,n]),a=Ur(Tt(i,[0,1],[e,n-2]),1),l=L(Ur(Tt(s,[0,1],[e,n-2]),1),$e(-1)),c=hn([i,a],1),u=hn([s,l],1),d=$(Oi(c,u),[o[0],o[1]]);r=_u(d)}if(r=ku(r),t.rank===3&&t.shape[0]!==0){let o=r,i=t.shape[0];r=$(r,[i,r.shape[0]/i,r.shape[1]]),o.dispose()}return r}var Fg=I({irfft_:C3e});function M3e(t,n,e=0){let o={x:b(t,"x","split")},i={numOrSizeSplits:n,axis:e};return A.runKernel(cp,o,i)}var Gr=I({split_:M3e});function S3e(t,n){F(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let e=t.shape[t.shape.length-1],r=t.size/e,o;if(n!=null&&n<e){let f=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=n,o=Tt(t,f,m),e=n}else if(n!=null&&n>e){let f=t.shape.map(m=>m);f[t.shape.length-1]=n-e,o=hn([t,On(f)],t.shape.length-1),e=n}else o=t;let i=at(o),s=$(Oi(o,i),[r,e]),a=Np(s),l=Math.floor(e/2)+1,c=ku(a),u=_p(a),d=Gr(c,[l,e-l],c.shape.length-1),p=Gr(u,[l,e-l],u.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,$(Oi(d[0],p[0]),h)}var Ap=I({rfft_:S3e});function T3e(t,n){let e=b(t,"a","squaredDifference"),r=b(n,"b","squaredDifference");[e,r]=en(e,r),Ot(e.shape,r.shape);let o={a:e,b:r},i={};return A.runKernel(du,o,i)}var Bg=I({squaredDifference_:T3e});function E3e(t,n){let e=b(t,"x","squeeze","string_or_numeric");return $(e,vO(e.shape,n).newShape)}var as=I({squeeze_:E3e});function I3e(t,n=0){let e=mp(t,"tensors","stack","string_or_numeric");F(e.length>=1,()=>"Pass at least one tensor to tf.stack"),e.length>0&&F(n<=e[0].rank,()=>"Axis must be <= rank of the tensor");let r=e,o={axis:n};return A.runKernel(Qd,r,o)}var Xn=I({stack_:I3e});function D3e(t,n=0){let r={x:b(t,"x","step")},o={alpha:n};return A.runKernel(hu,r,o)}var sa=I({step_:D3e});function N3e(t,n,e,r,o=0,i=0,s=0,a=0,l=0){let u={x:b(t,"x","stridedSlice","string_or_numeric")},d={begin:n,end:e,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return A.runKernel(X0,u,d)}var u_=I({stridedSlice_:N3e});function A3e(t){let e={x:b(t,"x","tan","float32")};return A.runKernel("Tan",e)}var d_=I({tan_:A3e});function Yn(t,n){ea(t);let e=ii(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Fi(t,null,e,n)}function $a(t,n,e){if(ea(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=ii(t,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Fi(t,n,r,e)}function p_(t,n,e){if(ea(t),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=ii(t,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Fi(t,n,r,e)}function zF(t,n,e){if(ea(t),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=ii(t,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Fi(t,n,r,e)}function HF(t,n,e){if(ea(t),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=ii(t,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Fi(t,n,r,e)}function UF(t,n,e){if(ea(t),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=ii(t,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return n=n||r,Fi(t,n,r,e)}var h_={};Qt(h_,{calculateShapes:()=>fX,validateInput:()=>Dv,validateUpdateShape:()=>GF});function GF(t,n,e){let r=n.rank>1?n.shape[n.rank-1]:1,o=n.rank>1?n.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${e.shape}, indices.shape: ${n.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(e.rank<o)throw new Error(i+` update.rank < ${o}. `);if(t.length<r+(e.rank-o))throw new Error(i+` Output shape length < ${r+(e.rank-o)}`);if(e.rank!==o+t.length-r)throw new Error(i+` update.rank != ${o+t.length-r}`);for(let s=0;s<o;++s)if(e.shape[s]!==n.shape[s])throw new Error(i+` updates.shape[${s}] (${e.shape[s]}) != indices.shape[${s}] (${n.shape[s]}).`);for(let s=0;s<e.rank-o;++s)if(e.shape[s+o]!==t[s+r])throw new Error(i+` updates.shape[${s+o}] (${e.shape[s+o]}) != shape[${s+o}] (${t[s+o]})`)}function Dv(t,n,e){if(n.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${n.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(n.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${n.dtype}`);if(e.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${e}`);if(e.length===0){if(n.size===0)throw new Error(`Indices specified for empty output. indices shape: ${n.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}GF(e,n,t)}function fX(t,n,e){let r=n.shape.length,o=r>1?n.shape[r-1]:1,i=e.length,s=1;for(let d=o;d<i;++d)s*=e[d];let a=o<1?1:o,l=Jt(n.shape)/a,c=[...Dc(e.slice(0,o)),1],u=Jt(e);return{sliceRank:o,numUpdates:l,sliceSize:s,strides:c,outputSize:u}}function R3e(t,n,e){let r=b(t,"tensor","tensorScatterupdate"),o=b(n,"indices","tensorScatterupdate","int32"),i=b(e,"updates","tensorScatterupdate");if(Dv(i,o,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);let s={tensor:r,indices:o,updates:i},a={};return A.runKernel(j0,s,a)}var WF=I({tensorScatterUpdate_:R3e});function O3e(t,n=1,e=!0){let r=b(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(n<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${n}`);if(n>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${n}`);let i={x:r},s={k:n,sorted:e},[a,l]=A.runKernel(eg,i,s);return{values:a,indices:l}}var f_=I({topk_:O3e});function F3e(t,n=0,e=1,r,o){if(ar(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new Mg(n,e,r,!0,o),s=ot(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var Pg=I({truncatedNormal_:F3e});function B3e(t,n=0){let e=b(t,"x","unique","string_or_numeric");F(e.rank>0,()=>"The input tensor must be at least 1D");let r={x:e},o={axis:n},[i,s]=A.runKernel(ng,r,o);return{values:i,indices:s}}var m_=I({unique_:B3e});function P3e(t,n,e){let r=b(t,"x","unsortedSegmentSum"),o=b(n,"segmentIds","unsortedSegmentSum","int32");F(Md(e),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:o},s={numSegments:e};return A.runKernel(pp,i,s)}var Lg=I({unsortedSegmentSum_:P3e});function L3e(t,n=0){let e=b(t,"x","unstack","string_or_numeric");F(n>=-e.shape.length&&n<e.shape.length,()=>`Axis = ${n} is not in [-${e.shape.length}, ${e.shape.length})`);let r={value:e},o={axis:n};return A.runKernel(dp,r,o)}var Wr=I({unstack_:L3e});function qF(t,n){return Ev(t,n,"right")}function g_(t,n=!0,e,r){return A.makeVariable(t,n,e,r)}function wS(t,n){let e=[];for(let i=0;i<n.length;i++)n[i]&&e.push(i);let r=ot(t,"int32"),o=ot([e.length,t.length],"int32");for(let i=0;i<e.length;i++){let s=r.indexToLoc(e[i]),a=i*t.length;o.values.set(s,a)}return o.toTensor()}function $3e(t){return z(this,null,function*(){let n=b(t,"condition","whereAsync","bool"),e=yield n.data(),r=wS(n.shape,e);return t!==n&&n.dispose(),r})}var v_=$3e;function V3e(t,n,e){return z(this,null,function*(){let r=b(t,"tensor","boolMask"),o=b(n,"mask","boolMask","bool"),i=e??0,s=o.rank,a=r.shape;F(s>0,()=>"mask cannot be scalar"),Jn(a.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+s;m++)l*=a[m];let c=a.slice(0,i).concat([l],a.slice(i+s)),u=$(r,c),d=$(o,[-1]),p=yield v_(d),h=as(p,[1]),f=$l(u,h,i);return t!==r&&r.dispose(),n!==o&&o.dispose(),h.dispose(),u.dispose(),d.dispose(),p.dispose(),f})}var mX=V3e;function j3e(t,n,e){let r=b(t,"x","transpose");if(n==null&&(n=r.shape.map((s,a)=>a).reverse()),F(r.rank===n.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${n}.`),n.forEach(s=>{F(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${n}`)}),r.rank<=1)return r.clone();let o={x:r},i={perm:n};return r.dtype==="complex64"?te(()=>{let s=ku(r),a=_p(r);return s=A.runKernel(El,{x:s},i),a=A.runKernel(El,{x:a},i),e&&(a=Wt(a)),Oi(s,a)}):A.runKernel(El,o,i)}var Lt=I({transpose_:j3e});function z3e(t,n,e,r,o=!0){let i=b(t,"v","movingAverage"),s=b(n,"x","movingAverage"),a=b(e,"decay","movingAverage");FO(i,s),F(Ai(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=$e(1),c=Oe(l,a),u=L(Oe(s,i),c);if(o){F(r!=null,()=>"When using zeroDebias: true, step is required.");let d=b(r,"step","movingAverage");u=Be(u,Oe(l,qo(a,d)))}return fe(i,u)}var gX=I({movingAverage_:z3e});function H3e(t,n,e){ar(e);let r=b(t,"indices","scatterND","int32"),o=b(n,"updates","scatterND");Dv(o,r,e);let i={indices:r,updates:o},s={shape:e};return A.runKernel(V0,i,s)}var vX=I({scatterND_:H3e});function wX(t,n,e,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let o=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(e.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${e.length}, should be: ${i}.`);let s=n.size;if(!(n.rank===0||n.rank===1&&s===o))throw new Error(`sparseValues has incorrect shape ${n.shape}, should be [] or [${o}]`);if(n.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function G3e(t,n,e,r=0){ar(e);let o=b(t,"sparseIndices","sparseToDense","int32"),i=b(n,"sparseValues","sparseToDense","string_or_numeric"),s=b(r,"defaultValue","sparseToDense",i.dtype);wX(o,i,e,s);let a={sparseIndices:o,sparseValues:i,defaultValue:s},l={outputShape:e};return A.runKernel(K0,a,l)}var yX=I({sparseToDense_:G3e});function W3e(t,n){let e=b(n,"indices","gatherND","int32"),o={params:b(t,"x","gatherND","string_or_numeric"),indices:e};return A.runKernel(v0,o)}var xX=I({gatherND_:W3e});function kX(t,n){if(n==null)return t.shape.slice();if(Ai(t.shape,n))return n;if(t.shape.length===n.length){let e=[];for(let r=0;r<t.shape.length;r++)n[r]==null&&t.shape[r]!=null?e.push(t.shape[r]):e.push(n[r]);return e}return n}function q3e(t,n,e,r){let o=b(t,"x","dropout");if(F(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),F(n>=0&&n<1,()=>`rate must be a float in the range [0, 1), but got ${n}.`),n===0)return t instanceof Rt?o.clone():o;let i=kX(o,e),s=1-n,a=Be(Ll(fe(ss(i,0,1,"float32",r),s)),s);return L(o,a)}var yS=I({dropout_:q3e});function xS(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function Nv(t,n,e){let r=1-t%2,o=new Float32Array(t);for(let i=0;i<t;++i){let s=2*Math.PI*i/(t+r-1);o[i]=n-e*Math.cos(s)}return Yn(o,"float32")}function K3e(t,n,e=1){return z(this,null,function*(){let r=b(t,"predictions","inTopK"),o=b(n,"targets","inTopK");F(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),F(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),Jn(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];F(e>0&&e<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${e}`);let s=yield r.data(),a=yield o.data(),[l,c]=[s.length/i,i],u=wO("bool",l);for(let d=0;d<l;d++){let p=d*c,h=s.subarray(p,p+c),f=[];for(let m=0;m<h.length;m++)f.push({value:h[m],index:m});f.sort((m,g)=>g.value-m.value),u[d]=0;for(let m=0;m<e;m++)if(f[m].index===a[d]){u[d]=1;break}}return t!==r&&r.dispose(),n!==o&&o.dispose(),Hr(u,o.shape,"bool")})}var _X=K3e;var Rp={};Qt(Rp,{conv2d:()=>bX,depthwiseConv2d:()=>CX,matMul:()=>MX});function Z3e(t,n,e,r,o,i="NHWC",s){let a=t;t.rank===3&&(a=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;l.rank===3&&(l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]])),F(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),F(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),F(e.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${e}.`);let c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];F(c===e[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${e[2]}.`),F(u===e[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${e[3]}).`),Ln("conv2dDerFilter",o,s);let d={x:a,dy:l},p={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:e};return A.runKernel(r0,d,p)}var Av=I({conv2DBackpropFilter_:Z3e});function $g(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return L(t,sa(n));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function Vg(t,n){let e=n,r=An(t.shape,n.shape);return r.length>0&&(e=Ve(e,r)),$(e,t.shape)}function jg(t,n,e,r){if(n==="linear")return t;if(n==="relu")return Ao(t);if(n==="elu")return Pl(t);if(n==="relu6")return Sg(t);if(n==="prelu")return Ip(t,e);if(n==="leakyrelu")return bp(t,r);if(n==="sigmoid")return ai(t);throw new Error(`Unknown fused activation ${n}.`)}var zg=(t,n)=>!(t>0)||n==="linear";function X3e({x:t,filter:n,strides:e,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",zg(A.state.gradientDepth,l)===!1){F(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=Bi(t,n,e,r,o,i,s);return a!=null&&(S=fe(S,a)),jg(S,l,c,u)}let d=b(t,"x","conv2d","float32"),p=b(n,"filter","conv2d","float32"),h=d,f=!1;d.rank===3&&(f=!0,h=$(d,[1,d.shape[0],d.shape[1],d.shape[2]])),F(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),F(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Ln("fused conv2d",r,s);let m=o==="NHWC"?h.shape[3]:h.shape[1];F(p.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${p.shape[2]}.`),F(Wo(e,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`);let g=gg(h.shape,p.shape,e,i,r,s),v;a!=null&&(v=b(a,"bias","fused conv2d"),[v]=en(v,d),o==="NHWC"?Ot(g.outShape,v.shape):(F(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),F(v.shape.length===0||v.shape[0]===g.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let w;if(c!=null){let S=c.shape;if(F(S.length<=1||S.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),S.length===1)F(S[0]===1||S[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${g.outChannels}).`);else if(S.length===3)try{Ot(S,g.outShape)}catch{let N=`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(N)}w=b(c,"prelu weights","fused conv2d")}let y=(S,E)=>{F(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[N,B,D,P]=E,M=$g(S,D,l);F(ra(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let W=Sv(B.shape,M,N,e,r),ie=Av(B,M,N.shape,e,r),Z=[W,ie];if(P!=null){let X=Vg(P,M);Z.push(X)}return Z},k={x:h,filter:p,bias:v,preluActivationWeights:w},_={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?vi((E,N,B)=>{let D=A.runKernel(sf,k,_);return B([N,E,D]),f&&(D=$(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:y}})(h,p):vi((E,N,B,D)=>{let P=A.runKernel(sf,k,_);return D([N,E,P,B]),f&&(P=$(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:y}})(h,p,v)}var bX=I({fusedConv2d_:X3e});function Y3e(t,n,e,r,o,i=[1,1],s){let a=t;t.rank===3&&(a=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;l.rank===3&&(l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c={x:a,dy:l},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:e};return A.runKernel(u0,c,u)}var kS=I({depthwiseConv2dNativeBackpropFilter_:Y3e});function Q3e(t,n,e,r,o,i=[1,1],s){let a=n,l=!1;n.rank===3&&(l=!0,a=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c={dy:a,filter:e},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:t},d=A.runKernel(d0,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var _S=I({depthwiseConv2dNativeBackpropInput_:Q3e});function J3e({x:t,filter:n,strides:e,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(zg(A.state.gradientDepth,l)===!1){let _=Bl(t,n,e,r,o,i,s);return a!=null&&(_=fe(_,a)),jg(_,l,c,u)}let d=b(t,"x","depthwiseConv2d","float32"),p=b(n,"filter","depthwiseConv2d","float32"),h=d,f=!1;d.rank===3&&(f=!0,h=$(d,[1,d.shape[0],d.shape[1],d.shape[2]])),F(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),F(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),F(h.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),F(Wo(e,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${i}'`),Ln("fused depthwiseConv2d",r,s);let m=gg(h.shape,p.shape,e,i,r,s,!0),g;a!=null&&(g=b(a,"bias","fused conv2d"),[g]=en(g,d),Ot(m.outShape,g.shape));let v;c!=null&&(v=b(c,"prelu weights","fused depthwiseConv2d"));let w=(_,S)=>{F(ra(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[E,N,B,D]=S,P=$g(_,B,l),M=_S(N.shape,P,E,e,r,i,s),W=kS(N,P,E.shape,e,r,i,s);if(D!=null){let ie=Vg(g,P);return[M,W,ie]}return[M,W]},y={x:h,filter:p,bias:g,preluActivationWeights:v},k={strides:e,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?vi((S,E,N)=>{let B=A.runKernel(af,y,k);return N([E,S,B]),f&&(B=$(B,[B.shape[1],B.shape[2],B.shape[3]])),{value:B,gradFunc:w}})(h,p):vi((S,E,N,B)=>{let D=A.runKernel(af,y,k);return B([E,S,D,N]),f&&(D=$(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:w}})(h,p,g)}var CX=I({fusedDepthwiseConv2d_:J3e});function eSe({a:t,b:n,transposeA:e=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(zg(A.state.gradientDepth,i)===!1){let P=Pt(t,n,e,r);return o!=null&&(P=fe(P,o)),jg(P,i,s,a)}let l=b(t,"a","fused matMul"),c=b(n,"b","fused matMul");[l,c]=en(l,c);let u=e?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=e?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],f=l.shape.slice(0,-2),m=c.shape.slice(0,-2),g=Jt(f),v=Jt(m);F(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${e} and transposeB=${r} must match.`);let y=Ot(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,h]),k=e?$(l,[g,u,p]):$(l,[g,p,u]),_=r?$(c,[v,h,d]):$(c,[v,d,h]),S;o!=null&&(S=b(o,"bias","fused matMul"),[S]=en(S,l),Ot(y,S.shape));let E;s!=null&&(E=b(s,"prelu weights","fused matMul"));let N=(P,M)=>{let[W,ie,Z,X]=M,G=$g($(P,Z.shape),Z,i),H,V;if(!e&&!r?(H=Pt(G,ie,!1,!0),V=Pt(W,G,!0,!1)):!e&&r?(H=Pt(G,ie,!1,!1),V=Pt(G,W,!0,!1)):e&&!r?(H=Pt(ie,G,!1,!0),V=Pt(W,G,!1,!1)):(H=Pt(ie,G,!0,!0),V=Pt(G,W,!0,!0)),o!=null){let K=Vg(X,G);return[H,V,K]}else return[H,V]},B={a:k,b:_,bias:S,preluActivationWeights:E},D={transposeA:e,transposeB:r,activation:i,leakyreluAlpha:a};return o==null?vi((M,W,ie)=>{let Z=A.runKernel(of,B,D);return ie([M,W,Z]),{value:$(Z,y),gradFunc:N}})(k,_):vi((M,W,ie,Z)=>{let X=A.runKernel(of,B,D);return Z([M,W,X,ie]),{value:$(X,y),gradFunc:N}})(k,_,S)}var MX=I({fusedMatMul_:eSe});function tSe(t){return Nv(t,.54,.46)}var SX=I({hammingWindow_:tSe});function nSe(t){return Nv(t,.5,.5)}var bS=I({hannWindow_:nSe});function rSe(t,n,e,r=!1,o=0){let i=0,s=[];for(;i+n<=t.size;)s.push(Tt(t,i,n)),i+=e;if(r)for(;i<t.size;){let a=i+n-t.size,l=hn([Tt(t,i,n-a),ia([a],o)]);s.push(l),i+=e}return s.length===0?$a([],[0,n]):$(hn(s),[s.length,n])}var CS=I({frame_:rSe});function oSe(t,n,e,r,o=bS){r==null&&(r=xS(n));let i=CS(t,n,e),s=L(i,o(n));return Ap(s,r)}var TX=I({stft_:oSe});function iSe(t,n,e,r,o="bilinear",i=0){let s=b(t,"image","cropAndResize"),a=b(n,"boxes","cropAndResize","float32"),l=b(e,"boxInd","cropAndResize","int32"),c=a.shape[0];F(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),F(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),F(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),F(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),F(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),F(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let u={image:s,boxes:a,boxInd:l},d={method:o,extrapolationValue:i,cropSize:r};return A.runKernel(a0,u,d)}var EX=I({cropAndResize_:iSe});function sSe(t){let n=b(t,"image","flipLeftRight","float32");F(n.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${n.rank}.`);let e={image:n};return A.runKernel(g0,e,{})}var IX=I({flipLeftRight_:sSe});function aSe(t){let n=b(t,"image","grayscaleToRGB"),e=n.rank-1,r=n.shape[e];F(n.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${n.rank}.`),F(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(n.rank);return o.fill(1,0,e),o[e]=3,Do(n,o)}var DX=I({grayscaleToRGB_:aSe});function lSe(t){let n=b(t,"image","RGBToGrayscale"),e=n.rank-1,r=n.shape[e];F(n.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`),F(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=n.dtype,i=me(n,"float32"),s=Yn([.2989,.587,.114]),a;switch(n.rank){case 2:a=kp("ij,j->i",i,s);break;case 3:a=kp("ijk,k->ij",i,s);break;case 4:a=kp("ijkl,l->ijk",i,s);break;case 5:a=kp("ijklm,m->ijkl",i,s);break;case 6:a=kp("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return a=ur(a,-1),me(a,o)}var NX=I({rgbToGrayscale_:lSe});function cSe(t,n,e=0,r=.5){let o=b(t,"image","rotateWithOffset","float32");F(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let i={image:o},s={radians:n,fillValue:e,center:r};return A.runKernel(rg,i,s)}var AX=I({rotateWithOffset_:cSe});function Va(t,n,e,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=t.shape[0];return e=Math.min(e,s),F(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),F(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),F(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),F(n.rank===1,()=>"scores must be a 1D tensor"),F(n.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${n.shape[0]}`),F(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:e,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}function uSe(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY){let i=b(t,"boxes","nonMaxSuppression","float32"),s=b(n,"scores","nonMaxSuppression","float32"),a=Va(i,s,e,r,o);e=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let l={maxOutputSize:e,iouThreshold:r,scoreThreshold:o};return A.runKernel(D0,{boxes:i,scores:s},l)}var RX=I({nonMaxSuppression_:uSe});function OX(t,n,e){let r=dSe(t,n,e),o=r<0?-(r+1):r;t.splice(o,0,n)}function dSe(t,n,e){return hSe(t,n,e||pSe)}function pSe(t,n){return t>n?1:t<n?-1:0}function hSe(t,n,e){let r=0,o=t.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);let a=e(n,t[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}function MS(t,n,e,r,o){return KF(t,n,e,r,o,0)}function SS(t,n,e,r,o,i){return KF(t,n,e,r,o,0,!1,i,!0)}function TS(t,n,e,r,o,i){return KF(t,n,e,r,o,i,!0)}function KF(t,n,e,r,o,i,s=!1,a=!1,l=!1){let c=[];for(let g=0;g<n.length;g++)n[g]>o&&c.push({score:n[g],boxIndex:g,suppressBeginIndex:0});c.sort(FX);let u=i>0?-.5/i:0,d=[],p=[];for(;d.length<e&&c.length>0;){let g=c.pop(),{score:v,boxIndex:w,suppressBeginIndex:y}=g;if(v<o)break;let k=!1;for(let _=d.length-1;_>=y;--_){let S=fSe(t,w,d[_]);if(S>=r){k=!0;break}if(g.score=g.score*mSe(r,u,S),g.score<=o)break}g.suppressBeginIndex=d.length,k||(g.score===v?(d.push(w),p.push(g.score)):g.score>o&&OX(c,g,FX))}let h=d.length,f=e-h;a&&f>0&&(d.push(...new Array(f).fill(0)),p.push(...new Array(f).fill(0)));let m={selectedIndices:d};return s&&(m.selectedScores=p),l&&(m.validOutputs=h),m}function fSe(t,n,e){let r=t.subarray(n*4,n*4+4),o=t.subarray(e*4,e*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),h=(a-i)*(l-s),f=(d-c)*(p-u);if(h<=0||f<=0)return 0;let m=Math.max(i,c),g=Math.max(s,u),v=Math.min(a,d),w=Math.min(l,p),y=Math.max(v-m,0)*Math.max(w-g,0);return y/(h+f-y)}function mSe(t,n,e){let r=Math.exp(n*e*e);return e<=t?r:0}function FX(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function gSe(i,s,a){return z(this,arguments,function*(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY){let l=b(t,"boxes","nonMaxSuppressionAsync"),c=b(n,"scores","nonMaxSuppressionAsync"),u=Va(l,c,e,r,o);e=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold;let d=yield Promise.all([l.data(),c.data()]),p=d[0],h=d[1],{selectedIndices:f}=MS(p,h,e,r,o);return l!==t&&l.dispose(),c!==n&&c.dispose(),Yn(f,"int32")})}var BX=gSe;function vSe(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=b(t,"boxes","nonMaxSuppression"),a=b(n,"scores","nonMaxSuppression"),l=Va(s,a,e,r,o,i);e=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let c={boxes:s,scores:a},u={maxOutputSize:e,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},d=A.runKernel(A0,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}var PX=I({nonMaxSuppressionWithScore_:vSe});function wSe(s,a,l){return z(this,arguments,function*(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let c=b(t,"boxes","nonMaxSuppressionAsync"),u=b(n,"scores","nonMaxSuppressionAsync"),d=Va(c,u,e,r,o,i);e=d.maxOutputSize,r=d.iouThreshold,o=d.scoreThreshold,i=d.softNmsSigma;let p=yield Promise.all([c.data(),u.data()]),h=p[0],f=p[1],{selectedIndices:m,selectedScores:g}=TS(h,f,e,r,o,i);return c!==t&&c.dispose(),u!==n&&u.dispose(),{selectedIndices:Yn(m,"int32"),selectedScores:Yn(g)}})}var LX=wSe;function ySe(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=b(t,"boxes","nonMaxSuppression"),a=b(n,"scores","nonMaxSuppression"),l=Va(s,a,e,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,p={boxes:s,scores:a},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:i},f=A.runKernel(N0,p,h);return{selectedIndices:f[0],validOutputs:f[1]}}var $X=I({nonMaxSuppressionPadded_:ySe});function xSe(s,a,l){return z(this,arguments,function*(t,n,e,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let c=b(t,"boxes","nonMaxSuppressionAsync"),u=b(n,"scores","nonMaxSuppressionAsync"),d=Va(c,u,e,r,o,null),p=d.maxOutputSize,h=d.iouThreshold,f=d.scoreThreshold,[m,g]=yield Promise.all([c.data(),u.data()]),{selectedIndices:v,validOutputs:w}=SS(m,g,p,h,f,i);return c!==t&&c.dispose(),u!==n&&u.dispose(),{selectedIndices:Yn(v,"int32"),validOutputs:$e(w,"int32")}})}var VX=xSe;function kSe(t,n,e=!1,r=!1){let o=b(t,"images","resizeBilinear");F(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),F(n.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${n}.`),F(r===!1||e===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=$(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=n,a={images:i},l={alignCorners:e,halfPixelCenters:r,size:n},c=A.runKernel(op,a,l);return s?$(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var ES=I({resizeBilinear_:kSe});function _Se(t,n,e=!1,r=!1){let o=b(t,"images","resizeNearestNeighbor");F(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),F(n.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${n}.`),F(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),F(r===!1||e===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=$(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=n,a={images:i},l={alignCorners:e,halfPixelCenters:r,size:n},c=A.runKernel(rp,a,l);return s?$(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var IS=I({resizeNearestNeighbor_:_Se});function bSe(t,n="binary",e=!1,r=.5){let o=b(t,"image","threshold"),i=.2989,s=.587,a=.114,l=o.shape[0]*o.shape[1],c=L(Yn([r]),255),u,d,p,h;if(F(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),F(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),F(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),F(n==="otsu"||n==="binary",()=>`Method must be binary or otsu, but was ${n}`),o.shape[2]===3){[u,d,p]=Gr(o,[1,1,1],-1);let g=L(u,i),v=L(d,s),w=L(p,a);h=fe(fe(g,v),w)}else h=t;if(n==="otsu"){let g=Ok(me(Tg(h),"int32"),Hr([]),256);c=CSe(g,l)}let f=e?is(h,c):Zn(h,c);return me(L(f,255),"int32")}function CSe(t,n){let e=Yn([-1]),r=Yn([0]),o=Yn([0]),i,s,a,l,c,u;for(let d=0;d<t.size-1;d++){i=Tt(t,0,d+1),s=Tt(t,d+1),c=Be(Ve(i),n),u=Be(Ve(s),n);let p=Ve(L(i,jl(0,i.size)));a=Be(p,Ve(i));let h=ia(s.shape,i.size),f=fe(jl(0,s.size),h),m=L(s,f);l=Be(Ve(m),Ve(s));let g=Oe(a,l),v=Oe(a,l),w=L(c,u);o=L(L(w,g),v);let y=Zn(o,r);r=En(y,o,r),e=En(y,Yn([d]),e)}return e}var jX=I({threshold_:bSe});function MSe(t,n,e="nearest",r="constant",o=0,i){let s=b(t,"image","transform","float32"),a=b(n,"transforms","transform","float32");F(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),F(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),F(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);let l={image:s,transforms:a},c={interpolation:e,fillMode:r,fillValue:o,outputShape:i};return A.runKernel(tg,l,c)}var zX=I({transform_:MSe});function SSe(t,n,e){let r=b(t,"a","bandPart");F(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[i,s]=r.shape.slice(-2),a,l;typeof n=="number"?(F(n%1===0,()=>`bandPart(): numLower must be an integer, got ${n}.`),F(n<=i,()=>`bandPart(): numLower (${n}) must not be greater than the number of rows (${i}).`),a=b(n<0?i:n,"numLower","bandPart")):(F(n.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=En(xu(n,0),i,As(n,i))),typeof e=="number"?(F(e%1===0,()=>`bandPart(): numUpper must be an integer, got ${e}.`),F(e<=s,()=>`bandPart(): numUpper (${e}) must not be greater than the number of columns (${s}).`),l=b(e<0?s:e,"numUpper","bandPart")):(F(e.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=En(xu(e,0),s,As(e,s)));let c=$(jl(0,i,1,"int32"),[-1,1]),u=jl(0,s,1,"int32"),d=Oe(c,u),p=No(is(d,a),gi(d,Wt(l))),h=On([i,s],r.dtype);return $(Xn(Wr($(r,[-1,i,s])).map(f=>En(p,f,h))),o)}var HX=I({bandPart_:SSe});function TSe(t){let n;if(Array.isArray(t)){n=!1,F(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=t[0].shape[0];for(let i=1;i<t.length;++i)F(t[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${o})`)}else n=!0,t=Gr(t,t.shape[0],0).map(o=>as(o,[0]));F(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let e=[],r=t;for(let o=0;o<t.length;++o)e.push(A.tidy(()=>{let i=r[o];if(o>0)for(let s=0;s<o;++s){let a=L(Ve(L(e[s],i)),e[s]);i=Oe(i,a)}return Be(i,yu(i,"euclidean"))}));return n?Xn(e,0):e}var UX=I({gramSchmidt_:TSe});function ESe(t,n=!1){if(F(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return GX(t,n);{let e=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Wr($(t,[e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],i=[];r.forEach(l=>{let[c,u]=GX(l,n);o.push(c),i.push(u)});let s=$(Xn(o,0),t.shape),a=$(Xn(i,0),t.shape);return[s,a]}}function GX(t,n=!1){return A.tidy(()=>{F(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let e=t.shape[0],r=t.shape[1],o=mf(e),i=mi(t),s=$a([[1]],[1,1]),a=mi(s),l=e>=r?r:e;for(let c=0;c<l;++c){let u=i,d=a,p=o;[a,i,o]=A.tidy(()=>{let h=Tt(i,[c,c],[e-c,1]),f=yu(h),m=Tt(i,[c,c],[1,1]),g=En(Zn(m,0),$a([[-1]]),$a([[1]])),v=Oe(m,L(g,f)),w=Be(h,v);w.shape[0]===1?a=mi(s):a=hn([s,Tt(w,[1,0],[w.shape[0]-1,w.shape[1]])],0);let y=Wt(Be(Pt(g,v),f)),k=Tt(i,[c,0],[e-c,r]),_=L(y,a),S=Lt(a);if(c===0)i=Oe(k,Pt(_,Pt(S,k)));else{let B=Oe(k,Pt(_,Pt(S,k)));i=hn([Tt(i,[0,0],[c,r]),B],0)}let E=Lt(_),N=Tt(o,[0,c],[e,o.shape[1]-c]);if(c===0)o=Oe(N,Pt(Pt(N,a),E));else{let B=Oe(N,Pt(Pt(N,a),E));o=hn([Tt(o,[0,0],[e,c]),B],1)}return[a,i,o]}),ht([u,d,p])}return!n&&e>r&&(o=Tt(o,[0,0],[e,r]),i=Tt(i,[0,0],[r,r])),[o,i]})}var WX=I({qr_:ESe});var Er=(function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t})(Er||{});function ISe(t,n,e=Er.SUM_BY_NONZERO_WEIGHTS){let r=b(t,"losses","computeWeightedLoss"),o=null;n!=null&&(o=b(n,"weights","computeWeightedLoss"));let i=o==null?r:L(r,o);if(e===Er.NONE)return i;if(e===Er.SUM)return Ve(i);if(e===Er.MEAN){if(o==null)return Rn(i);{let s=r.size/o.size,a=Be(Ve(i),Ve(o));return s>1?Be(a,$e(s)):a}}if(e===Er.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Be(Ve(i),$e(r.size));{let s=L(o,Tr(r.shape)),a=me(Ve(La(s,$e(0))),"float32");return Be(Ve(i),a)}}throw Error(`Unknown reduction: ${e}`)}var li=I({computeWeightedLoss_:ISe});function DSe(t,n,e,r=Er.SUM_BY_NONZERO_WEIGHTS){let o=b(t,"labels","absoluteDifference"),i=b(n,"predictions","absoluteDifference"),s=null;e!=null&&(s=b(e,"weights","absoluteDifference")),Jn(o.shape,i.shape,"Error in absoluteDifference: ");let a=Pn(Oe(o,i));return li(a,s,r)}var qX=I({absoluteDifference_:DSe});function NSe(t,n,e,r,o=Er.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"labels","cosineDistance"),s=b(n,"predictions","cosineDistance"),a=null;r!=null&&(a=b(r,"weights","cosineDistance")),Jn(i.shape,s.shape,"Error in cosineDistance: ");let l=$e(1),c=Oe(l,Ve(L(i,s),e,!0));return li(c,a,o)}var KX=I({cosineDistance_:NSe});function ASe(t,n,e,r=Er.SUM_BY_NONZERO_WEIGHTS){let o=b(t,"labels","hingeLoss"),i=b(n,"predictions","hingeLoss"),s=null;e!=null&&(s=b(e,"weights","hingeLoss")),Jn(o.shape,i.shape,"Error in hingeLoss: ");let a=$e(1);o=Oe(L($e(2),o),a);let l=Ao(Oe(a,L(o,i)));return li(l,s,r)}var ZX=I({hingeLoss_:ASe});function RSe(t,n,e,r=1,o=Er.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"labels","huberLoss"),s=b(n,"predictions","huberLoss"),a=null;e!=null&&(a=b(e,"weights","huberLoss")),Jn(i.shape,s.shape,"Error in huberLoss: ");let l=$e(r),c=Pn(Oe(s,i)),u=As(c,l),d=Oe(c,u),p=fe(L($e(.5),jt(u)),L(l,d));return li(p,a,o)}var XX=I({huberLoss_:RSe});function OSe(t,n,e,r=1e-7,o=Er.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"labels","logLoss"),s=b(n,"predictions","logLoss"),a=null;e!=null&&(a=b(e,"weights","logLoss")),Jn(i.shape,s.shape,"Error in logLoss: ");let l=$e(1),c=$e(r),u=Wt(L(i,mo(fe(s,c)))),d=L(Oe(l,i),mo(fe(Oe(l,s),c))),p=Oe(u,d);return li(p,a,o)}var YX=I({logLoss_:OSe});function FSe(t,n,e,r=Er.SUM_BY_NONZERO_WEIGHTS){let o=b(t,"labels","meanSquaredError"),i=b(n,"predictions","meanSquaredError"),s=null;e!=null&&(s=b(e,"weights","meanSquaredError")),Jn(o.shape,i.shape,"Error in meanSquaredError: ");let a=Bg(o,i);return li(a,s,r)}var QX=I({meanSquaredError_:FSe});function BSe(t,n){let e=b(t,"labels","sigmoidCrossEntropyWithLogits"),r=b(n,"logits","sigmoidCrossEntropyWithLogits");Jn(e.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=Ao(r),i=L(r,e),s=Cp(cr(Wt(Pn(r))));return fe(Oe(o,i),s)}function PSe(t,n,e,r=0,o=Er.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"multiClassLabels","sigmoidCrossEntropy"),s=b(n,"logits","sigmoidCrossEntropy"),a=null;if(e!=null&&(a=b(e,"weights","sigmoidCrossEntropy")),Jn(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=$e(r),u=$e(1),d=$e(.5);i=fe(L(i,Oe(u,c)),L(d,c))}let l=BSe(i,s);return li(l,a,o)}var JX=I({sigmoidCrossEntropy_:PSe});function LSe(t,n,e=-1){if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${n.rank} and dim was ${e}`);return vi((o,i,s)=>{let l=Mp(i,[e],!0),c=Oe(me(i,"float32"),l);s([o,c]);let u=Wt(L(c,o));return{value:Ve(u,[e]),gradFunc:(h,f)=>{let[m,g]=f,v=Ba(h.shape,[e]);return[L($(h,v),Oe(me(m,"float32"),cr(g))),L($(h,v),Oe(cr(g),me(m,"float32")))]}}})(t,n)}function $Se(t,n,e,r=0,o=Er.SUM_BY_NONZERO_WEIGHTS){let i=b(t,"onehotLabels","softmaxCrossEntropy"),s=b(n,"logits","softmaxCrossEntropy"),a=null;if(e!=null&&(a=b(e,"weights","softmaxCrossEntropy")),Jn(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=$e(r),u=$e(1),d=$e(i.shape[1]);i=fe(L(i,Oe(u,c)),Be(c,d))}let l=LSe(i,s);return li(l,a,o)}var eY=I({softmaxCrossEntropy_:$Se});function VSe(t,n,e,r){let o=b(t,"indices","sparseFillEmptyRows","int32"),i=b(n,"values","sparseFillEmptyRows"),s=b(e,"denseShape","sparseFillEmptyRows","int32"),a=b(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let l={indices:o,values:i,denseShape:s,defaultValue:a},c=A.runKernel(U0,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var tY=I({sparseFillEmptyRows_:VSe});function jSe(t,n,e){let r=b(t,"inputIndices","sparseReshape","int32"),o=b(n,"inputShape","sparseReshape","int32"),i=b(e,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);let s={inputIndices:r,inputShape:o,newShape:i},a=A.runKernel(G0,s);return{outputIndices:a[0],outputShape:a[1]}}var nY=I({sparseReshape_:jSe});function zSe(t,n,e){let r=b(t,"data","sparseSegmentMean"),o=b(n,"indices","sparseSegmentMean","int32"),i=b(e,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return A.runKernel(W0,s)}var rY=I({sparseSegmentMean_:zSe});function HSe(t,n,e){let r=b(t,"data","sparseSegmentSum"),o=b(n,"indices","sparseSegmentSum","int32"),i=b(e,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return A.runKernel(q0,s)}var oY=I({sparseSegmentSum_:HSe});function USe(t,n,e,r,o,i,s,a){let l=b(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);let c=b(n,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let u={separator:e,nGramWidths:r,leftPad:o,rightPad:i,padWidth:s,preserveShortSequences:a},d={data:l,dataSplits:c},p=A.runKernel(Y0,d,u);return{nGrams:p[0],nGramsSplits:p[1]}}var iY=I({stringNGrams_:USe});function GSe(t,n,e=!0){let r=b(t,"input","stringSplit","string"),o=b(n,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let i={skipEmpty:e},s={input:r,delimiter:o},a=A.runKernel(Q0,s,i);return{indices:a[0],values:a[1],shape:a[2]}}var sY=I({stringSplit_:GSe});function WSe(t,n){let e=b(t,"input","stringToHashBucketFast","string"),r={numBuckets:n};if(n<=0)throw new Error("Number of buckets must be at least 1");let o={input:e};return A.runKernel(J0,o,r)}var aY=I({stringToHashBucketFast_:WSe});function qSe(t,n,e,r=!0){let o=b(t,"input","staticRegexReplace","string"),i={pattern:n,rewrite:e,replaceGlobal:r};return A.runKernel(tf,{x:o},i)}var lY=I({staticRegexReplace_:qSe});var cY={fft:Np,ifft:_u,rfft:Ap,irfft:Fg},uY={hammingWindow:SX,hannWindow:bS,frame:CS,stft:TX},yi={flipLeftRight:IX,grayscaleToRGB:DX,resizeNearestNeighbor:IS,resizeBilinear:ES,rgbToGrayscale:NX,rotateWithOffset:AX,cropAndResize:EX,nonMaxSuppression:RX,nonMaxSuppressionAsync:BX,nonMaxSuppressionWithScore:PX,nonMaxSuppressionWithScoreAsync:LX,nonMaxSuppressionPadded:$X,nonMaxSuppressionPaddedAsync:VX,threshold:jX,transform:zX},DS={bandPart:HX,gramSchmidt:UX,qr:WX},dY={absoluteDifference:qX,computeWeightedLoss:li,cosineDistance:KX,hingeLoss:ZX,huberLoss:XX,logLoss:YX,meanSquaredError:QX,sigmoidCrossEntropy:JX,softmaxCrossEntropy:eY},pY={sparseFillEmptyRows:tY,sparseReshape:nY,sparseSegmentMean:rY,sparseSegmentSum:oY},hY={stringNGrams:iY,stringSplit:sY,stringToHashBucketFast:aY,staticRegexReplace:lY};var ge={};Qt(ge,{Serializable:()=>w_,SerializationMap:()=>NS,getRegisteredName:()=>ZSe,registerClass:()=>XF});var KSe=new Map,ZF=new Map,w_=class{getClassName(){return this.constructor.className}static fromConfig(n,e){return new n(e)}},NS=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]}};function XF(t,n,e){F(t.className!=null,()=>"Class being registered does not have the static className property defined."),F(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),F(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof n>"u"&&(n="Custom"),typeof e>"u"&&(e=t.className);let r=e,o=n+">"+r;return NS.register(t),KSe.set(o,t),ZF.set(t,o),t}function ZSe(t){return ZF.has(t)?ZF.get(t):t.className}var Ko=class extends w_{minimize(n,e=!1,r){let{value:o,grads:i}=this.computeGradients(n,r);if(r!=null){let s=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return ht(i),e?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(n,e){return Jk(n,e)}dispose(){this.iterations_!=null&&ht(this.iterations_)}saveIterations(){return z(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:$e(this.iterations_,"int32")}})}getWeights(){return z(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(n){return z(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(n){return z(this,null,function*(){return this.iterations_=(yield n[0].tensor.data())[0],n.slice(1)})}};Object.defineProperty(Ko,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});var yf=class extends Ko{static get className(){return"Adadelta"}constructor(n,e,r=null){super(),this.learningRate=n,this.rho=e,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=A.backend.epsilon())}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=A.registeredVariables[r],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:te(()=>at(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:te(()=>at(i).variable(s))});let a=Array.isArray(n)?n[o].tensor:n[r];if(a==null)return;let l=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;te(()=>{let u=fe(L(l,this.rho),L(jt(a),1-this.rho)),d=L(Be(Mn(fe(c,this.epsilon)),Mn(fe(l,this.epsilon))),a),p=fe(L(c,this.rho),L(jt(d),1-this.rho));l.assign(u),c.assign(p);let h=fe(L(d,-this.learningRate),i);i.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(ht(this.accumulatedGrads.map(n=>n.variable)),ht(this.accumulatedUpdates.map(n=>n.variable)))}getWeights(){return z(this,null,function*(){let n=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=n.length/2,r=!1;this.accumulatedGrads=n.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=n.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.rho,e.epsilon)}};var xf=class extends Ko{static get className(){return"Adagrad"}constructor(n,e=.1){super(),this.learningRate=n,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=A.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:te(()=>ia(i.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(n)?n[o].tensor:n[r];if(s==null)return;let a=this.accumulatedGrads[o].variable;te(()=>{let l=fe(a,jt(s));a.assign(l);let c=fe(L(Be(s,Mn(fe(l,A.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&ht(this.accumulatedGrads.map(n=>n.variable))}getWeights(){return z(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=!1;this.accumulatedGrads=n.map(r=>({originalName:r.name,variable:r.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(n,e){return new n(e.learningRate,e.initialAccumulatorValue)}};var kf=class extends Ko{static get className(){return"Adam"}constructor(n,e,r,o=null){super(),this.learningRate=n,this.beta1=e,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],te(()=>{this.accBeta1=$e(e).variable(),this.accBeta2=$e(r).variable()}),o==null&&(this.epsilon=A.backend.epsilon())}applyGradients(n){let e=Array.isArray(n)?n.map(r=>r.name):Object.keys(n);te(()=>{let r=Oe(1,this.accBeta1),o=Oe(1,this.accBeta2);e.forEach((i,s)=>{let a=A.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:te(()=>at(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:te(()=>at(a).variable(l))});let c=Array.isArray(n)?n[s].tensor:n[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedSecondMoment[s].variable,p=fe(L(u,this.beta1),L(c,1-this.beta1)),h=fe(L(d,this.beta2),L(jt(c),1-this.beta2)),f=Be(p,r),m=Be(h,o);u.assign(p),d.assign(h);let g=fe(L(Be(f,fe(Mn(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(L(this.accBeta1,this.beta1)),this.accBeta2.assign(L(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ht(this.accumulatedFirstMoment.map(n=>n.variable)),this.accumulatedSecondMoment!=null&&ht(this.accumulatedSecondMoment.map(n=>n.variable))}getWeights(){return z(this,null,function*(){let n=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n),te(()=>{this.accBeta1.assign(qo(this.beta1,this.iterations_+1)),this.accBeta2.assign(qo(this.beta2,this.iterations_+1))});let e=n.length/2,r=!1;this.accumulatedFirstMoment=n.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=n.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon)}};var _f=class extends Ko{static get className(){return"Adamax"}constructor(n,e,r,o=null,i=0){super(),this.learningRate=n,this.beta1=e,this.beta2=r,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],te(()=>{this.iteration=$e(0).variable(),this.accBeta1=$e(e).variable()}),o==null&&(this.epsilon=A.backend.epsilon())}applyGradients(n){let e=Array.isArray(n)?n.map(r=>r.name):Object.keys(n);te(()=>{let r=Oe(1,this.accBeta1),o=Be(-this.learningRate,fe(L(this.iteration,this.decay),1));e.forEach((i,s)=>{let a=A.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:at(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:at(a).variable(l)});let c=Array.isArray(n)?n[s].tensor:n[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedWeightedInfNorm[s].variable,p=fe(L(u,this.beta1),L(c,1-this.beta1)),h=L(d,this.beta2),f=Pn(c),m=Pi(h,f);u.assign(p),d.assign(m);let g=fe(L(Be(o,r),Be(p,fe(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(fe(this.iteration,1)),this.accBeta1.assign(L(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ht(this.accumulatedFirstMoment.map(n=>n.variable)),this.accumulatedWeightedInfNorm!=null&&ht(this.accumulatedWeightedInfNorm.map(n=>n.variable))}getWeights(){return z(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(n){return z(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}};var bu=class extends Ko{static get className(){return"SGD"}constructor(n){super(),this.learningRate=n,this.setLearningRate(n)}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=Array.isArray(n)?n[o].tensor:n[r];if(i==null)return;let s=A.registeredVariables[r];te(()=>{let a=fe(L(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=Hn($e(-n))}dispose(){this.c.dispose()}getWeights(){return z(this,null,function*(){return[yield this.saveIterations()]})}setWeights(n){return z(this,null,function*(){if(n=yield this.extractIterations(n),n.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(n,e){return new n(e.learningRate)}};var bf=class extends bu{static get className(){return"Momentum"}constructor(n,e,r=!1){super(n),this.learningRate=n,this.momentum=e,this.useNesterov=r,this.accumulations=[],this.m=$e(this.momentum)}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=A.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:te(()=>at(i).variable(!1))});let s=this.accumulations[o].variable,a=Array.isArray(n)?n[o].tensor:n[r];a!=null&&te(()=>{let l,c=fe(L(this.m,s),a);this.useNesterov?l=fe(L(this.c,fe(a,L(c,this.m))),i):l=fe(L(this.c,c),i),s.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&ht(this.accumulations.map(n=>n.variable))}setMomentum(n){this.momentum=n}getWeights(){return z(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=!1;this.accumulations=n.map(r=>({originalName:r.name,variable:r.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(n,e){return new n(e.learningRate,e.momentum,e.useNesterov)}};var Cf=class extends Ko{static get className(){return"RMSProp"}constructor(n,e=.9,r=0,o=null,i=!1){if(super(),this.learningRate=n,this.decay=e,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=A.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(n){(Array.isArray(n)?n.map(r=>r.name):Object.keys(n)).forEach((r,o)=>{let i=A.registeredVariables[r],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:te(()=>at(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:te(()=>at(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:te(()=>at(i).variable(s))});let a=Array.isArray(n)?n[o].tensor:n[r];if(a==null)return;let l=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;te(()=>{let u=fe(L(l,this.decay),L(jt(a),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[o].variable,p=fe(L(d,this.decay),L(a,1-this.decay)),h=Be(L(a,this.learningRate),Mn(Oe(u,fe(jt(p),this.epsilon)))),f=fe(L(c,this.momentum),h);l.assign(u),d.assign(p),c.assign(f);let m=Oe(i,f);i.assign(m)}else{let d=fe(L(l,this.decay),L(jt(a),1-this.decay)),p=fe(L(c,this.momentum),Be(L(a,this.learningRate),Mn(fe(d,this.epsilon))));l.assign(d),c.assign(p);let h=Oe(i,p);i.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&ht(this.accumulatedMeanSquares.map(n=>n.variable)),this.accumulatedMeanGrads!=null&&this.centered&&ht(this.accumulatedMeanGrads.map(n=>n.variable)),this.accumulatedMoments!=null&&ht(this.accumulatedMoments.map(n=>n.variable))}getWeights(){return z(this,null,function*(){let n=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&n.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return z(this,null,function*(){n=yield this.extractIterations(n);let e=this.centered?n.length/3:n.length/2,r=!1;this.accumulatedMeanSquares=n.slice(0,e).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=n.slice(e,e*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=n.slice(e*2,e*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(n,e){return new n(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}};var XSe=[yf,xf,kf,_f,bf,Cf,bu];function fY(){for(let t of XSe)XF(t)}var qr={};Qt(qr,{CompositeArrayBuffer:()=>si,browserFiles:()=>gY,browserHTTPRequest:()=>kY,concatenateArrayBuffers:()=>kZ,copyModel:()=>FZ,decodeWeights:()=>iS,decodeWeightsStream:()=>sS,encodeWeights:()=>vZ,fromMemory:()=>_Y,fromMemorySync:()=>rB,getLoadHandlers:()=>MZ,getModelArtifactsForJSON:()=>kv,getModelArtifactsForJSONSync:()=>HO,getModelArtifactsInfoForJSON:()=>gu,getSaveHandlers:()=>CZ,getWeightSpecs:()=>wk,http:()=>RS,isHTTPScheme:()=>AS,listModels:()=>RZ,loadWeights:()=>wY,moveModel:()=>BZ,registerLoadRouter:()=>bZ,registerSaveRouter:()=>_Z,removeModel:()=>OZ,weightsLoaderFactory:()=>tB,withSaveHandler:()=>bY,withSaveHandlerSync:()=>CY});var YSe="model",QSe=".json",JSe=".weights.bin";function mY(t){return new Promise(n=>setTimeout(n)).then(t)}var YF=(()=>{class t{constructor(e){if(!Y().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),(e==null||e.length===0)&&(e=YSe),this.modelJsonFileName=e+QSe,this.weightDataFileName=e+JSe}save(e){return z(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=si.join(e.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let i=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=aS(e,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,yield mY(()=>l.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,yield mY(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:gu(e)}}})}}return t.URL_SCHEME="downloads://",t})();var QF=class{constructor(n){if(n==null||n.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${n}`);this.jsonFile=n[0],this.weightsFiles=n.slice(1)}load(){return z(this,null,function*(){return new Promise((n,e)=>{let r=new FileReader;r.onload=o=>{let i=JSON.parse(o.target.result),s=i.modelTopology;if(s==null){e(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){e(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){n({modelTopology:s});return}let l=kv(i,c=>this.loadWeights(c));n(l)},r.onerror=o=>e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})})}loadWeights(n){let e=[],r=[];for(let s of n)e.push(...s.weights),r.push(...s.paths);let o=this.checkManifestAndWeightFiles(n),i=r.map(s=>this.loadWeightsFile(s,o[s]));return Promise.all(i).then(s=>[e,s])}loadWeightsFile(n,e){return new Promise((r,o)=>{let i=new FileReader;i.onload=s=>{let a=s.target.result;r(a)},i.onerror=s=>o(`Failed to weights data from file of path '${n}'.`),i.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(n){let e=[],r=this.weightsFiles.map(i=>zO(i.name)),o={};for(let i of n)i.paths.forEach(s=>{let a=zO(s);if(e.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(e.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[s]=this.weightsFiles[r.indexOf(a)]});if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},eTe=t=>Y().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(YF.URL_SCHEME)?tTe(t.slice(YF.URL_SCHEME.length)):null;Eo.registerSaveRouter(eTe);function tTe(t="model"){return new YF(t)}function gY(t){return new QF(t)}function JF(t,n,e,r){s(t),e=e??0,r=r??1,a(e,r);let o=0,i=l=>(l.then(c=>{let u=e+ ++o/t.length*(r-e);return n(u),c}),l);function s(l){F(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){F(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),F(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),F(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(i))}function eB(t,n){return z(this,null,function*(){n==null&&(n={});let e=n.fetchFunc==null?Y().platform.fetch:n.fetchFunc,r=t.map(d=>e(d,n.requestInit,{isBinary:!0})),a=(n.onProgress==null?yield Promise.all(r):yield JF(r,n.onProgress,0,.5)).map(d=>d.arrayBuffer());return n.onProgress==null?yield Promise.all(a):yield JF(a,n.onProgress,.5,1)})}function vY(t,n){var e;let r=n.fetchFunc==null?Y().platform.fetch:n.fetchFunc,o=0,i;return(e=n.onProgress)===null||e===void 0||e.call(n,0),new ReadableStream({pull:s=>z(null,null,function*(){for(var a;o<t.length;){i||(i=(yield r(t[o],n.requestInit,{isBinary:!0})).body.getReader());let{done:l,value:c}=yield i.read();if(l){o++,i=void 0,(a=n.onProgress)===null||a===void 0||a.call(n,o/t.length);continue}s.enqueue(c);return}s.close()})})}function wY(t,n="",e,r){return z(this,null,function*(){return tB(s=>eB(s,{requestInit:r}))(t,n,e)})}function tB(t){return(n,e="",r)=>z(null,null,function*(){let o=n.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],a=[];if(n.forEach((h,f)=>{let m=0;h.weights.forEach(g=>{let v="quantization"in g?g.quantization.dtype:g.dtype,w=gp[v]*Jt(g.shape),y=()=>{o[f]=!0,i[f]==null&&(i[f]=[]),i[f].push({manifestEntry:g,groupOffset:m,sizeBytes:w})};r!=null?r.forEach((k,_)=>{k===g.name&&(y(),s[_]=!0)}):y(),a.push(g.name),m+=w})}),!s.every(h=>h)){let h=r.filter((f,m)=>!s[m]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let l=o.reduce((h,f,m)=>(f&&h.push(m),h),[]),c=[];l.forEach(h=>{n[h].paths.forEach(f=>{let m=e+(e.endsWith("/")?"":"/")+f;c.push(m)})});let u=yield t(c),d={},p=0;return l.forEach(h=>{let f=n[h].paths.length,m=new si(u.slice(p,p+f));i[h].forEach(v=>{let w=m.slice(v.groupOffset,v.groupOffset+v.sizeBytes),y=iS(w,[v.manifestEntry]);for(let k in y)d[k]=y[k]}),p+=f}),d})}var nTe="application/octet-stream",rTe="application/json",yY=(()=>{class t{constructor(e,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(F(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=Y().platform.fetch,F(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&F(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}save(e){return z(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=aS(e,o);if(r.body.append("model.json",new Blob([JSON.stringify(i)],{type:rTe}),"model.json"),e.weightData!=null){let a=si.join(e.weightData);r.body.append("model.weights.bin",new Blob([a],{type:nTe}),"model.weights.bin")}let s=yield this.fetch(this.path,r);if(s.ok)return{modelArtifactsInfo:gu(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)})}loadModelJSON(){return z(this,null,function*(){let e=yield this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=yield e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,i=r.weightsManifest;if(o==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r})}load(){return z(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let e=yield this.loadModelJSON();return kv(e,r=>this.loadWeights(r))})}loadStream(){return z(this,null,function*(){let e=yield this.loadModelJSON(),r=yield this.getWeightUrls(e.weightsManifest),o=wk(e.weightsManifest),i=()=>vY(r,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:o,getWeightStream:i})})}getWeightUrls(e){return z(this,null,function*(){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,i]=oTe(r),s=this.weightPathPrefix||o,a=[],l=[];for(let c of e)for(let u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(s+u+i);return this.weightUrlConverter&&a.push(...yield Promise.all(l)),a})}loadWeights(e){return z(this,null,function*(){let r=yield this.getWeightUrls(e),o=wk(e),i=yield eB(r,this.loadOptions);return[o,i]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function oTe(t){let n=t.lastIndexOf("/"),e=t.lastIndexOf("?"),r=t.substring(0,n),o=e>n?t.substring(e):"";return[r+"/",o]}function AS(t){return t.match(yY.URL_SCHEME_REGEX)!=null}var xY=(t,n)=>{if(typeof fetch>"u"&&(n==null||n.fetchFunc==null))return null;{let e=!0;if(Array.isArray(t)?e=t.every(r=>AS(r)):e=AS(t),e)return RS(t,n)}return null};Eo.registerSaveRouter(xY);Eo.registerLoadRouter(xY);function RS(t,n){return new yY(t,n)}function kY(t,n){return RS(t,n)}var y_=class{constructor(n){this.modelArtifacts=n}load(){return this.modelArtifacts}},OS=class{constructor(n){this.saveHandler=n}save(n){return this.saveHandler(n)}},nB=class{constructor(n){n.load&&(this.load=()=>Promise.resolve(n.load())),n.save&&(this.save=e=>Promise.resolve(n.save(e)))}};function _Y(t,n,e,r){let o=arguments;return new nB(rB(...o))}function rB(t,n,e,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new y_(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new y_({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new y_({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:r}))}function bY(t){return new OS(t)}function CY(t){return new OS(t)}var oB={};Qt(oB,{confusionMatrix:()=>MY});function iTe(t,n,e){let r=b(t,"labels","confusionMatrix"),o=b(n,"predictions","confusionMatrix");F(e==null||e>0&&Number.isInteger(e),()=>`If provided, numClasses must be a positive integer, but got ${e}`),F(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),F(o.rank===1,()=>`Expected the rank of predictions to be 1, but got ${o.rank}`),F(r.shape[0]===o.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`),F(e>0&&Number.isInteger(e),()=>`numClasses is required to be a positive integer, but got ${e}`);let i=Vl(me(r,"int32"),e),s=Vl(me(o,"int32"),e),a=Lt(i),l=Pt(a,s);return me(l,"int32")}var MY=I({confusionMatrix_:iTe});var x_={};Qt(x_,{draw:()=>hTe,fromPixels:()=>fTe,fromPixelsAsync:()=>uTe,toPixels:()=>pTe});var Hg,SY=!1;function TY(t,n=3){if(n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let e=!1,r=!1,o=!1,i=!1,s=!1,a=!1;if(t.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(og(pv,A.backendName)!=null){let f={pixels:t},m={numChannels:n};return A.runKernel(pv,f,m)}let[c,u]=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],d;if(s)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||e)d=t.data;else if(i||o||a){if(Hg==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Hg=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Hg=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Hg.canvas.width=c,Hg.canvas.height=u,Hg.drawImage(t,0,0,c,u),d=Hg.getImageData(0,0,c,u).data}let p;if(n===4)p=new Int32Array(d);else{let f=c*u;p=new Int32Array(f*n);for(let m=0;m<f;m++)for(let g=0;g<n;++g)p[m*n+g]=d[m*4+g]}return p_(p,[u,c,n],"int32")}function sTe(t){return t!=null&&t.data instanceof Uint8Array}function aTe(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function lTe(t){return t!=null&&t.width!==0&&t.height!==0}function cTe(t){return aTe()&&!(t instanceof ImageBitmap)&&lTe(t)&&!sTe(t)}function uTe(t,n=3){return z(this,null,function*(){let e=null;if(Y().getBool("WRAP_TO_IMAGEBITMAP")&&cTe(t)){let r;try{r=yield createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?e=r:e=t}else e=t;return TY(e,n)})}function EY(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let n=t.rank===2?1:t.shape[2];if(n>4||n===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${n}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function dTe(t){let n=t?.alpha||1;if(n>1||n<0)throw new Error(`Alpha value ${n} is suppoed to be in range [0 - 1].`)}function pTe(t,n){return z(this,null,function*(){let e=b(t,"img","toPixels");if(!(t instanceof Rt)){let c=e;e=me(c,"int32"),c.dispose()}EY(e);let[r,o]=e.shape.slice(0,2),i=e.rank===2?1:e.shape[2],s=yield e.data(),a=e.dtype==="float32"?255:1,l=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let u=[0,0,0,255];for(let p=0;p<i;p++){let h=s[c*i+p];if(e.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(e.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);i===1?(u[0]=h*a,u[1]=h*a,u[2]=h*a):u[p]=h*a}let d=c*4;l[d+0]=Math.round(u[0]),l[d+1]=Math.round(u[1]),l[d+2]=Math.round(u[2]),l[d+3]=Math.round(u[3])}if(n!=null){SY||og(uv,A.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),SY=!0),n.width=o,n.height=r;let c=n.getContext("2d"),u=new ImageData(l,o,r);c.putImageData(u,0,0)}return e!==t&&e.dispose(),l})}function hTe(t,n,e){let r=b(t,"img","draw");if(!(t instanceof Rt)){let s=r;r=me(s,"int32"),s.dispose()}EY(r),dTe(e?.imageOptions);let o={image:r},i={canvas:n,options:e};A.runKernel(uv,o,i)}var fTe=I({fromPixels_:TY});var iB={};Qt(iB,{prepareAndValidate:()=>IY});function IY(t,n){let e=t.shape.length,r=n.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(n.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.shape[r-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${n.shape[r-1]} vs. ${e}`);if(Jt(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let o=n.shape,i=o[o.length-1],s=1;for(let d=0;d<o.length-1;++d)s*=o[d];let a=t.shape,l=o.slice();l.pop();let c=1;for(let d=i;d<e;++d)c*=a[d],l.push(a[d]);let u=[...Dc(t.shape).map(d=>d/c),1].slice(0,i);return[l,s,c,u]}var go={};Qt(go,{assertParamsValid:()=>gTe,computeFlatOffset:()=>kTe,computeOutShape:()=>wTe,getNormalizedAxes:()=>yTe,isSliceContinous:()=>xTe,maskToAxes:()=>vTe,parseSliceParams:()=>aB,sliceInfo:()=>_Te,startForAxis:()=>PY,startIndicesWithElidedDims:()=>OY,stopForAxis:()=>LY,stopIndicesWithElidedDims:()=>FY,stridesForAxis:()=>BY,stridesWithElidedDims:()=>NY});var sB=-2,mTe=-1;function gTe(t,n,e){let r=t.shape.length;F(r===n.length,()=>`Error in slice${r}D: Length of begin ${n} must match the rank of the array (${r}).`),F(r===e.length,()=>`Error in slice${r}D: Length of size ${e} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)F(n[o]+e[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${n[o]+e[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function vTe(t){let n=[],e=0;for(;t>0;)t&1&&n.push(e),t/=2,e++;return n}function wTe(t,n,e){let r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((n[o]-t[o])/e[o]);return r}function NY(t,n,e,r){let o=[...t];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<e;i++)i===0?o[n]=1:(o.splice(n,0,1),o.pop());return o}function AY(t,n,e){return e<=t?e:e-(n-1)}function RY(t,n){let e=[];for(let r=0;r<t;r++)e.push(n+r);return e}function yTe(t,n,e,r,o,i,s,a,l){let c=t.length,u=new Array(c),d=new Array(c),p=new Array(c);if(n.length&&e>0){let h=n[0],f=e+1;u=OY(s,h,f,r,t),d=FY(a,h,f,o,t),p=NY(i,h,f,t)}else for(let h=0;h<c;h++)u[h]=PY(s,r,i,t,h,l),d[h]=LY(a,o,i,t,h,l),p[h]=BY(i,h,l);return{begin:u,end:d,strides:p}}function OY(t,n,e,r,o){let i=[...o],s=RY(e,n);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{let l=AY(n,e,a),c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function FY(t,n,e,r,o){let i=[...o],s=RY(e,n);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{let l=AY(n,e,a),c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){let l=o[a];i[a]<0&&(i[a]+=l),i[a]=tv(0,i[a],o[a])}return i}function BY(t,n,e){let r=t[n];return(e&1<<n||r==null)&&(r=1),r}function PY(t,n,e,r,o,i){let s=n[o],a=e[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),s=tv(0,s,l-1),s}function LY(t,n,e,r,o,i){let s=n[o],a=e[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),a>0?s=tv(0,s,l):s=tv(-1,s,l-1),s}function xTe(t,n,e){let r=e.length;for(let o=0;o<e.length;o++)if(e[o]>1){r=o;break}for(let o=r+1;o<e.length;o++)if(n[o]>0||e[o]!==t[o])return!1;return!0}function kTe(t,n){let e=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)e+=t[r]*n[r];return e}function aB(t,n,e){let r,o=t.shape.length;typeof n=="number"?r=[n,...new Array(o-1).fill(0)]:n.length<o?r=n.concat(new Array(o-n.length).fill(0)):r=n.slice(),r.forEach(s=>{F(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return e==null?i=new Array(o).fill(-1):typeof e=="number"?i=[e,...new Array(o-1).fill(-1)]:e.length<o?i=e.concat(new Array(o-e.length).fill(-1)):i=e,i=i.map((s,a)=>s>=0?s:(F(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function _Te(t,n,e,r,o,i,s,a,l){let c;if(r==null?(c=new Array(n.length),c.fill(1)):c=r,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:n.slice(),end:e.slice(),strides:c.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let y=0;y<d.dims;y++)u&&(1<<y&a)!==0&&d.numAddAxisAfterEllipsis++,1<<y&s&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};bTe(d,p);let h=!0,f=!0,m=!0,g=[],v=[];for(let y=0;y<t.length;++y){if(p.strides[y]===0)throw Error(`strides[${y}] must be non-zero`);let k=!!(p.shrinkAxisMask&1<<y),_=t[y];if(_===-1){g.push(k?1:-1);continue}let S=[p.beginMask&1<<y,p.endMask&1<<y],E=[p.strides[y]>0?0:-1,p.strides[y]>0?_:_-1];if(k&&p.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&p.strides[y]===1;let N=!!(p.beginMask&1<<y&&p.endMask&1<<y);if(p.beginValid&&p.endValid){if(k){let M=p.begin[y]<0?_+p.begin[y]:p.begin[y];if(p.begin[y]=M,p.end[y]=p.begin[y]+1,M<0||M>=_)throw Error(`slice index ${p.begin[y]} of dimension ${y} out of bounds.`)}else p.begin[y]=DY(p.begin[y],0,p.strides[y],_,S,E),p.end[y]=DY(p.end[y],1,p.strides[y],_,S,E);let P=p.strides[y]===1&&p.begin[y]===0&&p.end[y]===_;h=h&&P,f=f&&(y===0&&p.strides[y]===1||P)}else h=h&&p.strides[y]===1&&N,f=f&&(y===0&&p.strides[y]===1||N);let B,D=!1;if(p.beginValid&&p.endValid?(B=p.end[y]-p.begin[y],D=!0):k?(B=1,D=!0):N&&_>=0&&(p.strides[y]<0?B=-_:B=_,D=!0),D){let P;B===0||B<0!=p.strides[y]<0?P=0:P=Math.trunc(B/p.strides[y])+(B%p.strides[y]!==0?1:0),g.push(P)}else g.push(-1)}for(let y=0;y<p.finalShapeGatherIndices.length;++y){let k=p.finalShapeGatherIndices[y];k>=0?v.push(g[k]):k===sB&&v.push(1)}return{finalShapeSparse:v.filter((y,k)=>p.finalShapeGatherIndices[k]!==sB),finalShape:v,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:p.begin,end:p.end,strides:p.strides}}function bTe(t,n){n.beginMask=0,n.endMask=0,n.shrinkAxisMask=0;let e=0;n.beginValid=t.begin!=null,n.endValid=t.end!=null,n.begin=new Array(n.dims),n.end=new Array(n.dims),n.strides=new Array(n.dims),n.finalShapeGatherIndices=[],n.finalShapeGatherIndicesSparse=[],n.inputShapeGatherIndicesSparse=new Array(n.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){let o=Math.min(n.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,n.dims);for(;e<o;e++)n.begin[e]=0,n.end[e]=0,n.strides[e]=1,n.beginMask|=1<<e,n.endMask|=1<<e,n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(-1),n.inputShapeGatherIndicesSparse[e]=r}else if(1<<r&t.newAxisMask)n.finalShapeGatherIndices.push(sB),n.finalShapeGatherIndicesSparse.push(-1);else{if(e===n.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${n.dims} dims, ${n.begin.length}.`);t.begin!=null&&(n.begin[e]=t.begin[r]),t.end!=null&&(n.end[e]=t.end[r]),n.strides[e]=t.strides[r],t.beginMask&1<<r&&(n.beginMask|=1<<e),t.endMask&1<<r&&(n.endMask|=1<<e),t.shrinkAxisMask&1<<r?(n.finalShapeGatherIndices.push(mTe),n.finalShapeGatherIndicesSparse.push(-1),n.shrinkAxisMask|=1<<e):(n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(r)),n.inputShapeGatherIndicesSparse[e]=r,e++}}function DY(t,n,e,r,o,i){if(o[n])return e>0?i[n]:i[n+1&1];{let s=t<0?r+t:t;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var FS="4.22.0";var Rv=class{static sgd(n){return new bu(n)}static momentum(n,e,r=!1){return new bf(n,e,r)}static rmsprop(n,e=.9,r=0,o=null,i=!1){return new Cf(n,e,r,o,i)}static adam(n=.001,e=.9,r=.999,o=null){return new kf(n,e,r,o)}static adadelta(n=.001,e=.95,r=null){return new yf(n,e,r)}static adamax(n=.002,e=.9,r=.999,o=null,i=0){return new _f(n,e,r,o,i)}static adagrad(n,e=.1){return new xf(n,e)}};var Mf=Rv;var CTe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function Ov(){return new Promise(t=>CTe(()=>t()))}var O={};Qt(O,{ERF_A1:()=>$Te,ERF_A2:()=>VTe,ERF_A3:()=>jTe,ERF_A4:()=>zTe,ERF_A5:()=>HTe,ERF_P:()=>LTe,PARALLELIZE_THRESHOLD:()=>BS,RowPartitionType:()=>Op,SELU_SCALE:()=>cB,SELU_SCALEALPHA:()=>lB,applyActivation:()=>jg,assertAndGetBroadcastShape:()=>Ot,assertAxesAreInnerMostDims:()=>w4e,assertParamsConsistent:()=>MTe,assignToTypedArray:()=>ZTe,axesAreInnerMostDims:()=>iF,calculateShapes:()=>fX,checkEinsumDimSizes:()=>tEe,checkPadOnDimRoundingMode:()=>Ln,combineLocations:()=>UZ,combineRaggedTensorToTensorShapes:()=>TTe,complexWithEvenIndex:()=>WTe,complexWithOddIndex:()=>qTe,computeConv2DInfo:()=>gg,computeConv3DInfo:()=>VZ,computeDefaultPad:()=>JO,computeDilation2DInfo:()=>vCe,computeOptimalWindowSize:()=>NTe,computeOutAndReduceShapes:()=>sF,computeOutShape:()=>STe,computePool2DInfo:()=>QO,computePool3DInfo:()=>wCe,convertConv2DDataFormat:()=>jZ,decodeEinsumEquation:()=>JTe,eitherStridesOrDilationsAreOne:()=>Wo,expandShapeToKeepDim:()=>Ba,exponent:()=>YTe,exponents:()=>XTe,fromStringArrayToUint8:()=>_Ee,fromUint8ToStringArray:()=>kEe,getAxesPermutation:()=>aF,getBroadcastDims:()=>HZ,getComplexWithIndex:()=>KTe,getEinsumComputePath:()=>nEe,getEinsumPermutation:()=>eEe,getFusedBiasGradient:()=>Vg,getFusedDyActivation:()=>$g,getImageCenter:()=>ATe,getInnerMostAxes:()=>y4e,getPermuted:()=>OTe,getRaggedRank:()=>ITe,getReductionAxes:()=>An,getReshaped:()=>RTe,getReshapedPermuted:()=>FTe,getRowPartitionTypesHelper:()=>ETe,getSliceBeginCoords:()=>BTe,getSliceSize:()=>PTe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>sEe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>aEe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>lEe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>dEe,getSparseReshapeInputOutputMismatchErrorMessage:()=>hEe,getSparseReshapeInputOutputMultipleErrorMessage:()=>pEe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>cEe,getSparseReshapeNegativeOutputDimErrorMessage:()=>uEe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>vEe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>fEe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>mEe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>gEe,getUndoAxesPermutation:()=>Wk,isIdentityPermutation:()=>rEe,log:()=>Z_e,mergeRealAndImagArrays:()=>UTe,prepareAndValidate:()=>IY,prepareSplitSize:()=>iEe,segment_util:()=>dB,shouldFuse:()=>zg,slice_util:()=>go,splitRealAndImagArrays:()=>GTe,stridesOrDilationsArePositive:()=>vu,tupleValuesAreOne:()=>ra,upcastType:()=>Lr,validateDefaultValueShape:()=>DTe,validateInput:()=>Dv,validateUpdateShape:()=>GF,warn:()=>fu});function MTe(t,n){let e=t[0].length;t.forEach((o,i)=>{F(o.length===e,()=>`Error in concat${e}D: rank of tensors[${i}] must be the same as the rank of the rest (${e})`)}),F(n>=0&&n<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);let r=t[0];t.forEach((o,i)=>{for(let s=0;s<e;s++)F(s===n||o[s]===r[s],()=>`Error in concat${e}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function STe(t,n){let e=t[0].slice();for(let r=1;r<t.length;r++)e[n]+=t[r][n];return e}var Op=(function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t})(Op||{});function TTe(t,n,e){let r=new Array;if(e==null&&n==null)return r;if(n==null)for(;r.length<t+e.length;)r.push(-1);else r=n.slice();if(e==null)return r;if(t+e.length!==r.length)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.rank = ${t+e.length}, but shape.rank = ${r.length}`);for(let o=1;o<e.length;++o){let i=e[o],s=r[r.length-e.length+o],a=r[s];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.shape[${o+t}] = ${i} but shape[${o+t}] = ${a}`)}else r[s]=i}return r}function ETe(t){let n={FIRST_DIM_SIZE:Op.FIRST_DIM_SIZE,VALUE_ROWIDS:Op.VALUE_ROWIDS,ROW_LENGTHS:Op.ROW_LENGTHS,ROW_SPLITS:Op.ROW_SPLITS,ROW_LIMITS:Op.ROW_LIMITS,ROW_STARTS:Op.ROW_STARTS},e=[];for(let r of t)if(r in n)e.push(n[r]);else break;return e}function ITe(t){return t.length===0?0:t[0]===Op.FIRST_DIM_SIZE?t.length-1:t.length}function DTe(t,n){if(t==null||n==null)return;let e=t.length,r=n.length;if(e>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${n}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(e,r-1);++o){let i=t[o],s=n[o+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${n} are incompatible: defaultValue.shape[${o-t.length}] = ${i} but ragged tensor input.flatValues.shape[${o-t.length}] = ${s}`)}}var BS=30;function NTe(t){return t<=BS?t:rv(t,Math.floor(Math.sqrt(t)))}function ATe(t,n,e){let r=e*(typeof t=="number"?t:t[0]),o=n*(typeof t=="number"?t:t[1]);return[r,o]}function RTe(t,n,e,r=!0){let o=[];if(r)o=o.concat(n.slice(0)),o.push(t[0]/e),o=o.concat(t.slice(1));else{o=o.concat(t[0]);let i=n.length;for(let s=0;s<i;++s)o=o.concat([t[s+1]/n[s],n[s]]);o=o.concat(t.slice(i+1))}return o}function OTe(t,n,e=!0){let r=[];if(e){r.push(n);for(let o=n+1;o<t;++o)o<=2*n?(r.push(o),r.push(o-(n+1))):r.push(o)}else{let o=[],i=[];for(let s=1;s<t;++s)s>=n*2+1||s%2===1?i.push(s):o.push(s);r.push(...o),r.push(0),r.push(...i)}return r}function FTe(t,n,e,r=!0){let o=[];r?o.push(t[0]/e):o.push(t[0]*e);for(let i=1;i<t.length;++i)i<=n.length?r?o.push(n[i-1]*t[i]):o.push(t[i]/n[i-1]):o.push(t[i]);return o}function BTe(t,n){let e=[0];for(let r=0;r<n;++r)e.push(t[r][0]);return e}function PTe(t,n,e){let r=t.slice(0,1);for(let o=0;o<e;++o)r.push(t[o+1]-n[o][0]-n[o][1]);return r}var lB=1.7580993408473768,cB=1.0507009873554805;var LTe=.3275911,$Te=.254829592,VTe=-.284496736,jTe=1.421413741,zTe=-1.453152027,HTe=1.061405429;function UTe(t,n){if(t.length!==n.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${n.length}.`);let e=new Float32Array(t.length*2);for(let r=0;r<e.length;r+=2)e[r]=t[r/2],e[r+1]=n[r/2];return e}function GTe(t){let n=new Float32Array(t.length/2),e=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r/2]=t[r],e[r/2]=t[r+1];return{real:n,imag:e}}function WTe(t){let n=Math.ceil(t.length/4),e=new Float32Array(n),r=new Float32Array(n);for(let o=0;o<t.length;o+=4)e[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:e,imag:r}}function qTe(t){let n=Math.floor(t.length/4),e=new Float32Array(n),r=new Float32Array(n);for(let o=2;o<t.length;o+=4)e[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:e,imag:r}}function KTe(t,n){let e=t[n*2],r=t[n*2+1];return{real:e,imag:r}}function ZTe(t,n,e,r){t[r*2]=n,t[r*2+1]=e}function XTe(t,n){let e=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){let i=(n?2:-2)*Math.PI*(o/t);e[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:e,imag:r}}function YTe(t,n,e){let r=(e?2:-2)*Math.PI*(t/n),o=Math.cos(r),i=Math.sin(r);return{real:o,imag:i}}var uB="->",QTe=/->/g,$Y=",",VY="...";function JTe(t,n){t=t.replace(/\s/g,"");let e=(t.length-t.replace(QTe,"").length)/uB.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${uB}").`);let[r,o]=t.split(uB);F(r.indexOf(VY)===-1,()=>`The ellipsis notation ("${VY}") is not supported yet.`);let i=r.split($Y),s=i.length;if(n!==s)throw new Error(`Expected ${s} input tensors, received ${n}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let p=0;p<o.length;++p){let h=o[p];if(!i.some(f=>f.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let p=0;p<r.length;++p){let h=r[p];a.indexOf(h)===-1&&h!==$Y&&a.push(h)}let l=new Array(i.length);for(let p=0;p<s;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let h=0;h<i[p].length;++h)l[p].push(a.indexOf(i[p][h]))}let c=a.length,u=o.length,d=[];for(let p=u;p<c;++p)d.push(p);return{allDims:a,summedDims:d,idDims:l}}function eEe(t,n){let e=new Array(t);e.fill(-1);for(let o=0;o<n.length;++o)e[n[o]]=o;let r=[];for(let o=0;o<t;++o)e[o]===-1&&r.push(o);return e=e.filter(o=>o!==-1),{permutationIndices:e,expandDims:r}}function tEe(t,n,e){let r=new Array(t);for(let o=0;o<e.length;++o){let i=e[o].shape;for(let s=0;s<n[o].length;++s)r[n[o][s]]===void 0?r[n[o][s]]=i[s]:F(r[n[o][s]]===i[s],()=>`Expected dimension ${r[n[o][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function nEe(t,n){let e=t,r=[],o=0;t.length===0&&e.push(-1),o=t.length+1;for(let s=0;s<o;++s)r.push([]);let i=[];for(let s=0;s<e.length;++s){let a=e[s],l=oEe(n,a);for(let c of l)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:e,steps:r}}function rEe(t){return t.every((n,e)=>n===e)}function oEe(t,n){let e=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(n)!==-1||n===-1)&&e.push(r);return e}function iEe(t,n,e=0){let r=[];if(typeof n=="number")F(t.shape[e]%n===0,()=>"Number of splits must evenly divide the axis."),r=new Array(n).fill(t.shape[e]/n);else{let o=n.reduce((s,a)=>(a===-1&&(s+=1),s),0);F(o<=1,()=>"There should be only one negative value in split array.");let i=n.indexOf(-1);if(i!==-1){let s=n.reduce((a,l)=>l>0?a+l:a);n[i]=t.shape[e]-s}F(t.shape[e]===n.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=n}return r}function sEe(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function aEe(t,n){return`indices(${t}, 0) is invalid: ${n} < 0`}function lEe(t,n,e){return`indices(${t}, 0) is invalid: ${n} >= ${e}`}function cEe(t,n){return`only one output dimension may be -1, not both ${t} and ${n}`}function uEe(t,n){return`size ${t} must be non-negative, not ${n}`}function dEe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function pEe(t,n){let e=Jt(t),r=Jt(n);return`Input to reshape is a SparseTensor with ${e}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${n}`}function hEe(t,n){let e=Jt(t),r=Jt(n);return`Input to reshape is a tensor with ${e} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${n}`}function fEe(){return"segment ids must be >= 0"}function mEe(){return"segment ids are not increasing"}function gEe(t,n){return`Segment id ${t} out of range [0, ${n}), possibly because segmentIds input is not sorted.`}function vEe(t,n,e){return`Bad: indices[${t}] == ${n} out of range [0, ${e})`}var dB={};Qt(dB,{collectGatherOpShapeInfo:()=>xEe,computeOutShape:()=>yEe,segOpComputeOptimalWindowSize:()=>wEe});function wEe(t,n){let e=!1,r;for(t<=BS?(r=t,e=!0):r=rv(t,Math.floor(Math.sqrt(t)));!e;)r>n||r===t?e=!0:r=rv(t,r+1);return r}function yEe(t,n,e){let r=[],o=t.length;for(let i=0;i<o;i++)i!==n?r.push(t[i]):r.push(e);return r}function xEe(t,n,e,r){let o=n.shape.length,i=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(e<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${e}).`);for(let d=0;d<r;++d)if(t.shape[d]!==n.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${n.shape[d]}.`);let s=t.shape[e],a=[],l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<e;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<o;d++)a.push(n.shape[d]);for(let d=e+1;d<i;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:a}}function kEe(t){try{return t.map(n=>wv(n))}catch(n){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${n}`)}}function _Ee(t){return t.map(n=>cf(n))}var Zo={};Qt(Zo,{nonMaxSuppressionV3Impl:()=>MS,nonMaxSuppressionV4Impl:()=>SS,nonMaxSuppressionV5Impl:()=>TS,whereImpl:()=>wS});fY();var PS={kernelName:"Abs",inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,sa(me(e,"float32"),-1))}}};var jY={kernelName:Nc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=jt(me(e,"float32")),o=Mn(Oe($e(1),r));return Wt(Be(t,o))}}}};var zY={kernelName:Ac,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=Mn(Oe(jt(me(e,"float32")),1));return Be(t,r)}}}};var HY={kernelName:"Add",inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ot(e.shape,r.shape);return{a:()=>{let a=t,l=An(e.shape,o);return l.length>0&&(a=Ve(a,l)),$(a,e.shape)},b:()=>{let a=t,l=An(r.shape,o);return l.length>0&&(a=Ve(a,l)),$(a,r.shape)}}}};var UY={kernelName:Sd,saveAllInputs:!0,gradFunc:(t,n)=>{let e={};return n.forEach((r,o)=>{e[o]=()=>t.clone()}),e}};var GY={kernelName:Td,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>at(e)}}};var WY={kernelName:Ed,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>at(e)}}};var qY={kernelName:Oc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Be(t,Mn(Oe($e(1),jt(me(e,"float32")))))}}};var KY={kernelName:Fc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=Mn(fe($e(1),jt(me(e,"float32"))));return Be(t,r)}}}};var ZY={kernelName:Lc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ot(e.shape,r.shape);return{a:()=>{let a=fe(jt(e),jt(r)),l=L(t,Be(r,a)),c=An(e.shape,o);return c.length>0&&(l=Ve(l,c)),$(l,e.shape)},b:()=>{let a=fe(jt(e),jt(r)),l=Wt(L(t,Be(e,a))),c=An(r.shape,o);return c.length>0&&(l=Ve(l,c)),$(l,r.shape)}}}};var XY={kernelName:Bc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Be(t,fe(jt(me(e,"float32")),1))}}};var YY={kernelName:Pc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Be(t,Oe($e(1),jt(me(e,"float32"))))}}};function bEe(t,n,e,r,o,i){let s=b(t,"dy","avgPool3dGrad"),a=b(n,"input","avgPool3dGrad"),l=s,c=a,u=!1;a.rank===4&&(u=!0,l=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=$(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),F(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),F(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Ln("avgPool3dGrad",o,i);let d={dy:l,input:c},p={filterSize:e,strides:r,pad:o,dimRoundingMode:i},h=A.runKernel(Jm,d,p);return u?$(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var QY=I({avgPool3dGrad_:bEe});var JY={kernelName:Dd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{filterSize:o,strides:i,pad:s,dimRoundingMode:a}=e;return{x:()=>QY(t,r,o,i,s,a)}}};function CEe(t,n,e,r,o){let i=b(t,"dy","avgPoolGrad"),s=b(n,"input","avgPoolGrad");F(s.rank===i.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${i.rank})`);let a=s,l=i,c=!1;s.rank===3&&(c=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=$(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),F(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);let u={dy:l,input:a},d={filterSize:e,strides:r,pad:o},p=A.runKernel(Qm,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var eQ=I({avgPoolGrad_:CEe});var tQ={kernelName:Id,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{filterSize:o,strides:i,pad:s}=e;return{x:()=>eQ(t,r,o,i,s)}}};var nQ={kernelName:Nd,inputsToSave:["a","b"],gradFunc:(t,n,e)=>{let[r,o]=n,{transposeA:i,transposeB:s}=e;return!i&&!s?{a:()=>Pt(t,o,!1,!0),b:()=>Pt(r,t,!0,!1)}:!i&&s?{a:()=>Pt(t,o,!1,!1),b:()=>Pt(t,r,!0,!1)}:i&&!s?{a:()=>Pt(o,t,!1,!0),b:()=>Pt(r,t,!1,!1)}:{a:()=>Pt(o,t,!0,!0),b:()=>Pt(t,r,!0,!0)}}};var rQ={kernelName:Ad,gradFunc:(t,n,e)=>{let{blockShape:r,crops:o}=e;return{x:()=>Ep(t,r,o)}}};var oQ={kernelName:CO,gradFunc:(t,n,e)=>{let r=e,o=r.inputShape,i=r.shape,s=Array.from(i);for(let l=o.length-1;l>=0;l--)if(o[l]===i[l])s[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${i}].`);let a=[];for(let l=0;l<s.length;l++)s[l]>1&&a.push(l);return{x:()=>Ve(t,a,!0)}}};var iQ={kernelName:Ml,gradFunc:t=>({x:()=>t.clone()})};var sQ={kernelName:$c,gradFunc:t=>({x:()=>at(t)})};var aQ={kernelName:Vc,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{clipValueMin:o,clipValueMax:i}=e;return{x:()=>En(No(gi(r,o),is(r,i)),t,at(t))}}};var lQ={kernelName:Rd,inputsToSave:["x"],gradFunc:PS.gradFunc};var cQ={kernelName:Od,saveAllInputs:!0,gradFunc:(t,n,e)=>{let r=n.map(l=>l.shape),{axis:o}=e,i=ro(o,n[0].shape)[0],s=r.map(l=>l[i]);return Gr(t,s,i).map(l=>()=>l)}};var uQ={kernelName:Fd,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let[r,o]=n,{dilations:i,strides:s,pad:a,dataFormat:l}=e;return F(ra(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>Sv(r.shape,t,o,s,a,l),filter:()=>Av(r,t,o.shape,s,a,l)}}};var dQ={kernelName:Bd,inputsToSave:["dy","filter"],gradFunc:(t,n,e)=>{let[r,o]=n,{strides:i,pad:s,dataFormat:a,dimRoundingMode:l}=e;return{dy:()=>Bi(t,o,i,s,a,1,l),filter:()=>Av(t,r,o.shape,i,s,a,l)}}};function MEe(t,n,e,r,o){let i=t;t.rank===4&&(i=$(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=n;s.rank===4&&(s=$(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]])),F(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),F(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),F(e.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${e}.`),F(i.shape[4]===e[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${e[3]}.`),F(s.shape[4]===e[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${e[4]}).`);let a={x:i,dy:s},l={strides:r,pad:o,filterShape:e};return A.runKernel(o0,a,l)}var pQ=I({conv3DBackpropFilter_:MEe});var hQ={kernelName:Pd,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let{dilations:r,strides:o,pad:i}=e;F(ra(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[s,a]=n;return{x:()=>dS(s.shape,t,a,o,i),filter:()=>pQ(s,t,a.shape,o,i)}}};var fQ={kernelName:"Cos",inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(Wt(Ng(me(e,"float32"))),t)}}};var mQ={kernelName:jc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(Ag(me(e,"float32")),t)}}};var gQ={kernelName:Ld,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{axis:o,exclusive:i,reverse:s}=e;return{x:()=>{let a=aF([o],r.rank),l=xg(t,o,i,!s);return a!=null&&(l=Lt(l,a)),l}}}};var vQ={kernelName:$d,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let{dilations:r,strides:o,pad:i,dimRoundingMode:s}=e,a=r??[1,1];F(ra(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);let[l,c]=n;return F(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),F(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),F(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),F(Wo(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),Ln("depthwiseConv2d",i,s),{x:()=>_S(l.shape,t,c,o,i,a,s),filter:()=>kS(l,t,c.shape,o,i,a,s)}}};var wQ={kernelName:Vd,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let[r,o]=n,i={x:r,filter:o,dy:t},s={x:r,filter:o,dy:t};return{x:()=>A.runKernel(lv,i,e),filter:()=>A.runKernel(cv,s,e)}}};var yQ={kernelName:"Elu",outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n,r={dy:t,y:e};return{x:()=>A.runKernel(f0,r)}}};var xQ={kernelName:"Erf",inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n,r=L(cr(Wt(jt(e))),2/Math.sqrt(Math.PI));return{x:()=>L(t,r)}}};var kQ={kernelName:"Exp",outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,e)}}};var _Q={kernelName:zd,inputsToSave:["input"],gradFunc:(t,n)=>{let[e]=n;return{input:()=>$(t,e.shape)}}};var bQ={kernelName:Hc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,cr(e))}}};var CQ={kernelName:Uc,gradFunc:t=>({x:()=>at(t)})};var MQ={kernelName:Gc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ot(e.shape,r.shape);return{a:()=>{let a=Be(t,me(r,"float32")),l=An(e.shape,o);return l.length>0?$(Ve(a,l),e.shape):a},b:()=>{let a=L(t,me(e,"float32")),l=An(r.shape,o);l.length>0&&(a=$(Ve(a,l),r.shape));let c=jt(r);return Wt(Be(a,me(c,"float32")))}}}};var SQ={kernelName:Hd,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,n,e)=>{let{varianceEpsilon:r}=e,[o,i,s,a]=n,l=a??$e(1),c=An(i.shape,o.shape),u=[];if(i.rank===1){for(let k=0;k<o.shape.length-1;++k)u.push(o.shape[k]);u.push(1)}let d=Oe(o,i),p=L(t,l),h=Eg(fe(s,$e(r))),f=L(L(L(h,h),h),$e(-.5));return{x:()=>i.rank===1?$(L(L(t,Do($(h,[1,1,1,i.shape[0]]),u)),l),o.shape):$(L(L(t,h),l),o.shape),mean:()=>{let k=L(L(h,$e(-1)),p);return i.rank===1&&(k=Ve(k,c)),$(k,i.shape)},variance:()=>{let k=L(L(f,d),p);return i.rank===1&&(k=Ve(k,c)),$(k,i.shape)},scale:()=>{let k=L(d,h),_=L(t,k);return i.rank===1&&(_=Ve(_,c)),$(_,i.shape)},offset:()=>{let k=t;return i.rank===1&&(k=Ve(k,c)),$(k,i.shape)}}}};var IQ={kernelName:Ud,inputsToSave:["x","indices"],gradFunc:(t,n,e)=>{let[r,o]=n,{axis:i,batchDims:s}=e,a=ro(i,r.shape)[0],l=(c,u,d)=>()=>{let p=c.shape,h=u.size,f=p.slice(0,a),m=f.length,g=p.slice(i,p.length).slice(1),v=g.length,w=TQ(0,m),y=TQ(m+1,m+1+v),k=EQ([f,[h],g]),_=$(d,k),S=$(u,[h]),E=EQ([[m],w,y]),N=Lt(_,E),B=Lg(N,S,c.shape[a]),D=Wk(E);return B=Lt(B,D),B};if(s===1){let c=r.shape[0],u=r.split(c,0);return{x:()=>Xn(u.map((h,f)=>l(h,o.slice(f,1),t.slice(f,1))())).reshape(r.shape),indices:()=>o}}else return{x:l(r,o,t),indices:()=>o}}};function TQ(t,n){let e=[];for(let r=t;r<n;++r)e.push(r);return e}function EQ(t){let n=[];for(let e=0;e<t.length;++e)for(let r=0;r<t[e].length;++r)n.push(t[e][r]);return n}var DQ={kernelName:Wc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n;return{a:()=>at(e),b:()=>at(r)}}};var NQ={kernelName:Sl,gradFunc:t=>({x:()=>me(t,"float32")})};var AQ={kernelName:qc,gradFunc:t=>({x:()=>at(t)})};var RQ={kernelName:Kc,gradFunc:t=>({x:()=>at(t)})};var OQ={kernelName:Zc,gradFunc:t=>({x:()=>at(t)})};var FQ={kernelName:Gd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{alpha:o}=e,i=Zn(r,0);return{x:()=>En(i,t,L(t,o))}}};var BQ={kernelName:Xc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Be(t,fe(e,1))}}};var PQ={kernelName:"Log",inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Be(t,me(e,"float32"))}}};var LQ={kernelName:MO,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r]=n,{axis:o}=e;return{logits:()=>{let s=cr(r);return Oe(t,L(Ve(t,o,!0),s))}}}};function SEe(t,n,e,r=5,o=1,i=1,s=.5){let a={x:t,y:n,dy:e},l={depthRadius:r,bias:o,alpha:i,beta:s};return A.runKernel(_0,a,l)}var $Q=I({localResponseNormalizationBackprop_:SEe});var VQ={kernelName:"LRN",inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r,o]=n,{depthRadius:i,bias:s,alpha:a,beta:l}=e;return{x:()=>$Q(r,o,t,i,s,a,l)}}};function LS(t,n,e,r){return n.rank<e.rank&&(n=$(n,Ba(n.shape,r))),t.rank<e.rank&&(t=$(t,Ba(t.shape,r))),{x:()=>L(t,me(Io(e,n),t.dtype))}}var pB={kernelName:"Max",inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let r=e,{reductionIndices:o}=r,i=n[0],s=n[1],a=ro(o,i.shape),l=LS(t,s,i,a);return{x:()=>l.x()}}};var jQ={kernelName:Yc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n;return{a:()=>L(t,me(gi(e,r),"float32")),b:()=>L(t,me(xu(e,r),"float32"))}}};function TEe(t,n,e,r,o,i,s){let a=b(t,"dy","maxPool3dGrad"),l=b(n,"input","maxPool3dGrad"),c=b(e,"output","maxPool3dGrad"),u=a,d=l,p=c,h=!1;l.rank===4&&(h=!0,u=$(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=$(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=$(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),F(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),F(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),F(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),Ln("maxPool3dGrad",i,s);let f={dy:u,input:d,output:p},m={filterSize:r,strides:o,pad:i,dimRoundingMode:s},g=A.runKernel(M0,f,m);return h?$(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}var zQ=I({maxPool3dGrad_:TEe});var HQ={kernelName:qd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r,o]=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=e;return{x:()=>zQ(t,r,o,i,s,a,l)}}};function EEe(t,n,e,r,o,i,s){let a=b(t,"dy","maxPoolGrad"),l=b(n,"input","maxPoolGrad"),c=b(e,"output","maxPoolGrad");F(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),F(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),F(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Ln("maxPoolGrad",i,s);let u={dy:a,input:l,output:c},d={filterSize:r,strides:o,pad:i,dimRoundingMode:s};return A.runKernel(C0,u,d)}var UQ=I({maxPoolGrad_:EEe});var GQ={kernelName:Wd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r,o]=n,{filterSize:i,strides:s,pad:a}=e;return{x:()=>UQ(t,r,o,i,s,a)}}};var WQ={kernelName:Kd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{axis:o}=e,i=ro(o,r.shape),a=sF(r.shape,i)[1],l=Jt(a);return{x:()=>{let u=r.shape.slice();i.forEach(h=>{u[h]=1});let d=$(t,u);return Be(L(d,Tr(r.shape,"float32")),l)}}}};var qQ={kernelName:"Min",inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let r=e,{axis:o}=r,[i,s]=n,a=ro(o,i.shape),l=LS(t,s,i,a);return{x:()=>l.x()}}};var KQ={kernelName:Qc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n;return{a:()=>L(t,me(is(e,r),"float32")),b:()=>L(t,me(Zn(e,r),"float32"))}}};var ZQ={kernelName:Zd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let r=n[0],{paddings:o}=e,i=o.map(s=>s[0]);return{x:()=>Tt(t,i,r.shape)}}};var XQ={kernelName:"Mod",inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ot(e.shape,r.shape);return{a:()=>{let a=An(e.shape,o);return a.length>0?$(Ve(t,a),e.shape):t},b:()=>{let a=L(t,Wt(Ll(Be(e,r)))),l=An(r.shape,o);return l.length>0?$(Ve(a,l),r.shape):a}}}};var YQ={kernelName:Jc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ot(e.shape,r.shape);return{a:()=>{let a=L(t,me(r,"float32")),l=An(e.shape,o);return l.length>0?$(Ve(a,l),e.shape):a},b:()=>{let a=L(t,me(e,"float32")),l=An(r.shape,o);return l.length>0?$(Ve(a,l),r.shape):a}}}};var QQ={kernelName:"Neg",gradFunc:t=>({x:()=>Wt(t)})};var JQ={kernelName:Yd,inputsToSave:["indices"],gradFunc:(t,n)=>{let e=n[0];return{indices:()=>On(e.shape,"float32")}}};var eJ={kernelName:Xd,gradFunc:t=>({x:()=>at(t)})};var tJ={kernelName:Qd,saveAllInputs:!0,gradFunc:(t,n,e)=>{let{axis:r}=e;return Wr(t,r).map(i=>()=>i)}};var hB={kernelName:Jd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let r=n[0],{paddings:o}=e,i=o.map(s=>s[0]);return{x:()=>Tt(t,i,r.shape)}}};var nJ={kernelName:"Pow",inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,n)=>{let[e,r,o]=n,i=e,s=r,a=Ot(i.shape,s.shape);return{a:()=>{let u=me(s,"float32"),d=L(t,L(u,qo(i,Oe(u,$e(1))))),p=An(i.shape,a);return p.length>0&&(d=Ve(d,p)),$(d,i.shape)},b:()=>{let u=Zn(i,0),d=En(u,mo(i),at(i)),p=L(t,L(o,d)),h=An(s.shape,a);return h.length>0&&(p=Ve(p,h)),$(p,s.shape)}}}};var rJ={kernelName:ep,inputsToSave:["x","alpha"],gradFunc:(t,n)=>{let[e,r]=n,o=Zn(e,0);return{x:()=>En(o,t,L(t,r)),alpha:()=>{let i=En(o,at(t),L(t,e)),s=An(r.shape,t.shape);return s.length>0&&(i=Ve(i,s)),$(i,r.shape)}}}};function IEe(t,n,e){let r=t.shape.slice();r[e]=1;let o=$(n,r),i=ff(t,e,!0,!1),s=ff(t,e,!0,!0),a=L(i,s);return L(o,a)}function DEe(t,n,e){let r=t.shape.length,o=r-e.length,i=O.getAxesPermutation(e,r),s=t;i!=null&&(s=Lt(t,i));let a=s.shape.slice(),c=a.splice(r-e.length,e.length).reduce((p,h)=>p*h,1);a.push(c);let u=s.reshape(a),d=IEe(u,n,o);if(d=d.reshape(s.shape),i!=null){let p=O.getUndoAxesPermutation(i);d=Lt(d,p)}return d}var oJ={kernelName:tp,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{axis:o}=e,i=[];return o==null?i=r.shape.map((s,a)=>a):typeof o=="number"?i=[o]:i=o,{x:()=>DEe(r,t,i)}}};var iJ={kernelName:zc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ot(e.shape,r.shape);return{a:()=>{let a=Be(t,me(r,"float32")),l=An(e.shape,o);return l.length>0?$(Ve(a,l),e.shape):a},b:()=>{let a=L(t,me(e,"float32")),l=An(r.shape,o);l.length>0&&(a=$(Ve(a,l),r.shape));let c=jt(r);return Wt(Be(a,me(c,"float32")))}}}};var sJ={kernelName:eu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Be(t,Wt(jt(e)))}}};var aJ={kernelName:nu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n,r=L(is(e,6),sa(e));return{x:()=>L(t,me(r,"float32"))}}};var lJ={kernelName:tu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,me(sa(e),"float32"))}}};var cJ={kernelName:np,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$(t,e.shape)}}};var uJ={kernelName:op,inputsToSave:["images"],gradFunc:(t,n,e)=>{let[r]=n,o={dy:t,images:r};return{images:()=>A.runKernel($0,o,e)}}};var dJ={kernelName:rp,inputsToSave:["images"],gradFunc:(t,n,e)=>{let[r]=n,o={dy:t,images:r};return{images:()=>A.runKernel(L0,o,e)}}};var pJ={kernelName:ip,gradFunc:(t,n,e)=>{let{dims:r}=e,o=ro(r,t.shape);return{x:()=>Ur(t,o)}}};var hJ={kernelName:ru,gradFunc:t=>({x:()=>at(t)})};var fJ={kernelName:ou,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Wt(Be(t,L(qo(e,1.5),2)))}}};var mJ={kernelName:sp,inputsToSave:["condition"],gradFunc:(t,n)=>{let[e]=n;return{condition:()=>me(at(e),"float32"),t:()=>L(t,me(e,t.dtype)),e:()=>L(t,me(Sp(e),t.dtype))}}};var gJ={kernelName:iu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let r=Zn(e,$e(0)),o=$e(lB),i=$e(cB),s=L(t,i),a=L(L(t,o),cr(me(e,"float32")));return En(r,s,a)}}}};var vJ={kernelName:lu,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,L(e,Oe($e(1),e)))}}};var wJ={kernelName:au,gradFunc:t=>({x:()=>at(t)})};var yJ={kernelName:"Sin",inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(xp(me(e,"float32")),t)}}};var xJ={kernelName:su,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(yg(me(e,"float32")),t)}}};var kJ={kernelName:ap,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{begin:o,size:i}=e,s=r.shape,[a,l]=aB(r,o,i),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],s[u]-a[u]-l[u]]);return{x:()=>wi(t,c)}}};var _J={kernelName:up,outputsToSave:[!0],gradFunc:(t,n,e)=>{let[r]=n,{dim:o}=e,i=!0,s=L(t,r);return{logits:()=>Oe(s,L(Ve(s,[o],i),r))}}};var bJ={kernelName:cu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,ai(e))}}};var fB={kernelName:lp,gradFunc:(t,n,e)=>{let{blockShape:r,paddings:o}=e;return{x:()=>yp(t,r,o)}}};var mB={kernelName:cp,gradFunc:(t,n,e)=>{let{axis:r}=e;return{x:()=>hn(t,r)}}};var CJ={kernelName:uu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Be(t,L(Mn(me(e,"float32")),2))}}};var MJ={kernelName:Z0,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(t,L(me(e,"float32"),2))}}};var SJ={kernelName:du,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=$e(2);return{a:()=>L(t,L(o,Oe(e,r))),b:()=>L(t,L(o,Oe(r,e)))}}};var TJ={kernelName:hu,gradFunc:t=>({x:()=>at(t)})};var EJ={kernelName:"Sub",inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,r]=n,o=Ot(e.shape,r.shape);return{a:()=>{let a=t,l=An(e.shape,o);return l.length>0&&(a=Ve(a,l)),$(a,e.shape)},b:()=>{let a=t,l=An(r.shape,o);return l.length>0&&(a=Ve(a,l)),$(Wt(a),r.shape)}}}};var IJ={kernelName:"Sum",inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,o=r.shape.slice(),{axis:i}=e;ro(i,r.shape).forEach(c=>{o[c]=1});let a=$(t,o),l=L(a,Tr(r.shape,"float32"));return{x:()=>l}}};var DJ={kernelName:"Tan",inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Be(t,jt(xp(e)))}}};var NJ={kernelName:pu,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>L(Oe($e(1),jt(e)),t)}}};var AJ={kernelName:Tl,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[r]=n,{reps:o}=e;return{x:()=>{let s=at(r);if(r.rank===1)for(let a=0;a<o[0];++a)s=fe(s,Tt(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)s=fe(s,Tt(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)s=fe(s,Tt(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)for(let u=0;u<o[3];++u)s=fe(s,Tt(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return s}}}};var RJ={kernelName:El,gradFunc:(t,n,e)=>{let r=e,{perm:o}=r,i=Wk(o);return{x:()=>Lt(t,i)}}};var OJ={kernelName:dp,gradFunc:(t,n,e)=>{let r=e,{axis:o}=r;return{value:()=>Xn(t,o)}}};var FJ={kernelName:pp,inputsToSave:["segmentIds"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>NEe(t,e)}}};function NEe(t,n){let e=Pi(n,at(n)),r=$l(t,e),o=gi(n,$e(0,"int32")),i=r.rank-o.rank;for(let a=0;a<i;++a)o=ur(o,a+1);o=No(o,Tr(r.shape,"bool"));let s=at(r);return En(o,r,s)}var BJ={kernelName:hp,gradFunc:t=>({x:()=>at(t)})};var AEe=[PS,jY,zY,HY,UY,GY,WY,qY,KY,ZY,XY,YY,JY,tQ,nQ,rQ,oQ,iQ,sQ,aQ,lQ,cQ,dQ,uQ,hQ,fQ,mQ,gQ,vQ,wQ,iJ,yQ,xQ,kQ,_Q,bQ,MQ,CQ,SQ,IQ,DQ,NQ,AQ,RQ,OQ,FQ,BQ,PQ,LQ,VQ,pB,pB,jQ,HQ,GQ,WQ,qQ,KQ,ZQ,XQ,YQ,QQ,JQ,eJ,tJ,hB,hB,nJ,rJ,oJ,sJ,aJ,lJ,cJ,uJ,dJ,pJ,hJ,fJ,mJ,gJ,vJ,wJ,yJ,xJ,kJ,_J,bJ,fB,fB,mB,mB,CJ,SJ,MJ,TJ,EJ,IJ,DJ,NJ,AJ,RJ,OJ,FJ,BJ];for(let t of AEe)SO(t);U().prototype.abs=function(){return this.throwIfDisposed(),Pn(this)};U().prototype.acos=function(){return this.throwIfDisposed(),xk(this)};U().prototype.acosh=function(){return this.throwIfDisposed(),kk(this)};U().prototype.add=function(t){return this.throwIfDisposed(),fe(this,t)};U().prototype.all=function(t,n){return this.throwIfDisposed(),mg(this,t,n)};U().prototype.any=function(t,n){return this.throwIfDisposed(),hf(this,t,n)};U().prototype.argMax=function(t){return this.throwIfDisposed(),Rl(this,t)};U().prototype.argMin=function(t){return this.throwIfDisposed(),_k(this,t)};U().prototype.asScalar=function(){return this.throwIfDisposed(),F(this.size===1,()=>"The array must have only 1 element."),$(this,[])};U().prototype.asType=function(t){return this.throwIfDisposed(),me(this,t)};U().prototype.as1D=function(){return this.throwIfDisposed(),$(this,[this.size])};U().prototype.as2D=function(t,n){return this.throwIfDisposed(),$(this,[t,n])};U().prototype.as3D=function(t,n,e){return this.throwIfDisposed(),$(this,[t,n,e])};U().prototype.as4D=function(t,n,e,r){return this.throwIfDisposed(),$(this,[t,n,e,r])};U().prototype.as5D=function(t,n,e,r,o){return this.throwIfDisposed(),$(this,[t,n,e,r,o])};U().prototype.asin=function(){return this.throwIfDisposed(),bk(this)};U().prototype.asinh=function(){return this.throwIfDisposed(),Ck(this)};U().prototype.atan=function(){return this.throwIfDisposed(),Mk(this)};U().prototype.atan2=function(t){return this.throwIfDisposed(),Sk(this,t)};U().prototype.atanh=function(){return this.throwIfDisposed(),Tk(this)};U().prototype.avgPool=function(t,n,e,r){return this.throwIfDisposed(),wp(this,t,n,e,r)};U().prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),yp(this,t,n)};U().prototype.batchNorm=function(t,n,e,r,o){return this.throwIfDisposed(),Ol(this,t,n,e,r,o)};U().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Fl(this,t)};U().prototype.cast=function(t){return this.throwIfDisposed(),me(this,t)};U().prototype.ceil=function(){return this.throwIfDisposed(),Fk(this)};U().prototype.clipByValue=function(t,n){return this.throwIfDisposed(),ho(this,t,n)};U().prototype.concat=function(t,n){return this.throwIfDisposed(),t instanceof Rt&&(t=[t]),hn([this,...t],n)};U().prototype.conv1d=function(t,n,e,r,o,i){return this.throwIfDisposed(),vg(this,t,n,e,r,o,i)};U().prototype.conv2dTranspose=function(t,n,e,r,o){return this.throwIfDisposed(),wg(this,t,n,e,r,o)};U().prototype.conv2d=function(t,n,e,r,o,i){return this.throwIfDisposed(),Bi(this,t,n,e,r,o,i)};U().prototype.cos=function(){return this.throwIfDisposed(),xp(this)};U().prototype.cosh=function(){return this.throwIfDisposed(),yg(this)};U().prototype.cumprod=function(t,n,e){return this.throwIfDisposed(),ff(this,t,n,e)};U().prototype.cumsum=function(t,n,e){return this.throwIfDisposed(),xg(this,t,n,e)};U().prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),zk(this,t,n)};U().prototype.depthwiseConv2d=function(t,n,e,r,o,i){return this.throwIfDisposed(),Bl(this,t,n,e,r,o,i)};U().prototype.dilation2d=function(t,n,e,r,o){return this.throwIfDisposed(),Hk(this,t,n,e,r,o)};U().prototype.divNoNan=function(t){return this.throwIfDisposed(),Uk(this,t)};U().prototype.div=function(t){return this.throwIfDisposed(),Be(this,t)};U().prototype.dot=function(t){return this.throwIfDisposed(),Gk(this,t)};U().prototype.elu=function(){return this.throwIfDisposed(),Pl(this)};U().prototype.equal=function(t){return this.throwIfDisposed(),Io(this,t)};U().prototype.erf=function(){return this.throwIfDisposed(),kg(this)};U().prototype.euclideanNorm=function(t,n){return this.throwIfDisposed(),qk(this,t,n)};U().prototype.exp=function(){return this.throwIfDisposed(),cr(this)};U().prototype.expandDims=function(t){return this.throwIfDisposed(),ur(this,t)};U().prototype.expm1=function(){return this.throwIfDisposed(),Kk(this)};U().prototype.fft=function(){return this.throwIfDisposed(),Np(this)};U().prototype.flatten=function(){return this.throwIfDisposed(),$(this,[this.size])};U().prototype.floor=function(){return this.throwIfDisposed(),Ll(this)};U().prototype.floorDiv=function(t){return this.throwIfDisposed(),fg(this,t)};U().prototype.gather=function(t,n,e){return this.throwIfDisposed(),$l(this,t,n,e)};U().prototype.greaterEqual=function(t){return this.throwIfDisposed(),gi(this,t)};U().prototype.greater=function(t){return this.throwIfDisposed(),Zn(this,t)};U().prototype.ifft=function(){return this.throwIfDisposed(),_u(this)};U().prototype.irfft=function(){return this.throwIfDisposed(),Fg(this)};U().prototype.isFinite=function(){return this.throwIfDisposed(),Zk(this)};U().prototype.isInf=function(){return this.throwIfDisposed(),Xk(this)};U().prototype.isNaN=function(){return this.throwIfDisposed(),Yk(this)};U().prototype.leakyRelu=function(t){return this.throwIfDisposed(),bp(this,t)};U().prototype.lessEqual=function(t){return this.throwIfDisposed(),is(this,t)};U().prototype.less=function(t){return this.throwIfDisposed(),xu(this,t)};U().prototype.localResponseNormalization=function(t,n,e,r){return this.throwIfDisposed(),Qk(this,t,n,e,r)};U().prototype.logSigmoid=function(){return this.throwIfDisposed(),e_(this)};U().prototype.logSoftmax=function(t){return this.throwIfDisposed(),_g(this,t)};U().prototype.logSumExp=function(t,n){return this.throwIfDisposed(),Mp(this,t,n)};U().prototype.log=function(){return this.throwIfDisposed(),mo(this)};U().prototype.log1p=function(){return this.throwIfDisposed(),Cp(this)};U().prototype.logicalAnd=function(t){return this.throwIfDisposed(),No(this,t)};U().prototype.logicalNot=function(){return this.throwIfDisposed(),Sp(this)};U().prototype.logicalOr=function(t){return this.throwIfDisposed(),bg(this,t)};U().prototype.logicalXor=function(t){return this.throwIfDisposed(),t_(this,t)};U().prototype.matMul=function(t,n,e){return this.throwIfDisposed(),Pt(this,t,n,e)};U().prototype.maxPool=function(t,n,e,r){return this.throwIfDisposed(),Tp(this,t,n,e,r)};U().prototype.max=function(t,n){return this.throwIfDisposed(),fo(this,t,n)};U().prototype.maximum=function(t){return this.throwIfDisposed(),Pi(this,t)};U().prototype.mean=function(t,n){return this.throwIfDisposed(),Rn(this,t,n)};U().prototype.min=function(t,n){return this.throwIfDisposed(),wu(this,t,n)};U().prototype.minimum=function(t){return this.throwIfDisposed(),As(this,t)};U().prototype.mirrorPad=function(t,n){return this.throwIfDisposed(),r_(this,t,n)};U().prototype.mod=function(t){return this.throwIfDisposed(),o_(this,t)};U().prototype.mul=function(t){return this.throwIfDisposed(),L(this,t)};U().prototype.neg=function(){return this.throwIfDisposed(),Wt(this)};U().prototype.norm=function(t,n,e){return this.throwIfDisposed(),yu(this,t,n,e)};U().prototype.notEqual=function(t){return this.throwIfDisposed(),La(this,t)};U().prototype.oneHot=function(t,n=1,e=0){return this.throwIfDisposed(),Vl(this,t,n,e)};U().prototype.onesLike=function(){return this.throwIfDisposed(),oo(this)};U().prototype.pad=function(t,n){return this.throwIfDisposed(),wi(this,t,n)};U().prototype.pool=function(t,n,e,r,o,i){return this.throwIfDisposed(),i_(this,t,n,e,r,o,i)};U().prototype.pow=function(t){return this.throwIfDisposed(),qo(this,t)};U().prototype.prelu=function(t){return this.throwIfDisposed(),Ip(this,t)};U().prototype.prod=function(t,n){return this.throwIfDisposed(),s_(this,t,n)};U().prototype.reciprocal=function(){return this.throwIfDisposed(),l_(this)};U().prototype.relu=function(){return this.throwIfDisposed(),Ao(this)};U().prototype.relu6=function(){return this.throwIfDisposed(),Sg(this)};U().prototype.reshapeAs=function(t){return this.throwIfDisposed(),$(this,t.shape)};U().prototype.reshape=function(t){return this.throwIfDisposed(),$(this,t)};U().prototype.resizeBilinear=function(t,n,e){return this.throwIfDisposed(),ES(this,t,n,e)};U().prototype.resizeNearestNeighbor=function(t,n,e){return this.throwIfDisposed(),IS(this,t,n,e)};U().prototype.reverse=function(t){return this.throwIfDisposed(),Ur(this,t)};U().prototype.rfft=function(){return this.throwIfDisposed(),Ap(this)};U().prototype.round=function(){return this.throwIfDisposed(),Tg(this)};U().prototype.rsqrt=function(){return this.throwIfDisposed(),Eg(this)};U().prototype.selu=function(){return this.throwIfDisposed(),Ig(this)};U().prototype.separableConv2d=function(t,n,e,r,o,i){return this.throwIfDisposed(),Dg(this,t,n,e,r,o,i)};U().prototype.sigmoid=function(){return this.throwIfDisposed(),ai(this)};U().prototype.sign=function(){return this.throwIfDisposed(),c_(this)};U().prototype.sin=function(){return this.throwIfDisposed(),Ng(this)};U().prototype.sinh=function(){return this.throwIfDisposed(),Ag(this)};U().prototype.slice=function(t,n){return this.throwIfDisposed(),Tt(this,t,n)};U().prototype.softmax=function(t){return this.throwIfDisposed(),Dp(this,t)};U().prototype.softplus=function(){return this.throwIfDisposed(),Pa(this)};U().prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),Ep(this,t,n)};U().prototype.split=function(t,n){return this.throwIfDisposed(),Gr(this,t,n)};U().prototype.sqrt=function(){return this.throwIfDisposed(),Mn(this)};U().prototype.square=function(){return this.throwIfDisposed(),jt(this)};U().prototype.squaredDifference=function(t){return this.throwIfDisposed(),Bg(this,t)};U().prototype.squeeze=function(t){return this.throwIfDisposed(),as(this,t)};U().prototype.stack=function(t,n){this.throwIfDisposed();let e=t instanceof Rt?[this,t]:[this,...t];return Xn(e,n)};U().prototype.step=function(t){return this.throwIfDisposed(),sa(this,t)};U().prototype.stridedSlice=function(t,n,e,r,o,i,s,a){return this.throwIfDisposed(),u_(this,t,n,e,r,o,i,s,a)};U().prototype.sub=function(t){return this.throwIfDisposed(),Oe(this,t)};U().prototype.sum=function(t,n){return this.throwIfDisposed(),Ve(this,t,n)};U().prototype.tan=function(){return this.throwIfDisposed(),d_(this)};U().prototype.tanh=function(){return this.throwIfDisposed(),Fa(this)};U().prototype.tile=function(t){return this.throwIfDisposed(),Do(this,t)};U().prototype.toBool=function(){return this.throwIfDisposed(),me(this,"bool")};U().prototype.toFloat=function(){return this.throwIfDisposed(),me(this,"float32")};U().prototype.toInt=function(){return this.throwIfDisposed(),me(this,"int32")};U().prototype.topk=function(t,n){return this.throwIfDisposed(),f_(this,t,n)};U().prototype.transpose=function(t){return this.throwIfDisposed(),Lt(this,t)};U().prototype.unique=function(t){return this.throwIfDisposed(),m_(this,t)};U().prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),Lg(this,t,n)};U().prototype.unstack=function(t){return this.throwIfDisposed(),Wr(this,t)};U().prototype.where=function(t,n){return this.throwIfDisposed(),En(t,this,n)};U().prototype.zerosLike=function(){return this.throwIfDisposed(),at(this)};var aa=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},Li=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},J=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},yt=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},$S=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}};var k_=class{constructor(n){this.maxEntries=n||100,this.cache=new Map}get(n){let e;return this.cache.has(n)&&(e=this.cache.get(n),this.cache.delete(n),this.cache.set(n,e)),e}put(n,e){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxEntries){let r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(n,e)}getMaxEntries(){return this.maxEntries}setMaxEntries(n){if(n<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${n}.`);if(this.maxEntries>n)for(let e=0;e<this.maxEntries-n;e++){let r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=n}};function za(t,n){if(Array.isArray(t)){let e=[];for(let r=0;r<n;r++)e=e.concat(t);return e}else{let e=new Array(n);return e.fill(t),e}}function la(t,n){if(!t)throw new $S(n)}function vB(t,n){let e=0;for(let r of t)r===n&&e++;return e}function Ro(t){return t.length===1?t[0]:t}function xn(t){return Array.isArray(t)?t:[t]}function Ha(t){let e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return e[0]!=="_"?e:"private"+e}function Fp(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(n,e)=>e.toUpperCase())}var ja={};function Fv(t){if(t==null)return null;let n={};return n.className=t.getClassName(),n.config=t.getConfig(),n}function gB(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(n=>gB(n));else{let n=Object.keys(t);for(let e of n){let r=t[e];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[e]=r.value:gB(r))}}}function Cu(t,n={},e={},r="object",o=!1){if(typeof t=="string"){let i=t,s;if(i in e)s=e[i];else if(i in ja)s=ja[i];else if(s=n[i],s==null)throw new J(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{let i=t;if(i.className==null||i.config==null)throw new J(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);let s=i.className,a,l;if(s in e?[a,l]=e[s]:s in ja?[a,l]=ja.className:s in n&&([a,l]=n[s]),a==null)throw new J(`Unknown ${r}: ${s}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){let c={};for(let h of Object.keys(ja))c[h]=ja[h];for(let h of Object.keys(e))c[h]=e[h];let u=i.config;u.customObjects=c;let d=Object.assign({},ja);for(let h of Object.keys(e))ja[h]=e[h];gB(i.config);let p=l(a,i.config,e,o);return ja=Object.assign({},d),p}else{let c=Object.assign({},ja);for(let d of Object.keys(e))ja[d]=e[d];let u=new a(i.config);return ja=Object.assign({},c),u}}}function REe(t,n){return t<n?-1:t>n?1:0}function __(t,n){return-1*REe(t,n)}function Ua(t){if(t==null)return t;let n=[];for(let e of t)n.indexOf(e)===-1&&n.push(e);return n}function PJ(t){if(t==null)throw new J(`Invalid value in obj: ${JSON.stringify(t)}`);for(let n in t)if(t.hasOwnProperty(n))return!1;return!0}function Mu(t,n,e){if(e!=null&&t.indexOf(e)<0)throw new J(`${e} is not a valid ${n}.  Valid values are ${t} or null/undefined.`)}function VS(t,n,e=0,r=1/0){return la(e>=0),la(r>=e),Array.isArray(t)&&t.length>=e&&t.length<=r&&t.every(o=>typeof o===n)}function Dr(t,n){Array.isArray(t)?(x.assert(t.length>0,()=>`${n} is unexpectedly an empty array.`),t.forEach((e,r)=>Dr(e,`element ${r+1} of ${n}`))):x.assert(Number.isInteger(t)&&t>0,()=>`Expected ${n} to be a positive integer, but got ${LJ(t)}.`)}function LJ(t){return t===null?"null":Array.isArray(t)?"["+t.map(n=>LJ(n)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function $J(t,n,e){let r=e!=null?e():x.now(),o;return(...s)=>{let a=e!=null?e():x.now();return a-r<n||(r=a,o=t(...s)),o}}function jS(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}var OEe=0;function HS(){return OEe++}var zS={};function Sf(t=""){return t in zS||(zS[t]=0),zS[t]+=1,t+zS[t].toString()}var VJ=["channelsFirst","channelsLast"],jJ=["nearest","bilinear"],zJ=["valid","same","causal"],HJ=["max","avg"],UJ=["sum","mul","concat","ave"];var Bv=new Map;function er(t){Mu(VJ,"DataFormat",t)}function WJ(t){Mu(jJ,"InterpolationFormat",t)}function $i(t){Mu(zJ,"PaddingMode",t)}function wB(t){Mu(HJ,"PoolMode",t)}var b_=[],GJ="/";function Hl(t,n){b_.push(t);try{let e=n();return b_.pop(),e}catch(e){throw b_.pop(),e}}function FEe(){return b_.length===0?"":b_.join(GJ)+GJ}function US(t){if(!qJ(t))throw new Error("Not a valid tensor name: '"+t+"'");return FEe()+t}function GS(t){if(!qJ(t))throw new Error("Not a valid tensor name: '"+t+"'");Bv.has(t)||Bv.set(t,0);let n=Bv.get(t);if(Bv.set(t,Bv.get(t)+1),n>0){let e=`${t}_${n}`;return Bv.set(e,1),e}else return t}var BEe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function qJ(t){return!!t.match(BEe)}function KJ(t){return t===parseInt(t.toString(),10)}function Ga(t,n,e){n==null&&(n=0),e==null&&(e=t.length);let r=1;for(let o=n;o<e;++o)r*=t[o];return r}function Ug(t){if(t.length===0)return Number.NaN;let n=Number.POSITIVE_INFINITY;for(let e=0;e<t.length;e++){let r=t[e];r<n&&(n=r)}return n}function Ul(t){if(t.length===0)return Number.NaN;let n=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++){let r=t[e];r>n&&(n=r)}return n}function Vi(t,n){if(n<t)throw new J(`end (${n}) < begin (${t}) is forbidden.`);let e=[];for(let r=t;r<n;++r)e.push(r);return e}var yB;function Kr(){return yB==null&&(yB=vk().epsilon()),yB}function ji(){return"channelsLast"}function xi(t,n){return me(t,n)}function Pp(t,n=-1){let e=t.shape.slice();return n<0&&(n=e.length+n+1),e.splice(n,0,1),$(t,e)}function ZJ(t,n){return te(()=>{if(t.shape.length!==2)throw new J(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);let e=Pp(t,1);return qS(e,[1,n,1])})}function XJ(t){let n=[Ga(t.shape)];return $(t,n)}function YJ(t){if(t.rank<=1)throw new J(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);let n=[t.shape[0],Ga(t.shape,1)];return $(t,n)}function Bp(t,n,e){return te(()=>{switch(t.rank){case 1:return Rg(t,n,e);case 2:return Iv(t,[n,0],[e,t.shape[1]]);case 3:return Og(t,[n,0,0],[e,t.shape[1],t.shape[2]]);case 4:return wf(t,[n,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Tt(t,[n,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Tt(t,[n,0,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new J(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function xB(t,n,e){return te(()=>{switch(t.rank){case 1:return Rg(t,n,e);case 2:return Iv(t,[0,n],[t.shape[0],e]);case 3:return Og(t,[0,0,n],[t.shape[0],t.shape[1],e]);case 4:return wf(t,[0,0,0,n],[t.shape[0],t.shape[1],t.shape[2],e]);default:throw new J(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function C_(t,n,e,r){return te(()=>{switch(t.rank){case 1:return Rg(t,n,e);case 2:switch(r){case 1:return Bp(t,n,e);case 2:return xB(t,n,e);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Bp(t,n,e);case 2:return Og(t,[0,n,0],[t.shape[0],e,t.shape[2]]);case 3:return xB(t,n,e);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Bp(t,n,e);case 2:return wf(t,[0,n,0,0],[t.shape[0],e,t.shape[2],t.shape[3]]);case 3:return wf(t,[0,0,n,0],[t.shape[0],t.shape[1],e,t.shape[3]]);case 4:return xB(t,n,e);default:throw new J(`The axis is not within the rank of the tensor ${r}`)}default:throw new J(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Pv(t,n=-1){let e;return n<0&&(e=t[0].rank,e!==0?n=e:n=0),n===t[0].rank&&(n=-1),hn(t,n)}function _B(t,n){switch(t.rank){case 1:return Bk([t,n]);case 2:return Pk([t,n],0);case 3:return Lk([t,n],0);case 4:return $k([t,n],0);default:throw new J(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function qS(t,n){if(Array.isArray(n)||(n=[n]),t.rank!==n.length)throw new J(`The length of input n (${n.length}) does not match the number of dimensions in input x (${t.rank})`);return Do(t,n)}function Lv(t,n=0,e=1,r,o){return vf(t,n,e,r,o)}function Wa(t,n,e,r){if(t.rank<2||n.rank<2)throw new yt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${n.shape}`);if(n.rank>=3){let o=t.shape.slice(-1)[0],i=n.shape.slice(-2)[0];if(o!==i)throw new yt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${n.shape}`)}if(t.rank===2&&n.rank===2)return Rp.matMul({a:t,b:n,transposeA:!1,transposeB:!1,bias:r?kB(t.rank,r,ji()):null,activation:e});{let o=t.shape.slice(),i=o.pop();t=$(t,[-1,i]);let s=n.shape.slice(),a=s.pop(),l=s.pop(),c=[...s,a],u=Array.from({length:n.rank},(f,m)=>m===0?n.rank-2:m<=n.rank-2?m-1:m);n=$(Lt(n,u),[l,-1]);let d=[...o,...c];return $(Rp.matMul({a:t,b:n,transposeA:!1,transposeB:!1,bias:r?kB(t.rank,r,ji()):null,activation:e}),d)}}function KS(t,n,e){return te(()=>(Array.isArray(n)?n=Yn(n,"int32"):n=me(n,"int32"),$l(t,n,e)))}function Gg(t){return L(t,t)}function kB(t,n,e){let r=n.shape;if(n.rank!==1&&n.rank!==t)throw new J(`Unexpected bias dimensions: ${n.rank}; expected it to be 1 or ${t}`);if(t===5){if(e==="channelsFirst")return r.length===1?$(n,[1,r[0],1,1,1]):$(n,[1,r[3],r[0],r[1],r[2]]);if(e==="channelsLast")return r.length===1?$(n,[1,1,1,1,r[0]]):$(n,[1].concat(r))}else if(t===4){if(e==="channelsFirst")return r.length===1?$(n,[1,r[0],1,1]):$(n,[1,r[2],r[0],r[1]]);if(e==="channelsLast")return r.length===1?$(n,[1,1,1,r[0]]):$(n,[1].concat(r))}else if(t===3){if(e==="channelsFirst")return r.length===1?$(n,[1,r[0],1]):$(n,[1,r[1],r[0]]);if(e==="channelsLast")return r.length===1?$(n,[1,1,r[0]]):$(n,[1].concat(r))}else if(t<3)return n;throw new J(`Unsupported input rank by biasAdd: ${n.rank}`)}function zi(t,n,e){return te(()=>(e==null&&(e=ji()),er(e),fe(t,kB(t.rank,n,e))))}function QJ(t,n=1){if(n!==1)throw new yt(`Support for alpha values other than 1 (${n}) is not implemented yet.`);return Pl(t)}function JJ(t){return te(()=>Be(t,fe(Pn(t),1)))}function ZS(t,n,e,r){return te(()=>yS(t,n,e,r))}function eee(t){return te(()=>{let n=fe(.5,L(.2,t));return ho(n,0,1)})}function Tf(t,n,e=!1){return e?t():n()}var tee=["fanIn","fanOut","fanAvg"],nee=["normal","uniform","truncatedNormal"];function PEe(t){Mu(tee,"FanMode",t)}function LEe(t){Mu(nee,"Distribution",t)}var Hi=class extends ge.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},bB=(()=>{class t extends Hi{apply(e,r){return On(e,r)}}return t.className="Zeros",t})();ge.registerClass(bB);var M_=(()=>{class t extends Hi{apply(e,r){return Tr(e,r)}}return t.className="Ones",t})();ge.registerClass(M_);var CB=(()=>{class t extends Hi{constructor(e){if(super(),typeof e!="object")throw new J(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new J(`config must have value set but got ${e}`);this.value=e.value}apply(e,r){return te(()=>L($e(this.value),Tr(e,r)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})();ge.registerClass(CB);var MB=(()=>{class t extends Hi{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,r){return ss(e,this.minval,this.maxval,r,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})();ge.registerClass(MB);var SB=(()=>{class t extends Hi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new yt(`randomNormal does not support dType ${r}.`);return Lv(e,this.mean,this.stddev,r,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})();ge.registerClass(SB);var TB=(()=>{class t extends Hi{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,r){if(r=r||"float32",r!=="float32"&&r!=="int32")throw new yt(`truncatedNormal does not support dType ${r}.`);return Pg(e,this.mean,this.stddev,r,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})();ge.registerClass(TB);var EB=(()=>{class t extends Hi{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,r){return te(()=>{if(e.length!==2||e[0]!==e[1])throw new J("Identity matrix initializer can only be used for 2D square matrices.");return L(this.gain,mf(e[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})();ge.registerClass(EB);function $Ee(t,n="channelsLast"){let e,r;if(er(n),t.length===2)e=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(n==="channelsFirst"){let o=Ga(t,2);e=t[1]*o,r=t[0]*o}else if(n==="channelsLast"){let o=Ga(t,0,t.length-2);e=t[t.length-2]*o,r=t[t.length-1]*o}}else{let o=Ga(t);e=Math.sqrt(o),r=Math.sqrt(o)}return[e,r]}var ls=(()=>{class t extends Hi{constructor(e){if(super(),e.scale<0)throw new J(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,PEe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,LEe(this.distribution),this.seed=e.seed}apply(e,r){let o=$Ee(e),i=o[0],s=o[1],a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,i):this.mode==="fanOut"?a/=Math.max(1,s):a/=Math.max(1,(i+s)/2),this.distribution==="normal"){let l=Math.sqrt(a);if(r=r||"float32",r!=="float32"&&r!=="int32")throw new yt(`${this.getClassName()} does not support dType ${r}.`);return Pg(e,0,l,r,this.seed)}else{let l=Math.sqrt(3*a);return ss(e,-l,l,r,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();ge.registerClass(ls);var XS=(()=>{class t extends ls{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="GlorotUniform",t})();ge.registerClass(XS);var YS=(()=>{class t extends ls{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="GlorotNormal",t})();ge.registerClass(YS);var QS=(()=>{class t extends ls{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="HeNormal",t})();ge.registerClass(QS);var JS=(()=>{class t extends ls{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="HeUniform",t})();ge.registerClass(JS);var eT=(()=>{class t extends ls{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="LeCunNormal",t})();ge.registerClass(eT);var tT=(()=>{class t extends ls{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ls.className}}return t.className="LeCunUniform",t})();ge.registerClass(tT);var IB=(()=>{class t extends Hi{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,r){return te(()=>{if(e.length<2)throw new yt("Shape must be at least 2D.");if(r!=="int32"&&r!=="float32"&&r!==void 0)throw new TypeError(`Unsupported data type ${r}.`);r=r;let o=x.sizeFromShape(e.slice(0,-1)),i=e[e.length-1],s=o*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);let a=[Math.max(i,o),Math.min(i,o)],l=Lv(a,0,1,r,this.seed),c=DS.qr(l,!1),u=c[0],p=c[1].flatten().stridedSlice([0],[Math.min(i,o)*Math.min(i,o)],[Math.min(i,o)+1]);return u=L(u,p.sign()),o<i&&(u=u.transpose()),L($e(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})();ge.registerClass(IB);var ree={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function oee(t,n={}){return Cu(t,ge.SerializationMap.getMap().classNameMap,n,"initializer")}function $n(t){return Fv(t)}function In(t){if(typeof t=="string"){let n=t in ree?ree[t]:t;if(n==="GlorotNormal")return new YS;if(n==="GlorotUniform")return new XS;if(n==="HeNormal")return new QS;if(n==="HeUniform")return new JS;if(n==="LeCunNormal")return new eT;if(n==="LeCunUniform")return new tT;{let e={};return e.className=n,e.config={},oee(e)}}else return t instanceof Hi?t:oee(t)}function nT(t){return Array.isArray(t)&&Array.isArray(t[0])}function $v(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function ut(t){let n;if(Array.isArray(t)){if(t.length!==1)throw new J(`Expected Tensor length to be 1; got ${t.length}`);n=t[0]}else n=t;return n}function zt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new J(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function Vv(t){let n=0;for(let e of t)e.shape.length===0?n+=1:n+=e.shape.reduce((r,o)=>r*o);return n}var see="Variable",jv=class{constructor(n,e="float32",r=see,o=!0,i=null){this.dtype=e??"float32",this.shape=n.shape,this.id=HS(),r=r??see,this.originalName=US(r),this.name=GS(this.originalName),this.trainable_=o,this.constraint=i,this.val=g_(n,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(n){return this.assertNotDisposed(),jEe(this.val,n),this.val.id!==n.id&&(this.val.assign(n),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(n){this.trainable_=n,this.val.trainable=n}};function jEe(t,n){if(t.shape.toString()!==n.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(n.shape))}function S_(t){return t.map(n=>n.read())}function zv(t){t.forEach(n=>{n[0].write(n[1])})}var Dn=class{constructor(n){this.dtype=n.dtype,this.shape=n.shape,n.shape!=null?this.ndim=n.shape.length:this.ndim=n.ndim,this.maxNDim=n.maxNDim,this.minNDim=n.minNDim,this.axes=n.axes||{}}},ci=class{constructor(n,e,r,o,i,s,a){this.dtype=n,this.shape=e,this.sourceLayer=r,this.inputs=o,this.callArgs=i,this.outputTensorIndex=a,this.id=HS(),s!=null&&(this.originalName=US(s),this.name=GS(this.originalName)),this.rank=e.length}},zEe=0,Lp=class{constructor(n,e){this.callArgs=e,this.id=zEe++,this.outboundLayer=n.outboundLayer,this.inboundLayers=n.inboundLayers,this.nodeIndices=n.nodeIndices,this.tensorIndices=n.tensorIndices,this.inputTensors=n.inputTensors,this.outputTensors=n.outputTensors,this.inputMasks=n.inputMasks,this.outputMasks=n.outputMasks,this.inputShapes=n.inputShapes,this.outputShapes=n.outputShapes;for(let r of n.inboundLayers)r?.outboundNodes.push(this);n.outboundLayer.inboundNodes.push(this)}getConfig(){let n=[];for(let e of this.inboundLayers)e!=null?n.push(e.name):n.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:n,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},HEe=0,xt=class extends ge.Serializable{constructor(n={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=HEe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=n.name;if(!e){let r=this.getClassName();e=Ha(r)+"_"+Sf(r)}if(this.name=e,this.trainable_=n.trainable==null?!0:n.trainable,n.inputShape!=null||n.batchInputShape!=null){let r;if(n.batchInputShape!=null)r=n.batchInputShape;else if(n.inputShape!=null){let i=null;n.batchSize!=null&&(i=n.batchSize),r=[i].concat(n.inputShape)}this.batchInputShape=r;let o=n.dtype;o==null&&(o=n.inputDType),o==null&&(o="float32"),this.dtype=o}n.weights!=null?this.initialWeights=n.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(n,e){return n.name+"_ib-"+e.toString()}getNodeAtIndex(n,e){if(this.inboundNodes.length===0)throw new Li(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=n)throw new J(`Asked to get ${e} at node ${n}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[n]}getInputAt(n){return Ro(this.getNodeAtIndex(n,"input").inputTensors)}getOutputAt(n){return Ro(this.getNodeAtIndex(n,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new aa(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new aa(`Layer ${this.name} is not connected, no input to return.`);return Ro(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new aa(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new aa(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ro(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(n=>n())}get updates(){return this._updates}get built(){return this._built}set built(n){this._built=n}get trainable(){return this.trainable_}set trainable(n){this._trainableWeights.forEach(e=>e.trainable=n),this.trainable_=n}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(n=>n.trainable):[]}set trainableWeights(n){this._trainableWeights=n}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(n=>!n.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(n){this._nonTrainableWeights=n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(n){let e=xn(n);if(this.inputSpec==null||this.inputSpec.length===0)return;let r=xn(this.inputSpec);if(e.length!==r.length)throw new J(`Layer ${this.name} expects ${r.length} inputs, but it received ${e.length} input tensors. Input received: ${n}`);for(let o=0;o<e.length;o++){let i=e[o],s=r[o];if(s==null)continue;let a=i.rank;if(s.ndim!=null&&a!==s.ndim)throw new J(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${a}`);if(s.maxNDim!=null&&a>s.maxNDim)throw new J(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${a}`);if(s.minNDim!=null&&a<s.minNDim)throw new J(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${a}.`);if(s.dtype!=null&&i.dtype!==s.dtype)throw new J(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${i.dtype}.`);if(s.axes){let l=i.shape;for(let c in s.axes){let u=Number(c),d=s.axes[c],p=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(p)===-1)throw new J(`Input ${o} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(s.shape!=null)for(let l=0;l<s.shape.length;++l){let c=s.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new J(`Input ${o} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${i.shape}.`)}}}call(n,e){return n}invokeCallHook(n,e){this._callHook!=null&&this._callHook(n,e)}setCallHook(n){this._callHook=n}clearCallHook(){this._callHook=null}apply(n,e){e=e||{},this.assertNotDisposed();let r=xn(n),o=WEe(n),i=qEe(n);if(o===i)throw new J("Arguments to apply() must be all SymbolicTensors or all Tensors");return Hl(this.name,()=>{if(!this.built){this.assertInputCompatibility(n);let s=[];for(let a of xn(n))s.push(a.shape);this.build(Ro(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(n),i){let s=this.call(n,e);this.supportsMasking&&this.setMaskMetadata(n,s);let a=xn(s),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(s=Ro(l),this.activityRegularizer!=null)throw new yt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{let s=UEe(n),a=this.computeOutputShape(s),l,c=GEe(n);if(this.warnOnIncompatibleInputShape(Array.isArray(n)?s[0]:s),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new ci(c,u,this,xn(n),e,this.name,d)):l=new ci(c,a,this,xn(n),e,this.name),this.addInboundNode(n,l,null,null,s,a,e),this._refCount++,this.activityRegularizer!=null)throw new yt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(n){if(this.batchInputShape!=null)if(n.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(n)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((r,o)=>{r!=null&&n[o]!=null&&n[o]!==r&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(n)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new aa(`The layer ${this.name} has never been called and thus has no defined output shape.`);let n=[];for(let e of this.inboundNodes){let r=JSON.stringify(e.outputShapes);n.indexOf(r)===-1&&n.push(r)}if(n.length===1){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&e.length===1?e[0]:e}else throw new aa(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Li(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Vv(this.weights)}build(n){this.built=!0}getWeights(n=!1){return S_(n?this.trainableWeights:this.weights)}setWeights(n){te(()=>{let e=this.weights;if(e.length!==n.length)throw new J(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${n.length}, but the layer was expecting ${e.length} weights. Provided weights: ${n}...`);if(e.length===0)return;let r=[],o=S_(e);for(let i=0;i<o.length;++i){let s=o[i],a=e[i],l=n[i];if(!x.arraysEqual(s.shape,l.shape))throw new J(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}zv(r)})}addWeight(n,e,r,o,i,s,a,l){if(this._addedWeightNames.indexOf(n)!==-1)throw new J(`Duplicate weight name ${n} for layer ${this.name}`);this._addedWeightNames.push(n),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():In("zeros"));let c=o.apply(e,r),u=new jv(c,r,n,s,a);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),s==null&&(s=!0),s?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(n){this.fastWeightInitDuringBuild=n}addLoss(n){n==null||Array.isArray(n)&&n.length===0||(n=xn(n),this._losses!==void 0&&this._losses!==null&&this.losses.push(...n))}computeOutputShape(n){return n}computeMask(n,e){if(!this.supportsMasking){if(e!=null)if(Array.isArray(e))e.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return e}setMaskMetadata(n,e,r){if(!this.supportsMasking)return;let o=this.computeMask(n,r),i=xn(e),s=xn(o);if(i.length!==s.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=s[a]}addInboundNode(n,e,r,o,i,s,a=null){let l=xn(n);e=xn(e),r=xn(r),o=xn(o),i=$v(i),s=$v(s);let c=[],u=[],d=[];for(let p of l)c.push(p.sourceLayer),u.push(p.nodeIndex),d.push(p.tensorIndex);new Lp({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:e,inputMasks:r,outputMasks:o,inputShapes:i,outputShapes:s},a);for(let p=0;p<e.length;p++)e[p].sourceLayer=this,e[p].nodeIndex=this.inboundNodes.length-1,e[p].tensorIndex=p}getConfig(){let n={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(n.batchInputShape=this.batchInputShape),this.dtype!=null&&(n.dtype=this.dtype),n}disposeWeights(){return this.weights.forEach(n=>n.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let n=0;return--this._refCount===0&&(n=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:n}}};function UEe(t){t=xn(t);let n=[];for(let e of t)n.push(e.shape);return Ro(n)}function GEe(t){return"float32"}function DB(t,n,e){if((n==null||e!=null&&e>0)&&(n=t.sourceLayer,e=t.nodeIndex),n.inboundNodes.length===0)return[t];{let r=n.inboundNodes[e];if(r.inboundLayers.length===0)return r.inputTensors;{let o=[];for(let i=0;i<r.inboundLayers.length;i++){let s=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],c=DB(s,a,l);for(let u of c)o.indexOf(u)===-1&&o.push(u)}return o}}}function WEe(t){let n=!0;for(let e of xn(t))if(!(e instanceof ci)){n=!1;break}return n}function qEe(t){let n=!0;for(let e of xn(t))if(e instanceof ci){n=!1;break}return n}var Ef=(()=>{class t extends xt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Sf("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new J("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let r=e.batchInputShape;if(r==null){if(e.inputShape==null)throw new J("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new J("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let o=e.dtype||"float32";this.batchInputShape=r,this.dtype=o,this.inputSpec=[{shape:r}];let i=new ci(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new Lp({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]})}apply(e,r){throw new J(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();ge.registerClass(Ef);function rT(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new J("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let n=t.batchShape;t.shape!=null&&n==null&&(n=[null].concat(t.shape));let e=t.dtype;return e==null&&(e="float32"),new Ef({batchInputShape:n,name:t.name,dtype:e,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function KEe(t,n){if(t.dtype==null||t.dtype===n.dtype)return n;try{return me(n,t.dtype)}catch{throw new J(`The dtype of the feed (${n.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}var Su=class t{constructor(n){if(this.id2Value={},this.id2Mask={},this.name2Id={},n instanceof t)for(let e in n.id2Value)this.id2Value[e]=n.id2Value[e],e in n.id2Mask&&(this.id2Mask[e]=n.id2Mask[e]);else{if(n==null)return;for(let e of n)this.add(e.key,e.value)}}add(n,e,r){if(this.id2Value[n.id]==null)this.id2Value[n.id]=KEe(n,e),this.name2Id[n.name]=n.id,r!=null&&(this.id2Mask[n.id]=r);else throw new J(`Duplicate key: name=${n.name}, id=${n.id}`);return this}addFeed(n){this.add(n.key,n.value)}hasKey(n){return this.id2Value[n.id]!=null}names(){return Object.keys(this.name2Id)}getValue(n){if(n instanceof ci){if(this.id2Value[n.id]==null)throw new J(`Nonexistent key: ${n.name}`);return this.id2Value[n.id]}else{let e=this.name2Id[n];if(e==null)throw new J(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Value[e]}}getMask(n){if(n instanceof ci){if(this.id2Value[n.id]==null)throw new J(`Nonexistent key: ${n.name}`);return this.id2Mask[n.id]}else{let e=this.name2Id[n];if(e==null)throw new J(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Mask[e]}}disposeMasks(){this.id2Mask!=null&&ht(this.id2Mask)}},oT=new k_,iT=new k_;function lee(t){oT?.setMaxEntries(t),iT?.setMaxEntries(t)}function Wg(t,n,e,r){let o=e==null?!1:e.training,i=Array.isArray(t),s=i?t:[t],a=s.map(f=>f.name),l=[],c=n.names();for(let f of a)c.indexOf(f)!==-1?l.push(n.getValue(f)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let u=a.join(",")+"|"+n.names().sort().join(","),d=oT.get(u),p;if(d==null){let f=ZEe(s,n);d=f.sorted,p=f.recipientCounts,oT.put(u,d),iT.put(u,p)}p={},o||Object.assign(p,iT.get(u));let h=new Su(n);for(let f=0;f<d.length;++f){if(r!=null){let B=xv().numTensors;B>r.maxNumTensors&&(r.maxNumTensors=B),B<r.minNumTensors&&(r.minNumTensors=B)}let m=d[f],g=m.sourceLayer;if(g instanceof Ef)continue;let v=[],w=[],y=[],k=!1;for(let B of m.inputs){let D=h.getValue(B),P=h.getMask(B);v.push(D),w.push(P),P!=null&&(k=!0),o||(p[B.name]--,p[B.name]===0&&!n.hasKey(B)&&a.indexOf(B.name)===-1&&!D.isDisposed&&B.sourceLayer.stateful!==!0&&y.push(D))}k&&(e=e||{},e.mask=w[0]);let _=xn(g.apply(v,e)),S=null;g.supportsMasking&&(S=g.computeMask(v,w));let E=YEe(m),N=Array.isArray(E)?E:[E];for(let B=0;B<N.length;++B){h.hasKey(N[B])||h.add(N[B],_[B],Array.isArray(S)?S[0]:S);let D=a.indexOf(N[B].name);D!==-1&&(l[D]=_[B])}o||ht(y)}return h.disposeMasks(),i?l:l[0]}function ZEe(t,n){x.assert(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let e=[],r={};if(t.length===1){let o=aee(t[0],n);e=o.sorted,r=o.recipientMap}else{let o=new Set;for(let i of t){let{sorted:s,recipientMap:a}=aee(i,n);for(let l of s)o.has(l.name)||(e.push(l),o.add(l.name));for(let l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:e,recipientCounts:XEe(r)}}function XEe(t){let n={};for(let e in t)n[e]=t[e].size;return n}function aee(t,n){let e=new Set,r=[],o={};for(let a of n.names())e.add(a);let i=[],s=[];for(i.push(t);i.length>0;){let a=i[i.length-1];if(e.has(a.name)){i.pop();continue}let l=s[s.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),e.add(a.name),l&&s.pop();else{s.push(i.length-1);for(let c of a.inputs)o[c.name]==null&&(o[c.name]=new Set),o[c.name].add(a.name),!e.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:o}}function YEe(t){let n;if(t.sourceLayer.inboundNodes.length===1)n=t.sourceLayer.output;else{let e=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(let o of t.sourceLayer.inboundNodes[r].outputTensors)if(o.id===t.id){e=r;break}n=t.sourceLayer.getOutputAt(e)}return n}var QEe=Y();QEe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,lee);var BB={};Qt(BB,{maxNorm:()=>JEe,minMaxNorm:()=>nIe,nonNeg:()=>tIe,unitNorm:()=>eIe});function NB(t,n){return te(()=>Mn(Ve(L(t,t),n,!0)))}var qg=class extends ge.Serializable{getConfig(){return{}}},AB=(()=>{class t extends qg{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return te(()=>{let r=NB(e,this.axis),o=ho(r,0,this.maxValue);return L(e,Be(o,fe(Kr(),r)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})();ge.registerClass(AB);var RB=(()=>{class t extends qg{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return te(()=>Be(e,fe(Kr(),NB(e,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})();ge.registerClass(RB);var OB=(()=>{class t extends qg{apply(e){return Ao(e)}}return t.className="NonNeg",t})();ge.registerClass(OB);var FB=(()=>{class t extends qg{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return te(()=>{let r=NB(e,this.axis),o=fe(L(this.rate,ho(r,this.minValue,this.maxValue)),L(1-this.rate,r));return L(e,Be(o,fe(Kr(),r)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})();ge.registerClass(FB);var cee={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function dr(t){return Fv(t)}function uee(t,n={}){return Cu(t,ge.SerializationMap.getMap().classNameMap,n,"constraint")}function pr(t){if(t==null)return null;if(typeof t=="string"){let e={className:t in cee?cee[t]:t,config:{}};return uee(e)}else return t instanceof qg?t:uee(t)}function JEe(t){return new AB(t)}function eIe(t){return new RB(t)}function tIe(){return new OB}function nIe(t){return new FB(t)}var PB={};Qt(PB,{constant:()=>iIe,glorotNormal:()=>pIe,glorotUniform:()=>dIe,heNormal:()=>hIe,heUniform:()=>fIe,identity:()=>cIe,leCunNormal:()=>mIe,leCunUniform:()=>gIe,ones:()=>oIe,orthogonal:()=>vIe,randomNormal:()=>aIe,randomUniform:()=>sIe,truncatedNormal:()=>lIe,varianceScaling:()=>uIe,zeros:()=>rIe});function rIe(){return new bB}function oIe(){return new M_}function iIe(t){return new CB(t)}function sIe(t){return new MB(t)}function aIe(t){return new SB(t)}function lIe(t){return new TB(t)}function cIe(t){return new EB(t)}function uIe(t){return new ls(t)}function dIe(t){return new XS(t)}function pIe(t){return new YS(t)}function hIe(t){return new QS(t)}function fIe(t){return new JS(t)}function mIe(t){return new eT(t)}function gIe(t){return new tT(t)}function vIe(t){return new IB(t)}var rL={};Qt(rL,{Layer:()=>xt,RNN:()=>Kl,RNNCell:()=>Vp,activation:()=>YDe,add:()=>sNe,alphaDropout:()=>HNe,average:()=>aNe,averagePooling1d:()=>eL,averagePooling2d:()=>tL,averagePooling3d:()=>nL,avgPool1d:()=>gNe,avgPool2d:()=>wNe,avgPool3d:()=>xNe,avgPooling1d:()=>vNe,avgPooling2d:()=>yNe,avgPooling3d:()=>kNe,batchNormalization:()=>hNe,bidirectional:()=>FNe,categoryEncoding:()=>KNe,centerCrop:()=>WNe,concatenate:()=>lNe,conv1d:()=>zDe,conv2d:()=>HDe,conv2dTranspose:()=>UDe,conv3d:()=>GDe,conv3dTranspose:()=>WDe,convLstm2d:()=>NNe,convLstm2dCell:()=>ANe,cropping2D:()=>KDe,dense:()=>QDe,depthwiseConv2d:()=>XDe,dot:()=>pNe,dropout:()=>JDe,elu:()=>BDe,embedding:()=>iNe,flatten:()=>tNe,gaussianDropout:()=>zNe,gaussianNoise:()=>jNe,globalAveragePooling1d:()=>_Ne,globalAveragePooling2d:()=>bNe,globalMaxPool1d:()=>PNe,globalMaxPool2d:()=>LNe,globalMaxPooling1d:()=>Uee,globalMaxPooling2d:()=>Gee,gru:()=>MNe,gruCell:()=>SNe,input:()=>kT,inputLayer:()=>FDe,layerNormalization:()=>fNe,leakyReLU:()=>LDe,lstm:()=>TNe,lstmCell:()=>ENe,masking:()=>UNe,maxPool1d:()=>$Ne,maxPool2d:()=>VNe,maxPooling1d:()=>Wee,maxPooling2d:()=>qee,maxPooling3d:()=>CNe,maximum:()=>cNe,minimum:()=>uNe,multiply:()=>dNe,permute:()=>oNe,prelu:()=>$De,randomWidth:()=>ZNe,reLU:()=>PDe,repeatVector:()=>nNe,rescaling:()=>GNe,reshape:()=>rNe,resizing:()=>qNe,rnn:()=>RNe,separableConv2d:()=>qDe,simpleRNN:()=>INe,simpleRNNCell:()=>DNe,softmax:()=>VDe,spatialDropout1d:()=>eNe,stackedRNNCells:()=>ONe,thresholdedReLU:()=>jDe,timeDistributed:()=>BNe,upSampling2d:()=>ZDe,zeroPadding2d:()=>mNe});function Tu(t){return z(this,null,function*(){if(t==null)return;let n=[],e=[],r=[];for(let o in t){let i=t[o];if(typeof i!="number"){let s=i;n.push(s.data()),e.push(o),r.push(s)}}if(n.length>0){let o=yield Promise.all(n);for(let i=0;i<o.length;++i)t[e[i]]=o[i][0];ht(r)}})}function sT(t){if(t!=null)for(let n in t){let e=t[n];typeof e!="number"&&e.dispose()}}var wIe=125,$p=class{constructor(){this.validationData=null}setParams(n){this.params=n}onEpochBegin(n,e){return z(this,null,function*(){})}onEpochEnd(n,e){return z(this,null,function*(){})}onBatchBegin(n,e){return z(this,null,function*(){})}onBatchEnd(n,e){return z(this,null,function*(){})}onTrainBegin(n){return z(this,null,function*(){})}onTrainEnd(n){return z(this,null,function*(){})}setModel(n){}},T_=class{constructor(n,e=10){n==null&&(n=[]),this.callbacks=n,this.queueLength=e}append(n){this.callbacks.push(n)}setParams(n){for(let e of this.callbacks)e.setParams(n)}setModel(n){for(let e of this.callbacks)e.setModel(n)}onEpochBegin(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onEpochBegin(n,e)})}onEpochEnd(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onEpochEnd(n,e)})}onBatchBegin(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onBatchBegin(n,e)})}onBatchEnd(n,e){return z(this,null,function*(){e==null&&(e={});for(let r of this.callbacks)yield r.onBatchEnd(n,e)})}onTrainBegin(n){return z(this,null,function*(){n==null&&(n={});for(let e of this.callbacks)yield e.onTrainBegin(n)})}onTrainEnd(n){return z(this,null,function*(){n==null&&(n={});for(let e of this.callbacks)yield e.onTrainEnd(n)})}},LB=class extends $p{constructor(){super()}onEpochBegin(n){return z(this,null,function*(){this.seen=0,this.totals={}})}onBatchEnd(n,e){return z(this,null,function*(){e==null&&(e={});let r=e.size==null?0:e.size;this.seen+=r;for(let o in e){let i=e[o];if(typeof i=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+i*r;else{let s;o in this.totals?s=this.totals[o]:this.totals[o]=0;let a=te(()=>fe(this.totals[o],L(i,r)));this.totals[o]=a,s?.dispose()}}})}onEpochEnd(n,e){return z(this,null,function*(){if(e!=null)for(let r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?e[r]=this.totals[r]/this.seen:te(()=>{let o=L(Be(1,this.seen),this.totals[r]);e[r]=o,this.totals[r].dispose(),Hn(e[r])}))})}},E_=class extends $p{onTrainBegin(n){return z(this,null,function*(){this.epoch=[],this.history={}})}onEpochEnd(n,e){return z(this,null,function*(){e==null&&(e={}),this.epoch.push(n);for(let r in e)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(e[r])})}syncData(){return z(this,null,function*(){let n=[],e=[],r=[];for(let i in this.history){let s=this.history[i];for(let a=0;a<s.length;++a)if(typeof s[a]!="number"){let l=s[a];n.push(l.data()),e.push(i),r.push(a)}}let o=yield Promise.all(n);for(let i=0;i<o.length;++i)this.history[e[i]][r[i]].dispose(),this.history[e[i]][r[i]]=o[i][0]})}},I_=class extends $p{constructor(n,e){if(super(),this.currentEpoch=0,this.nowFunc=n.nowFunc,this.nextFrameFunc=n.nextFrameFunc||Ov,this.yieldEvery=e||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=wIe),this.yieldEvery==="never"&&n.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");x.isNumber(this.yieldEvery)&&(this.maybeWait=$J(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=n.onTrainBegin,this.trainEnd=n.onTrainEnd,this.epochBegin=n.onEpochBegin,this.epochEnd=n.onEpochEnd,this.batchBegin=n.onBatchBegin,this.batchEnd=n.onBatchEnd,this.yield=n.onYield}maybeWait(n,e,r){return z(this,null,function*(){let o=[];this.yield!=null&&(yield Tu(r),o.push(this.yield(n,e,r))),o.push(this.nextFrameFunc()),yield Promise.all(o)})}onEpochBegin(n,e){return z(this,null,function*(){this.currentEpoch=n,this.epochBegin!=null&&(yield Tu(e),yield this.epochBegin(n,e))})}onEpochEnd(n,e){return z(this,null,function*(){let r=[];this.epochEnd!=null&&(yield Tu(e),r.push(this.epochEnd(n,e))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),yield Promise.all(r)})}onBatchBegin(n,e){return z(this,null,function*(){this.batchBegin!=null&&(yield Tu(e),yield this.batchBegin(n,e))})}onBatchEnd(n,e){return z(this,null,function*(){let r=[];this.batchEnd!=null&&(yield Tu(e),r.push(this.batchEnd(n,e))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):x.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,n,e)),yield Promise.all(r)})}onTrainBegin(n){return z(this,null,function*(){this.trainBegin!=null&&(yield Tu(n),yield this.trainBegin(n))})}onTrainEnd(n){return z(this,null,function*(){this.trainEnd!=null&&(yield Tu(n),yield this.trainEnd(n))})}};function aT(t,n){return t==null&&(t={}),t instanceof $p?[t]:Array.isArray(t)&&t[0]instanceof $p?t:xn(t).map(r=>new I_(r,n))}var $B=(()=>{class t{constructor(){}static registerCallbackConstructor(e,r){x.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),t.checkForDuplicate(r),t.constructors[e]==null&&(t.constructors[e]=[]),t.constructors[e].push(r)}static checkForDuplicate(e){for(let r in t.constructors)t.constructors[+r].forEach(i=>{if(i===e)throw new J("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(e){let r=[];for(let o in t.constructors){let i=+o;e>=i&&r.push(...t.constructors[i])}return r.map(o=>new o)}}return t.constructors={},t})();function lT(t,n,e,r,o,i,s,a,l){let c=new E_,u=[new LB,...$B.createCallbacks(n)];t!=null&&u.push(...t),u.push(c);let d=new T_(u);return d.setParams({epochs:e,initialEpoch:r,samples:o,steps:i,batchSize:s,verbose:n,doValidation:a,metrics:l}),{callbackList:d,history:c}}function Ui(t,n={},e=!1){return Cu(t,ge.SerializationMap.getMap().classNameMap,n,"layer",e)}function D_(t,n){return te(()=>{t.dtype!=="float32"&&(t=me(t,"float32"));let e=Ve(Gg(t),n,!0),r=ia(e.shape,Kr()),o=Mn(Pi(e,r));return Be(t,o)})}function Eu(t,n){return te(()=>Rn(Gg(Oe(n,t)),-1))}function Hv(t,n){return te(()=>Rn(Pn(Oe(n,t)),-1))}function If(t,n){return te(()=>{let e=Oe(t,n),r=ho(Pn(t),Kr(),Number.MAX_VALUE),o=Pn(Be(e,r));return L(100,Rn(o,-1))})}function yIe(t,n){return te(()=>{let e=ho(n,Kr(),Number.MAX_VALUE),r=mo(fe(1,e)),o=ho(t,Kr(),Number.MAX_VALUE),i=mo(fe(1,o));return Rn(Gg(Oe(r,i)),-1)})}function xIe(t,n){return te(()=>{let e=Pi(0,Oe(1,L(t,n)));return Rn(Gg(e),-1)})}function kIe(t,n){return te(()=>{let e=Pi(0,Oe(1,L(t,n)));return Rn(e,-1)})}function _Ie(t,n){return te(()=>{let e=Ve(L(t,n),-1),r=fo(L(Oe(1,t),n),-1);return Pi(0,fe(1,Oe(r,e)))})}function bIe(t,n){return te(()=>{let e=Math.log(2),r=Oe(n,t),o=Oe(fe(r,Pa(L(-2,r))),e);return Rn(o,-1)})}function Kg(t,n,e=!1){return te(()=>{if(e)n=Dp(n);else{let r=Ve(n,n.shape.length-1,!0);n=Be(n,r)}return n=ho(n,Kr(),1-Kr()),Wt(Ve(L(me(t,"float32"),mo(n)),n.shape.length-1))})}function Uv(t,n,e=!1){return te(()=>{let r=me(Ll(XJ(t)),"int32");n=ho(n,Kr(),1-Kr());let o=n.shape,i=$(Vl(r,o[o.length-1]),o);return Kg(i,n,e)})}function CIe(t,n){if(!x.arraysEqual(t.shape,n.shape))throw new J(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(n.shape)}`);return te(()=>{let e=Ao(n),r=Wt(Pn(n));return fe(Oe(e,L(n,t)),Cp(cr(r)))})}function Gv(t,n){return te(()=>{let e;return e=ho(n,Kr(),1-Kr()),e=mo(Be(e,Oe(1,e))),Rn(CIe(t,e),-1)})}function MIe(t,n){return te(()=>{let e=ho(t,Kr(),1),r=ho(n,Kr(),1);return Ve(L(t,mo(Be(e,r))),-1)})}function SIe(t,n){return te(()=>{let e=mo(fe(Kr(),n));return Rn(Oe(n,L(t,e)),-1)})}function A_(t,n){return te(()=>{let e=D_(t,-1),r=D_(n,-1),o=L(e,r);return Wt(Ve(o,-1))})}var N_={meanSquaredError:Eu,meanAbsoluteError:Hv,meanAbsolutePercentageError:If,meanSquaredLogarithmicError:yIe,squaredHinge:xIe,hinge:kIe,categoricalHinge:_Ie,logcosh:bIe,categoricalCrossentropy:Kg,sparseCategoricalCrossentropy:Uv,binaryCrossentropy:Gv,kullbackLeiblerDivergence:MIe,poisson:SIe,cosineProximity:A_};function cT(t){if(typeof t=="string"){if(t in N_)return N_[t];let n=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(n=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new J(n)}else return t}function R_(t,n){return te(()=>{let e=L(.5,oo(n)),r=xi(Zn(n,e),t.dtype);return Rn(Io(t,r),-1)})}function O_(t,n){return te(()=>xi(Io(Rl(t,-1),Rl(n,-1)),"float32"))}function pee(t,n){return te(()=>me(Ve(No(Io(t,1),Io(n,1))),"float32"))}function TIe(t,n){return te(()=>me(Ve(No(Io(t,1),Io(n,0))),"float32"))}function EIe(t,n){return te(()=>me(Ve(No(Io(t,0),Io(n,1))),"float32"))}function VB(t,n){return te(()=>{let e=pee(t,n),r=EIe(t,n),o=fe(e,r);return me(En(Zn(o,0),Be(e,o),0),"float32")})}function hee(t,n){return te(()=>{let e=pee(t,n),r=TIe(t,n),o=fe(e,r);return me(En(Zn(o,0),Be(e,o),0),"float32")})}function dT(t,n){return Gv(t,n)}function pT(t,n){return t.rank===n.rank&&(t=as(t,[t.rank-1])),n=Rl(n,-1),n.dtype!==t.dtype&&(n=me(n,t.dtype)),me(Io(t,n),"float32")}function fee(t,n){return te(()=>{let e=t.sub(n).square().sum(),r=t.sub(t.mean()).square().sum();return $e(1).sub(e.div(r))})}var IIe=Eu,DIe=Eu,NIe=Hv,AIe=Hv,RIe=If,OIe=If,F_=Kg,FIe=A_,jB=Uv,uT={binaryAccuracy:R_,categoricalAccuracy:O_,precision:VB,categoricalCrossentropy:F_,sparseCategoricalCrossentropy:jB,mse:IIe,MSE:DIe,mae:NIe,MAE:AIe,mape:RIe,MAPE:OIe,cosine:FIe};function mee(t){if(typeof t=="string"&&t in uT)return uT[t];if(typeof t!="string"&&t!=null)return t;throw new J(`Unknown metric ${t}`)}function B_(t){if(la(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let n;for(let e of Object.keys(N_))if(N_[e]===t){n=e;break}if(n!==void 0)return n;for(let e of Object.keys(uT))if(uT[e]===t){n=e;break}return n!==void 0?n:t.name}}function vee(t){let n={Adagrad:()=>Mf.adagrad(.01),Adadelta:()=>Mf.adadelta(1,.95,Kr()),Adam:()=>Mf.adam(.001,.9,.999,Kr()),Adamax:()=>Mf.adamax(.002,.9,.999,Kr(),0),RMSProp:()=>Mf.rmsprop(.001,.9,0,Kr()),SGD:()=>Mf.sgd(.01)};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,t in n)return n[t]();throw new J(`Unknown Optimizer ${t}`)}function HB(t,n,e=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!zB(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){let r=JSON.stringify(t);r.length>1048576&&console.warn(`User-defined metadata of model "${n}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function zB(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let n=Object.keys(t);for(let e of n)if(typeof e!="string"||!zB(t[e]))return!1;return!0}else if(Array.isArray(t)){for(let n of t)if(!zB(n))return!1;return!0}else return!1;else{let n=typeof t;return n==="string"||n==="number"||n==="boolean"}}function wee(t,n,e,r=console.log){let o=LIe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];o?(n=n||90,e=e||[.32,.61,.89,1]):(n=n||115,e=e||[.24,.48,.7,.8,1]),e[e.length-1]<=1&&(e=e.map(u=>Math.floor(n*u)));let s;if(!o){i.push("Receives inputs"),s=[];for(let u in t.nodesByDepth)s.push(...t.nodesByDepth[u])}r("_".repeat(n)),hT(i,e,r),r("=".repeat(n));let a=t.layers;for(let u=0;u<a.length;++u)o?$Ie(a[u],e,r):VIe(a[u],e,s,r),r((u===a.length-1?"=":"_").repeat(n));t.checkTrainableWeightsConsistency();let l=PIe(t),c=Vv(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(n))}function PIe(t){let n;return t.collectedTrainableWeights!=null?n=Vv(t.collectedTrainableWeights):n=Vv(t.trainableWeights),n}function LIe(t){let n=!0,e=[],r=[];for(let o in t.nodesByDepth)e.push(t.nodesByDepth[o]);for(let o of e){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){n=!1;break}r.push(...o)}if(n)for(let o of t.layers){let i=!1;for(let s of o.inboundNodes)if(r.indexOf(s)!==-1)if(i){n=!1;break}else i=!0;if(!n)break}return n}function hT(t,n,e=console.log){let r="";for(let o=0;o<t.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=t[o],r=r.slice(0,n[o]),r+=" ".repeat(n[o]-r.length);e(r)}function $Ie(t,n,e){let r,o;try{o=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}let i=t.name,s=t.getClassName(),a=[`${i} (${s})`,o,r,t.countParams().toString()];hT(a,n,e)}function VIe(t,n,e,r){let o,i;try{i=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{i="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}let s=[];for(let d of t.inboundNodes)if(!(e!=null&&e.length>0&&e.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let h=d.inboundLayers[p].name,f=d.nodeIndices[p],m=d.tensorIndices[p];s.push(`${h}[${f}][${m}]`)}let a=t.name,l=t.getClassName(),c=s.length===0?"":s[0],u=[`${a} (${l})`,i,o,t.countParams().toString(),c];hT(u,n,r);for(let d=1;d<s.length;++d)hT(["","","","",s[d]],n,r)}function yee(t,n,e){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&n===0&&typeof e=="string"}function Zg(t,n){if(t===null)return null;if(typeof t=="string")return Fp(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let e=[],r=t.length;for(let o=0;o<r;++o){let i=t[o];yee(n,o,i)?e.push(i):e.push(Zg(i,n))}return e}else{let e={};for(let r of Object.keys(t)){let o=t[r];if(r==="name"&&typeof o=="string")e[r]=o;else{let i=Fp(r);e[i]=Zg(o,i)}}return e}}function fT(t,n){if(t==null)return null;if(typeof t=="string")return Ha(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let e=[],r=t.length;for(let o=0;o<r;++o){let i=t[o];yee(n,o,i)?e.push(i):e.push(fT(i,n))}return e}else{let e={};for(let r of Object.keys(t)){let o=t[r],i=Ha(r);(r==="name"||r==="className")&&typeof o=="string"?e[i]=o:e[i]=fT(o,r)}return e}}var Df="4.22.0";var jIe=t=>{let n=Object.keys(t);if(n.length===0)return!1;let e=n[0].split("/");return!isNaN(parseInt(e[e.length-1],10))},mT=class t extends xt{constructor(n){if(super({}),this.containerNodes=new Set,this.name=n.name,this.name==null){let w=this.getClassName().toLowerCase();this.name=Sf(w)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(n.inputs)?this.inputs=n.inputs.slice():this.inputs=[n.inputs],Array.isArray(n.outputs)?this.outputs=n.outputs.slice():this.outputs=[n.outputs],Ua(this.inputs).length!==this.inputs.length)throw new J(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(w=>w.name)}`);Ua(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(w=>w.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let w of this.outputs){let y=w.sourceLayer,k=w.nodeIndex,_=w.tensorIndex;this.outputLayers.push(y),this.outputLayersNodeIndices.push(k),this.outputLayersTensorIndices.push(_)}for(let w of this.inputs){let y=w.sourceLayer,k=w.nodeIndex,_=w.tensorIndex;la(k===0,"input layer has >1 nodes"),la(_===0,"input layer has >1 tensors"),this.inputLayers.push(y),this.inputLayersNodeIndices.push(k),this.inputLayersTensorIndices.push(_)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let w=0;w<this.inputLayers.length;w++){let y=this.inputLayers[w];if(!(y instanceof Ef))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${n.inputs}. Input ${w} (0-based) originates from layer type ${y.getClassName()}.`);this.inputNames.push(y.name),this.feedInputShapes.push(y.batchInputShape),this.feedInputNames.push(y.name)}for(let w of this.outputLayers)this.outputNames.push(w.name);this.internalInputShapes=this.inputs.map(w=>w.shape),this.internalOutputShapes=this.outputs.map(w=>w.shape);let e={},r={},o={},i={},s={},a=[],l=(w,y,k,_,S,E)=>{(_==null||S==null||E==null)&&(_=w.sourceLayer,S=w.nodeIndex,E=w.tensorIndex);let N=_.inboundNodes[S];if(k.indexOf(N)!==-1)throw new Li(`The tensor ${w.name} at layer "${_.name}" is part of a cycle.`);if(y.indexOf(N)!==-1)return;this.containerNodes.add(t.nodeKey(_,S)),_.id in s||(s[_.id]=Object.keys(s).length),k.indexOf(N)===-1&&k.push(N);let B=N.inboundLayers.length;for(let D=0;D<B;D++){let P=N.inputTensors[D],M=N.inboundLayers[D],W=N.nodeIndices[D],ie=N.tensorIndices[D];l(P,y,k,M,W,ie)}for(y.push(N);k.indexOf(N)>=0;)k.splice(k.indexOf(N),1);a.push(N)},c=[],u=[];for(let w of this.outputs)l(w,c,u);let d=a.slice().reverse();for(let w of d){r[w.id]=w,w.id in e||(e[w.id]=0);let y=e[w.id],k=o[w.outboundLayer.id]==null?0:o[w.outboundLayer.id];y=Math.max(y,k),o[w.outboundLayer.id]=y,i[w.outboundLayer.id]=w.outboundLayer,e[w.id]=y;for(let _=0;_<w.inboundLayers.length;_++){let S=w.inboundLayers[_],E=w.nodeIndices[_],N=S.inboundNodes[E],B=e[N.id]==null?0:e[N.id];e[N.id]=Math.max(y+1,B),r[N.id]=N}}let p={};for(let w in e){let y=e[w];y in p||(p[y]=[]),p[y].push(r[w])}let h={};for(let w in o){let y=o[w];y in h||(h[y]=[]),h[y].push(i[w])}let f=Object.keys(h).map(w=>parseInt(w,10)).sort(__);this.layers=[];for(let w of f){let y=h[w];y.sort((k,_)=>{let S=s[k.id],E=s[_.id];return S<E?-1:S>E?1:0});for(let k of y)k instanceof t&&this.internalContainerRefs.push(k),this.layers.push(k)}this.layersByDepth=h,f=Object.keys(p).map(w=>parseInt(w,10)).sort(__);let m=this.inputs.slice(),g=[];for(let w of f)for(let y of p[w]){let k=y.outboundLayer;if(k!=null){for(let _ of y.inputTensors)if(m.indexOf(_)===-1)throw new Li(`Graph disconnected: cannot obtain value for tensor ${_} at layer "${k.name}". The following previous layers were accessed without issue: ${g}`);for(let _ of y.outputTensors)m.push(_);g.push(k.name)}}this.nodesByDepth=p;let v=this.layers.map(w=>w.name);for(let w of v){let y=v.filter(k=>k===w).length;if(y!==1)throw new Li(`The name "${w}" is used ${y} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new Lp({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(w=>null),outputMasks:this.outputs.map(w=>null),inputShapes:this.inputs.map(w=>w.shape),outputShapes:this.outputs.map(w=>w.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let n={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let e of this.layers)n.numDisposedVariables+=e.dispose().numDisposedVariables;for(let e of this.internalContainerRefs)n.numDisposedVariables+=e.dispose().numDisposedVariables}return n.refCountAfterDispose=this._refCount,n}get trainable(){return this.trainable_}set trainable(n){this.layers.forEach(e=>{e._trainableWeights.forEach(r=>r.trainable=n)}),this.trainable_=n}get trainableWeights(){if(this._trainableWeights.length>0)throw new J("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let n=[];for(let e of this.layers)n=n.concat(e.trainableWeights);return n}get nonTrainableWeights(){let n=[];for(let e of this.layers)n.push(...e.nonTrainableWeights);if(!this.trainable){let e=[];for(let r of this.layers)e.push(...r.trainableWeights);return e.concat(n)}return n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(n,e=!0){let r={},o=0,i=jIe(n);i&&this.parseWeights(n);for(let a of this.layers)for(let[l,c]of a.weights.entries()){let u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new J(`Duplicate weight name: ${u}`);r[u]=c,o++}let s=[];for(let a in n){let l=a;if(r[a]==null){let c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)s.push([r[l],n[a]]);else if(e)throw new J(`Provided weight data has no target variable: ${a}`);delete r[l]}if(e){let a=[];for(let l in r)a.push(l);if(a.length>0)throw new J(`${a.length} of ${o} weights are not set: ${a}`)}zv(s)}parseWeights(n){for(let e in Object.keys(n)){let r=e.split("/"),o=["vars","layer_checkpoint_dependencies"],i=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!o.includes(s)).join("/");i!==e&&(n[i]=n[e],delete n[e])}}updatedConfig(){let n=this.getConfig(),e={};return e.className=this.getClassName(),e.config=n,e.kerasVersion=`tfjs-layers ${Df}`,e.backend="TensorFlow.js",e}toJSON(n,e=!0){let r=fT(this.updatedConfig());return e?JSON.stringify(r):r}call(n,e){return te(()=>{n=xn(n);let r=new Su;for(let o=0;o<this.inputs.length;++o)r.add(this.inputs[o],n[o]);return Wg(this.outputs,r,e)})}computeMask(n,e){return te(()=>{n=xn(n);let r;return e==null?r=za(null,n.length):r=xn(e),this.runInternalGraph(n,r)[1]})}computeOutputShape(n){let e=$v(n);if(e.length!==this.inputLayers.length)throw new J(`Invalid inputShape argument ${n}: model has ${this.inputLayers.length} tensor inputs.`);let r={};for(let a=0;a<e.length;a++){let l=this.inputLayers[a],c=e[a],u=l.name+"_0_0";r[u]=c}let o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(__);if(o.length>1)for(let a of o){let l=this.nodesByDepth[a];for(let c of l){let u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;let d=[];for(let m=0;m<c.inboundLayers.length;m++){let g=c.inboundLayers[m],v=c.nodeIndices[m],w=c.tensorIndices[m],y=`${g.name}_${v}_${w}`,k=r[y];d.push(k)}let p=u.computeOutputShape(Ro(d)),h=$v(p),f=u.inboundNodes.indexOf(c);for(let m=0;m<h.length;m++){let g=`${u.name}_${f}_${m}`;r[g]=h[m]}}}let i=[],s=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;s.push(d)}for(let a=0;a<s.length;a++){let l=s[a];la(l in r),i.push(r[l])}return Ro(i)}runInternalGraph(n,e){e==null&&(e=za(null,n.length));let r={};for(let l=0;l<this.inputs.length;++l){let c=this.inputs[l],u=n[l],d=e[l];r[c.id]=[u,d]}let o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(__);for(let l of o){let c=this.nodesByDepth[l];for(let u of c){let d=u.outboundLayer,p=u.inputTensors,h=u.outputTensors,f=new Array;for(let m of p)m.id in r&&f.push(r[m.id]);if(f.length===p.length){let m={},g,v,w,y;if(u.callArgs!=null&&(m=u.callArgs),f.length===1){let[k,_]=f[0];m.mask==null&&(m.mask=_),w=xn(d.call(k,m)),y=xn(d.computeMask(k,_)),g=[k],v=[_]}else g=f.map(k=>k[0]),v=f.map(k=>k[1]),m.mask==null&&(m.mask=v),w=xn(d.call(g,m)),y=xn(d.computeMask(g,v));if(d.activityRegularizer)throw new yt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let k=0;k<h.length;++k){let _=h[k],S=w[k],E=y[k];r[_.id]=[S,E]}}}}let i=[],s=[],a=[];for(let l of this.outputs){la(l.id in r,`Could not compute output ${l.name} : ${l.id}`);let[c,u]=r[l.id];a.push(c.shape),i.push(c),s.push(u)}return[i,s,a]}buildNodeConversionMap(n){let e={},r;for(let o of this.layers){r=o instanceof t?1:0;for(let i=0;i<o.inboundNodes.length;i++){let s=t.nodeKey(o,i);this.containerNodes.has(s)&&(e[s]=r,r+=1)}}return e}getLayer(n,e){if(e!=null)return this.findLayer(e);if(n==null)throw new J("Provide either a layer name or layer index");if(typeof n=="number")return this.findLayer(n);for(let r of this.layers)if(r.name===n)return r;throw new J(`No such layer: ${n}`)}findLayer(n){if(this.layers.length<=n)throw new J(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}calculateLosses(){return te(()=>{let n=[];for(let e of this.layers)for(let r=0;r<e.inboundNodes.length;++r){let o=t.nodeKey(e,r);this.containerNodes.has(o)&&n.push(...e.calculateLosses())}return n})}getConfig(){let n={name:this.name},e=this.buildNodeConversionMap(this.layers),r=[];for(let s of this.layers){let a=s.getClassName(),l=s.getConfig(),c=[];for(let d=0;d<s.inboundNodes.length;d++){let p=s.inboundNodes[d],h=t.nodeKey(s,d),f={};if(this.containerNodes.has(h)){if(p.callArgs)try{JSON.stringify(p.callArgs),f=p.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),f={}}if(p.inboundLayers.length>0){let m=[];for(let g=0;g<p.inboundLayers.length;g++){let v=p.inboundLayers[g],w=p.nodeIndices[g],y=p.tensorIndices[g],k=t.nodeKey(v,w),_=e[k];_==null&&(_=0),m.push([v.name,_,y,f])}c.push(m)}}}let u={};u.name=s.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}n.layers=r;let o=[];for(let s=0;s<this.inputLayers.length;s++){let a=this.inputLayers[s],l=this.inputLayersNodeIndices[s],c=t.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let d=this.inputLayersTensorIndices[s];o.push([a.name,u,d])}n.inputLayers=o;let i=[];for(let s=0;s<this.outputLayers.length;s++){let a=this.outputLayers[s],l=this.outputLayersNodeIndices[s],c=t.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let d=this.outputLayersTensorIndices[s];i.push([a.name,u,d])}return n.outputLayers=i,n}static fromConfig(n,e,r={},o=!1){let i={},s={};function a(g,v){g.name in s?s[g.name].push(v):s[g.name]=[v]}function l(g,v){let w=[],y;for(let k of v){let _=k[0],S=k[1],E=k[2];if(y=k[3]==null?{}:k[3],!(_ in i)){a(g,v);return}let N=i[_];if(N.inboundNodes.length<=S){a(g,v);return}let B=N.inboundNodes[S];w.push(B.outputTensors[E])}w.length>0&&g.apply(Ro(w),y)}function c(g){let v=g.name,w=Ui(g,e.customObjects!=null?e.customObjects:{});w.setFastWeightInitDuringBuild(o),i[v]=w,g.inboundNodes.forEach(k=>{if(!(k instanceof Array))throw new J(`Corrupted configuration, expected array for nodeData: ${k}`);a(w,k)})}let u=e.name,d=e.layers;for(let g of d)c(g);for(;!PJ(s);)for(let g of d){let v=i[g.name];if(v.name in s){let w=s[v.name];delete s[v.name];for(let y of w)l(v,y)}}let p=[],h=[],f=e.inputLayers;for(let g of f){let v=g[0],w=g[1],y=g[2];la(v in i);let _=i[v].inboundNodes[w].outputTensors;p.push(_[y])}let m=e.outputLayers;for(let g of m){let v=g[0],w=g[1],y=g[2];la(v in i);let _=i[v].inboundNodes[w].outputTensors;h.push(_[y])}return new n({inputs:p,outputs:h,name:u})}get stateful(){if(this._stateful)throw new J("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let n of this.layers)if(n.stateful)return!0;return!1}resetStates(){te(()=>{this.layers.forEach(n=>{n.stateful&&n.resetStates()})})}};function zIe(t,n,e){let r=n.length;if(t==null||Array.isArray(t)&&t.length===0)return n.map(o=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&n[0]in t?[t[n[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${e} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){let o=[];return n.forEach(i=>{i in t?o.push(t[i]):o.push(null)}),o}else throw new Error(`The model has multiple (${r}) outputs, so ${e} must be either an array with ${r} elements or an object with ${n} keys. Provided ${e} not understood: ${JSON.stringify(t)}`)}function gT(t,n){return zIe(t,n,"classWeight")}function vT(t,n,e,r){return z(this,null,function*(){if(n!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(e!=null){let o=te(()=>{if(t.shape.length===1)return mi(t);if(t.shape.length===2){if(t.shape[1]>1)return Rl(t,1);if(t.shape[1]===1)return $(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(yield o.data());ht(o);let s=[];return i.forEach(a=>{if(e[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);s.push(e[a])}),Yn(s,"float32")}else return null})}function xee(t,n){return L(t,n)}var HIe=32;function bee(t,n){let e,r,o=n;e=o.xs,r=o.ys,x.assert(e!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${n}`);let i=kee("input",t.inputNames,e),s=kee("output",t.outputNames,r),a=i[0].shape[0];x.assert(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),x.assert(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)x.assert(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<s.length;l++)x.assert(s[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:s}}function kee(t,n,e){if(e instanceof Rt)return[e];if(Array.isArray(e))return x.assert(e.length===n.length,()=>`Received an array of ${e.length} Tensors, but expected ${n.length} to match the ${t} keys ${n}.`),e;{let r=[];for(let o of n){if(e[o]==null)throw new J(`The feature data generated by the dataset lacks the required ${t} key '${o}'.`);r.push(e[o])}return r}}function UIe(t){if(t.length===3)throw new yt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function Cee(t,n,e){return z(this,null,function*(){let r=e.batchesPerEpoch!=null;if(x.assert(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),x.assert(e!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),x.assert(e.epochs!=null&&e.epochs>0&&Number.isInteger(e.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${e.epochs}`),x.assert(!r||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${e.batchesPerEpoch}`),x.assert(e.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{let o=e.validationData!=null,i,s;if(o)if(_ee(e.validationData))x.assert(e.validationBatches==null||e.validationBatches>0&&Number.isInteger(e.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${e.validationBatches}`);else{let g=UIe(e.validationData);i=g.xs,s=g.ys}let a=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),c;o?c=l.slice().concat(l.map(g=>"val_"+g)):c=l.slice();let u=aT(e.callbacks,e.yieldEvery),d=e.verbose==null?1:e.verbose,{callbackList:p,history:h}=lT(u,d,e.epochs,null,null,GIe(n,e),null,o,c);p.setModel(t),t.history=h,yield p.onTrainBegin(),t.stopTraining_=!1;let f=e.initialEpoch==null?0:e.initialEpoch,m=yield n.iterator();for(;f<e.epochs;){let g={};yield p.onEpochBegin(f);let v=0,w=0;for(r||(m=yield n.iterator());!r||v<e.batchesPerEpoch;){let y=yield m.next();if(r&&y.done){console.warn(`You provided \`batchesPerEpoch\` as ${e.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${e.batchesPerEpoch*e.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(y.value!=null){let{xs:k,ys:_}=bee(t,y.value),S={};S.batch=w,S.size=k[0].shape[0],yield p.onBatchBegin(w,S);let E=[];if(e.classWeight!=null){let D=gT(e.classWeight,t.outputNames);for(let P=0;P<D.length;++P)E.push(yield vT(_[P],null,D[P]))}let N=k.concat(_).concat(E),B=a(N);ht(N);for(let D=0;D<l.length;++D){let P=l[D],M=B[D];S[P]=M,Hn(M)}yield p.onBatchEnd(w,S),sT(S),w++,v++}if(r?v>=e.batchesPerEpoch:y.done){if(o){let k;_ee(e.validationData)?k=xn(yield t.evaluateDataset(e.validationData,{batches:e.validationBatches})):k=xn(t.evaluate(i,s,{batchSize:e.validationBatchSize==null?HIe:e.validationBatchSize,verbose:0}));for(let _=0;_<t.metricsNames.length;++_)g[`val_${t.metricsNames[_]}`]=k[_]}break}if(t.stopTraining_)break}if(yield p.onEpochEnd(f,g),f++,t.stopTraining_)break}return yield p.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}})}function GIe(t,n){let e=null;return n.batchesPerEpoch!=null?e=n.batchesPerEpoch:Number.isFinite(t.size)&&(e=t.size),e}function _ee(t){return typeof t.iterator=="function"}function WIe(t){return typeof t.next=="function"}function Mee(t,n,e){return z(this,null,function*(){e=e||{};let r=e.batches!=null,o=t.testFunction,i=[];if(e.verbose>0)throw new yt("Verbose mode is not implemented yet.");x.assert(!r||e.batches>0&&Number.isInteger(e.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(e.batches)}`);let s=WIe(n)?n:yield n.iterator(),a=0,l=0;for(;!r||l<e.batches;){let c=yield s.next();if(i=te(()=>{if(c.value){let{xs:u,ys:d}=bee(t,c.value),p=u.concat(d),h=te(()=>o(p));if(ht(p),l===0)for(let m=0;m<h.length;++m)i.push($e(0));let f=p[0].shape[0];for(let m=0;m<h.length;++m){let g=h[m],v=i[m];i[m]=te(()=>fe(i[m],L(f,g))),l>0&&ht(v)}ht(h),a+=f,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${e.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){let u=i[c];i[c]=Be(i[c],a),ht(u)}return Ro(i)})}function wT(t){x.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Wv(t,n,e){return t==null?[null]:Array.isArray(t)?t.map(r=>Bp(r,n,e-n)):Bp(t,n,e-n)}function yT(t,n){return te(()=>t==null?null:Array.isArray(t)?t.map(e=>yT(e,n)):KS(t,n.dtype==="int32"?n:me(n,"int32")))}function xT(t,n){let e=[],r=0,o=null;for(;r<t;)o=r+n,o>=t&&(o=t),e.push([r,o]),r=o;return e}function UB(t){let n=[];t instanceof Rt&&(t=[t]);for(let e=0;e<t.length;++e){let r=t[e];if(r.rank===1)n.push(Pp(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(r)}}return n}function qa(t,n){if(t==null)return;let e=[];if(n instanceof Rt)e.push(n.id);else if(Array.isArray(n))n.forEach(o=>e.push(o.id));else if(n!=null)for(let o in n){let i=n[o];e.push(i.id)}let r=[];if(t instanceof Rt)e.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(o=>{e.indexOf(o.id)===-1&&r.push(o)});else if(t!=null)for(let o in t){let i=t[o];e.indexOf(i.id)===-1&&r.push(i)}r.forEach(o=>{o.isDisposed||o.dispose()})}function qIe(t){return t instanceof Rt}function GB(t){return Array.isArray(t)}function See(t){return!qIe(t)&&!GB(t)}function Tee(t,n,e,r=!0,o=""){if(n==null||n.length===0){if(t!=null){let s=!1;if(GB(t)&&t.length>0)s=!0;else if(See(t)){for(let a in t)if(t.hasOwnProperty(a)){s=!0;break}}else s=!0;if(s)throw new J(`Error when checking model ${o} expected no data, but got ${t}`)}return[]}if(t==null)return n.map(s=>null);let i;if(See(t)){t=t,i=[];for(let s of n){if(t[s]==null)throw new J(`No data provided for "${s}". Need data for each key in: ${n}`);i.push(t[s])}}else if(GB(t)){if(t=t,t.length!==n.length)throw new J(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${n.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,n.length>1)throw new J(`The model ${o} expects ${n.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=UB(i),e!=null)for(let s=0;s<n.length;++s){if(e[s]==null)continue;let a=i[s];if(a.shape.length!==e[s].length)throw new J(`Error when checking ${o}: expected ${n[s]} to have ${e[s].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<e[s].length;++l){if(l===0&&!r)continue;let c=a.shape[l],u=e[s][l];if(u!=null&&u>=0&&c!==u)throw new J(`${o} expected a batch of elements where each example has shape [${e[s].slice(1,e[s].length)}] (i.e.,tensor shape [*,${e[s].slice(1,e[s].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function KIe(t,n,e){let r=Ua(t.map(i=>i.shape[0]));r.sort();let o=Ua(n.map(i=>i.shape[0]));if(o.sort(),r.length>1)throw new J(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(o.length>1)throw new J(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(i=>i.shape))}`);if(r.length>0&&o.length>0&&!x.arraysEqual(r,o))throw new J(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${o[0]} target sample(s).`)}function ZIe(t,n,e){let r=[Eu,Gv,Kg];for(let o=0;o<t.length;++o){let i=t[o],s=n[o],a=e[o];if(s!=null){if(s===Kg&&i.shape[i.shape.length-1]===1)throw new J(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(s)!==-1){let l=i.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){let d=l[u],p=c[u];if(p!=null&&d!==p)throw new J(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function Eee(t,n,e,r=!0,o=""){let i;if(Array.isArray(t)){if(t.length!==n.length)throw new J(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${n.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(n.length>1)throw new J(`The model expects ${n.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(e!=null)for(let s=0;s<n.length;++s){if(e[s]==null)continue;let a=i[s];if(a.shape.length!==e[s].length)throw new J(`Error when checking ${o}: expected ${n[s]} to have ${e[s].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<e[s].length;++l){if(l===0&&!r)continue;let c=a.shape[l],u=e[s][l];if(u!=null&&u!==c)throw new J(`Error when checking ${o}: expected ${n[s]} to have shape ${JSON.stringify(e[s])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function XIe(t,n){if(t==null||Array.isArray(t)&&t.length===0)return n.map(r=>[]);let e;if(typeof t=="string"||typeof t=="function")e=[t];else if(Array.isArray(t)||typeof t=="object")e=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(e))return n.map(r=>e);{let r=[];for(let o of n){let i=e.hasOwnProperty(o)?e[o]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}var YIe="layers-model",Ka=(()=>{class t extends mT{constructor(e){super(e),this.isTraining=!1}summary(e,r,o=console.log){if(!this.built)throw new J("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");wee(this,e,r,o)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=vee(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Ko))throw new J("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let r=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new J(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(let a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),r.push(cT(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new J(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);r=e.loss.map(l=>cT(l))}else{let a=cT(e.loss);this.outputs.forEach(l=>{r.push(a)})}this.lossFunctions=r,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){let l=this.internalOutputShapes[a],c=this.outputNames[a];this.feedOutputNames.push(c),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[a])}let o=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Hl("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(o.indexOf(a)!==-1)continue;let l=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([l,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});let i=XIe(e.metrics,this.outputNames),s=(a,l,c)=>{this.outputNames.length>1&&(l=this.outputNames[a]+"_"+l),this.metricsNames.push(l),this.metricsTensors.push([c,a])};Hl("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(o.indexOf(a)!==-1)continue;let l=i[a];(u=>{let p,h,f;for(let m of u){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){let v=this.internalOutputShapes[a];v[v.length-1]===1||this.lossFunctions[a]===Gv?["accuracy","acc"].indexOf(m)!==-1?h=R_:["crossentropy","ce"].indexOf(m)!==-1&&(h=dT):this.lossFunctions[a]===Uv?["accuracy","acc"].indexOf(m)!==-1?h=pT:["crossentropy","ce"].indexOf(m)!==-1&&(h=jB):["accuracy","acc"].indexOf(m)!==-1?h=O_:["crossentropy","ce"].indexOf(m)!==-1&&(h=F_);let w;["accuracy","acc"].indexOf(m)!==-1?w="acc":["crossentropy","ce"].indexOf(m)!==-1&&(w="ce"),f=h,p=""+w}else f=mee(m),p=""+B_(m);let g;Hl(p,()=>{g=f}),s(a,p,g)}})(l)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,r,o={}){let i=o.batchSize==null?32:o.batchSize;wT(i);let a=this.standardizeUserDataXY(e,r,!0,i);try{let l=a[0].concat(a[1]);this.makeTestFunction();let c=this.testFunction,u=this.testLoop(c,l,i,o.verbose,o.steps);return Ro(u)}finally{qa(a[0],e),qa(a[1],r)}}evaluateDataset(e,r){return z(this,null,function*(){return this.makeTestFunction(),Mee(this,e,r)})}checkNumSamples(e,r,o,i="steps"){let s;if(o!=null){if(s=null,r!=null)throw new J(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${r}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new J(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,r){if(Array.isArray(r)&&r.length===0)throw new J("`outputs` is an empty Array, which is not allowed.");let o=Array.isArray(r),i=o?r:[r],s=this.retrieveSymbolicTensors(i),a=new Su;if(e instanceof Rt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new J(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)a.add(this.inputs[c],e[c])}else for(let c of this.inputs){let u=e[c.name];if(u==null)throw new J(`No value is provided for the model's input ${c.name}`);a.add(c,u)}let l=Wg(s,a);return o?l:l[0]}retrieveSymbolicTensors(e){let r=za(null,e.length),o=e.length;for(let i of this.layers){let s=Array.isArray(i.output)?i.output:[i.output],a=s.map(l=>l.name);for(let l=0;l<e.length;++l){let c=a.indexOf(e[l]);if(c!==-1&&(r[l]=s[c],o--),o===0)break}if(o===0)break}if(o>0){let i=[];throw r.forEach((s,a)=>{s==null&&i.push(e[a])}),new J(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return r}predictLoop(e,r=32,o=!1){return te(()=>{let i=this.checkNumSamples(e);if(o)throw new yt("Verbose predictLoop() is not implemented yet.");let s=xT(i,r),a=this.outputs.map(l=>[]);for(let l=0;l<s.length;++l)te(()=>{let u=s[l][0],d=s[l][1],p=Wv(e,u,d),h=[];if(Array.isArray(p))for(let m=0;m<p.length;++m)h.push({key:this.inputs[m],value:p[m]});else h.push({key:this.inputs[0],value:p});let f=new Su(h);return Wg(this.outputs,f)}).forEach((u,d)=>a[d].push(u));return Ro(a.map(l=>hn(l,0)))})}predict(e,r={}){let o=UB(e);Eee(o,this.inputNames,this.feedInputShapes,!1);try{let i=r.batchSize==null?32:r.batchSize;return wT(i),this.predictLoop(o,i)}finally{qa(o,e)}}predictOnBatch(e){Eee(e,this.inputNames,this.feedInputShapes,!0);let r=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,r)}standardizeUserDataXY(e,r,o=!0,i){if(this.optimizer_==null)throw new Li("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let s=[];for(let a=0;a<this.feedOutputShapes.length;++a){let l=this.feedOutputShapes[a];this.feedLossFns[a]===Uv?s.push(l.slice(0,l.length-1).concat([1])):s.push(l)}if(e=Tee(e,this.feedInputNames,this.feedInputShapes,!1,"input"),r=Tee(r,this.feedOutputNames,s,!1,"target"),KIe(e,r,null),ZIe(r,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new J(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,r]}standardizeUserData(e,r,o,i,s=!0,a){return z(this,null,function*(){let[l,c]=this.standardizeUserDataXY(e,r,s,a);if(o!=null)throw new Error("sample weight is not supported yet.");let u=null;if(i!=null){let d=gT(i,this.outputNames);u=[];for(let p=0;p<d.length;++p)u.push(yield vT(c[p],null,d[p]))}return[l,c,u]})}testLoop(e,r,o,i=0,s){return te(()=>{let a=this.checkNumSamples(r,o,s,"steps"),l=[];if(i>0)throw new yt("Verbose mode is not implemented yet.");if(s!=null)throw new yt("steps mode in testLoop() is not implemented yet");{let c=xT(a,o),u=Yn(Vi(0,a));for(let d=0;d<c.length;++d){let p=c[d][0],h=c[d][1],f=Bp(u,p,h-p),m=yT(r,f),g=e(m);if(d===0)for(let v=0;v<g.length;++v)l.push($e(0));for(let v=0;v<g.length;++v){let w=g[v];l[v]=fe(l[v],L(h-p,w))}}for(let d=0;d<l.length;++d)l[d]=Be(l[d],a)}return l})}getDedupedMetricsNames(){let e=this.metricsNames,r=[];for(let o=0;o<e.length;++o){let i=e[o],s=i;if(vB(e,i)>1){let a=vB(e.slice(0,o),i);s+=`_${a}`}r.push(s)}return r}makeTrainFunction(){return e=>{let r=[],o=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],l=()=>{let p=[];for(let g=0;g<this.inputs.length;++g)p.push({key:this.inputs[g],value:o[g]});let h=new Su(p),f=Wg(this.outputs,h,{training:!0}),m;for(let g=0;g<this.lossFunctions.length;++g){let v=this.lossFunctions[g],w=v(i[g],f[g]);s[g]!=null&&(w=xee(w,s[g]));let y=Rn(w);r.push(y),g===0?m=w:m=fe(m,w)}for(let g=0;g<this.metricsTensors.length;++g){let v;if(this.outputs.length>1&&g<this.outputs.length)v=r[g];else{let w=this.metricsTensors[g][0],y=this.metricsTensors[g][1];v=Rn(w(i[y],f[y]))}Hn(v),a.push(v)}return m=Rn(m),this.calculateLosses().forEach(g=>{m=fe(m,g)}),m},c=this.collectedTrainableWeights.map(p=>p.read());return[this.optimizer_.minimize(l,!0,c)].concat(a)}}makeTestFunction(){this.testFunction=e=>te(()=>{let r=[],o,i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:i[u]});let l=new Su(a),c=Wg(this.outputs,l);for(let u=0;u<this.lossFunctions.length;++u){let d=this.lossFunctions[u],p=Rn(d(s[u],c[u]));u===0?o=p:o=fe(o,p),r.push(o)}for(let u=0;u<this.metricsTensors.length;++u){let d=this.metricsTensors[u][0],p=this.metricsTensors[u][1],h=Rn(d(s[p],c[p]));r.push(h)}return r})}fit(i,s){return z(this,arguments,function*(e,r,o={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,l,c,u,d,p,h,f,m;try{let g=o.batchSize==null?32:o.batchSize;wT(g);let w=yield this.standardizeUserData(e,r,o.sampleWeight,o.classWeight,!1,g);a=w[0],l=w[1],m=w[2];let y=!1,k;if(o.validationData!=null&&o.validationData.length>0){if(y=!0,o.validationData.length===2)d=o.validationData[0],p=o.validationData[1];else throw o.validationData.length===3?new yt("validationData including sample weights is not supported yet."):new J(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${o.validationData} is invalid.`);let W=yield this.standardizeUserData(d,p,null,null,!0,g);h=W[0],f=W[1],k=h.concat(f)}else if(o.validationSplit!=null&&o.validationSplit>0&&o.validationSplit<1){y=!0;let M=Math.floor(a[0].shape[0]*(1-o.validationSplit)),W=a[0].shape[0];h=Wv(a,M,W),c=a,a=Wv(a,0,M),f=Wv(l,M,W),u=l,l=Wv(l,0,M),k=h.concat(f)}else o.validationSteps!=null&&(y=!0);let _=a.concat(l).concat(m);this.checkTrainableWeightsConsistency();let S=this.makeTrainFunction(),E=this.getDedupedMetricsNames(),N,B;y?(this.makeTestFunction(),N=this.testFunction,B=E.slice().concat(E.map(M=>"val_"+M))):(N=null,k=[],B=E.slice());let D=aT(o.callbacks,o.yieldEvery);return yield this.fitLoop(S,_,E,g,o.epochs,o.verbose,D,N,k,o.shuffle,B,o.initialEpoch,null,null)}finally{this.isTraining=!1,qa(a,e),qa(l,r),qa(c,e),qa(u,r),qa(h,d),qa(f,p),m!=null&&ht(m)}})}fitLoop(e,r,o,i,s,a,l,c,u,d,p,h,f,m){return z(this,null,function*(){i==null&&(i=32),s==null&&(s=1),d==null&&(d=!0),h==null&&(h=0);let g=!1;if(c!=null&&u!=null&&(g=!0),m!=null&&(g=!0,f==null))throw new J("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let v=this.checkNumSamples(r,i,f,"steps_per_epoch"),w;v!=null&&(w=Vi(0,v)),a==null&&(a=1);let{callbackList:y,history:k}=lT(l,a,s,h,v,f,i,g,p);y.setModel(this),this.history=k,yield y.onTrainBegin(),this.stopTraining_=!1;for(let _=h;_<s;++_){yield y.onEpochBegin(_);let S={};if(f!=null)throw new yt("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new yt("batch shuffling is not implemneted yet");d&&x.shuffle(w);let E=Yn(w),N=xT(v,i);for(let B=0;B<N.length;++B){let D={};if(yield y.onBatchBegin(B,D),te(()=>{let P=N[B][0],M=N[B][1],W=Bp(E,P,M-P);D.batch=B,D.size=M-P;let ie=yT(r,W),Z=e(ie);for(let X=0;X<o.length;++X){let G=o[X],H=Z[X];D[G]=H,Hn(H)}if(B===N.length-1&&g){let X=this.testLoop(c,u,i);for(let G=0;G<o.length;++G){let H=o[G],V=X[G];Hn(V),S["val_"+H]=V}}}),yield y.onBatchEnd(B,D),sT(D),this.stopTraining_)break}E.dispose()}if(yield y.onEpochEnd(_,S),this.stopTraining_)break}return yield y.onTrainEnd(),yield this.history.syncData(),this.history})}fitDataset(e,r){return z(this,null,function*(){return Cee(this,e,r)})}trainOnBatch(e,r){return z(this,null,function*(){let o=yield this.standardizeUserData(e,r),i=o[0],s=o[1],l=this.makeTrainFunction()(i.concat(s)),c=[];for(let u of l){let d=yield u.data();c.push(d[0])}return ht(l),qa(o[0],e),qa(o[1],r),Ro(c)})}getNamedWeights(e){let r=[],o=e!=null&&e.trainableOnly,i=o?this.trainableWeights:this.weights,s=this.getWeights(o);for(let a=0;a<i.length;++a)o&&!i[a].trainable||r.push({name:i[a].originalName,tensor:s[a]});return r}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let r=xv().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=r-xv().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ha(this.loss);else if(Array.isArray(this.loss)){for(let r of this.loss)if(typeof r!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(r=>Ha(r))}else{let r=Object.keys(this.loss);e={};let o=this.loss;for(let i of r)if(typeof o[i]=="string")e[i]=Ha(o[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ha(B_(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ha(B_(e)));{let e={};for(let r in this.metrics)e[r]=Ha(B_(this.metrics[r]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let r=Zg(e.optimizer_config),o=Ui(r),i;if(typeof e.loss=="string")i=Fp(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(a=>Fp(a));else if(e.loss!=null){i={};for(let a in e.loss)i[a]=Fp(e.loss[a])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(a=>Fp(a));else if(e.metrics!=null){s={};for(let a in e.metrics)s[a]=Fp(e.metrics[a])}this.compile({loss:i,metrics:s,optimizer:o})}save(e,r){return z(this,null,function*(){if(typeof e=="string"){let u=qr.getSaveHandlers(e);if(u.length===0)throw new J(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new J(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new J("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let o=yield qr.encodeWeights(this.getNamedWeights(r)),l={modelTopology:this.toJSON(null,!1),format:YIe,generatedBy:`TensorFlow.js tfjs-layers v${Df}`,convertedBy:null};if((r==null?!1:r.includeOptimizer)&&this.optimizer!=null){l.trainingConfig=this.getTrainingConfig();let u="optimizer",{data:d,specs:p}=yield qr.encodeWeights(yield this.optimizer.getWeights(),u);o.specs.push(...p),o.data=qr.concatenateArrayBuffers([o.data,d])}return this.userDefinedMetadata!=null&&(HB(this.userDefinedMetadata,this.name,!0),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=o.data,l.weightSpecs=o.specs,e.save(l)})}setUserDefinedMetadata(e){HB(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();ge.registerClass(Ka);var QIe=(()=>{class t extends Ka{}return t.className="Functional",t})();ge.registerClass(QIe);function Iee(t,n){return z(this,null,function*(){"modelTopology"in t||(t={modelTopology:t}),t=t;let e=t.modelTopology;e.model_config!=null&&(e=e.model_config);let r=Zg(e),o=Ui(r,n);if(t.weightsManifest!=null){let i=yield qr.loadWeights(t.weightsManifest,t.pathPrefix,o.weights.map(a=>a.originalName)),s={};for(let a of o.weights)s[a.originalName]=i[a.originalName];o.loadWeights(s),ht(i)}return o})}function qv(t,n){return z(this,null,function*(){if(n==null&&(n={}),typeof t=="string"){let e=qr.getLoadHandlers(t,n);if(e.length===0)e.push(qr.browserHTTPRequest(t,n));else if(e.length>1)throw new J(`Found more than one (${e.length}) load handlers for URL '${t}'`);t=e[0]}return JIe(t,void 0,n)})}function JIe(t,n,e){return z(this,null,function*(){if(e==null&&(e={}),t.load==null)throw new J("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=yield t.load(),o=r.modelTopology;o.model_config!=null&&(o=o.model_config);let i=e.strict==null?!0:e.strict,s=r.weightData!=null&&r.weightSpecs!=null&&i,a=Ui(Zg(o),n,s),l=r.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),r.userDefinedMetadata!=null&&a.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new J("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:c,optimizerWeights:u}=eDe(r.weightData,r.weightSpecs);a.loadWeights(c,i),a.optimizer!=null&&u.length>0&&(yield a.optimizer.setWeights(u)),ht(c),ht(u.map(d=>d.tensor))}return a})}function eDe(t,n){let e=qr.decodeWeights(t,n),r={},o=[];return n.forEach(i=>{i.group==="optimizer"?o.push({name:i.name,tensor:e[i.name]}):r[i.name]=e[i.name]}),{modelWeights:r,optimizerWeights:o}}var P_=(()=>{class t extends Ka{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Sf("sequential_"),e.layers!=null)for(let r of e.layers)this.add(r)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(o=>o<0))throw new J(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let r=e instanceof t||e instanceof Ka,o;if(r){if(o=e,o.outputs.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(o.inputs.length!==1)throw new J("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new J("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let i=rT({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(r)this.outputs=o.outputs,this.inputs=o.inputs;else{if(e.inboundNodes.length!==1)throw new J(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new J("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=DB(this.outputs[0])}this.inboundNodes=[],new Lp({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:za(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{let i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,r){return this.model==null&&this.build(),this.model.call(e,r)}build(e){if(zt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Ka({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,r,o=console.log){this.built||this.build(),super.summary(e,r,o)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,r,o={}){if(!this.built)throw new Li("The model needs to be compiled before being used.");return this.model.evaluate(e,r,o)}evaluateDataset(e,r){return z(this,null,function*(){if(!this.built)throw new Li("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,r)})}predict(e,r={}){return this.model==null&&this.build(),this.model.predict(e,r)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}fit(i,s){return z(this,arguments,function*(e,r,o={}){if(!this.built)throw new Li("The model needs to be compiled before being used.");return this.model.fit(e,r,o)})}fitDataset(e,r){return z(this,null,function*(){if(!this.built)throw new Li("The model needs to be compiled before being used.");return this.model.fitDataset(e,r)})}trainOnBatch(e,r){return z(this,null,function*(){return this.model.trainOnBatch(e,r)})}static fromConfig(e,r,o={},i=!1){let s,a={};if(r instanceof Array){if(r[0].className==null||r[0].className==="Merge")throw new J("Legacy serialization format not supported yet.");s=r}else x.assert(r.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=r.layers,delete r.layers,a=r;let l=new e(a);if(!(l instanceof t))throw new yt(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(let c of s){let d=Ui(c,void 0,i);i&&d.setFastWeightInitDuringBuild(!0),l.add(d)}return l}set stopTraining(e){if(this.model==null)throw new J("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new J("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let r of this.layers){let o={};o.className=r.getClassName(),o.config=r.getConfig(),e.push(o)}return{name:this.name,layers:e}}}return t.className="Sequential",t})();ge.registerClass(P_);function Dee(t){return new Ka(t)}function Nee(t){return new P_(t)}function kT(t){return rT(t)}function Aee(t,n){$B.registerCallbackConstructor(t,n)}var Xo=class extends ge.Serializable{getConfig(){return{}}},tDe=(()=>{class t extends Xo{apply(e,r=1){return QJ(e,r)}}return t.className="elu",t})();ge.registerClass(tDe);var nDe=(()=>{class t extends Xo{apply(e){return Ig(e)}}return t.className="selu",t})();ge.registerClass(nDe);var rDe=(()=>{class t extends Xo{apply(e){return Ao(e)}}return t.className="relu",t})();ge.registerClass(rDe);var oDe=(()=>{class t extends Xo{apply(e){return te(()=>As(6,Ao(e)))}}return t.className="relu6",t})();ge.registerClass(oDe);var iDe=(()=>{class t extends Xo{apply(e){return e}}return t.className="linear",t})();ge.registerClass(iDe);var sDe=(()=>{class t extends Xo{apply(e){return ai(e)}}return t.className="sigmoid",t})();ge.registerClass(sDe);var aDe=(()=>{class t extends Xo{apply(e){return eee(e)}}return t.className="hardSigmoid",t})();ge.registerClass(aDe);var lDe=(()=>{class t extends Xo{apply(e){return Pa(e)}}return t.className="softplus",t})();ge.registerClass(lDe);var cDe=(()=>{class t extends Xo{apply(e){return JJ(e)}}return t.className="softsign",t})();ge.registerClass(cDe);var uDe=(()=>{class t extends Xo{apply(e){return Fa(e)}}return t.className="tanh",t})();ge.registerClass(uDe);var qB=(()=>{class t extends Xo{apply(e,r=-1){return Dp(e,r)}}return t.className="softmax",t})();ge.registerClass(qB);var dDe=(()=>{class t extends Xo{apply(e,r=-1){return _g(e,r)}}return t.className="logSoftmax",t})();ge.registerClass(dDe);var pDe=(()=>{class t extends Xo{apply(e){return te(()=>te(()=>{let r=Math.sqrt(2),o=L(.5,fe(1,kg(Be(e,r))));return L(e,o)}))}}return t.className="gelu",t})();ge.registerClass(pDe);var hDe=(()=>{class t extends Xo{apply(e){return te(()=>L(.5,L(e,fe(1,Fa(L(Mn(Be(2,Math.PI)),fe(e,L(.044715,qo(e,3)))))))))}}return t.className="gelu_new",t})();ge.registerClass(hDe);var fDe=(()=>{class t extends Xo{apply(e){return te(()=>L(e,Fa(Pa(e))))}}return t.className="mish",t})();ge.registerClass(fDe);var mDe=(()=>{class t extends Xo{apply(e,r=1){return te(()=>L(ai(L(e,r)),e))}}return t.className="swish",t})();ge.registerClass(mDe);function Gl(t){return t.getClassName()}function WB(t,n={}){return Cu(t,ge.SerializationMap.getMap().classNameMap,n,"activation")}function Wl(t){if(t==null){let n={};return n.className="linear",n.config={},WB(n)}if(typeof t=="string"){let n={};return n.className=t,n.config={},WB(n)}else return t instanceof Xo?t:WB(t)}function KB(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}var _T=class extends ge.Serializable{},L_=(()=>{class t extends _T{constructor(e){super(),KB(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return te(()=>{let r=On([1]);return this.hasL1&&(r=fe(r,Ve(L(this.l1,Pn(e))))),this.hasL2&&(r=fe(r,Ve(L(this.l2,Gg(e))))),$(r,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,r){return new e({l1:r.l1,l2:r.l2})}}return t.className="L1L2",t})();ge.registerClass(L_);function Fee(t){return KB(t),new L_({l1:t!=null?t.l1:null,l2:0})}function Bee(t){return KB(t),new L_({l2:t!=null?t.l2:null,l1:0})}var Ree={l1l2:"L1L2"};function _n(t){return Fv(t)}function Oee(t,n={}){return Cu(t,ge.SerializationMap.getMap().classNameMap,n,"regularizer")}function Fn(t){if(t==null)return null;if(typeof t=="string"){let e={className:t in Ree?Ree[t]:t,config:{}};return Oee(e)}else return t instanceof _T?t:Oee(t)}var ZB=(()=>{class t extends xt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,r){e=ut(e);let o=Ao(e);return this.maxValue!=null&&(o=ho(o,0,this.maxValue)),o}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ReLU",t})();ge.registerClass(ZB);var XB=(()=>{class t extends xt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,r){let o=ut(e);return bp(o,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},r=super.getConfig();return Object.assign(e,r),e}}return t.className="LeakyReLU",t})();ge.registerClass(XB);var YB=(()=>{class t extends xt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=In(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Fn(e.alphaRegularizer),this.alphaConstraint=pr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new J(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=zt(e);let r=e.slice(1);if(this.sharedAxes!=null)for(let i of this.sharedAxes)r[i-1]=1;this.alpha=this.addWeight("alpha",r,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let o={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)o[i]=e[i];this.inputSpec=[new Dn({ndim:e.length,axes:o})],this.built=!0}call(e,r){return e=ut(e),Ip(e,this.alpha.read())}getConfig(){let e={alphaInitializer:$n(this.alphaInitializer),alphaRegularizer:_n(this.alphaRegularizer),alphaConstraint:dr(this.alphaConstraint),sharedAxes:this.sharedAxes},r=super.getConfig();return Object.assign(e,r),e}}return t.className="PReLU",t})();ge.registerClass(YB);var QB=(()=>{class t extends xt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new yt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,r){let o=ut(e);return Pl(o)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ELU",t})();ge.registerClass(QB);var JB=(()=>{class t extends xt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,r){let o=ut(e);return L(o,me(Zn(o,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ThresholdedReLU",t})();ge.registerClass(JB);var eP=(()=>{class t extends xt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new qB().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,r){return te(()=>{let o=ut(e),i=r.mask;if(i!=null){let s=L(Oe(Tr(o.shape),me(i,o.dtype)),$e(-1e9));o=fe(o,s)}return this.axis instanceof Array?this.axis.length>1?cr(Oe(o,Mp(o,this.axis,!0))):this.softmax(o,this.axis[0]):this.softmax(o,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Softmax",t})();ge.registerClass(eP);function Nf(t,n,e){if(typeof t=="number")return za(t,n);if(t.length!==n)throw new J(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${t.length} elements.`);for(let r=0;r<n;++r){let o=t[r];if(!KJ(o))throw new J(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${JSON.stringify(t)} including a non-integer number ${o}`)}return t}function cs(t,n,e,r,o=1){if(t==null)return t;let i=n+(n-1)*(o-1),s;return e==="same"?s=t:s=t-i+1,Math.floor((s+r-1)/r)}function ql(t,n,e,r){if(t==null)return null;if(r==="valid")t=t*n+Ul([e-n,0]);else if(r==="same")t=t*n;else throw new J(`Unsupport padding mode: ${r}.`);return t}function V_(t,n){return te(()=>(er(n),n==="channelsFirst"?Lt(t,[0,2,3,1]):t))}function tP(t,n){return te(()=>(er(n),n==="channelsFirst"?Lt(t,[0,2,3,4,1]):t))}function vDe(t,n,e,r=1,o="valid",i,s=1){return te(()=>{if(i==null&&(i=ji()),er(i),t.shape.length!==3)throw new J(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(n.shape.length!==3)throw new J(`The kernel for a conv1dWithBias operation should be 3, but is ${n.shape.length} instead`);if(e!=null&&e.shape.length!==1)throw new J(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(i==="channelsFirst"&&(t=Lt(t,[0,2,1])),o==="causal")throw new yt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=vg(t,n,r,o==="same"?"same":"valid","NWC",s);return e!=null&&(a=zi(a,e)),a})}function Pee(t,n,e,r=[1,1],o="valid",i,s,a=null){return te(()=>{if(i==null&&(i=ji()),er(i),t.rank!==3&&t.rank!==4)throw new J(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(n.rank!==3&&n.rank!==4)throw new J(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=V_(t,i);if(o==="causal")throw new yt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Rp.conv2d({x:l,filter:n,strides:r,pad:o==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:e,activation:a}),i==="channelsFirst"&&(l=Lt(l,[0,3,1,2])),l})}function wDe(t,n,e,r=[1,1,1],o="valid",i,s){return te(()=>{if(i==null&&(i=ji()),er(i),t.rank!==4&&t.rank!==5)throw new J(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(n.rank!==4&&n.rank!==5)throw new J(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=tP(t,i);if(o==="causal")throw new yt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=Vk(a,n,r,o==="same"?"same":"valid","NDHWC",s),e!=null&&(a=zi(a,e)),i==="channelsFirst"&&(a=Lt(a,[0,4,1,2,3])),a})}var $_=class t extends xt{constructor(n,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(e),this.rank=n,Dr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new yt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Nf(e.kernelSize,n,"kernelSize"),this.strides=Nf(e.strides==null?1:e.strides,n,"strides"),this.padding=e.padding==null?"valid":e.padding,$i(this.padding),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,er(this.dataFormat),this.activation=Wl(e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.biasInitializer=In(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=pr(e.biasConstraint),this.biasRegularizer=Fn(e.biasRegularizer),this.activityRegularizer=Fn(e.activityRegularizer),this.dilationRate=Nf(e.dilationRate==null?1:e.dilationRate,n,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new J(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new J(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new J(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(n){if(la("kernelSize"in n,"required key 'kernelSize' not in config"),typeof n.kernelSize!="number"&&!VS(n.kernelSize,"number",1,3))throw new J(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(n.kernelSize)}.`)}getConfig(){let n={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Gl(this.activation),useBias:this.useBias,biasInitializer:$n(this.biasInitializer),biasRegularizer:_n(this.biasRegularizer),activityRegularizer:_n(this.activityRegularizer),biasConstraint:dr(this.biasConstraint)},e=super.getConfig();return Object.assign(n,e),n}},Kv=class t extends $_{constructor(n,e){super(n,e),this.kernel=null,t.verifyArgs(e),this.filters=e.filters,Dr(this.filters,"filters"),this.kernelInitializer=In(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=pr(e.kernelConstraint),this.kernelRegularizer=Fn(e.kernelRegularizer)}build(n){n=zt(n);let e=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[e]==null)throw new J(`The channel dimension of the input should be defined. Found ${n[e]}`);let r=n[e],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:r}}],this.built=!0}call(n,e){return te(()=>{n=ut(n);let r,o=this.bias==null?null:this.bias.read(),i=jS(this.activation.getClassName());if(i!=null&&this.rank===2)r=Pee(n,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=vDe(n,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=Pee(n,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=wDe(n,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new yt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(n){n=zt(n);let e=[],r=this.dataFormat==="channelsLast"?n.slice(1,n.length-1):n.slice(2);for(let i=0;i<r.length;++i){let s=cs(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);e.push(s)}let o=[n[0]];return this.dataFormat==="channelsLast"?(o=o.concat(e),o.push(this.filters)):(o.push(this.filters),o=o.concat(e)),o}getConfig(){let n={filters:this.filters,kernelInitializer:$n(this.kernelInitializer),kernelRegularizer:_n(this.kernelRegularizer),kernelConstraint:dr(this.kernelConstraint)},e=super.getConfig();return Object.assign(n,e),n}static verifyArgs(n){if(!("filters"in n)||typeof n.filters!="number"||n.filters<1)throw new J(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(n.filters)}`)}},bT=(()=>{class t extends Kv{constructor(e){super(2,e),t.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!VS(e.kernelSize,"number",1,2))throw new J(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv2D",t})();ge.registerClass(bT);var CT=(()=>{class t extends Kv{constructor(e){super(3,e),t.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new J(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv3D",t})();ge.registerClass(CT);var nP=(()=>{class t extends bT{constructor(e){if(super(e),this.inputSpec=[new Dn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new J(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=zt(e),e.length!==4)throw new J("Input should have rank 4; Received input shape: "+JSON.stringify(e));let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");let o=e[r],i=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Dn({ndim:4,axes:{[r]:o}})],this.built=!0}call(e,r){return te(()=>{let o=ut(e);if(o.shape.length!==4)throw new J(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${o.shape.length}`);let i=o.shape,s=i[0],a,l;this.dataFormat==="channelsFirst"?(a=2,l=3):(a=1,l=2);let c=i[a],u=i[l],d=this.kernelSize[0],p=this.kernelSize[1],h=this.strides[0],f=this.strides[1],m=ql(c,h,d,this.padding),g=ql(u,f,p,this.padding),v=[s,m,g,this.filters];this.dataFormat!=="channelsLast"&&(o=Lt(o,[0,2,3,1]));let w=wg(o,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=Lt(w,[0,3,1,2])),this.bias!=null&&(w=zi(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=zt(e);let r=e.slice(),o,i,s;this.dataFormat==="channelsFirst"?(o=1,i=2,s=3):(o=3,i=1,s=2);let a=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],u=this.strides[1];return r[o]=this.filters,r[i]=ql(r[i],c,a,this.padding),r[s]=ql(r[s],u,l,this.padding),r}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv2DTranspose",t})();ge.registerClass(nP);var rP=(()=>{class t extends CT{constructor(e){if(super(e),this.inputSpec=[new Dn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new J(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=zt(e),e.length!==5)throw new J("Input should have rank 5; Received input shape: "+JSON.stringify(e));let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new J("The channel dimension of the inputs should be defined. Found `None`.");let o=e[r],i=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Dn({ndim:5,axes:{[r]:o}})],this.built=!0}call(e,r){return te(()=>{let o=ut(e);if(o.shape.length!==5)throw new J(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${o.shape.length}`);let i=o.shape,s=i[0],a,l,c;this.dataFormat==="channelsFirst"?(c=2,a=3,l=4):(c=1,a=2,l=3);let u=i[c],d=i[a],p=i[l],h=this.kernelSize[0],f=this.kernelSize[1],m=this.kernelSize[2],g=this.strides[0],v=this.strides[1],w=this.strides[2],y=ql(u,g,h,this.padding),k=ql(d,v,f,this.padding),_=ql(p,w,m,this.padding),S=[s,y,k,_,this.filters];this.dataFormat!=="channelsLast"&&(o=Lt(o,[0,2,3,4,1]));let E=jk(o,this.kernel.read(),S,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(E=Lt(E,[0,4,1,2,3])),this.bias!==null&&(E=zi(E,this.bias.read(),this.dataFormat)),this.activation!==null&&(E=this.activation.apply(E)),E})}computeOutputShape(e){e=zt(e);let r=e.slice(),o,i,s,a;this.dataFormat==="channelsFirst"?(o=1,i=2,s=3,a=4):(o=4,i=1,s=2,a=3);let l=this.kernelSize[0],c=this.kernelSize[1],u=this.kernelSize[2],d=this.strides[0],p=this.strides[1],h=this.strides[2];return r[o]=this.filters,r[i]=ql(r[i],d,l,this.padding),r[s]=ql(r[s],p,c,this.padding),r[a]=ql(r[a],h,u,this.padding),r}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv3DTranspose",t})();ge.registerClass(rP);var yDe=(()=>{class t extends Kv{constructor(e,r){if(super(e,r),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,r.filters==null)throw new J("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(r.kernelInitializer!=null||r.kernelRegularizer!=null||r.kernelConstraint!=null)throw new J("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(r.padding!=null&&r.padding!=="same"&&r.padding!=="valid")throw new J(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(r.padding)}`);this.depthMultiplier=r.depthMultiplier==null?1:r.depthMultiplier,this.depthwiseInitializer=In(r.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Fn(r.depthwiseRegularizer),this.depthwiseConstraint=pr(r.depthwiseConstraint),this.pointwiseInitializer=In(r.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Fn(r.pointwiseRegularizer),this.pointwiseConstraint=pr(r.pointwiseConstraint)}build(e){if(e=zt(e),e.length<this.rank+2)throw new J(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null||e[r]<0)throw new J(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[r])}`);let o=e[r],i=this.kernelSize.concat([o,this.depthMultiplier]),s=[];for(let l=0;l<this.rank;++l)s.push(1);s.push(o*this.depthMultiplier,this.filters);let a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Dn({ndim:this.rank+2,axes:{[r]:o}})],this.built=!0}call(e,r){return te(()=>{e=ut(e);let o;if(this.rank===1)throw new yt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Lt(e,[0,2,3,1])),o=Dg(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(o=zi(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),this.dataFormat==="channelsFirst"&&(o=Lt(o,[0,3,1,2])),o})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=$n(this.depthwiseInitializer),e.pointwiseInitializer=$n(this.pointwiseInitializer),e.depthwiseRegularizer=_n(this.depthwiseRegularizer),e.pointwiseRegularizer=_n(this.pointwiseRegularizer),e.depthwiseConstraint=dr(this.depthwiseConstraint),e.pointwiseConstraint=dr(this.pointwiseConstraint),e}}return t.className="SeparableConv",t})();var oP=(()=>{class t extends yDe{constructor(e){super(2,e)}}return t.className="SeparableConv2D",t})();ge.registerClass(oP);var iP=(()=>{class t extends Kv{constructor(e){super(1,e),t.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!VS(e.kernelSize,"number",1,1))throw new J(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv1D",t})();ge.registerClass(iP);var sP=(()=>{class t extends xt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,r){return te(()=>{if(e=ut(e),this.dataFormat==="channelsLast"){let o=C_(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return C_(o,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let o=C_(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return C_(o,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Cropping2D",t})();ge.registerClass(sP);var aP=(()=>{class t extends xt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,er(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,WJ(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let r=e[2]==null?null:this.size[0]*e[2],o=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],r,o]}else{let r=e[1]==null?null:this.size[0]*e[1],o=e[2]==null?null:this.size[1]*e[2];return[e[0],r,o,e[3]]}}call(e,r){return te(()=>{let o=ut(e),i=o.shape;if(this.dataFormat==="channelsFirst"){o=Lt(o,[0,2,3,1]);let s=this.size[0]*i[2],a=this.size[1]*i[3],l=this.interpolation==="nearest"?yi.resizeNearestNeighbor(o,[s,a]):yi.resizeBilinear(o,[s,a]);return Lt(l,[0,3,1,2])}else{let s=this.size[0]*i[1],a=this.size[1]*i[2];return this.interpolation==="nearest"?yi.resizeNearestNeighbor(o,[s,a]):yi.resizeBilinear(o,[s,a])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},r=super.getConfig();return Object.assign(e,r),e}}return t.className="UpSampling2D",t})();ge.registerClass(aP);function xDe(t,n,e=[1,1],r="valid",o,i){return te(()=>{o==null&&(o=ji()),er(o);let s=V_(t,o);if(t.rank!==4)throw new J(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(n.rank!==4)throw new J(`depthwiseKernel is required to be 4-D, but is instead ${n.rank}-D`);return s=Bl(s,n,e,r==="same"?"same":"valid","NHWC",i),o==="channelsFirst"&&(s=Lt(s,[0,3,1,2])),s})}var lP=(()=>{class t extends $_{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=In(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=pr(e.depthwiseConstraint),this.depthwiseRegularizer=Fn(e.depthwiseRegularizer)}build(e){if(e=zt(e),e.length<4)throw new J(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let r=this.dataFormat==="channelsFirst"?1:3;if(e[r]==null||e[r]<0)throw new J(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[r]}).`);let o=e[r],i=[this.kernelSize[0],this.kernelSize[1],o,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[o*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return te(()=>{e=ut(e);let o=xDe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(o=zi(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),o})}computeOutputShape(e){e=zt(e);let r=this.dataFormat==="channelsFirst"?e[2]:e[1],o=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=cs(r,this.kernelSize[0],this.padding,this.strides[0]),a=cs(o,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,a]:[e[0],s,a,i]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=$n(this.depthwiseInitializer),e.depthwiseRegularizer=_n(this.depthwiseRegularizer),e.depthwiseConstraint=dr(this.depthwiseRegularizer),e}}return t.className="DepthwiseConv2D",t})();ge.registerClass(lP);function cP(t,n,e,r){if(Array.isArray(t)){if(n!=null||e!=null)throw new J("When inputs is an array, neither initialState or constants should be provided");r!=null&&(e=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(n=t.slice(1,t.length)),t=t[0]}function o(i){return i==null||Array.isArray(i)?i:[i]}return n=o(n),e=o(e),{inputs:t,initialState:n,constants:e}}function uP(t,n,e,r=!1,o,i,s=!1,a=!1){return te(()=>{let l=n.shape.length;if(l<3)throw new J(`Input should be at least 3D, but is ${l}D.`);let c=[1,0].concat(Vi(2,l));if(n=Lt(n,c),i!=null)throw new yt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=me(me(o,"bool"),"float32"),o.rank===l-1&&(o=ur(o,-1)),o=Lt(o,c)),r&&(n=Ur(n,0),o!=null&&(o=Ur(o,0)));let u=[],d,p=e,h=n.shape[0],f=Wr(n),m;o!=null&&(m=Wr(o));for(let v=0;v<h;++v){let w=f[v],y=te(()=>t(w,p));if(o==null)d=y[0],p=y[1];else{let k=te(()=>{let _=m[v],S=Oe(oo(_),_),E=fe(L(y[0],_),L(p[0],S)),N=p.map((B,D)=>fe(L(y[1][D],_),L(B,S)));return{output:E,newStates:N}});d=k.output,p=k.newStates}a&&u.push(d)}let g;return a&&(g=Xn(u,1)),[d,g,p]})}var Kl=(()=>{class t extends xt{constructor(e){super(e);let r;if(e.cell==null)throw new J("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?r=new TT({cells:e.cell}):r=e.cell,r.stateSize==null)throw new J("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=r,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Dn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Vi(0,e).map(r=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){nT(e)&&(e=e[0]),e=e;let r=this.cell.stateSize;Array.isArray(r)||(r=[r]);let o=r[0],i;if(this.returnSequences?i=[e[0],e[1],o]:i=[e[0],o],this.returnState){let s=[];for(let a of r)s.push([e[0],a]);return[i].concat(s)}else return i}computeMask(e,r){return te(()=>{Array.isArray(r)&&(r=r[0]);let o=this.returnSequences?r:null;if(this.returnState){let i=this.states.map(s=>null);return[o].concat(i)}else return o})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,r=[];for(let o=0;o<e;++o)r.push(null);return r}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new yt("Constants support is not implemented in RNN yet.");nT(e)&&(e=e[0]),e=e;let o=this.stateful?e[0]:null,i=e.slice(2);this.inputSpec[0]=new Dn({shape:[o,null,...i]});let s=[e[0]].concat(e.slice(2));this.cell.build(s);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!x.arraysEqual(this.stateSpec.map(l=>l.shape[l.shape.length-1]),a))throw new J(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(l=>new Dn({shape:[null,l]}));this.stateful&&this.resetStates()}resetStates(e,r=!1){te(()=>{if(!this.stateful)throw new aa("Cannot call resetStates() on an RNN Layer that is not stateful.");let o=this.inputSpec[0].shape[0];if(o==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>On([o,i])):this.states_=[On([o,this.cell.stateSize])];else if(e==null)ht(this.states_),this.keptStates!=null&&(ht(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>On([o,i])):this.states_[0]=On([o,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new J(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);r===!0?this.keptStates.push(this.states_.slice()):ht(this.states_);for(let i=0;i<this.states_.length;++i){let s=e[i],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,l=[o,a];if(!x.arraysEqual(s.shape,l))throw new J(`State ${i} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>Hn(i.clone()))})}apply(e,r){let o=r==null?null:r.initialState,i=r==null?null:r.constants;r==null&&(r={});let s=cP(e,o,i,this.numConstants);e=s.inputs,o=s.initialState,i=s.constants;let a=[],l=[];if(o!=null){r.initialState=o,a=a.concat(o),this.stateSpec=[];for(let u of o)this.stateSpec.push(new Dn({shape:u.shape}));l=l.concat(this.stateSpec)}if(i!=null&&(r.constants=i,a=a.concat(i),this.numConstants=i.length),a[0]instanceof ci){let u=[e].concat(a),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;let h=super.apply(u,r);return this.inputSpec=p,h}else return super.apply(e,r)}call(e,r){return te(()=>{let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;e=ut(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));let a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new J(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let l={training:i},u=uP((m,g)=>{let v=this.cell.call([m].concat(g),l);return[v[0],v.slice(1)]},e,s,this.goBackwards,o,null,this.unroll,this.returnSequences),d=u[0],p=u[1],h=u[2];this.stateful&&this.resetStates(h,i);let f=this.returnSequences?p:d;return this.returnState?[f].concat(h):f})}getInitialState(e){return te(()=>{let r=On(e.shape);return r=Ve(r,[1,2]),r=Pp(r),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(o=>o>1?qS(r,[1,o]):r):this.cell.stateSize>1?[qS(r,[1,this.cell.stateSize])]:[r]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),r={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(r.numConstants=this.numConstants);let o=this.cell.getConfig();return this.getClassName()===t.className&&(r.cell={className:this.cell.getClassName(),config:o}),Object.assign(Object.assign(Object.assign({},o),e),r)}static fromConfig(e,r,o={}){let i=r.cell,s=Ui(i,o);return new e(Object.assign(r,{cell:s}))}}return t.className="RNN",t})();ge.registerClass(Kl);var Vp=class extends xt{},MT=(()=>{class t extends Vp{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Dr(this.units,"units"),this.activation=Wl(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=In(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=In(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=In(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Fn(e.kernelRegularizer),this.recurrentRegularizer=Fn(e.recurrentRegularizer),this.biasRegularizer=Fn(e.biasRegularizer),this.kernelConstraint=pr(e.kernelConstraint),this.recurrentConstraint=pr(e.recurrentConstraint),this.biasConstraint=pr(e.biasConstraint),this.dropout=Ug([1,Ul([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ug([1,Ul([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=zt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return te(()=>{if(e=e,e.length!==2)throw new J(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let o=e[1];e=e[0];let i=r.training==null?!1:r.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=jp({ones:()=>oo(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=jp({ones:()=>oo(o),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s,a=this.dropoutMask,l=this.recurrentDropoutMask;a!=null?s=Wa(L(e,a),this.kernel.read()):s=Wa(e,this.kernel.read()),this.bias!=null&&(s=zi(s,this.bias.read())),l!=null&&(o=L(o,l));let c=fe(s,Wa(o,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Gl(this.activation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),recurrentInitializer:$n(this.recurrentInitializer),biasInitializer:$n(this.biasInitializer),kernelRegularizer:_n(this.kernelRegularizer),recurrentRegularizer:_n(this.recurrentRegularizer),biasRegularizer:_n(this.biasRegularizer),activityRegularizer:_n(this.activityRegularizer),kernelConstraint:dr(this.kernelConstraint),recurrentConstraint:dr(this.recurrentConstraint),biasConstraint:dr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),r)}}return t.className="SimpleRNNCell",t})();ge.registerClass(MT);var dP=(()=>{class t extends Kl{constructor(e){e.cell=new MT(e),super(e)}call(e,r){return te(()=>{this.cell.dropoutMask!=null&&(ht(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ht(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}static fromConfig(e,r){return new e(r)}}return t.className="SimpleRNN",t})();ge.registerClass(dP);var ST=(()=>{class t extends Vp{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new J("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Dr(this.units,"units"),this.activation=Wl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Wl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=In(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=In(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=In(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Fn(e.kernelRegularizer),this.recurrentRegularizer=Fn(e.recurrentRegularizer),this.biasRegularizer=Fn(e.biasRegularizer),this.kernelConstraint=pr(e.kernelConstraint),this.recurrentConstraint=pr(e.recurrentConstraint),this.biasConstraint=pr(e.biasConstraint),this.dropout=Ug([1,Ul([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ug([1,Ul([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=zt(e);let r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return te(()=>{if(e=e,e.length!==2)throw new J(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let o=r.training==null?!1:r.training,i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=jp({ones:()=>oo(e),rate:this.dropout,training:o,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=jp({ones:()=>oo(i),rate:this.recurrentDropout,training:o,count:3,dropoutFunc:this.dropoutFunc}));let s=this.dropoutMask,a=this.recurrentDropoutMask,l,c,u;0<this.dropout&&this.dropout<1&&(e=L(e,s[0]));let d=Wa(e,this.kernel.read());this.useBias&&(d=zi(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=L(i,a[0]));let p=this.recurrentKernel.read(),[h,f]=Gr(p,[2*this.units,this.units],p.rank-1),m=Wa(i,h),[g,v,w]=Gr(d,3,d.rank-1),[y,k]=Gr(m,2,m.rank-1);l=this.recurrentActivation.apply(fe(g,y)),c=this.recurrentActivation.apply(fe(v,k));let _=Wa(L(c,i),f);u=this.activation.apply(fe(w,_));let S=fe(L(l,i),L(fe(1,Wt(l)),u));return[S,S]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Gl(this.activation),recurrentActivation:Gl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),recurrentInitializer:$n(this.recurrentInitializer),biasInitializer:$n(this.biasInitializer),kernelRegularizer:_n(this.kernelRegularizer),recurrentRegularizer:_n(this.recurrentRegularizer),biasRegularizer:_n(this.biasRegularizer),activityRegularizer:_n(this.activityRegularizer),kernelConstraint:dr(this.kernelConstraint),recurrentConstraint:dr(this.recurrentConstraint),biasConstraint:dr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),r)}}return t.className="GRUCell",t})();ge.registerClass(ST);var pP=(()=>{class t extends Kl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new ST(e),super(e)}call(e,r){return te(()=>{this.cell.dropoutMask!=null&&(ht(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ht(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}static fromConfig(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)}}return t.className="GRU",t})();ge.registerClass(pP);var Zv=(()=>{class t extends Vp{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Dr(this.units,"units"),this.activation=Wl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Wl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=In(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=In(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=In(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Fn(e.kernelRegularizer),this.recurrentRegularizer=Fn(e.recurrentRegularizer),this.biasRegularizer=Fn(e.biasRegularizer),this.kernelConstraint=pr(e.kernelConstraint),this.recurrentConstraint=pr(e.recurrentConstraint),this.biasConstraint=pr(e.biasConstraint),this.dropout=Ug([1,Ul([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Ug([1,Ul([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var r;e=zt(e);let o=e[e.length-1];this.kernel=this.addWeight("kernel",[o,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){let s=this.biasInitializer,a=this.units;i=new(r=class extends Hi{apply(c,u){let d=s.apply([a]),p=new M_().apply([a]),h=s.apply([a*2]);return _B(_B(d,p),h)}},r.className="CustomInit",r)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,r){return te(()=>{let o=r.training==null?!1:r.training;if(e=e,e.length!==3)throw new J(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1],s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=jp({ones:()=>oo(e),rate:this.dropout,training:o,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=jp({ones:()=>oo(i),rate:this.recurrentDropout,training:o,count:4,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,l=this.recurrentDropoutMask,c,u,d,p;0<this.dropout&&this.dropout<1&&(e=L(e,a[0]));let h=Wa(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=L(i,l[0])),h=fe(h,Wa(i,this.recurrentKernel.read())),this.useBias&&(h=zi(h,this.bias.read()));let[f,m,g,v]=Gr(h,4,h.rank-1);c=this.recurrentActivation.apply(f),u=this.recurrentActivation.apply(m),d=fe(L(u,s),L(c,this.activation.apply(g))),p=this.recurrentActivation.apply(v);let w=L(p,this.activation.apply(d));return[w,w,d]})}getConfig(){let e=super.getConfig(),r={units:this.units,activation:Gl(this.activation),recurrentActivation:Gl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),recurrentInitializer:$n(this.recurrentInitializer),biasInitializer:$n(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:_n(this.kernelRegularizer),recurrentRegularizer:_n(this.recurrentRegularizer),biasRegularizer:_n(this.biasRegularizer),activityRegularizer:_n(this.activityRegularizer),kernelConstraint:dr(this.kernelConstraint),recurrentConstraint:dr(this.recurrentConstraint),biasConstraint:dr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),r)}}return t.className="LSTMCell",t})();ge.registerClass(Zv);var hP=(()=>{class t extends Kl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Zv(e),super(e)}call(e,r){return te(()=>{this.cell.dropoutMask!=null&&(ht(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ht(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}static fromConfig(e,r){return r.implmentation===0&&(r.implementation=1),new e(r)}}return t.className="LSTM",t})();ge.registerClass(hP);var TT=(()=>{class t extends Vp{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let r of this.cells.slice().reverse())Array.isArray(r.stateSize)?e.push(...r.stateSize):e.push(r.stateSize);return e}call(e,r){return te(()=>{e=e;let o=e.slice(1),i=[];for(let l of this.cells.slice().reverse())Array.isArray(l.stateSize)?i.push(o.splice(0,l.stateSize.length)):i.push(o.splice(0,1));i.reverse();let s=[],a;for(let l=0;l<this.cells.length;++l){let c=this.cells[l];o=i[l],l===0?a=[e[0]].concat(o):a=[a[0]].concat(o),a=c.call(a,r),s.push(a.slice(1))}o=[];for(let l of s.slice().reverse())o.push(...l);return[a[0]].concat(o)})}build(e){nT(e)&&(e=e[0]),e=e;let r;this.cells.forEach((o,i)=>{Hl(`RNNCell_${i}`,()=>{o.build(e),Array.isArray(o.stateSize)?r=o.stateSize[0]:r=o.stateSize,e=[e[0],r]})}),this.built=!0}getConfig(){let e=super.getConfig(),r=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(r)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,r,o={}){let i=[];for(let s of r.cells)i.push(Ui(s,o));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let r of this.cells)e.push(...r.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let r of this.cells)e.push(...r.nonTrainableWeights);if(!this.trainable){let r=[];for(let o of this.cells)r.push(...o.trainableWeights);return r.concat(e)}return e}getWeights(){let e=[];for(let r of this.cells)e.push(...r.weights);return S_(e)}setWeights(e){let r=[];for(let o of this.cells){let i=o.weights.length,s=e.splice(i);for(let a=0;a<o.weights.length;++a)r.push([o.weights[a],s[a]])}zv(r)}}return t.className="StackedRNNCells",t})();ge.registerClass(TT);function jp(t){let{ones:n,rate:e,training:r=!1,count:o=1,dropoutFunc:i}=t,s=()=>i!=null?i(n(),e):ZS(n(),e),a=()=>Tf(s,n,r);return!o||o<=1?Hn(a().clone()):Array(o).fill(void 0).map(a).map(c=>Hn(c.clone()))}var kDe=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(e[r[o]]=t[r[o]]);return e};var _De=(()=>{class t extends Kl{constructor(e){if(e.unroll)throw new yt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new yt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Dn({ndim:5})]}call(e,r){return te(()=>{if(this.cell.dropoutMask!=null&&(ht(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(ht(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),r&&r.constants)throw new J("ConvRNN2D cell does not support constants");let o=r==null?null:r.mask,i=r==null?null:r.training,s=r==null?null:r.initialState;return super.call(e,{mask:o,training:i,initialState:s})})}computeOutputShape(e){let r=this.computeSingleOutputShape(e);return this.returnSequences||(r=[r[0],...r.slice(2)]),this.returnState&&(r=[r,...Array(2).fill([e[0],...r.slice(-3)])]),r}getInitialState(e){return te(()=>{let{stateSize:r}=this.cell,o=e.shape,i=this.computeSingleOutputShape(o),s=[i[0],...i.slice(2)],a=On(s);return Array.isArray(r)?Array(r.length).fill(a):[a]})}resetStates(e,r=!1){te(()=>{if(!this.stateful)throw new aa("Cannot call resetStates() on an RNN Layer that is not stateful.");let o=this.inputSpec[0].shape,i=this.computeSingleOutputShape(o),s=[i[0],...i.slice(2)];if(o[0]==null)throw new J("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>On(s)):this.states_=[On(s)];else if(e==null)ht(this.states_),this.keptStates!=null&&(ht(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>On(s)):this.states_[0]=On(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new J(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);r?this.keptStates.push(this.states_.slice()):ht(this.states_);for(let l=0;l<this.states_.length;++l){let c=e[l],u=s;if(!x.arraysEqual(c.shape,u))throw new J(`State ${l} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${c.shape}`);this.states_[l]=c}}this.states_=this.states_.map(l=>Hn(l.clone()))})}computeSingleOutputShape(e){let{dataFormat:r,filters:o,kernelSize:i,padding:s,strides:a,dilationRate:l}=this.cell,c=r==="channelsFirst",u=e[c?3:2],d=e[c?4:3],p=cs(u,i[0],s,a[0],l[0]),h=cs(d,i[1],s,a[1],l[1]);return[...e.slice(0,2),...c?[o,p,h]:[p,h,o]]}}return t.className="ConvRNN2D",t})(),ET=(()=>{class t extends Zv{constructor(e){let{filters:r,kernelSize:o,strides:i,padding:s,dataFormat:a,dilationRate:l}=e;super(Object.assign(Object.assign({},e),{units:r})),this.filters=r,Dr(this.filters,"filters"),this.kernelSize=Nf(o,2,"kernelSize"),this.kernelSize.forEach(c=>Dr(c,"kernelSize")),this.strides=Nf(i||1,2,"strides"),this.strides.forEach(c=>Dr(c,"strides")),this.padding=s||"valid",$i(this.padding),this.dataFormat=a||"channelsLast",er(this.dataFormat),this.dilationRate=Nf(l||1,2,"dilationRate"),this.dilationRate.forEach(c=>Dr(c,"dilationRate"))}build(e){var r;e=zt(e);let o=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[o]==null)throw new J(`The channel dimension of the input should be defined. Found ${e[o]}`);let i=e[o],s=4,a=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let l=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){let u=this.biasInitializer,d=this.filters;c=new(r=class extends Hi{apply(h,f){let m=u.apply([d]),g=Tr([d]),v=u.apply([d*2]);return Pv([m,g,v])}},r.className="CustomInit",r)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,r){return te(()=>{if(e.length!==3)throw new J(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=r.training||!1,i=e[0],s=e[1],a=e[2],l=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=jp({ones:()=>oo(i),rate:this.dropout,training:o,count:l,dropoutFunc:this.dropoutFunc}));let c=this.dropoutMask,u=(pe,ce,se)=>!ce||!ce[se]?pe:L(ce[se],pe),d=u(i,c,0),p=u(i,c,1),h=u(i,c,2),f=u(i,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=jp({ones:()=>oo(s),rate:this.recurrentDropout,training:o,count:l,dropoutFunc:this.dropoutFunc}));let m=this.recurrentDropoutMask,g=u(s,m,0),v=u(s,m,1),w=u(s,m,2),y=u(s,m,3),k=3,[_,S,E,N]=Gr(this.kernel.read(),l,k),[B,D,P,M]=this.useBias?Gr(this.bias.read(),l):[null,null,null,null];d=this.inputConv(d,_,B,this.padding),p=this.inputConv(p,S,D,this.padding),h=this.inputConv(h,E,P,this.padding),f=this.inputConv(f,N,M,this.padding);let[W,ie,Z,X]=Gr(this.recurrentKernel.read(),l,k);g=this.recurrentConv(g,W),v=this.recurrentConv(v,ie),w=this.recurrentConv(w,Z),y=this.recurrentConv(y,X);let G=this.recurrentActivation.apply(fe(d,g)),H=this.recurrentActivation.apply(fe(p,v)),V=fe(L(H,a),L(G,this.activation.apply(fe(h,w)))),K=L(this.recurrentActivation.apply(fe(f,y)),this.activation.apply(V));return[K,K,V]})}getConfig(){let e=super.getConfig(),{units:r}=e,o=kDe(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},o),i)}inputConv(e,r,o,i){let s=Bi(e,r,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return o?zi(s,o,this.dataFormat):s}recurrentConv(e,r){return Bi(e,r,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();ge.registerClass(ET);var fP=(()=>{class t extends _De{constructor(e){let r=new ET(e);super(Object.assign(Object.assign({},e),{cell:r}))}static fromConfig(e,r){return new e(r)}}return t.className="ConvLSTM2D",t})();ge.registerClass(fP);var IT=(()=>{class t extends xt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let r=e.shape,o=[];for(let i=0;i<this.noiseShape.length;++i)o.push(this.noiseShape[i]==null?r[i]:this.noiseShape[i]);return o}call(e,r){return te(()=>{this.invokeCallHook(e,r);let o=ut(e);if(0<this.rate&&this.rate<1){let i=r.training==null?!1:r.training,s=this.getNoiseShape(o);return Tf(()=>ZS(o,this.rate,s,this.seed),()=>o,i)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},r=super.getConfig();return Object.assign(e,r),e}dispose(){return super.dispose()}}return t.className="Dropout",t})();ge.registerClass(IT);var mP=(()=>{class t extends IT{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let r=e.shape;return[r[0],1,r[2]]}}return t.className="SpatialDropout1D",t})();ge.registerClass(mP);var gP=(()=>{class t extends xt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let r=null;e.batchSize!=null&&(r=e.batchSize),this.batchInputShape=[r,e.inputDim]}this.units=e.units,Dr(this.units,"units"),this.activation=Wl(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=In(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=In(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=pr(e.kernelConstraint),this.biasConstraint=pr(e.biasConstraint),this.kernelRegularizer=Fn(e.kernelRegularizer),this.biasRegularizer=Fn(e.biasRegularizer),this.activityRegularizer=Fn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=zt(e);let r=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[r,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:r}}],this.built=!0}computeOutputShape(e){e=zt(e);let r=e.slice();return r[r.length-1]=this.units,r}call(e,r){return te(()=>{this.invokeCallHook(e,r);let o=ut(e),i=jS(this.activation.getClassName()),s;return i!=null?s=Wa(o,this.kernel.read(),i,this.bias?this.bias.read():null):(s=Wa(o,this.kernel.read()),this.bias!=null&&(s=zi(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){let e={units:this.units,activation:Gl(this.activation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),biasInitializer:$n(this.biasInitializer),kernelRegularizer:_n(this.kernelRegularizer),biasRegularizer:_n(this.biasRegularizer),activityRegularizer:_n(this.activityRegularizer),kernelConstraint:dr(this.kernelConstraint),biasConstraint:dr(this.biasConstraint)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Dense",t})();ge.registerClass(gP);var vP=(()=>{class t extends xt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=zt(e);for(let r of e.slice(1))if(r==null)throw new J(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ga(e,1)]}call(e,r){return te(()=>{this.invokeCallHook(e,r);let o=ut(e);if(this.dataFormat==="channelsFirst"&&o.rank>1){let i=[0];for(let s=2;s<o.rank;++s)i.push(s);i.push(1),o=Lt(o,i)}return YJ(o)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let r=super.getConfig();return Object.assign(e,r),e}}return t.className="Flatten",t})();ge.registerClass(vP);var wP=(()=>{class t extends xt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Wl(e.activation)}call(e,r){return te(()=>{this.invokeCallHook(e,r);let o=ut(e);return this.activation.apply(o)})}getConfig(){let e={activation:Gl(this.activation)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Activation",t})();ge.registerClass(wP);var yP=(()=>{class t extends xt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,r){return te(()=>(e=ut(e),ZJ(e,this.n)))}getConfig(){let e={n:this.n},r=super.getConfig();return Object.assign(e,r),e}}return t.className="RepeatVector",t})();ge.registerClass(yP);var xP=(()=>{class t extends xt{constructor(e){super(e),this.targetShape=e.targetShape;for(let r=0;r<this.targetShape.length;++r)this.isUnknown(this.targetShape[r])&&(this.targetShape[r]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,r){let o="Total size of new array must be unchanged.",i=r.slice(),s=1,a=null;for(let c=0;c<i.length;++c){let u=i[c];if(this.isUnknown(u))if(a===null)a=c;else throw new J("Can only specifiy one unknown dimension.");else s*=u}let l=Ga(e);if(a!==null){if(s===0||l%s!==0)throw new J(o);i[a]=l/s}else if(l!==s)throw new J(o);return i}computeOutputShape(e){let r=!1;for(let o=0;o<e.length;++o)if(this.isUnknown(e[o])){r=!0;break}return r?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,r){return te(()=>{this.invokeCallHook(e,r);let o=ut(e),i=o.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return $(o,s)})}getConfig(){let e={targetShape:this.targetShape},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Reshape",t})();ge.registerClass(xP);var kP=(()=>{class t extends xt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let r=Vi(1,e.dims.length+1);if(!x.arraysEqual(e.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Dn({ndim:this.dims.length+1})]}computeOutputShape(e){e=zt(e);let r=e.slice();return this.dims.forEach((o,i)=>{r[i+1]=e[o]}),r}call(e,r){return Lt(ut(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Permute",t})();ge.registerClass(kP);var _P=(()=>{class t extends xt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={maskValue:this.maskValue};return Object.assign(r,e),r}computeMask(e,r){let o=ut(e);return hf(La(o,this.maskValue),-1)}call(e,r){return te(()=>{this.invokeCallHook(e,r);let o=ut(e),a=hf(La(o,this.maskValue),-1,!0);return L(o,me(a,o.dtype))})}}return t.className="Masking",t})();ge.registerClass(_P);var bP=(()=>{class t extends xt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let r=null;e.batchSize!=null&&(r=e.batchSize),e.inputLength==null?this.batchInputShape=[r,null]:this.batchInputShape=[r].concat(xn(e.inputLength))}this.inputDim=e.inputDim,Dr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Dr(this.outputDim,"outputDim"),this.embeddingsInitializer=In(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Fn(e.embeddingsRegularizer),this.activityRegularizer=Fn(e.activityRegularizer),this.embeddingsConstraint=pr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,r){return te(()=>this.maskZero?(e=ut(e),La(e,at(e))):null)}computeOutputShape(e){if(e=zt(e),this.inputLength==null)return[...e,this.outputDim];let r=xn(this.inputLength);if(r.length!==e.length-1)throw new J(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let o=0;for(let i=0;i<r.length;++i){let s=r[i],a=e[i+1];if(s!=null&&a!=null&&s!==a)throw new J(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(r[o]=a),o++}}return[e[0],...r,this.outputDim]}call(e,r){return te(()=>{this.invokeCallHook(e,r);let o=ut(e);o.dtype!=="int32"&&(o=xi(o,"int32"));let i=KS(this.embeddings.read(),$(o,[o.size]));return $(i,zt(this.computeOutputShape(o.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:$n(this.embeddingsInitializer),embeddingsRegularizer:_n(this.embeddingsRegularizer),activityRegularizer:_n(this.activityRegularizer),embeddingsConstraint:dr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Embedding",t})();ge.registerClass(bP);var zp=class extends xt{constructor(n){super(n||{}),this.supportsMasking=!0}mergeFunction(n){throw new yt}computeElementwiseOpOutputShape(n,e){if(n==null||e==null)return null;if(n.length<e.length)return this.computeElementwiseOpOutputShape(e,n);if(e.length===0)return n;let r=n.slice(0,n.length-e.length);for(let o=0;o<e.length;++o){let i=n[n.length-e.length+o],s=e[o];if(i==null||s==null||i<0||s<0)r.push(null);else if(i===1)r.push(s);else if(s===1)r.push(i);else{if(i!==s)throw new J("Operands could not be broadcast together with shapes "+JSON.stringify(n)+" "+JSON.stringify(e));r.push(i)}}return r}build(n){if(Array.isArray(n)&&!Array.isArray(n[0])&&(n=[zt(n)]),n=n,n.length<2)throw new J(`A merge layer should be called on an Array of at least 2 inputs. Got ${n.length} input(s).`);let e=[];for(let i of n)i!=null&&i[0]!==null&&e.push(i[0]);if(e=Ua(e),e.length>1)throw new J(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(n)}.`);let r=n[0]==null?null:n[0].slice(1);for(let i=1;i<n.length;++i){let s=n[i]==null?null:n[i].slice(1);r=this.computeElementwiseOpOutputShape(r,s)}let o=n.map(i=>i.length);n.indexOf(null)===-1&&Ua(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(n,e){return te(()=>{if(n=n,this.reshapeRequired){let r=[],o=n.map(i=>i.rank);if(o.indexOf(null)===-1){let i=Ul(o);for(let s of n){let a=s.rank;for(let l=0;l<i-a;++l)s=Pp(s,1);r.push(s)}return this.mergeFunction(r)}else{let i=!1;for(let l of n){let c=l.rank;if(c==null){let u=l.shape,d=u[0],p=u.slice(1).concat([d]),h=$(l,[d].concat(Ga(u.slice(1))));h=Lt(h,[1,0]),h=$(h,p),r.push(h),i=!0}else if(c>1){let u=Vi(1,c).concat([0]);r.push(Lt(l,u)),i=!0}else r.push(l)}let s=this.mergeFunction(r),a=s.rank;if(i){if(a==null){let l=s.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));s=$(Lt($(s,[-1,u]),[1,0]),d)}else if(a>1){let l=[a-1].concat(Vi(0,a-1));s=Lt(s,l)}}return s}}else return this.mergeFunction(n)})}computeOutputShape(n){n=n;let e;n[0]==null?e=null:e=n[0].slice(1);for(let o=1;o<n.length;++o){let i=n[o]==null?null:n[o].slice(1);e=this.computeElementwiseOpOutputShape(e,i)}let r=[];for(let o of n)o!=null&&o[0]!==null&&r.push(o[0]);return r=Ua(r),r.length===1?e=r.concat(e):e=[null].concat(e),e}computeMask(n,e){return te(()=>{if(e==null)return null;if(!Array.isArray(e))throw new J("`mask` should be an Array");if(!Array.isArray(n))throw new J("`inputs` should be an Array");if(e.length!==n.length)throw new J(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${n.length} vs ${e.length})`);if(e.every(o=>o==null))return null;e=e.map(o=>o==null?o:ur(o,0));let r=e[0];for(let o=1;o<e.length-1;++o)r=No(r,e[o]);return r})}},CP=(()=>{class t extends zp{constructor(e){super(e)}mergeFunction(e){return te(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=fe(r,e[o]);return r})}}return t.className="Add",t})();ge.registerClass(CP);var MP=(()=>{class t extends zp{constructor(e){super(e)}mergeFunction(e){return te(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=L(r,e[o]);return r})}}return t.className="Multiply",t})();ge.registerClass(MP);var SP=(()=>{class t extends zp{constructor(e){super(e)}mergeFunction(e){return te(()=>{let r=e[0].clone();for(let o=1;o<e.length;++o)r=fe(r,e[o]);return L(1/e.length,r)})}}return t.className="Average",t})();ge.registerClass(SP);var TP=(()=>{class t extends zp{constructor(e){super(e)}mergeFunction(e){return te(()=>{let r=e[0];for(let o=1;o<e.length;++o)r=Pi(r,e[o]);return r})}}return t.className="Maximum",t})();ge.registerClass(TP);var EP=(()=>{class t extends zp{constructor(e){super(e)}mergeFunction(e){return te(()=>{let r=e[0];for(let o=1;o<e.length;++o)r=As(r,e[o]);return r})}}return t.className="Minimum",t})();ge.registerClass(EP);var IP=(()=>{class t extends zp{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new J("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let r=!0;for(let i of e)if(i!=null){r=!1;break}if(r)return;let o=[];for(let i=0;i<e.length;++i){let s=e[i].slice();s.splice(this.axis,1);let a=!1;for(let l of o)if(x.arraysEqual(l,s)){a=!0;break}a||o.push(s)}if(o.length>1)throw new J("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return te(()=>Pv(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new J("A `Concatenate` layer should be called on a list of inputs.");let r=e,o=r[0].slice(),i=this.axis<0?o.length+this.axis:this.axis;for(let s of r.slice(1)){if(o[i]==null||s[i]==null){o[i]=null;break}o[i]+=s[i]}return o}computeMask(e,r){if(r==null)return null;if(!Array.isArray(r))throw new J("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new J("`inputs` should be an array for Concatenate");if(r.length!==e.length)throw new J(`Mismatch in the length of mask (${r.length}) and the legnth of inputs (${e.length})`);return te(()=>{let o=!0;if(r.forEach(a=>{if(a!=null){o=!1;return}}),o)return null;let i=[];for(let a=0;a<e.length;++a)r[a]==null?i.push(me(oo(e[a]),"bool")):r[a].rank<e[a].rank?i.push(ur(r[a],-1)):i.push(r[a]);let s=hn(i,this.axis);return mg(s,-1,!1)})}getConfig(){let e={axis:this.axis},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Concatenate",t})();ge.registerClass(IP);function j_(t,n){for(;t<0;)t+=n;return t}function bDe(t,n,e){if(t.shape.length>3||n.shape.length>3)throw new yt("batchDot is not implemented for tensors of 4D or higher rank yet");if(x.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),x.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${n.shape.length}`),typeof e=="number"&&(e=[e,e]),t.dtype==="complex64"||n.dtype==="complex64")throw new yt("batchDot is not implemented for complex64-type Tensors yet.");let r=t.shape.length,o=n.shape.length;e==null&&(e=[r-1,o-2]);let i=e;return te(()=>{let s;if(r>o){s=r-o;let l=[];for(let c=0;c<s;++c)l.push(1);n=$(n,n.shape.concat(l))}else if(o>r){s=o-r;let l=[];for(let c=0;c<s;++c)l.push(1);t=$(t,t.shape.concat(l))}else s=0;let a;if(t.shape.length===2&&n.shape.length===2)i[0]===i[1]?a=Ve(L(t,n),i[0]):a=Ve(L(Lt(t,[1,0]),n),i[1]);else{let l=i[0]!==t.shape.length-1,c=i[1]===n.shape.length-1;a=Pt(t,n,l,c)}if(s>0){let l;r>o?l=r+o-3:l=r-1;let c=[];for(let u=l;u<l+s;++u)c.push(u);a=as(a,c)}return a.shape.length===1&&(a=ur(a,1)),a})}var DP=(()=>{class t extends zp{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){x.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let r=e[0],o=e[1];if(r.length>3||o.length>3)throw new yt("Dot layer does not support tensors of 4D or higher rank yet.");let i=this.interpretAxes(r,o);if(r[i[0]]!==o[i[1]])throw new J(`Dimension incompatibility: ${r[i[0]]} !== ${o[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new J(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let r=e[0],o=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,a)=>j_(s,e[a].shape.length)):i=[j_(this.axes,r.shape.length),j_(this.axes,o.shape.length)],this.normalize&&(r=D_(r,i[0]),o=D_(o,i[1])),bDe(r,o,i)}interpretAxes(e,r){let o;return Array.isArray(this.axes)?o=this.axes:o=[j_(this.axes,e.length),j_(this.axes,r.length)],o}computeOutputShape(e){x.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let r=e[0].slice(),o=e[1].slice();if(r.length>3||o.length>3)throw new yt("Dot layer does not support tensors of 4D or higher rank yet.");let i=this.interpretAxes(r,o);r.splice(i[0],1),o.splice(i[1],1),o.splice(0,1);let s=r.concat(o);return s.length===1&&s.push(1),s}computeMask(e,r){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},r=super.getConfig();return Object.assign(e,r),e}}return t.className="Dot",t})();ge.registerClass(DP);var NP=(()=>{class t extends xt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={stddev:this.stddev};return Object.assign(r,e),r}call(e,r){return te(()=>{this.invokeCallHook(e,r);let o=ut(e);return Tf(()=>fe(Lv(o.shape,0,this.stddev),o),()=>o,r.training||!1)})}}return t.className="GaussianNoise",t})();ge.registerClass(NP);var AP=(()=>{class t extends xt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={rate:this.rate};return Object.assign(r,e),r}call(e,r){return te(()=>{this.invokeCallHook(e,r);let o=ut(e);return this.rate>0&&this.rate<1?Tf(()=>{let s=Math.sqrt(this.rate/(1-this.rate));return L(o,Lv(o.shape,1,s))},()=>o,r.training||!1):o})}}return t.className="GaussianDropout",t})();ge.registerClass(AP);var RP=(()=>{class t extends xt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||ut(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),r={rate:this.rate};return Object.assign(r,e),r}call(e,r){return te(()=>{if(this.rate<1&&this.rate>0){let o=this._getNoiseShape(e);return Tf(()=>{let s=ut(e),c=-1.6732632423543772*1.0507009873554805,u=gi(ss(o),this.rate);u=xi(u,"float32");let d=((1-this.rate)*(1+this.rate*c**2))**-.5,p=-d*c*this.rate,h=fe(L(s,u),L(fe(u,-1),c));return fe(L(h,d),p)},()=>ut(e),r.training||!1)}return e})}}return t.className="AlphaDropout",t})();ge.registerClass(RP);function z_(t,n,e,r,o,i=.001){let s;if(t.rank===2)s=Nk(t,n,e,r,o,i);else if(t.rank===3)s=Ak(t,n,e,r,o,i);else if(t.rank===4)s=Rk(t,n,e,r,o,i);else throw new yt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return s}function CDe(t,n,e,r,o=.001){return te(()=>{let i=gf(t,r),s=i.mean,a=i.variance;return[z_(t,s,a,e,n,o),s,a]})}function MDe(t,n,e,r,o=.001){return te(()=>{let i=gf(t,r),s=i.mean,a=i.variance,l=[];for(let f of Vi(0,t.rank))r.indexOf(f)!==-1?l.push(1):l.push(t.shape[f]);let c=$(s,l),u=$(a,l),d=n==null?null:$(n,l),p=e==null?null:$(e,l);return[z_(t,c,u,p,d,o),s,a]})}function SDe(t,n,e,r,o=.001){return x.arraysEqual(r.slice().sort(),Vi(0,t.rank-1))?CDe(t,n,e,r,o):MDe(t,n,e,r,o)}var OP=(()=>{class t extends xt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=In(e.betaInitializer||"zeros"),this.gammaInitializer=In(e.gammaInitializer||"ones"),this.movingMeanInitializer=In(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=In(e.movingVarianceInitializer||"ones"),this.betaConstraint=pr(e.betaConstraint),this.gammaConstraint=pr(e.gammaConstraint),this.betaRegularizer=Fn(e.betaRegularizer),this.gammaRegularizer=Fn(e.gammaRegularizer)}build(e){e=zt(e);let r=this.axis>=0?this.axis:this.axis+e.length,o=e[r];if(o==null)throw new J(`Axis ${r} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Dn({ndim:e.length,axes:{[r]:o}})];let i=[o];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,r){return te(()=>{let o=r.training==null?!1:r.training,i=ut(e),s=i.shape,a=s.length,l=Vi(0,a),c=this.axis>=0?this.axis:this.axis+a;l.splice(c,1);let u=za(1,a);u[c]=s[c];let d=l.slice();d.sort();let p=!x.arraysEqual(d,Vi(0,a).slice(0,a-1)),h=()=>{if(p){let y=$(this.movingMean.read(),u),k=$(this.movingVariance.read(),u),_=this.center?$(this.beta.read(),u):null,S=this.scale?$(this.gamma.read(),u):null;return z_(i,y,k,_,S,this.epsilon)}else return z_(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!o)return h();let[f,m,g]=SDe(i,this.gamma.read(),this.beta.read(),l,this.epsilon),v=(y,k,_)=>{te(()=>{let S=1-_,E=y.read(),N=L(Oe(E,k),S);y.write(Oe(E,N))})};return(()=>{v(this.movingMean,m,this.momentum),v(this.movingVariance,g,this.momentum)})(),f})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:$n(this.betaInitializer),gammaInitializer:$n(this.gammaInitializer),movingMeanInitializer:$n(this.movingMeanInitializer),movingVarianceInitializer:$n(this.movingVarianceInitializer),betaRegularizer:_n(this.betaRegularizer),gammaRegularizer:_n(this.gammaRegularizer),betaConstraint:dr(this.betaConstraint),gammaConstraint:dr(this.gammaConstraint)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="BatchNormalization",t})();ge.registerClass(OP);var FP=(()=>{class t extends xt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let r of this.axis)if(!Number.isInteger(r))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=In(e.betaInitializer||"zeros"),this.gammaInitializer=In(e.gammaInitializer||"ones"),this.betaRegularizer=Fn(e.betaRegularizer),this.gammaRegularizer=Fn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=zt(e);let r=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=r);for(let s of this.axis)if(s<0||s>=r)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==Ua(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let o=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,r){let o=ut(e),i=o.shape,s=i.length;return te(()=>{let{mean:l,variance:c}=gf(o,this.axis,!0),u=za(1,s);for(let g of this.axis)u[g]=i[g];let d=g=>g!=null&&g.shape.length!==s?$(g,u):g,p=this.scale?d(this.gamma.read()):null,h=this.center?d(this.beta.read()):null,f=[],m=[];for(let g=0;g<s;++g)this.axis.indexOf(g)!==-1?(f.push(i[g]),m.push(1)):(f.push(1),m.push(i[g]));return l=Do(l,f),c=Do(c,f),p!=null&&(p=Do(p,m)),h!=null&&(h=Do(h,m)),z_(o,l,c,h,p,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:$n(this.betaInitializer),gammaInitializer:$n(this.gammaInitializer),betaRegularizer:_n(this.betaRegularizer),gammaRegularizer:_n(this.gammaRegularizer)},r=super.getConfig();return Object.assign(e,r),e}}return t.className="LayerNormalization",t})();ge.registerClass(FP);function TDe(t,n,e){return te(()=>{if(t.rank!==4)throw new J(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(n==null&&(n=[[1,1],[1,1]]),n.length!==2||n[0].length!==2||n[1].length!==2)throw new J("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(e==null&&(e=ji()),e!=="channelsLast"&&e!=="channelsFirst")throw new J(`Unknown data format: ${e}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return e==="channelsFirst"?r=[[0,0],[0,0],n[0],n[1]]:r=[[0,0],n[0],n[1],[0,0]],wi(t,r)})}var BP=(()=>{class t extends xt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ji():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new J(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let r,o;if(typeof e.padding[0]=="number")r=[e.padding[0],e.padding[0]],o=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new J(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(r=e.padding[0],e.padding[1].length!==2)throw new J(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);o=e.padding[1]}this.padding=[r,o]}this.inputSpec=[new Dn({ndim:4})]}computeOutputShape(e){e=zt(e);let r,o;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?r=e[2]+this.padding[0][0]+this.padding[0][1]:r=null,e[3]!=null&&e[3]>=0?o=e[3]+this.padding[1][0]+this.padding[1][1]:o=null,[e[0],e[1],r,o]):(e[1]!=null&&e[1]>=0?r=e[1]+this.padding[0][0]+this.padding[0][1]:r=null,e[2]!=null&&e[2]>=0?o=e[2]+this.padding[1][0]+this.padding[1][1]:o=null,[e[0],r,o,e[3]])}call(e,r){return te(()=>TDe(ut(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},r=super.getConfig();return Object.assign(e,r),e}}return t.className="ZeroPadding2D",t})();ge.registerClass(BP);function FT(t,n,e,r,o,i){return te(()=>{er(o),wB(i),$i(r),e==null&&(e=[1,1]),r==null&&(r="valid"),o==null&&(o=ji()),i==null&&(i="max"),t=V_(t,o);let s,a=r==="same"?"same":"valid";return i==="max"?s=Tp(t,n,e,a):s=wp(t,n,e,a),o==="channelsFirst"&&(s=Lt(s,[0,3,1,2])),s})}function Lee(t,n,e,r,o,i){return te(()=>{er(o),wB(i),$i(r),e==null&&(e=[1,1,1]),r==null&&(r="valid"),o==null&&(o=ji()),i==null&&(i="max"),t=tP(t,o);let s,a=r==="same"?"same":"valid";return i==="max"?s=n_(t,n,e,a):s=Dk(t,n,e,a),o==="channelsFirst"&&(s=Lt(s,[0,4,1,2,3])),s})}var DT=class extends xt{constructor(n){if(n.poolSize==null&&(n.poolSize=2),super(n),typeof n.poolSize=="number")this.poolSize=[n.poolSize];else if(Array.isArray(n.poolSize)&&n.poolSize.length===1&&typeof n.poolSize[0]=="number")this.poolSize=n.poolSize;else throw new J(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.poolSize)}`);if(Dr(this.poolSize,"poolSize"),n.strides==null)this.strides=this.poolSize;else if(typeof n.strides=="number")this.strides=[n.strides];else if(Array.isArray(n.strides)&&n.strides.length===1&&typeof n.strides[0]=="number")this.strides=n.strides;else throw new J(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.strides)}`);Dr(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,$i(this.padding),this.inputSpec=[new Dn({ndim:3})]}computeOutputShape(n){n=zt(n);let e=cs(n[1],this.poolSize[0],this.padding,this.strides[0]);return[n[0],e,n[2]]}call(n,e){return te(()=>{this.invokeCallHook(n,e),n=Pp(ut(n),2);let r=this.poolingFunction(ut(n),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return as(r,[2])})}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(n,e),n}},PP=(()=>{class t extends DT{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return er(s),$i(i),FT(e,r,o,i,s,"max")}}return t.className="MaxPooling1D",t})();ge.registerClass(PP);var LP=(()=>{class t extends DT{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return er(s),$i(i),FT(e,r,o,i,s,"avg")}}return t.className="AveragePooling1D",t})();ge.registerClass(LP);var NT=class extends xt{constructor(n){if(n.poolSize==null&&(n.poolSize=[2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize],n.strides==null)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==2)throw new J(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides];Dr(this.poolSize,"poolSize"),Dr(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,er(this.dataFormat),$i(this.padding),this.inputSpec=[new Dn({ndim:4})]}computeOutputShape(n){n=zt(n);let e=this.dataFormat==="channelsFirst"?n[2]:n[1],r=this.dataFormat==="channelsFirst"?n[3]:n[2];return e=cs(e,this.poolSize[0],this.padding,this.strides[0]),r=cs(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[n[0],n[1],e,r]:[n[0],e,r,n[3]]}call(n,e){return te(()=>(this.invokeCallHook(n,e),this.poolingFunction(ut(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},$P=(()=>{class t extends NT{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return er(s),$i(i),FT(e,r,o,i,s,"max")}}return t.className="MaxPooling2D",t})();ge.registerClass($P);var VP=(()=>{class t extends NT{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return er(s),$i(i),FT(e,r,o,i,s,"avg")}}return t.className="AveragePooling2D",t})();ge.registerClass(VP);var AT=class extends xt{constructor(n){if(n.poolSize==null&&(n.poolSize=[2,2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize,n.poolSize],n.strides==null)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==3)throw new J(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides,n.strides];Dr(this.poolSize,"poolSize"),Dr(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,er(this.dataFormat),$i(this.padding),this.inputSpec=[new Dn({ndim:5})]}computeOutputShape(n){n=zt(n);let e=this.dataFormat==="channelsFirst"?n[2]:n[1],r=this.dataFormat==="channelsFirst"?n[3]:n[2],o=this.dataFormat==="channelsFirst"?n[4]:n[3];return e=cs(e,this.poolSize[0],this.padding,this.strides[0]),r=cs(r,this.poolSize[1],this.padding,this.strides[1]),o=cs(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[n[0],n[1],e,r,o]:[n[0],e,r,o,n[4]]}call(n,e){return te(()=>(this.invokeCallHook(n,e),this.poolingFunction(ut(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},jP=(()=>{class t extends AT{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return er(s),$i(i),Lee(e,r,o,i,s,"max")}}return t.className="MaxPooling3D",t})();ge.registerClass(jP);var zP=(()=>{class t extends AT{constructor(e){super(e)}poolingFunction(e,r,o,i,s){return er(s),$i(i),Lee(e,r,o,i,s,"avg")}}return t.className="AveragePooling3D",t})();ge.registerClass(zP);var RT=class extends xt{constructor(n){super(n),this.inputSpec=[new Dn({ndim:3})]}computeOutputShape(n){return[n[0],n[2]]}call(n,e){throw new yt}},HP=(()=>{class t extends RT{constructor(e){super(e||{})}call(e,r){return te(()=>{let o=ut(e);return Rn(o,1)})}}return t.className="GlobalAveragePooling1D",t})();ge.registerClass(HP);var UP=(()=>{class t extends RT{constructor(e){super(e||{})}call(e,r){return te(()=>{let o=ut(e);return fo(o,1)})}}return t.className="GlobalMaxPooling1D",t})();ge.registerClass(UP);var OT=class extends xt{constructor(n){super(n),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,er(this.dataFormat),this.inputSpec=[new Dn({ndim:4})]}computeOutputShape(n){return n=n,this.dataFormat==="channelsLast"?[n[0],n[3]]:[n[0],n[1]]}call(n,e){throw new yt}getConfig(){let n={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},GP=(()=>{class t extends OT{call(e,r){return te(()=>{let o=ut(e);return this.dataFormat==="channelsLast"?Rn(o,[1,2]):Rn(o,[2,3])})}}return t.className="GlobalAveragePooling2D",t})();ge.registerClass(GP);var WP=(()=>{class t extends OT{call(e,r){return te(()=>{let o=ut(e);return this.dataFormat==="channelsLast"?fo(o,[1,2]):fo(o,[2,3])})}}return t.className="GlobalMaxPooling2D",t})();ge.registerClass(WP);var BT=class extends xt{constructor(n){super(n),this.layer=n.layer}build(n){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(n){this.layer!=null&&(this.layer.trainable=n)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(n){this.layer.setWeights(n)}getConfig(){let n={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(n,e),n}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(n)}static fromConfig(n,e,r={}){let o=e.layer,i=Ui(o,r);delete e.layer;let s={layer:i};return Object.assign(s,e),new n(s)}},qP=(()=>{class t extends BT{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=zt(e),e.length<3)throw new J(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let r=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(r),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=zt(e);let r=[e[0]].concat(e.slice(2)),o=this.layer.computeOutputShape(r),i=e[1];return[o[0],i].concat(o.slice(1))}call(e,r){return te(()=>(e=ut(e),uP((a,l)=>[ut(this.layer.call(a,r)),[]],e,[],!1,null,null,!1,!0)[1]))}}return t.className="TimeDistributed",t})();ge.registerClass(qP);function EDe(t){Mu(UJ,"BidirectionalMergeMode",t)}var IDe="concat",KP=(()=>{class t extends BT{constructor(e){super(e);let r=e.layer.getConfig(),o={};o.className=e.layer.getClassName(),o.config=r,this.forwardLayer=Ui(o),r.goBackwards=r.goBackwards!==!0;let i={};if(i.className=e.layer.getClassName(),i.config=r,this.backwardLayer=Ui(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?IDe:e.mergeMode,EDe(this.mergeMode),e.weights)throw new yt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let r=e.length,o=Math.floor(r/2);this.forwardLayer.setWeights(e.slice(0,o)),this.backwardLayer.setWeights(e.slice(o))}computeOutputShape(e){let r=this.forwardLayer.computeOutputShape(e);Array.isArray(r)&&Array.isArray(r[0])||(r=[r]),r=r;let o,i,s;return this.returnState&&(s=r.slice(1)),o=r[0],o=o,this.mergeMode==="concat"?(o[o.length-1]*=2,i=[o]):this.mergeMode==null?i=[o,o.slice()]:i=[o],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[o].concat(s).concat(s.slice()):Ro(i)}apply(e,r){let o=r==null?null:r.initialState,i=r==null?null:r.constants;r==null&&(r={});let s=cP(e,o,i,this.numConstants);if(e=s.inputs,o=s.initialState,i=s.constants,Array.isArray(e)&&(o=e.slice(1),e=e[0]),(o==null||o.length===0)&&i==null)return super.apply(e,r);let a=[],l=[];if(o!=null){let u=o.length;if(u%2>0)throw new J("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");r.initialState=o,a.push(...o);let d=o.map(p=>new Dn({shape:p.shape}));this.forwardLayer.stateSpec=d.slice(0,u/2),this.backwardLayer.stateSpec=d.slice(u/2),l.push(...d)}if(i!=null)throw new yt("Support for constants in Bidirectional layers is not implemented yet.");let c=a[0]instanceof ci;for(let u of a)if(u instanceof ci!==c)throw new J("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){let u=[e].concat(a),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;let h=super.apply(u,r);return this.inputSpec=p,h}else return super.apply(e,r)}call(e,r){return te(()=>{let o=r.initialState,i,s;if(o==null)i=this.forwardLayer.call(e,r),s=this.backwardLayer.call(e,r);else{let c=o.slice(0,o.length/2),u=o.slice(o.length/2);i=this.forwardLayer.call(e,Object.assign(r,{initialState:c})),s=this.backwardLayer.call(e,Object.assign(r,{initialState:u}))}let a;this.returnState&&(Array.isArray(i)&&(a=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=Ur(s,1));let l;return this.mergeMode==="concat"?l=Pv([i,s]):this.mergeMode==="sum"?l=fe(i,s):this.mergeMode==="ave"?l=L(.5,fe(i,s)):this.mergeMode==="mul"?l=L(i,s):this.mergeMode==null&&(l=[i,s]),this.returnState?this.mergeMode==null?l.concat(a):[l].concat(a):l})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Hl(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Hl(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,r){Array.isArray(r)&&(r=r[0]);let o;if(this.returnSequences?this.mergeMode==null?o=[r,r]:o=r:this.mergeMode==null?o=[null,null]:o=null,this.returnState){let s=this.forwardLayer.states.map(a=>null);return Array.isArray(o)?o.concat(s).concat(s):[o].concat(s).concat(s)}else return o}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},r=super.getConfig();return Object.assign(e,r),e}static fromConfig(e,r){let o=Ui(r.layer);if(delete r.layer,r.numConstants!=null)throw new yt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let i=r;return i.layer=o,new e(i)}}return t.className="Bidirectional",t})();ge.registerClass(KP);var ZP=(()=>{class t extends xt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},r=super.getConfig();return Object.assign(e,r),e}call(e,r){return te(()=>(e=ut(e),e.dtype!=="float32"&&(e=xi(e,"float32")),fe(L(e,this.scale),this.offset)))}}return t.className="Rescaling",t})();ge.registerClass(ZP);var{resizeBilinear:DDe,cropAndResize:NDe}=yi,XP=(()=>{class t extends xt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,r,o,i,s,a,l,c){return te(()=>{let u,d=!1,p=r/a,h=o/l,f=(i+r)/a,m=(s+o)/l,g=[p,h,f,m],v=[];e.rank===3?(d=!0,u=Xn([e])):u=e;for(let S=0;S<u.shape[0];S++)v.push(g);let w=Hr(v,[v.length,4]),y=jl(0,v.length,1,"int32"),_=NDe(u,w,y,[i,s],"nearest");return d?xi(ut(Wr(_)),c):xi(_,c)})}upsize(e,r,o,i){return te(()=>{let s=DDe(e,[r,o]);return xi(s,i)})}call(e,r){return te(()=>{let o=ut(e),i=o.dtype,s=o.shape,a=s[s.length-3],l=s[s.length-2],c=0;a!==this.height&&(c=Math.floor((a-this.height)/2));let u=0;return l!==this.width&&(u=Math.floor((l-this.width)/2),u===0&&(u=1)),c>=0&&u>=0?this.centerCrop(o,c,u,this.height,this.width,a,l,i):this.upsize(e,this.height,this.width,i)})}getConfig(){let e={height:this.height,width:this.width},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){e=zt(e);let r=e.length-3,o=e.length-2;return e[r]=this.height,e[o]=this.width,e}}return t.className="CenterCrop",t})();ge.registerClass(XP);function $ee(t,n,e,r){let o=ut(t);if(o.dtype!=="int32"&&(o=xi(o,"int32")),n==="int")return o;let i=o.shape;if(o.rank===0&&(o=ur(o,-1)),n==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=ur(o,-1)),o.rank>2)throw new J(`When outputMode is not int, maximum output rank is 2 Received outputMode ${n} and input shape ${i} which would result in output rank ${o.rank}.`);let s=["multiHot","oneHot"].includes(n),a=o,l;if(typeof r<"u"&&n==="count"?l=Tv(a,r,e,s):l=Tv(a,[],e,s),n!=="tfIdf")return l;if(r)return L(l,r);throw new J("When outputMode is 'tfIdf', weights must be provided.")}var YP=(()=>{class t extends xt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){return e=zt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,r){return te(()=>{e=ut(e),e.dtype!=="int32"&&(e=xi(e,"int32"));let o;if(typeof r.countWeights<"u"){if(this.outputMode!=="count")throw new J(`countWeights is not used when outputMode !== count.
              Received countWeights=${r.countWeights}`);o=ut(r.countWeights)}let i=fo(e),s=wu(e),a=Zn(this.numTokens,i).bufferSync().get(0),l=gi(s,0).bufferSync().get(0);if(!(a&&l))throw new J(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return $ee(e,this.outputMode,this.numTokens,o)})}}return t.className="CategoryEncoding",t})();ge.registerClass(YP);var RDe=["bilinear","nearest"],Vee=new Set(RDe),QP=(()=>{class t extends xt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(Vee.has(e.interpolation))this.interpolation=e.interpolation;else throw new J(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=zt(e);let r=e[2];return[this.height,this.width,r]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},r=super.getConfig();return Object.assign(e,r),e}call(e,r){return te(()=>{let o=[this.height,this.width];if(this.interpolation==="bilinear")return yi.resizeBilinear(e,o,!this.cropToAspectRatio);if(this.interpolation==="nearest")return yi.resizeNearestNeighbor(e,o,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...Vee]} are supported`)})}}return t.className="Resizing",t})();ge.registerClass(QP);var jee=(()=>{class t{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}return t.className="RandomSeed",t})();var zee=(()=>{class t extends xt{constructor(e){super(e),this.randomGenerator=new jee(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},r=super.getConfig();return Object.assign(e,r),e}}return t.className="BaseRandomLayer",t})();var ODe=["bilinear","nearest"],Hee=new Set(ODe),JP=(()=>{class t extends zee{constructor(e){super(e);let{factor:r,interpolation:o="bilinear"}=e;if(this.factor=r,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new J(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new J(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new J(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(o)if(Hee.has(o))this.interpolation=o;else throw new J(`Invalid interpolation parameter: ${o} is not implemented`)}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},r=super.getConfig();return Object.assign(e,r),e}computeOutputShape(e){e=zt(e);let r=e[2];return[this.imgHeight,-1,r]}call(e,r){return te(()=>{let o=ut(e);this.imgHeight=o.shape[o.shape.length-3];let i=o.shape[o.shape.length-2];this.widthFactor=ss([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);let a=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return yi.resizeBilinear(e,a);case"nearest":return yi.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...Hee]} are supported`)}})}}return t.className="RandomWidth",t})();ge.registerClass(JP);function FDe(t){return new Ef(t)}function BDe(t){return new QB(t)}function PDe(t){return new ZB(t)}function LDe(t){return new XB(t)}function $De(t){return new YB(t)}function VDe(t){return new eP(t)}function jDe(t){return new JB(t)}function zDe(t){return new iP(t)}function HDe(t){return new bT(t)}function UDe(t){return new nP(t)}function GDe(t){return new CT(t)}function WDe(t){return new rP(t)}function qDe(t){return new oP(t)}function KDe(t){return new sP(t)}function ZDe(t){return new aP(t)}function XDe(t){return new lP(t)}function YDe(t){return new wP(t)}function QDe(t){return new gP(t)}function JDe(t){return new IT(t)}function eNe(t){return new mP(t)}function tNe(t){return new vP(t)}function nNe(t){return new yP(t)}function rNe(t){return new xP(t)}function oNe(t){return new kP(t)}function iNe(t){return new bP(t)}function sNe(t){return new CP(t)}function aNe(t){return new SP(t)}function lNe(t){return new IP(t)}function cNe(t){return new TP(t)}function uNe(t){return new EP(t)}function dNe(t){return new MP(t)}function pNe(t){return new DP(t)}function hNe(t){return new OP(t)}function fNe(t){return new FP(t)}function mNe(t){return new BP(t)}function eL(t){return new LP(t)}function gNe(t){return eL(t)}function vNe(t){return eL(t)}function tL(t){return new VP(t)}function wNe(t){return tL(t)}function yNe(t){return tL(t)}function nL(t){return new zP(t)}function xNe(t){return nL(t)}function kNe(t){return nL(t)}function _Ne(t){return new HP(t)}function bNe(t){return new GP(t)}function Uee(t){return new UP(t)}function Gee(t){return new WP(t)}function Wee(t){return new PP(t)}function qee(t){return new $P(t)}function CNe(t){return new jP(t)}function MNe(t){return new pP(t)}function SNe(t){return new ST(t)}function TNe(t){return new hP(t)}function ENe(t){return new Zv(t)}function INe(t){return new dP(t)}function DNe(t){return new MT(t)}function NNe(t){return new fP(t)}function ANe(t){return new ET(t)}function RNe(t){return new Kl(t)}function ONe(t){return new TT(t)}function FNe(t){return new KP(t)}function BNe(t){return new qP(t)}var PNe=Uee,LNe=Gee,$Ne=Wee,VNe=qee;function jNe(t){return new NP(t)}function zNe(t){return new AP(t)}function HNe(t){return new RP(t)}function UNe(t){return new _P(t)}function GNe(t){return new ZP(t)}function WNe(t){return new XP(t)}function qNe(t){return new QP(t)}function KNe(t){return new YP(t)}function ZNe(t){return new JP(t)}var oL={};Qt(oL,{MAPE:()=>s5e,MSE:()=>c5e,binaryAccuracy:()=>XNe,binaryCrossentropy:()=>YNe,categoricalAccuracy:()=>JNe,categoricalCrossentropy:()=>e5e,cosineProximity:()=>r5e,mape:()=>a5e,meanAbsoluteError:()=>o5e,meanAbsolutePercentageError:()=>i5e,meanSquaredError:()=>l5e,mse:()=>u5e,precision:()=>t5e,r2Score:()=>d5e,recall:()=>n5e,sparseCategoricalAccuracy:()=>QNe});function XNe(t,n){return R_(t,n)}function YNe(t,n){return dT(t,n)}function QNe(t,n){return pT(t,n)}function JNe(t,n){return O_(t,n)}function e5e(t,n){return F_(t,n)}function t5e(t,n){return VB(t,n)}function n5e(t,n){return hee(t,n)}function r5e(t,n){return A_(t,n)}function o5e(t,n){return Hv(t,n)}function i5e(t,n){return If(t,n)}function s5e(t,n){return If(t,n)}function a5e(t,n){return If(t,n)}function l5e(t,n){return Eu(t,n)}function c5e(t,n){return Eu(t,n)}function u5e(t,n){return Eu(t,n)}function d5e(t,n){return fee(t,n)}var iL={};Qt(iL,{modelFromJSON:()=>Iee});var sL={};Qt(sL,{l1:()=>h5e,l1l2:()=>p5e,l2:()=>f5e});function p5e(t){return new L_(t)}function h5e(t){return Fee(t)}function f5e(t){return Bee(t)}var H_=class extends $p{constructor(){super(...arguments),this.model=null}setModel(n){if(!(n instanceof Ka))throw new Error("model must be a LayersModel, not some other Container");this.model=n}};function PT(t,n){return t<n}function Kee(t,n){return t>n}var U_=class extends H_{constructor(n){if(super(),n==null&&(n={}),n.restoreBestWeights)throw new yt("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=n.monitor||"val_loss",this.minDelta=Math.abs(n.minDelta||0),this.patience=n.patience||0,this.verbose=n.verbose||0,this.mode=n.mode||"auto",this.baseline=n.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.mode==="min"?this.monitorFunc=PT:this.mode==="max"?this.monitorFunc=Kee:this.monitor.indexOf("acc")!==-1?this.monitorFunc=Kee:this.monitorFunc=PT,this.monitorFunc===PT&&(this.minDelta*=-1)}onTrainBegin(n){return z(this,null,function*(){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===PT?1/0:-1/0})}onEpochEnd(n,e){return z(this,null,function*(){yield Tu(e);let r=this.getMonitorValue(e);r!=null&&(this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=n,this.model.stopTraining=!0)))})}onTrainEnd(n){return z(this,null,function*(){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)})}getMonitorValue(n){n==null&&(n={});let e=n[this.monitor];return e==null&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(n)}`),e}};function m5e(t){return new U_(t)}var Zee={earlyStopping:m5e};var g5e=Y();g5e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var Rs=(function(t){return t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF",t})(Rs||{}),Xee;(function(t){let n;(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(Xee||(Xee={}));var aL={};function Yee(t,n){let e={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:n};aL[t]=e}function LT(t){return aL[t]}function Qee(t){delete aL[t]}function C(t,n,e,r,o){let i=n.inputParams[t];if(i&&i.inputIndexStart!==void 0){let a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?n.inputNames.length+a:a;if(i.type==="tensor")return Zr(n.inputNames[c],e,r,o);if(i.type==="tensors"){let p=n.inputs.slice(a,l);return n.inputNames.slice(a,l).filter((f,m)=>{var g;return((g=p[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(f=>Zr(f,e,r,o))}let u=Zr(n.inputNames[c],e,r,o),d=u.dataSync();return i.type==="number"?d[0]:x.toNestedArray(u.shape,d)}let s=n.attrParams[t];return s&&s.value}function Zr(t,n,e,r){let[o,i]=Gi(t,e);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let s=e.currentContextIds.find(a=>!!n[$T(o,a)]);return s!==void 0?n[$T(o,s)][i]:void 0}function lL(t,n,e){return n[$T(t,e.currentContextId)]}function Zl(t,n){let[e,r,o]=Gi(t,n);return[$T(e,n&&n.currentContextId),r,o]}function $T(t,n){return n?`${t}-${n}`:t}function Gi(t,n){if(t==="")return["",0,void 0];let e=n!=null&&n.parseNodeNameCache!=null;if(e){let i=n.parseNodeNameCache.get(t);if(i!=null)return i}let r=t.split(":"),o;if(r.length===1)o=[t,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[i,a,s]}return e&&n.parseNodeNameCache.set(t,o),o}function G_(t,n,e){let r=C("pad",t,n,e);if(r==="explicit"){r=C("explicitPaddings",t,n,e);let o=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)o[i][0]=r[i*2],o[i][1]=r[i*2+1];return o}return r}function Xl(t){return t.kept?t:mi(t)}var cL={};Qt(cL,{json:()=>w5e});var w5e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var uL={};Qt(uL,{json:()=>y5e});var y5e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var dL={};Qt(dL,{json:()=>x5e});var x5e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}];var pL={};Qt(pL,{json:()=>k5e});var k5e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];var hL={};Qt(hL,{json:()=>_5e});var _5e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];var fL={};Qt(fL,{json:()=>b5e});var b5e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var mL={};Qt(mL,{json:()=>C5e});var C5e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];var gL={};Qt(gL,{json:()=>M5e});var M5e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];var vL={};Qt(vL,{json:()=>S5e});var S5e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var wL={};Qt(wL,{json:()=>T5e});var T5e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}];var yL={};Qt(yL,{json:()=>E5e});var E5e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}];var xL={};Qt(xL,{json:()=>I5e});var I5e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}];var kL={};Qt(kL,{json:()=>D5e});var D5e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}];var _L={};Qt(_L,{json:()=>N5e});var N5e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];var bL={};Qt(bL,{json:()=>A5e});var A5e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var CL={};Qt(CL,{json:()=>R5e});var R5e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}];var ML={};Qt(ML,{json:()=>O5e});var O5e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];var SL={};Qt(SL,{json:()=>F5e});var F5e=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}];var TL={};Qt(TL,{json:()=>B5e});var B5e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var W_=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let n=[cL,uL,dL,pL,hL,fL,mL,gL,vL,wL,yL,xL,kL,_L,bL,CL,ML,SL,TL],e=[].concat(...n.map(r=>r.json));this.opMappers=e.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(n,e={}){let r=n.node,o=[],i=[],s=[],a=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?o.push(m[g.name]):g.op==="Const"?i.push(m[g.name]):(g.input==null||g.input.length===0)&&s.push(m[g.name]),m),{}),l=[],c=[],u={},d={};e!=null&&(u=this.mapSignatureEntries(e.inputs),d=this.mapSignatureEntries(e.outputs));let p=Object.keys(a);p.forEach(m=>{let g=a[m];g.inputNames.forEach((v,w)=>{let[y,,k]=Zl(v),_=a[y];if(_.outputs!=null){let S=_.outputs.indexOf(k);if(S!==-1){let E=`${y}:${S}`;g.inputNames[w]=E}}g.inputs.push(_),_.children.push(g)})}),Object.keys(d).length===0?p.forEach(m=>{let g=a[m];g.children.length===0&&c.push(g)}):Object.keys(d).forEach(m=>{let[g]=Zl(m),v=a[g];v!=null&&(v.signatureKey=d[m],c.push(v))}),Object.keys(u).length>0?Object.keys(u).forEach(m=>{let[g]=Zl(m),v=a[g];v&&(v.signatureKey=u[m],l.push(v))}):l=o;let h={};n.library!=null&&n.library.function!=null&&(h=n.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));let f={nodes:a,inputs:l,outputs:c,weights:i,placeholders:o,signature:e,functions:h};return s.length>0&&(f.initNodes=s),f}mapSignatureEntries(n){return Object.keys(n||{}).reduce((e,r)=>(e[n[r].name]=r,e),{})}mapNode(n){let e=LT(n.op)||this.opMappers[n.op]||{};n.attr==null&&(n.attr={});let r={name:n.name,op:n.op,category:e.category,inputNames:(n.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:n.attr,outputs:e.outputs};return e.inputs!=null&&(r.inputParams=e.inputs.reduce((o,i)=>(o[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},o),{})),e.attrs!=null&&(r.attrParams=e.attrs.reduce((o,i)=>{let s=i.type,a;switch(i.type){case"string":a=VT(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=VT(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=qT(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=qT(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=zT(n.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=zT(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=WT(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=WT(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=jT(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=jT(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=ZT(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=ZT(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=GT(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=GT(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=KT(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=KT(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=HT(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=HT(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=UT(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=UT(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=Jee(n.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Jee(n.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${n.op}`)}return o[i.name]={value:a,type:s},o},{})),r}mapFunction(n){let e=n.nodeDef,r=[],o=[],i={};e!=null&&(i=e.reduce((d,p)=>(d[p.name]=this.mapNode(p),p.op==="Const"&&o.push(d[p.name]),d),{}));let s=[],a=[];n.signature.inputArg.forEach(d=>{let[p]=Zl(d.name),h={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:EL(d.type),type:"dtype"}},children:[]};h.signatureKey=d.name,s.push(h),i[p]=h}),Object.keys(i).forEach(d=>{let p=i[d];p.inputNames.forEach((h,f)=>{let[m,,g]=Zl(h),v=i[m];if(v.outputs!=null){let w=v.outputs.indexOf(g);if(w!==-1){let y=`${m}:${w}`;p.inputNames[f]=y}}p.inputs.push(v),v.children.push(p)})});let c=n.ret;n.signature.outputArg.forEach(d=>{let[p,h]=Zl(c[d.name]),f=i[p];f!=null&&(f.defaultOutput=h,a.push(f))});let u=this.mapArgsToSignature(n);return{nodes:i,inputs:s,outputs:a,weights:o,placeholders:r,signature:u}}mapArgsToSignature(n){return{methodName:n.signature.name,inputs:n.signature.inputArg.reduce((e,r)=>(e[r.name]=this.mapArgToTensorInfo(r),e),{}),outputs:n.signature.outputArg.reduce((e,r)=>(e[r.name]=this.mapArgToTensorInfo(r,n.ret),e),{})}}mapArgToTensorInfo(n,e){let r=n.name;return e!=null&&(r=e[r]),{name:r,dtype:n.type}}};function P5e(t){let n=Y().global;if(typeof n.atob<"u")return n.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function ete(t,n){let e=Array.isArray(t)?String.fromCharCode.apply(null,t):P5e(t);return n?e:e.toLowerCase()}function VT(t,n,e,r=!1){let o=t[n];return o!=null?ete(o.s,r):e}function jT(t,n,e){let r=t[n];return r?r.b:e}function zT(t,n,e){let r=t[n]||{},o=r.i!=null?r.i:r.f!=null?r.f:e;return typeof o=="number"?o:parseInt(o,10)}function EL(t){switch(typeof t=="string"&&(t=Rs[t]),t){case Rs.DT_FLOAT:case Rs.DT_HALF:return"float32";case Rs.DT_INT32:case Rs.DT_INT64:case Rs.DT_INT8:case Rs.DT_UINT8:return"int32";case Rs.DT_BOOL:return"bool";case Rs.DT_DOUBLE:return"float32";case Rs.DT_STRING:return"string";case Rs.DT_COMPLEX64:case Rs.DT_COMPLEX128:return"complex64";default:return null}}function Jee(t,n,e){let r=t[n];return r&&r.func?r.func.name:e}function HT(t,n,e){let r=t[n];return r&&r.type?EL(r.type):e}function UT(t,n,e){let r=t[n];return r&&r.list&&r.list.type?r.list.type.map(o=>EL(o)):e}function tte(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(n=>typeof n.size=="number"?n.size:parseInt(n.size,10)):[]}function GT(t,n,e){let r=t[n];return r&&r.shape?tte(r.shape):e}function WT(t,n,e){let r=t[n];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):e}function qT(t,n,e,r=!1){let o=t[n];return o&&o.list&&o.list.s?o.list.s.map(i=>ete(i,r)):e}function KT(t,n,e){let r=t[n];return r&&r.list&&r.list.shape?r.list.shape.map(o=>tte(o)):e}function ZT(t,n,e){let r=t[n];return r&&r.list&&r.list.b?r.list.b:e}var XT=class{constructor(n,e,r){this.node=n,this.tensorMap=e,this.context=r,this.inputs=[],this.attrs={},this.inputs=n.inputNames.map(o=>this.getInput(o)),n.rawAttrs!=null&&(this.attrs=Object.keys(n.rawAttrs).reduce((o,i)=>(o[i]=this.getAttr(i),o),{}))}getInput(n){return Zr(n,this.tensorMap,this.context)}getAttr(n,e){let r=this.node.rawAttrs[n];if(r.tensor!=null)return Zr(n,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return zT(this.node.rawAttrs,n,e);if(r.s!=null)return VT(this.node.rawAttrs,n,e);if(r.b!=null)return jT(this.node.rawAttrs,n,e);if(r.shape!=null)return GT(this.node.rawAttrs,n,e);if(r.type!=null)return HT(this.node.rawAttrs,n,e);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return WT(this.node.rawAttrs,n,e);if(r.list.s!=null)return qT(this.node.rawAttrs,n,e);if(r.list.shape!=null)return KT(this.node.rawAttrs,n,e);if(r.list.b!=null)return ZT(this.node.rawAttrs,n,e);if(r.list.type!=null)return UT(this.node.rawAttrs,n,e)}return e}};var vn={};Qt(vn,{OP_SCOPE_SUFFIX:()=>oS,abs:()=>Pn,acos:()=>xk,acosh:()=>kk,add:()=>fe,addN:()=>XO,all:()=>mg,any:()=>hf,argMax:()=>Rl,argMin:()=>_k,asin:()=>bk,asinh:()=>Ck,atan:()=>Mk,atan2:()=>Sk,atanh:()=>Tk,avgPool:()=>wp,avgPool3d:()=>Dk,basicLSTMCell:()=>eF,batchNorm:()=>Ol,batchNorm2d:()=>Nk,batchNorm3d:()=>Ak,batchNorm4d:()=>Rk,batchToSpaceND:()=>yp,bincount:()=>Ok,bitwiseAnd:()=>tF,booleanMaskAsync:()=>mX,broadcastArgs:()=>nF,broadcastTo:()=>Fl,buffer:()=>ot,cast:()=>me,ceil:()=>Fk,clipByValue:()=>ho,clone:()=>mi,complex:()=>Oi,concat:()=>hn,concat1d:()=>Bk,concat2d:()=>Pk,concat3d:()=>Lk,concat4d:()=>$k,conv1d:()=>vg,conv2d:()=>Bi,conv2dTranspose:()=>wg,conv3d:()=>Vk,conv3dTranspose:()=>jk,cos:()=>xp,cosh:()=>yg,cosineWindow:()=>Nv,cumprod:()=>ff,cumsum:()=>xg,denseBincount:()=>Tv,depthToSpace:()=>zk,depthwiseConv2d:()=>Bl,diag:()=>rF,dilation2d:()=>Hk,div:()=>Be,divNoNan:()=>Uk,dot:()=>Gk,dropout:()=>yS,einsum:()=>kp,elu:()=>Pl,enclosingPowerOfTwo:()=>xS,ensureShape:()=>oF,equal:()=>Io,erf:()=>kg,euclideanNorm:()=>qk,exp:()=>cr,expandDims:()=>ur,expm1:()=>Kk,eye:()=>mf,fft:()=>Np,fill:()=>ia,floor:()=>Ll,floorDiv:()=>fg,fused:()=>Rp,gather:()=>$l,gatherND:()=>xX,greater:()=>Zn,greaterEqual:()=>gi,ifft:()=>_u,imag:()=>_p,image:()=>yi,inTopKAsync:()=>_X,irfft:()=>Fg,isFinite:()=>Zk,isInf:()=>Xk,isNaN:()=>Yk,leakyRelu:()=>bp,less:()=>xu,lessEqual:()=>is,linalg:()=>DS,linspace:()=>cF,localResponseNormalization:()=>Qk,log:()=>mo,log1p:()=>Cp,logSigmoid:()=>e_,logSoftmax:()=>_g,logSumExp:()=>Mp,logicalAnd:()=>No,logicalNot:()=>Sp,logicalOr:()=>bg,logicalXor:()=>t_,losses:()=>dY,lowerBound:()=>uF,matMul:()=>Pt,max:()=>fo,maxPool:()=>Tp,maxPool3d:()=>n_,maxPoolWithArgmax:()=>dF,maximum:()=>Pi,mean:()=>Rn,meshgrid:()=>pF,min:()=>wu,minimum:()=>As,mirrorPad:()=>r_,mod:()=>o_,moments:()=>gf,movingAverage:()=>gX,mul:()=>L,multiRNNCell:()=>hF,multinomial:()=>fF,neg:()=>Wt,norm:()=>yu,notEqual:()=>La,oneHot:()=>Vl,ones:()=>Tr,onesLike:()=>oo,op:()=>I,outerProduct:()=>mF,pad:()=>wi,pad1d:()=>gF,pad2d:()=>vF,pad3d:()=>wF,pad4d:()=>yF,pool:()=>i_,pow:()=>qo,prelu:()=>Ip,print:()=>yk,prod:()=>s_,raggedGather:()=>xF,raggedRange:()=>kF,raggedTensorToTensor:()=>_F,rand:()=>bF,randomGamma:()=>OF,randomNormal:()=>vf,randomStandardNormal:()=>FF,randomUniform:()=>ss,randomUniformInt:()=>BF,range:()=>jl,real:()=>ku,reciprocal:()=>l_,relu:()=>Ao,relu6:()=>Sg,reshape:()=>$,reverse:()=>Ur,reverse1d:()=>PF,reverse2d:()=>LF,reverse3d:()=>$F,reverse4d:()=>VF,rfft:()=>Ap,round:()=>Tg,rsqrt:()=>Eg,scalar:()=>$e,scatterND:()=>vX,searchSorted:()=>Ev,selu:()=>Ig,separableConv2d:()=>Dg,setdiff1dAsync:()=>jF,sigmoid:()=>ai,sign:()=>c_,signal:()=>uY,sin:()=>Ng,sinh:()=>Ag,slice:()=>Tt,slice1d:()=>Rg,slice2d:()=>Iv,slice3d:()=>Og,slice4d:()=>wf,softmax:()=>Dp,softplus:()=>Pa,spaceToBatchND:()=>Ep,sparse:()=>pY,sparseToDense:()=>yX,spectral:()=>cY,split:()=>Gr,sqrt:()=>Mn,square:()=>jt,squaredDifference:()=>Bg,squeeze:()=>as,stack:()=>Xn,step:()=>sa,stridedSlice:()=>u_,string:()=>hY,sub:()=>Oe,sum:()=>Ve,tan:()=>d_,tanh:()=>Fa,tensor:()=>Hr,tensor1d:()=>Yn,tensor2d:()=>$a,tensor3d:()=>p_,tensor4d:()=>zF,tensor5d:()=>HF,tensor6d:()=>UF,tensorScatterUpdate:()=>WF,tile:()=>Do,topk:()=>f_,transpose:()=>Lt,truncatedNormal:()=>Pg,unique:()=>m_,unsortedSegmentSum:()=>Lg,unstack:()=>Wr,upperBound:()=>qF,variable:()=>g_,where:()=>En,whereAsync:()=>v_,zeros:()=>On,zerosLike:()=>at});var nte=(t,n,e,r=vn)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(C("a",t,n,e),C("b",t,n,e))];case"AddN":return[r.addN(C("tensors",t,n,e))];case"FloorMod":case"Mod":return[r.mod(C("a",t,n,e),C("b",t,n,e))];case"Mul":return[r.mul(C("a",t,n,e),C("b",t,n,e))];case"RealDiv":case"Div":return[r.div(C("a",t,n,e),C("b",t,n,e))];case"DivNoNan":return[r.divNoNan(C("a",t,n,e),C("b",t,n,e))];case"FloorDiv":return[r.floorDiv(C("a",t,n,e),C("b",t,n,e))];case"Sub":return[r.sub(C("a",t,n,e),C("b",t,n,e))];case"Minimum":return[r.minimum(C("a",t,n,e),C("b",t,n,e))];case"Maximum":return[r.maximum(C("a",t,n,e),C("b",t,n,e))];case"Pow":return[r.pow(C("a",t,n,e),C("b",t,n,e))];case"SquaredDifference":return[r.squaredDifference(C("a",t,n,e),C("b",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var rte=(t,n,e,r=vn)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(C("x",t,n,e))];case"Acos":return[r.acos(C("x",t,n,e))];case"Acosh":return[r.acosh(C("x",t,n,e))];case"Asin":return[r.asin(C("x",t,n,e))];case"Asinh":return[r.asinh(C("x",t,n,e))];case"Atan":return[r.atan(C("x",t,n,e))];case"Atan2":return[r.atan2(C("x",t,n,e),C("y",t,n,e))];case"Atanh":return[r.atanh(C("x",t,n,e))];case"Ceil":return[r.ceil(C("x",t,n,e))];case"Complex":return[r.complex(C("real",t,n,e),C("imag",t,n,e))];case"Cos":return[r.cos(C("x",t,n,e))];case"Cosh":return[r.cosh(C("x",t,n,e))];case"Elu":return[r.elu(C("x",t,n,e))];case"Erf":return[r.erf(C("x",t,n,e))];case"Exp":return[r.exp(C("x",t,n,e))];case"Expm1":return[r.expm1(C("x",t,n,e))];case"Floor":return[r.floor(C("x",t,n,e))];case"Log":return[r.log(C("x",t,n,e))];case"Log1p":return[r.log1p(C("x",t,n,e))];case"Imag":return[r.imag(C("x",t,n,e))];case"Neg":return[r.neg(C("x",t,n,e))];case"Reciprocal":return[r.reciprocal(C("x",t,n,e))];case"Real":return[r.real(C("x",t,n,e))];case"Relu":return[r.relu(C("x",t,n,e))];case"Round":return[r.round(C("x",t,n,e))];case"Selu":return[r.selu(C("x",t,n,e))];case"Sigmoid":return[r.sigmoid(C("x",t,n,e))];case"Sin":return[r.sin(C("x",t,n,e))];case"Sign":return[r.sign(C("x",t,n,e))];case"Sinh":return[r.sinh(C("x",t,n,e))];case"Softplus":return[r.softplus(C("x",t,n,e))];case"Sqrt":return[r.sqrt(C("x",t,n,e))];case"Square":return[r.square(C("x",t,n,e))];case"Tanh":return[r.tanh(C("x",t,n,e))];case"Tan":return[r.tan(C("x",t,n,e))];case"ClipByValue":return[r.clipByValue(C("x",t,n,e),C("clipValueMin",t,n,e),C("clipValueMax",t,n,e))];case"Relu6":return[r.relu6(C("x",t,n,e))];case"Rsqrt":return[r.rsqrt(Zr(t.inputNames[0],n,e))];case"LeakyRelu":return[r.leakyRelu(C("x",t,n,e),C("alpha",t,n,e))];case"Prelu":return[r.prelu(C("x",t,n,e),C("alpha",t,n,e))];case"IsNan":return[r.isNaN(Zr(t.inputNames[0],n,e))];case"IsInf":return[r.isInf(Zr(t.inputNames[0],n,e))];case"IsFinite":return[r.isFinite(Zr(t.inputNames[0],n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function Os(t,n,e=""){if(!(typeof t=="number"||typeof n=="number")){x.assert(t.length===n.length,()=>e+` Shapes ${t} and ${n} must match`);for(let r=0;r<t.length;r++){let o=t[r],i=n[r];x.assert(o<0||i<0||o===i,()=>e+` Shapes ${t} and ${n} must match`)}}}function ote(t){return!(typeof t=="number"||t.some(n=>n<0))}function Xv(t,n,e){let r=YT(t,e),o=!ote(r);if(o&&n.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&n.forEach(i=>{r=YT(i.shape,r)}),!ote(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function YT(t,n){if(typeof t=="number")return n;if(typeof n=="number")return t;if(t.length!==n.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${n}`);let e=[];for(let r=0;r<t.length;++r){let o=t[r],i=n[r];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${n}`);e[r]=o>=0?o:i}return e}var QT=class{constructor(n,e,r,o,i,s,a){this.name=n,this.dtype=e,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=$e(0),Hn(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(n){this.tensors.forEach(e=>{(n==null||!n.has(e.tensor.id))&&e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(n<0||n>=this.size())throw new Error(`Tried to read from index ${n}, but array size is: ${this.size()}`);let e=this.tensors[n];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${n} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(n){return n.map(e=>this.read(e))}write(n,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(n<0||!this.dynamicSize&&n>=this.maxSize)throw new Error(`Tried to write to index ${n}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[n]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n},
          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=e.shape),Os(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${n}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${n}, because it has already been written.`);r.tensor=e,Hn(e),r.written=!0,this.tensors[n]=r}writeMany(n,e){if(n.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${n.length} is not the same as tensors size: ${e.length}.`);n.forEach((r,o)=>this.write(r,e[o]))}gather(n,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(n)n=n.slice(0,this.size());else{n=[];for(let o=0;o<this.size();o++)n.push(o)}if(n.length===0)return Hr([],[0].concat(this.elementShape));let r=this.readMany(n);return Os(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Xn(r,0)}concat(n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${n}`);if(this.size()===0)return Hr([],[0].concat(this.elementShape));let e=[];for(let o=0;o<this.size();o++)e.push(o);let r=this.readMany(e);return Os(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),hn(r,0)}scatter(n,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(n.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${e.shape[0]}`);let r=Math.max(...n);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(n,Wr(e,0))}split(n,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let r=0,o=n.map(l=>(r+=l,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&n.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${n.length}), and the TensorArray is not marked as dynamically resizeable`);let i=r===0?0:e.size/r,s=[];te(()=>{e=$(e,[1,r,i]);for(let l=0;l<n.length;++l){let u=[0,l===0?0:o[l-1],0],d=[1,n[l],i];s[l]=$(Tt(e,u,d),this.elementShape)}return s});let a=[];for(let l=0;l<n.length;l++)a[l]=l;this.writeMany(a,s)}};var Yv=class t{get id(){return this.idTensor.id}constructor(n,e,r,o=-1){this.tensors=n,this.elementShape=e,this.elementDtype=r,n?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);Os(e,i.shape,"TensorList shape mismatch: "),Hn(i)}),this.idTensor=$e(0),this.maxNumElements=o,Hn(this.idTensor)}copy(){return new t([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(n){this.tensors.forEach(e=>{(n==null||!n.has(e.id))&&e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(n,e,r=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Os(n,this.elementShape,"TensorList shape mismatch: ");let o=Xv(this.elementShape,this.tensors,n);return te(()=>{let i=this.tensors.map(s=>$(s,o));return Xn(i,0)})}popBack(n,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Xv(this.elementShape,this.tensors,n),o=this.tensors.pop();return o.kept=!1,Os(o.shape,n,"TensorList shape mismatch: "),$(o,r)}pushBack(n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(Os(n.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Hn(n),this.tensors.push(n)}resize(n){if(n<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${n}`);if(this.maxNumElements!==-1&&n>this.maxNumElements)throw new Error(`TensorListResize input size ${n} is greater maxNumElement ${this.maxNumElements}.`);let e=new t([],this.elementShape,this.elementDtype,this.maxNumElements);e.tensors.length=n;for(let r=0;r<Math.min(this.tensors.length,n);++r)e.tensors[r]=this.tensors[r];return e}getItem(n,e,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(n<0||n>this.tensors.length)throw new Error(`Trying to access element ${n} in a list with ${this.tensors.length} elements.`);if(this.tensors[n]==null)throw new Error(`element at index ${n} is null.`);Os(this.tensors[n].shape,e,"TensorList shape mismatch: ");let o=Xv(this.elementShape,this.tensors,e);return $(this.tensors[n],o)}setItem(n,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(n<0||this.maxNumElements!==-1&&n>=this.maxNumElements)throw new Error(`Trying to set element ${n} in a list with max ${this.maxNumElements} elements.`);Os(this.elementShape,e.shape,"TensorList shape mismatch: "),Hn(e),this.tensors[n]!=null&&(this.tensors[n].kept=!1),this.tensors[n]=e}gather(n,e,r){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);Os(this.elementShape,r,"TensorList shape mismatch: "),n=n.slice(0,this.size());let o=Xv(this.elementShape,this.tensors,r);return n.length===0?Hr([],[0].concat(o)):te(()=>{let i=n.map(s=>$(this.tensors[s],o));return Xn(i,0)})}concat(n,e){if(n&&n!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${n}`);Os(this.elementShape,e,"TensorList shape mismatch: ");let r=Xv(this.elementShape,this.tensors,e);return this.size()===0?Hr([],[0].concat(r)):te(()=>{let o=this.tensors.map(i=>$(i,r));return hn(o,0)})}};function ite(t,n,e){let r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==e)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${e}`);let o=t.shape.slice(1);Os(o,n,"TensorList shape mismatch: ");let i=Wr(t);return new Yv(i,n,r)}function ste(t,n,e,r){return new Yv([],t,n,r)}function ate(t,n,e,r){if(n.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${t.shape[0]}`);let o=Math.max(...n);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let i=new Yv([],e,t.dtype,r),s=Wr(t,0);return n.forEach((a,l)=>{i.setItem(a,s[l])}),i}function lte(t,n,e){let r=0,o=n.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);let i=t.shape.slice(1),s=YT(i,e),a=r===0?0:t.size/r,l=te(()=>{let u=[];t=$(t,[1,r,a]);for(let d=0;d<n.length;++d){let h=[0,d===0?0:o[d-1],0],f=[1,n[d],a];u[d]=$(Tt(t,h,f),s)}return t.dispose(),u}),c=new Yv([],e,t.dtype,n.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}var cte=(t,n,e)=>z(null,null,function*(){switch(t.op){case"If":case"StatelessIf":{let r=C("thenBranch",t,n,e),o=C("elseBranch",t,n,e),i=C("cond",t,n,e),s=C("args",t,n,e);return(yield i.data())[0]?e.functionMap[r].executeFunctionAsync(s,e.tensorArrayMap,e.tensorListMap):e.functionMap[o].executeFunctionAsync(s,e.tensorArrayMap,e.tensorListMap)}case"While":case"StatelessWhile":{let r=C("body",t,n,e),o=C("cond",t,n,e),i=C("args",t,n,e),s=yield e.functionMap[o].executeFunctionAsync(i,e.tensorArrayMap,e.tensorListMap),a=i.map(u=>u.id),l=yield s[0].data();s.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){let u=c;c=yield e.functionMap[r].executeFunctionAsync(c,e.tensorArrayMap,e.tensorListMap);let d=c.map(h=>h.id);u.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()});let p=yield e.functionMap[o].executeFunctionAsync(c,e.tensorArrayMap,e.tensorListMap);l=yield p[0].data(),p.forEach(h=>{!h.kept&&a.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()})}return c}case"LoopCond":{let r=C("pred",t,n,e);return[Xl(r)]}case"Switch":{let r=C("pred",t,n,e),o=C("data",t,n,e);return o.kept||(o=Xl(o)),(yield r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=t.inputNames.find(o=>Zr(o,n,e)!==void 0);if(r){let o=Zr(r,n,e);return[Xl(o)]}return}case"Enter":{let r=C("frameName",t,n,e),o=C("tensor",t,n,e);return e.enterFrame(r),[Xl(o)]}case"Exit":{let r=C("tensor",t,n,e);return e.exitFrame(),[Xl(r)]}case"NextIteration":{let r=C("tensor",t,n,e);return e.nextIteration(),[Xl(r)]}case"TensorArrayV3":{let r=C("size",t,n,e),o=C("dtype",t,n,e),i=C("elementShape",t,n,e),s=C("dynamicSize",t,n,e),a=C("clearAfterRead",t,n,e),l=C("identicalElementShapes",t,n,e),c=C("name",t,n,e),u=new QT(c,o,r,i,l,s,a);return e.addTensorArray(u),[u.idTensor,$e(1)]}case"TensorArrayWriteV3":{let r=C("tensorArrayId",t,n,e),o=C("index",t,n,e),i=C("tensor",t,n,e),s=e.getTensorArray(r.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{let r=C("tensorArrayId",t,n,e),o=C("index",t,n,e);return[e.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=C("tensorArrayId",t,n,e),o=C("indices",t,n,e),i=C("dtype",t,n,e);return[e.getTensorArray(r.id).gather(o,i)]}case"TensorArrayScatterV3":{let r=C("tensorArrayId",t,n,e),o=C("indices",t,n,e),i=C("tensor",t,n,e),s=e.getTensorArray(r.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=C("tensorArrayId",t,n,e),o=e.getTensorArray(r.id),i=C("dtype",t,n,e);return[o.concat(i)]}case"TensorArraySplitV3":{let r=C("tensorArrayId",t,n,e),o=C("tensor",t,n,e),i=C("lengths",t,n,e),s=e.getTensorArray(r.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{let r=C("tensorArrayId",t,n,e),o=e.getTensorArray(r.id);return[$e(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=C("tensorArrayId",t,n,e),o=e.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=C("tensorListId",t,n,e),o=C("index",t,n,e),i=C("tensor",t,n,e),s=e.getTensorList(r.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{let r=C("tensorListId",t,n,e),o=C("index",t,n,e),i=C("elementShape",t,n,e),s=C("elementDType",t,n,e);return[e.getTensorList(r.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=C("indices",t,n,e),o=C("tensor",t,n,e),i=C("elementShape",t,n,e),s=C("numElements",t,n,e),a=ate(o,r,i,s);return e.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=C("elementShape",t,n,e),o=C("elementDType",t,n,e),i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=C(i,t,n,e),a=t.op==="TensorListReserve"?-1:s,l=ste(r,o,s,a);return e.addTensorList(l),[l.idTensor]}case"TensorListGather":{let r=C("tensorListId",t,n,e),o=C("indices",t,n,e),i=C("elementShape",t,n,e),s=C("elementDType",t,n,e);return[e.getTensorList(r.id).gather(o,s,i)]}case"TensorListStack":{let r=C("tensorListId",t,n,e),o=C("elementShape",t,n,e),i=C("elementDType",t,n,e),s=C("numElements",t,n,e);return[e.getTensorList(r.id).stack(o,i,s)]}case"TensorListFromTensor":{let r=C("tensor",t,n,e),o=C("elementShape",t,n,e),i=C("elementDType",t,n,e),s=ite(r,o,i);return e.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=C("tensorListId",t,n,e),o=e.getTensorList(r.id),i=C("dtype",t,n,e),s=C("elementShape",t,n,e);return[o.concat(i,s)]}case"TensorListPushBack":{let r=C("tensorListId",t,n,e),o=C("tensor",t,n,e),i=e.getTensorList(r.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{let r=C("tensorListId",t,n,e),o=C("elementShape",t,n,e),i=C("elementDType",t,n,e);return[e.getTensorList(r.id).popBack(o,i)]}case"TensorListSplit":{let r=C("tensor",t,n,e),o=C("elementShape",t,n,e),i=C("lengths",t,n,e),s=lte(r,i,o);return e.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=C("tensorListId",t,n,e),o=e.getTensorList(r.id);return[$e(o.size(),"int32")]}case"TensorListResize":{let r=C("tensorListId",t,n,e),o=C("size",t,n,e),s=e.getTensorList(r.id).resize(o);return e.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}});function ute(t,n,e){let[r,o]=C("fusedOps",t,n,e),i=r==="biasadd",s=!i,a=o==="prelu",l=r==="fusedbatchnorm",c=C("numArgs",t,n,e);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=C("strides",t,n,e),d=G_(t,n,e),p=C("dataFormat",t,n,e).toUpperCase(),h=C("dilations",t,n,e),[f,m]=C("args",t,n,e);s&&(m=f,f=void 0);let g=C("leakyreluAlpha",t,n,e);return{stride:u,pad:d,dataFormat:p,dilations:h,biasArg:f,preluArg:m,activationFunc:o,leakyreluAlpha:g}}var dte=(t,n,e,r=vn)=>{switch(t.op){case"Conv1D":{let o=C("stride",t,n,e),i=C("pad",t,n,e),s=C("dataFormat",t,n,e).toUpperCase(),a=C("dilation",t,n,e);return[r.conv1d(C("x",t,n,e),C("filter",t,n,e),o,i,s,a)]}case"Conv2D":{let o=C("strides",t,n,e),i=G_(t,n,e),s=C("dataFormat",t,n,e).toUpperCase(),a=C("dilations",t,n,e);return[r.conv2d(C("x",t,n,e),C("filter",t,n,e),[o[1],o[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=ute(t,n,e);return[r.fused.conv2d({x:C("x",t,n,e),filter:C("filter",t,n,e),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=ute(t,n,e);return[r.fused.depthwiseConv2d({x:C("x",t,n,e),filter:C("filter",t,n,e),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=C("outputShape",t,n,e),i=C("strides",t,n,e),s=G_(t,n,e);return[r.conv2dTranspose(C("x",t,n,e),C("filter",t,n,e),o,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=C("strides",t,n,e),i=G_(t,n,e),s=C("dilations",t,n,e),a=C("dataFormat",t,n,e).toUpperCase();return[r.depthwiseConv2d(C("input",t,n,e),C("filter",t,n,e),[o[1],o[2]],i,a,[s[1],s[2]])]}case"Conv3D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("dataFormat",t,n,e).toUpperCase(),a=C("dilations",t,n,e);return[r.conv3d(C("x",t,n,e),C("filter",t,n,e),[o[1],o[2],o[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.avgPool(C("x",t,n,e),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPool":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.maxPool(C("x",t,n,e),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPoolWithArgmax":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e),a=C("includeBatchInIndex",t,n,e),{result:l,indexes:c}=r.maxPoolWithArgmax(C("x",t,n,e),[s[1],s[2]],[o[1],o[2]],i,a);return[l,c]}case"AvgPool3D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.avgPool3d(C("x",t,n,e),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"MaxPool3D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("kernelSize",t,n,e);return[r.maxPool3d(C("x",t,n,e),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"Dilation2D":{let o=C("strides",t,n,e),i=C("pad",t,n,e),s=C("dilations",t,n,e),a=o[1],l=o[2],c=s[1],u=s[2];return[r.dilation2d(C("x",t,n,e),C("filter",t,n,e),[a,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var pte=(t,n,e,r=vn)=>{switch(t.op){case"Fill":{let o=C("shape",t,n,e),i=C("dtype",t,n,e),s=C("value",t,n,e);return[r.fill(o,s,i)]}case"LinSpace":{let o=C("start",t,n,e),i=C("stop",t,n,e),s=C("num",t,n,e);return[r.linspace(o,i,s)]}case"Multinomial":{let o=C("logits",t,n,e),i=C("numSamples",t,n,e),s=C("seed",t,n,e);return[r.multinomial(o,i,s)]}case"OneHot":{let o=C("indices",t,n,e),i=C("depth",t,n,e),s=C("onValue",t,n,e),a=C("offValue",t,n,e),l=C("dtype",t,n,e);return[r.oneHot(o,i,s,a,l)]}case"Ones":return[r.ones(C("shape",t,n,e),C("dtype",t,n,e))];case"OnesLike":return[r.onesLike(C("x",t,n,e))];case"RandomStandardNormal":return[r.randomStandardNormal(C("shape",t,n,e),C("dtype",t,n,e),C("seed",t,n,e))];case"RandomUniform":return[r.randomUniform(C("shape",t,n,e),C("minval",t,n,e),C("maxval",t,n,e),C("dtype",t,n,e))];case"RandomUniformInt":return[r.randomUniformInt(C("shape",t,n,e),C("minval",t,n,e),C("maxval",t,n,e),C("seed",t,n,e))];case"Range":{let o=C("start",t,n,e),i=C("stop",t,n,e),s=C("step",t,n,e);return[r.range(o,i,s,C("dtype",t,n,e))]}case"TruncatedNormal":{let o=C("shape",t,n,e),i=C("mean",t,n,e),s=C("stdDev",t,n,e),a=C("seed",t,n,e);return[r.truncatedNormal(o,i,s,C("dtype",t,n,e),a)]}case"Zeros":return[r.zeros(C("shape",t,n,e),C("dtype",t,n,e))];case"ZerosLike":return[r.zerosLike(C("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function IL(t,n,e){let r=C("boxes",t,n,e),o=C("scores",t,n,e),i=C("maxOutputSize",t,n,e),s=C("iouThreshold",t,n,e),a=C("scoreThreshold",t,n,e),l=C("softNmsSigma",t,n,e);return{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:l}}var hte=(i,s,a,l,...c)=>z(null,[i,s,a,l,...c],function*(t,n,e,r,o=vn){switch(t.op){case"NonMaxSuppressionV5":{let{boxes:u,scores:d,maxOutputSize:p,iouThreshold:h,scoreThreshold:f,softNmsSigma:m}=IL(t,n,e),g=yield o.image.nonMaxSuppressionWithScoreAsync(u,d,p,h,f,m);return[g.selectedIndices,g.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:u,scores:d,maxOutputSize:p,iouThreshold:h,scoreThreshold:f}=IL(t,n,e),m=C("padToMaxOutputSize",t,n,e),g=yield o.image.nonMaxSuppressionPaddedAsync(u,d,p,h,f,m);return[g.selectedIndices,g.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:u,scores:d,maxOutputSize:p,iouThreshold:h,scoreThreshold:f}=IL(t,n,e);return[yield o.image.nonMaxSuppressionAsync(u,d,p,h,f)]}case"Where":{let u=o.cast(C("condition",t,n,e),"bool"),d=[yield o.whereAsync(u)];return u.dispose(),d}case"ListDiff":return o.setdiff1dAsync(C("x",t,n,e),C("y",t,n,e));default:throw TypeError(`Node type ${t.op} is not implemented`)}});var fte=(t,n,e,r=vn)=>{switch(t.op){case"LowerBound":{let o=C("sortedSequence",t,n,e),i=C("values",t,n,e);return[r.lowerBound(o,i)]}case"TopKV2":{let o=C("x",t,n,e),i=C("k",t,n,e),s=C("sorted",t,n,e),a=r.topk(o,i,s);return[a.values,a.indices]}case"UpperBound":{let o=C("sortedSequence",t,n,e),i=C("values",t,n,e);return[r.upperBound(o,i)]}case"Unique":{let o=C("x",t,n,e),i=r.unique(o);return[i.values,i.indices]}case"UniqueV2":{let o=C("x",t,n,e),i=C("axis",t,n,e),s=r.unique(o,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var mte=(t,n,e,r=vn)=>{switch(t.op){case"Const":return n[t.name];case"PlaceholderWithDefault":let o=C("default",t,n,e);return[Zr(t.name,n,e)||o];case"Placeholder":return[Zr(t.name,n,e)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=C("x",t,n,e);return[Xl(u)]}case"IdentityN":return C("x",t,n,e).map(u=>Xl(u));case"Snapshot":let i=C("x",t,n,e);return[Xl(i)];case"Shape":return[r.tensor1d(C("x",t,n,e).shape,"int32")];case"ShapeN":return C("x",t,n,e).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(C("x",t,n,e).size,"int32")];case"Rank":return[r.scalar(C("x",t,n,e).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=C("x",t,n,e),a=C("data",t,n,e),l=C("message",t,n,e),c=C("summarize",t,n,e);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var JT=class{get id(){return this.handle.id}constructor(n,e){this.keyDType=n,this.valueDType=e,this.handle=$e(0),this.tensorMap=new Map,Hn(this.handle)}clearAndClose(){this.tensorMap.forEach(n=>n.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return $e(this.size(),"int32")}import(n,e){return z(this,null,function*(){this.checkKeyAndValueTensor(n,e);let r=yield n.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),te(()=>{let o=Wr(e),i=r.length,s=o.length;x.assert(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let a=0;a<i;a++){let l=r[a],c=o[a];Hn(c),this.tensorMap.set(l,c)}return this.handle})})}find(n,e){return z(this,null,function*(){this.checkKeyAndValueTensor(n,e);let r=yield n.data();return te(()=>{let o=[];for(let i=0;i<r.length;i++){let s=r[i],a=this.findWithDefault(s,e);o.push(a)}return Xn(o)})})}findWithDefault(n,e){let r=this.tensorMap.get(n);return r??e}checkKeyAndValueTensor(n,e){if(n.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${n.dtype}`);if(e.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${e.dtype}`)}};var gte=(t,n,e,r)=>z(null,null,function*(){switch(t.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(t.name);if(o!=null)return[o];{let i=C("keyDType",t,n,e),s=C("valueDType",t,n,e),a=new JT(i,s);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=C("tableHandle",t,n,e,r),i=C("keys",t,n,e),s=C("values",t,n,e);return[yield r.getHashTableById(o.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let o=C("tableHandle",t,n,e,r),i=C("keys",t,n,e),s=C("defaultValue",t,n,e);return[yield r.getHashTableById(o.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=C("tableHandle",t,n,e,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}});var vte=(t,n,e,r=vn)=>{switch(t.op){case"ResizeBilinear":{let o=C("images",t,n,e),i=C("size",t,n,e),s=C("alignCorners",t,n,e),a=C("halfPixelCenters",t,n,e);return[r.image.resizeBilinear(o,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{let o=C("images",t,n,e),i=C("size",t,n,e),s=C("alignCorners",t,n,e),a=C("halfPixelCenters",t,n,e);return[r.image.resizeNearestNeighbor(o,[i[0],i[1]],s,a)]}case"CropAndResize":{let o=C("image",t,n,e),i=C("boxes",t,n,e),s=C("boxInd",t,n,e),a=C("cropSize",t,n,e),l=C("method",t,n,e),c=C("extrapolationValue",t,n,e);return[r.image.cropAndResize(o,i,s,a,l,c)]}case"ImageProjectiveTransformV3":{let o=C("images",t,n,e),i=C("transforms",t,n,e),s=C("outputShape",t,n,e),a=C("fillValue",t,n,e),l=C("interpolation",t,n,e),c=C("fillMode",t,n,e);return[r.image.transform(o,i,l.toLowerCase(),c.toLowerCase(),a,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var wte=(t,n,e,r=vn)=>{switch(t.op){case"Equal":return[r.equal(C("a",t,n,e),C("b",t,n,e))];case"NotEqual":return[r.notEqual(C("a",t,n,e),C("b",t,n,e))];case"Greater":return[r.greater(C("a",t,n,e),C("b",t,n,e))];case"GreaterEqual":return[r.greaterEqual(C("a",t,n,e),C("b",t,n,e))];case"Less":return[r.less(C("a",t,n,e),C("b",t,n,e))];case"LessEqual":return[r.lessEqual(C("a",t,n,e),C("b",t,n,e))];case"LogicalAnd":return[r.logicalAnd(C("a",t,n,e),C("b",t,n,e))];case"LogicalNot":return[r.logicalNot(C("a",t,n,e))];case"LogicalOr":return[r.logicalOr(C("a",t,n,e),C("b",t,n,e))];case"Select":case"SelectV2":return[r.where(C("condition",t,n,e),C("a",t,n,e),C("b",t,n,e))];case"BitwiseAnd":return[r.bitwiseAnd(C("a",t,n,e),C("b",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var yte=(t,n,e,r=vn)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(C("a",t,n,e),C("b",t,n,e),C("transposeA",t,n,e),C("transposeB",t,n,e))];case"Einsum":return[r.einsum(C("equation",t,n,e),...C("tensors",t,n,e))];case"Transpose":return[r.transpose(C("x",t,n,e),C("perm",t,n,e))];case"_FusedMatMul":let[o,i]=C("fusedOps",t,n,e),s=o==="biasadd",a=i==="prelu",l=C("numArgs",t,n,e),c=C("leakyreluAlpha",t,n,e);if(s){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,d]=C("args",t,n,e);return[r.fused.matMul({a:C("a",t,n,e),b:C("b",t,n,e),transposeA:C("transposeA",t,n,e),transposeB:C("transposeB",t,n,e),bias:u,activation:i,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(C("a",t,n,e),C("numLower",t,n,e),C("numUpper",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var xte=(t,n,e,r=vn)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(C("x",t,n,e),C("axis",t,n,e),C("keepDims",t,n,e))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(C("x",t,n,e),C("mean",t,n,e),C("variance",t,n,e),C("offset",t,n,e),C("scale",t,n,e),C("epsilon",t,n,e))];case"FusedBatchNormV3":return[r.batchNorm(C("x",t,n,e),C("mean",t,n,e),C("variance",t,n,e),C("offset",t,n,e),C("scale",t,n,e),C("epsilon",t,n,e))];case"LRN":return[r.localResponseNormalization(C("x",t,n,e),C("radius",t,n,e),C("bias",t,n,e),C("alpha",t,n,e),C("beta",t,n,e))];case"Softmax":return[r.softmax(C("x",t,n,e))];case"LogSoftmax":return[r.logSoftmax(C("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var kte=(t,n,e,r=vn)=>{switch(t.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:i}=r.raggedGather(C("paramsNestedSplits",t,n,e),C("paramsDenseValues",t,n,e),C("indices",t,n,e),C("outputRaggedRank",t,n,e));return o.concat(i)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:i}=r.raggedRange(C("starts",t,n,e),C("limits",t,n,e),C("splits",t,n,e));return[o,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(C("shape",t,n,e),C("values",t,n,e),C("defaultValue",t,n,e),C("rowPartitionTensors",t,n,e),C("rowPartitionTypes",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var _te=(t,n,e,r=vn)=>{switch(t.op){case"Max":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.max(C("x",t,n,e),a,l)]}case"Mean":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.mean(C("x",t,n,e),a,l)]}case"Min":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.min(C("x",t,n,e),a,l)]}case"Sum":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.sum(C("x",t,n,e),a,l)]}case"All":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.all(C("x",t,n,e),a,l)]}case"Any":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.any(C("x",t,n,e),a,l)]}case"ArgMax":{let a=C("axis",t,n,e);return[r.argMax(C("x",t,n,e),a)]}case"ArgMin":{let a=C("axis",t,n,e);return[r.argMin(C("x",t,n,e),a)]}case"Prod":{let a=C("axis",t,n,e),l=C("keepDims",t,n,e);return[r.prod(C("x",t,n,e),a,l)]}case"Cumprod":{let a=C("axis",t,n,e),l=C("exclusive",t,n,e),c=C("reverse",t,n,e);return[r.cumprod(C("x",t,n,e),a,l,c)]}case"Cumsum":{let a=C("axis",t,n,e),l=C("exclusive",t,n,e),c=C("reverse",t,n,e);return[r.cumsum(C("x",t,n,e),a,l,c)]}case"Bincount":let o=C("x",t,n,e),i=C("weights",t,n,e),s=C("size",t,n,e);return[r.bincount(o,i,s)];case"DenseBincount":{let a=C("x",t,n,e),l=C("weights",t,n,e),c=C("size",t,n,e),u=C("binaryOutput",t,n,e);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var bte=(t,n,e,r=vn)=>{switch(t.op){case"ConcatV2":case"Concat":{let o=C("n",t,n,e),i=C("axis",t,n,e),s=C("tensors",t,n,e);return s=s.slice(0,o),[r.concat(s,i)]}case"Gather":{let o=C("x",t,n,e),i=C("indices",t,n,e);return[r.gather(o,r.cast(i,"int32"),0)]}case"GatherV2":{let o=C("axis",t,n,e),i=C("batchDims",t,n,e),s=C("x",t,n,e),a=C("indices",t,n,e);return[r.gather(s,r.cast(a,"int32"),o,i)]}case"Reverse":{let o=C("dims",t,n,e),i=[];for(let a=0;a<o.length;a++)o[a]&&i.push(a);let s=C("x",t,n,e);return[r.reverse(s,i)]}case"ReverseV2":{let o=C("axis",t,n,e),i=C("x",t,n,e);return[r.reverse(i,o)]}case"Slice":{let o=C("begin",t,n,e),i=C("size",t,n,e);return[r.slice(C("x",t,n,e),o,i)]}case"StridedSlice":{let o=C("begin",t,n,e),i=C("end",t,n,e),s=C("strides",t,n,e),a=C("beginMask",t,n,e),l=C("endMask",t,n,e),c=C("ellipsisMask",t,n,e),u=C("newAxisMask",t,n,e),d=C("shrinkAxisMask",t,n,e),p=C("x",t,n,e);return[r.stridedSlice(p,o,i,s,a,l,c,u,d)]}case"Pack":return te(()=>{let o=C("axis",t,n,e),i=C("tensors",t,n,e),s=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(c=>{let u=x.arraysEqual(c.shape,s);if(!u&&!x.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,s)});return[r.stack(l,o)]});case"Unpack":{let o=C("axis",t,n,e),i=C("tensor",t,n,e);return r.unstack(i,o)}case"Tile":{let o=C("reps",t,n,e);return[r.tile(C("x",t,n,e),o)]}case"Split":case"SplitV":{let o=C("axis",t,n,e),i=C("numOrSizeSplits",t,n,e),s=C("x",t,n,e);return r.split(s,i,o)}case"ScatterNd":{let o=C("indices",t,n,e),i=C("values",t,n,e),s=C("shape",t,n,e);return[r.scatterND(o,i,s)]}case"GatherNd":{let o=C("x",t,n,e),i=C("indices",t,n,e);return[r.gatherND(o,i)]}case"SparseToDense":{let o=C("sparseIndices",t,n,e),i=C("outputShape",t,n,e),s=C("sparseValues",t,n,e),a=C("defaultValue",t,n,e);return[r.sparseToDense(o,s,i,s.dtype===a.dtype?a:r.cast(a,s.dtype))]}case"TensorScatterUpdate":{let o=C("indices",t,n,e),i=C("values",t,n,e),s=C("tensor",t,n,e);return[r.tensorScatterUpdate(s,o,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Cte=(t,n,e,r=vn)=>{switch(t.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:i,emptyRowIndicator:s,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(C("indices",t,n,e),C("values",t,n,e),C("denseShape",t,n,e),C("defaultValue",t,n,e));return[o,i,s,a]}case"SparseReshape":{let{outputIndices:o,outputShape:i}=r.sparse.sparseReshape(C("inputIndices",t,n,e),C("inputShape",t,n,e),C("newShape",t,n,e));return[o,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(C("data",t,n,e),C("indices",t,n,e),C("segmentIds",t,n,e))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(C("data",t,n,e),C("indices",t,n,e),C("segmentIds",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Mte=(t,n,e,r=vn)=>{switch(t.op){case"FFT":return[r.fft(C("x",t,n,e))];case"IFFT":return[r.ifft(C("x",t,n,e))];case"RFFT":return[r.rfft(C("x",t,n,e))];case"IRFFT":return[r.irfft(C("x",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Ste=(t,n,e,r=vn)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(C("input",t,n,e),C("pattern",t,n,e),C("rewrite",t,n,e),C("replaceGlobal",t,n,e))];case"StringNGrams":{let{nGrams:o,nGramsSplits:i}=r.string.stringNGrams(C("data",t,n,e),C("dataSplits",t,n,e),C("separator",t,n,e),C("nGramWidths",t,n,e),C("leftPad",t,n,e),C("rightPad",t,n,e),C("padWidth",t,n,e),C("preserveShortSequences",t,n,e));return[o,i]}case"StringSplit":{let{indices:o,values:i,shape:s}=r.string.stringSplit(C("input",t,n,e),C("delimiter",t,n,e),C("skipEmpty",t,n,e));return[o,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(C("input",t,n,e),C("numBuckets",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Tte=(t,n,e,r=vn)=>{switch(t.op){case"Cast":return[r.cast(C("x",t,n,e),C("dtype",t,n,e))];case"ExpandDims":{let o=C("axis",t,n,e);return[r.expandDims(C("x",t,n,e),o)]}case"Squeeze":{let o=C("axis",t,n,e);return[r.squeeze(C("x",t,n,e),o)]}case"Reshape":return[r.reshape(C("x",t,n,e),C("shape",t,n,e))];case"EnsureShape":return[r.ensureShape(C("x",t,n,e),C("shape",t,n,e))];case"MirrorPad":return[r.mirrorPad(C("x",t,n,e),C("padding",t,n,e),C("mode",t,n,e))];case"PadV2":case"Pad":return[r.pad(C("x",t,n,e),C("padding",t,n,e),C("constantValue",t,n,e))];case"SpaceToBatchND":{let o=C("blockShape",t,n,e),i=C("paddings",t,n,e);return[r.spaceToBatchND(C("x",t,n,e),o,i)]}case"BatchToSpaceND":{let o=C("blockShape",t,n,e),i=C("crops",t,n,e);return[r.batchToSpaceND(C("x",t,n,e),o,i)]}case"DepthToSpace":{let o=C("blockSize",t,n,e),i=C("dataFormat",t,n,e).toUpperCase();return[r.depthToSpace(C("x",t,n,e),o,i)]}case"BroadcastTo":return[r.broadcastTo(C("x",t,n,e),C("shape",t,n,e))];case"BroadcastArgs":return[r.broadcastArgs(C("s0",t,n,e),C("s1",t,n,e))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function DL(t,n,e,r,o=te){let i=((s,a,l)=>{switch(s.category){case"arithmetic":return o(()=>nte(s,a,l));case"basic_math":return o(()=>rte(s,a,l));case"control":return cte(s,a,l);case"convolution":return o(()=>dte(s,a,l));case"creation":return o(()=>pte(s,a,l));case"dynamic":return hte(s,a,l);case"evaluation":return o(()=>fte(s,a,l));case"image":return o(()=>vte(s,a,l));case"graph":return o(()=>mte(s,a,l));case"logical":return o(()=>wte(s,a,l));case"matrices":return o(()=>yte(s,a,l));case"normalization":return o(()=>xte(s,a,l));case"ragged":return o(()=>kte(s,a,l));case"reduction":return o(()=>_te(s,a,l));case"slice_join":return o(()=>bte(s,a,l));case"sparse":return o(()=>Cte(s,a,l));case"spectral":return o(()=>Mte(s,a,l));case"string":return o(()=>Ste(s,a,l));case"transformation":return o(()=>Tte(s,a,l));case"hash_table":return gte(s,a,l,r);case"custom":let c=LT(s.op);if(c&&c.customExecutor)return c.customExecutor(new XT(s,a,l));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,n,e);return x.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var q_=class{constructor(n={},e={},r={},o={},i){this.weightMap=n,this.tensorArrayMap=e,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(n,e){return{id:n,frameName:e,iterationId:0}}set currentContext(n){this.contexts!==n&&(this.contexts=n,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let n=[];for(let e=0;e<this.contexts.length-1;e++){let r=this.contexts.slice(0,this.contexts.length-e);n.push(this.contextIdforContexts(r))}n.push(""),this._currentContextIds=n}contextIdforContexts(n){return n?n.map(e=>e.id===0&&e.iterationId===0?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(n){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,n)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let n=Object.assign({},this.contexts[this.contexts.length-1]);n.iterationId+=1,n.id=this.lastId,this.contexts.splice(-1,1,n),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(n){return this.weightMap[n]}addTensorArray(n){this.tensorArrayMap[n.id]=n}getTensorArray(n){return this.tensorArrayMap[n]}addTensorList(n){this.tensorListMap[n.id]=n}getTensorList(n){return this.tensorListMap[n]}dispose(n){for(let e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(n);for(let e in this.tensorListMap)this.tensorListMap[e].clearAndClose(n)}};function NL(t,n,e,r){let o=new Set,i=[],s=null,a=null,l=new Set,c=new Set(Object.keys(t).map(p=>Gi(p)[0]));r=r||[];let u=new Set(r.map(p=>Gi(p.name)[0])),d=[...n];for(;d.length>0;){let p=d.pop();if((Af(p)||cAe(p)||uAe(p))&&s==null&&(s=p,a=s.children.map(h=>h.name).filter(h=>o.has(h))),o.add(p.name),e[p.name]==null&&!c.has(p.name)&&!u.has(p.name)){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),d.push(h))})}}return{inputs:t,outputs:n,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}function Ete(t,n){let{usedNodes:e,inputs:r}=n,o=Object.keys(r).map(g=>Gi(g)[0]).map(g=>t.nodes[g]),i=t.initNodes||[],s=g=>e.has(typeof g=="string"?g:g.name);function a(g){return[...new Map(g.map(v=>[v.name,v])).values()]}let l=a([...o,...t.weights,...i]).filter(s),c=a([...l,...Object.values(t.nodes)]).filter(s),u=new Map(c.map(g=>[g.name,g])),d={};for(let g of c){d[g.name]=d[g.name]||0;for(let v of g.children)s(v)||(d[v.name]=Number.POSITIVE_INFINITY),d[v.name]=(d[v.name]||0)+1}let p=Object.entries(d).filter(([,g])=>g===0).map(([g])=>g),h=[...p];for(;p.length>0;){let g=p.pop(),v=u.get(g);for(let w of v.children.filter(s))--d[w.name]===0&&(h.push(w.name),p.push(w.name))}let f=h.map(g=>u.get(g)),m=oAe(f,l);return iAe(m,l),m}function oAe(t,n){let e=new Map(t.map(s=>[s.name,s])),r=n.map(s=>s.name),o=new Set(r);for(;r.length>0;){let s=r.pop(),a=e.get(s);for(let l of a.children)!e.has(l.name)||o.has(l.name)||(o.add(l.name),r.push(l.name))}return t.filter(s=>o.has(s.name))}var Qv=class extends Error{constructor(n){super(`NodesExecutionOrderError: ${n}`)}};function iAe(t,n){let e=new Map(t.map((a,l)=>[a.name,l])),r=new Set(n.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),s=a=>i.has(typeof a=="string"?a:a.name);for(let a of t){for(let l of a.children.filter(s)){if(!e.has(l.name))throw new Qv(`Child ${l.name} of node ${a.name} is unreachable.`);if(e.get(a.name)>e.get(l.name))throw new Qv(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!o(a))for(let l of a.inputs){if(!e.has(l.name))throw new Qv(`Input ${l.name} of node ${a.name} is unreachable.`);if(e.get(l.name)>e.get(a.name))throw new Qv(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function Ite(t){let n=new Map(t.map((a,l)=>[a.name,l])),e=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>Af(a)?e:l),o=a=>{let l=r[n.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(o).reduce((c,u)=>Math.max(c,u),r[l])),s=new Map;for(let a=0;a<t.length;++a){let l=i[a];if(l===e)continue;let c=t[a],u=t[l];s.has(u.name)||s.set(u.name,[]),s.get(u.name).push(c)}return s}var sAe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),aAe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),lAe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Af(t){return sAe.has(t.op)}function cAe(t){return aAe.has(t.op)}function uAe(t){return lAe.has(t.op)}var K_=class t{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(n){let e=Object.keys(n).map(r=>n[r].map(o=>o.id));this._weightIds=[].concat(...e),this._weightMap=n}set resourceManager(n){this._resourceManager=n}get inputs(){return this._inputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(n=>n.signatureKey||n.name)}get outputNodes(){return this._outputs.map(n=>{let e=n.signatureKey||n.name;return n.defaultOutput?`${e}:${n.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((n,e)=>(n[e]=this._functions[e].signature,n),{})}constructor(n,e){this.graph=n,this.parent=e,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=n.outputs,this._inputs=n.inputs,this._initNodes=n.initNodes,this._signature=n.signature,this._functions=n.functions,n.functions!=null&&Object.keys(n.functions).forEach(r=>{this._functionExecutorMap[r]=new t(n.functions[r],this)})}getCompilationKey(n,e){let r=n.map(i=>i.name).sort(),o=e.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(n,e){let r=NL(n,e,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(o.length>0){let c=e.map(d=>d.name),u=Object.keys(n);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${o}]`)}let a=Ete(this.graph,r),l=Ite(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(n){if(n==null)return null;let e=n.clone();return Hn(e),e}cloneTensorList(n){return n?n.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(n){return Object.fromEntries(Object.entries(n).map(([e,r])=>[e,this.cloneTensorList(r)]))}execute(n,e){this.disposeIntermediateTensors(),n=this.mapInputs(n);let r=Object.keys(n).sort();this.checkInputs(n),this.checkInputShapeAndType(n),e=this.mapOutputs(e),this.checkOutputs(e);let o=r.map(p=>this.graph.nodes[Gi(p)[0]]),i=e.map(p=>Gi(p)[0]),s=new Set(i),a=i.map(p=>this.graph.nodes[p]);a.length===0&&(a=this._outputs);let l=this.getCompilationKey(o,a),c=this.compiledMap.get(l);c==null&&(c=this.compile(n,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=Y().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let u={},d={};return te(()=>{let p=new q_(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(n).forEach(v=>{let[w,y]=Gi(v,p),k=[];k[y]=n[v],h[w]=k,this.keepIntermediateTensors&&(this.clonedTensorsMap[w]=this.cloneTensorList(k))});let f=this.getFrozenTensorIds(h),{orderedNodes:m,nodeLiveUntilMap:g}=c;for(let v of m){if(h[v.name])continue;let w=DL(v,h,p,this._resourceManager);if(x.isPromise(w))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);h[v.name]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[v.name]=this.cloneTensorList(w)),this.checkTensorForDisposalWithNodeLiveUntilInfo(v,h,p,f,s,g.get(v.name))}return this.parent==null&&p.dispose(f),e.map(v=>Zr(v,h,p))})}getFrozenTensorIds(n){let e=[].concat.apply([],Object.keys(n).map(r=>n[r]).map(r=>r.map(o=>o.id)));return new Set(e)}checkTensorForDisposal(n,e,r,o,i,s,a){if(!(Af(e)||s.has(n))){for(let l of r[n])l!=null&&(a[l.id]=(a[l.id]||0)+e.children.length);for(let l of e.inputs){if(Af(l))continue;let c=lL(l.name,r,o);if(c!=null)for(let u of c){if(!u||u.kept||i.has(u.id))continue;let d=a[u.id];d===1?(u.dispose(),delete a[u.id]):d!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(n,e,r,o,i,s){function a(l){return Af(l)||i.has(l.name)}if(!(Af(n)||s==null))for(let l of s){if(a(l))continue;let c=lL(l.name,e,r);for(let u of c)!u||u.kept||o.has(u.id)||u.dispose()}}executeAsync(n,e){return z(this,null,function*(){return this._executeAsync(n,e)})}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(n=>{for(let e of n)e&&!e.isDisposed&&e.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(s,a){return z(this,arguments,function*(n,e,r=!1,o={},i={}){this.disposeIntermediateTensors(),r||(n=this.mapInputs(n),this.checkInputs(n),this.checkInputShapeAndType(n),e=this.mapOutputs(e),this.checkOutputs(e));try{this.keepIntermediateTensors=Y().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}let l=new q_(this.weightMap,o,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let c=yield this.executeWithControlFlow(n,l,e,r),u=e.map(f=>Zr(f,c,l)),d=u.map(f=>f.id),p=Object.keys(n).map(f=>n[f].id),h=new Set([...d,...p,...this.weightIds]);return Object.values(c).forEach(f=>{f.forEach(m=>{m&&!m.isDisposed&&!h.has(m.id)&&m.dispose()})}),this.parent==null&&l.dispose(h),u})}executeFunctionAsync(n,e,r){return z(this,null,function*(){let o=n.reduce((i,s,a)=>(i[this.inputs[a].name]=s,i),{});return this._executeAsync(o,this.outputNodes,!0,e,r)})}executeWithControlFlow(n,e,r,o){return z(this,null,function*(){let i=Object.keys(n),s=i.map(k=>this.graph.nodes[Gi(k)[0]]),a=r.map(k=>Gi(k)[0]),l=new Set(a),c=a.map(k=>this.graph.nodes[k]);c.length===0&&(c=this._outputs);let{usedNodes:u,missingInputs:d,dynamicNode:p,syncInputs:h}=NL(n,c,this.weightMap,this._initNodes),f=[...s,...this.graph.weights,...this._initNodes||[]].map(k=>({node:k,contexts:e.currentContext})),m=Object.assign({},this.weightMap);Object.keys(n).forEach(k=>{let[_,S]=Gi(k),E=[];E[S]=n[k],m[_]=E});let g={},v=this.getFrozenTensorIds(m),w={};for(;f.length>0;){let k=this.processStack(s,f,e,m,w,v,l,g,u);yield Promise.all(k)}p==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let y=c.filter(k=>!Af(k)&&!Zr(k.name,m,e)).map(k=>k.name);if(y.length>0){let k="";throw p!=null&&(k=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${y}] from the provided inputs [${i}]. Consider providing the following inputs: [${d}]. ${k}`)}return m})}processStack(n,e,r,o,i,s,a,l,c){let u=[];for(;e.length>0;){let d=e.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&C("isConstant",d.node,o,r)&&([p]=Zl(d.node.name,r)),o[d.node.name]==null){let h=DL(d.node,o,r,this._resourceManager);p||([p]=Zl(d.node.name,r));let f=r.currentContext;x.isPromise(h)?u.push(h.then(m=>(o[p]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(m)),r.currentContext=f,this.checkTensorForDisposal(p,d.node,o,r,s,a,l),this.processChildNodes(d.node,e,r,o,i,c),m))):(o[p]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(h)),this.checkTensorForDisposal(p,d.node,o,r,s,a,l),this.processChildNodes(d.node,e,r,o,i,c))}else this.processChildNodes(d.node,e,r,o,i,c)}return u}processChildNodes(n,e,r,o,i,s){n.children.forEach(a=>{let[l]=Zl(a.name,r);i[l]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!Zr(c,o,r))&&(i[l]=!0,e.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!Zr(c,o,r))&&(i[l]=!0,e.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(n=>this.weightMap[n].forEach(e=>e.dispose()))}checkInputShapeAndType(n){Object.keys(n).forEach(e=>{let r=n[e],[o]=Gi(e),i=this.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){let s=i.attrParams.shape.value,a=s.length===r.shape.length&&r.shape.every((l,c)=>s[c]===-1||s[c]===l);x.assert(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&x.assert(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(n){var e,r;let o={};for(let i in n){let s=(r=(e=this._signature)===null||e===void 0?void 0:e.inputs)===null||r===void 0?void 0:r[i];s!=null?o[s.name]=n[i]:o[i]=n[i]}return o}checkInputs(n){let e=Object.keys(n).filter(r=>{let[o]=Gi(r);return this.graph.nodes[o]==null});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(n){return n.map(e=>{var r,o;let i=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[e];return i!=null?i.name:e},{})}checkOutputs(n){n.forEach(e=>{let[r]=Gi(e);if(!this.graph.nodes[r])throw new Error(`The output '${e}' is not found in the graph`)})}};var eE=class{constructor(n={},e={}){this.hashTableNameToHandle=n,this.hashTableMap=e}addHashTable(n,e){this.hashTableNameToHandle[n]=e.handle,this.hashTableMap[e.id]=e}getHashTableHandleByName(n){return this.hashTableNameToHandle[n]}getHashTableById(n){return this.hashTableMap[n]}dispose(){for(let n in this.hashTableMap)this.hashTableMap[n].clearAndClose(),delete this.hashTableMap[n];for(let n in this.hashTableNameToHandle)this.hashTableNameToHandle[n].dispose(),delete this.hashTableNameToHandle[n]}};var dAe="?tfjs-format=file",pAe="model.json",Jv=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(n,e={},r=qr){this.modelUrl=n,this.loadOptions=e,this.version="n/a",this.io=r,e==null&&(this.loadOptions={}),this.resourceManager=new eE}findIOHandler(){let n=this.modelUrl;if(n.load!=null)this.handler=n;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(n,this.loadOptions);else{let e=this.io.getLoadHandlers(n,this.loadOptions);if(e.length===0)e.push(this.io.browserHTTPRequest(n,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[n]}'`);this.handler=e[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let n=this.handler.load();return x.isPromise(n)?n.then(e=>e.getWeightStream==null?this.loadSync(e):this.loadStreaming(e)):this.loadSync(n)}loadSync(n){let e=this.io.decodeWeights(n.weightData,n.weightSpecs);return this.loadWithWeightMap(n,e)}loadStreaming(n){return z(this,null,function*(){if(n.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let e=yield sS(n.getWeightStream(),n.weightSpecs);return this.loadWithWeightMap(n,e)})}loadWithWeightMap(n,e){this.artifacts=n;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let i=this.artifacts.userDefinedMetadata;i.signature!=null&&(o=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new K_(W_.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(e),this.executor.resourceManager=this.resourceManager,n.modelInitializer!=null&&n.modelInitializer.node!=null){let i=W_.Instance.transformGraph(n.modelInitializer);this.initializer=new K_(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=n.initializerSignature}return!0}save(n,e){return z(this,null,function*(){if(typeof n=="string"){let r=this.io.getSaveHandlers(n);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${n}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${n}'`);n=r[0]}if(n.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return n.save(this.artifacts)})}addStructuredOutputNames(n){if(this.structuredOutputKeys){let e=n instanceof Rt?[n]:n,r={};return e.forEach((o,i)=>r[this.structuredOutputKeys[i]]=o),r}return n}predict(n,e){let r=this.execute(n,this.outputNodes);return this.addStructuredOutputNames(r)}predictAsync(n,e){return z(this,null,function*(){let r=yield this.executeAsync(n,this.outputNodes);return this.addStructuredOutputNames(r)})}normalizeInputs(n){var e;if(!(n instanceof Rt)&&!Array.isArray(n)){let i=(e=this.signature)===null||e===void 0?void 0:e.inputs;if(i!=null)for(let s in i){let a=i[s];a.resourceId!=null&&(n[s]=this.resourceIdToCapturedInput[a.resourceId])}return n}n=Array.isArray(n)?n:[n];let r=Object.keys(this.resourceIdToCapturedInput).length;if(n.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${n.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((i,s)=>{var a,l,c;let u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[s])===null||c===void 0?void 0:c.resourceId;return u!=null?i[s]=this.resourceIdToCapturedInput[u]:i[s]=n[o++],i},{})}normalizeOutputs(n){return n=n||this.outputNodes,Array.isArray(n)?n:[n]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){return z(this,null,function*(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))})}setResourceIdToCapturedInput(n){if(this.resourceIdToCapturedInput={},this.initializerSignature){let e=this.initializerSignature.outputs,r=Object.keys(e);for(let o=0;o<r.length;o++){let i=r[o],s=e[i];this.resourceIdToCapturedInput[s.resourceId]=n[o]}}}execute(n,e){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),n=this.normalizeInputs(n),e=this.normalizeOutputs(e);let r=this.executor.execute(n,e);return r.length>1?r:r[0]}executeAsync(n,e){return z(this,null,function*(){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(yield this.executeInitializerGraphAsync()),n=this.normalizeInputs(n),e=this.normalizeOutputs(e);let r=yield this.executor.executeAsync(n,e);return r.length>1?r:r[0]})}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(n){return Object.keys(n).reduce((e,r)=>(e[r]=[n[r]],e),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&ht(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};function Dte(r){return z(this,arguments,function*(t,n={},e=qr){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");n==null&&(n={}),n.fromTFHub&&typeof t=="string"&&(t=hAe(t));let o=new Jv(t,n,e);return yield o.load(),o})}function Nte(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let n;if(t instanceof Array){let[r,o]=t;if(!r)throw new Error("modelJSON must be the first element of the array");if(!o||!(o instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");let i=qr.getWeightSpecs(r.weightsManifest),s=qr.getModelArtifactsForJSONSync(r,i,o);n=qr.fromMemorySync(s)}else if("load"in t)n=t;else if("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t)n=qr.fromMemorySync(t);else throw new Error("Unknown model format");let e=new Jv(n);return e.load(),e}function hAe(t){return t.endsWith("/")||(t=t+"/"),`${t}${pAe}${dAe}`}var tE="4.22.0";var u7={};Qt(u7,{CSVDataset:()=>ow,Dataset:()=>Ff,FileDataSource:()=>aw,TextLineDataset:()=>rw,URLDataSource:()=>lw,array:()=>une,csv:()=>gne,func:()=>vne,generator:()=>wne,microphone:()=>xne,version_data:()=>vE,webcam:()=>yne,zip:()=>dne});var cne=O2(a_());var sne=O2(a_());function ene(t,n){return sE(t,n)}function sE(t,n,e=new Map,r=new Set){if(t==null)return null;if(typeof Blob=="function"&&t instanceof Blob)return t.slice();if(r.has(t))throw new Error("Circular references are not supported.");if(e.has(t))return e.get(t);let o=n(t);if(o.recurse&&o.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(o.recurse)if(Rf(t)){let i=Array.isArray(t)?[]:{};r.add(t);for(let s in t){let a=t[s],l=sE(a,n,e,r);i[s]=l}return r.delete(t),t.__proto__&&(i.__proto__=t.__proto__),i}else throw new Error(`Can't recurse into non-iterable type: ${t}`);else return e.set(t,o.value),o.value}function tne(t,n=GL){return nne(t,n)}function nne(t,n,e=new Set){let r=t[0];if(e.has(r))throw new Error("Circular references are not supported.");let o=n(t);if(o.recurse&&o.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse)if(Rf(r)){let i=Array.isArray(r)?[]:{};e.add(r);for(let s in r){let a=t.map(c=>c[s]),l=nne(a,n,e);i[s]=l}return e.delete(r),i}else throw new Error(`Can't recurse into non-iterable type: ${r}`);else return o.value}function GL(t){return t===null?null:Rf(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function aE(t,n){return z(this,null,function*(){let e=new Map;sE(t,n,e);for(let o of Array.from(e.keys())){let i=e.get(o);if(x.isPromise(i)){let s=yield i;e.set(o,s)}}return sE(t,n,e)})}function Rf(t){let n=!1;if(Y().get("IS_BROWSER"))n=t instanceof TextDecoder;else{let{StringDecoder:e}=UL();n=t instanceof e}return t!=null&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||typeof t=="object"&&!(t instanceof Rt)&&!(t instanceof Promise)&&!n)}function rne(t){return t==null||rRe(t)||Array.isArray(t)||typeof t=="object"&&t instanceof Rt||x.isTypedArray(t)}function rRe(t){return t===null||typeof t!="object"&&typeof t!="function"}function one(t){return ene(t,oRe)}function oRe(t){return t instanceof Rt?{value:t.clone(),recurse:!1}:Rf(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}var nw=class{constructor(n){if(this.capacity=n,this.begin=0,this.end=0,n==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(n<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(n),this.doubledCapacity=2*n}wrap(n){for(;n<0;)n+=this.doubledCapacity;return n%this.doubledCapacity}get(n){if(n<0)throw new RangeError("Can't get item at a negative index.");return this.data[n%this.capacity]}set(n,e){if(n<0)throw new RangeError("Can't set item at a negative index.");this.data[n%this.capacity]=e}length(){let n=this.end-this.begin;return n<0&&(n=this.doubledCapacity+n),n}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(n){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,n),this.end=this.wrap(this.end+1)}pushAll(n){for(let e of n)this.push(e)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let n=this.get(this.end);return this.set(this.end,void 0),n}unshift(n){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,n)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let n=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),n}shuffleExcise(n){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.wrap(this.begin+n),r=this.get(e);return this.set(e,this.pop()),r}};var ine=(()=>{class t extends nw{constructor(){super(t.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=this.capacity*2,r=new Array(e),o=this.length();for(let i=0;i<o;i++)r[i]=this.get(this.wrap(this.begin+i));this.data=r,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=o}}return t.INITIAL_CAPACITY=32,t})();function o7(t){return new WL(t)}function X_(t){return new qL(t)}function ane(t,n){return new cE(t,n)}function lne(t,n=Of.FAIL){return new n7(t,n)}var Nr=class{toArray(){return z(this,null,function*(){let n=[],e=yield this.next();for(;!e.done;)n.push(e.value),e=yield this.next();return n})}toArrayForTest(){return z(this,null,function*(){let n=this.prefetch(100),e=[],r=yield n.next();for(;!r.done;)e.push(r.value),r=yield n.next();return e})}resolveFully(){return z(this,null,function*(){let n=yield this.next();for(;!n.done;)n=yield this.next()})}resolveWhile(n){return z(this,null,function*(){let e=yield this.next(),r=n(e.value);for(;!e.done&&r;)e=yield this.next(),r=n(e.value)})}handleErrors(n){return new e7(this,n)}filter(n){return new QL(this,n)}map(n){return new JL(this,n)}mapAsync(n){return new lE(this,n)}serialMapAsync(n){return new lE(this,n).serial()}flatmap(n){return new t7(this,n)}forEachAsync(n){return z(this,null,function*(){return this.map(n).resolveFully()})}serialForEach(n){return z(this,null,function*(){return this.serialMapAsync(n).resolveWhile(e=>e===!0)})}rowMajorBatch(n,e=!0){return new YL(this,n,e)}columnMajorBatch(n,e=!0,r=GL){return this.rowMajorBatch(n,e).map(i=>tne(i,r))}concatenate(n,e){return new cE(o7([this,n]),e)}take(n){return n<0||n==null?this:new XL(this,n)}skip(n){return n<0||n==null?this:new ZL(this,n)}prefetch(n){return new uE(this,n)}shuffle(n,e){return new r7(this,n,e)}serial(){return new KL(this)}},WL=class extends Nr{constructor(n){super(),this.items=n,this.trav=0}summary(){return`Array of ${this.items.length} items`}next(){return z(this,null,function*(){if(this.trav>=this.items.length)return{value:null,done:!0};let n=this.items[this.trav];return this.trav++,{value:one(n),done:!1}})}},qL=class extends Nr{constructor(n){super(),this.nextFn=n}summary(){return"Function call"}next(){return z(this,null,function*(){try{return this.nextFn()}catch(n){throw n.message=`Error thrown while iterating through a dataset: ${n.message}`,n}})}},KL=class extends Nr{constructor(n){super(),this.upstream=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){return this.upstream.next()})}},ZL=class extends Nr{constructor(n,e){super(),this.upstream=n,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;this.count++<this.maxCount;){let n=yield this.upstream.next();if(n.done)return n;ht(n.value)}return this.upstream.next()})}},XL=class extends Nr{constructor(n,e){super(),this.upstream=n,this.maxCount=e,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}next(){return z(this,null,function*(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()})}},YL=class extends Nr{constructor(n,e,r=!0){super(),this.upstream=n,this.batchSize=e,this.enableSmallLastBatch=r,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){let n=[];for(;n.length<this.batchSize;){let e=yield this.upstream.next();if(e.done)return this.enableSmallLastBatch&&n.length>0?{value:n,done:!1}:{value:null,done:!0};n.push(e.value)}return{value:n,done:!1}})}},QL=class extends Nr{constructor(n,e){super(),this.upstream=n,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;;){let n=yield this.upstream.next();if(n.done||this.predicate(n.value))return n;ht(n.value)}})}},JL=class extends Nr{constructor(n,e){super(),this.upstream=n,this.transform=e}summary(){return`${this.upstream.summary()} -> Map`}next(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return{value:null,done:!0};let e=ta.getTensorsInContainer(n.value),r=this.transform(n.value),o=ta.getTensorsInContainer(r);for(let i of e)ta.isTensorInList(i,o)||i.dispose();return{value:r,done:!1}})}},e7=class extends Nr{constructor(n,e){super(),this.upstream=n,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;;)try{return yield this.upstream.next()}catch(n){if(!this.handler(n))return{value:null,done:!0}}})}},lE=class extends Nr{constructor(n,e){super(),this.upstream=n,this.transform=e}summary(){return`${this.upstream.summary()} -> AsyncMap`}next(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return{value:null,done:!0};let e=ta.getTensorsInContainer(n.value),r=yield this.transform(n.value),o=ta.getTensorsInContainer(r);for(let i of e)ta.isTensorInList(i,o)||i.dispose();return{value:r,done:!1}})}},Jg=class extends Nr{constructor(){super(),this.outputQueue=new ine,this.lastRead=Promise.resolve({value:null,done:!1})}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}serialNext(){return z(this,null,function*(){for(;this.outputQueue.length()===0;)if(!(yield this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}})}},t7=class extends Jg{constructor(n,e){super(),this.upstream=n,this.transform=e}summary(){return`${this.upstream.summary()} -> Flatmap`}pump(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return!1;let e=ta.getTensorsInContainer(n.value),r=this.transform(n.value),o=ta.getTensorsInContainer(r);this.outputQueue.pushAll(r);for(let i of e)ta.isTensorInList(i,o)||i.dispose();return!0})}},cE=class extends Nr{constructor(n,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=n}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}next(){return z(this,null,function*(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead})}readFromChain(n){return z(this,null,function*(){if(yield n,this.iterator==null){let r=yield this.moreIterators.next();if(r.done)return{value:null,done:!0};this.iterator=r.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let e=yield this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(n)):e})}},Of=(function(t){return t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST",t})(Of||{}),n7=class extends Nr{constructor(n,e=Of.FAIL){super(),this.iterators=n,this.mismatchMode=e,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}nextState(n){return z(this,null,function*(){yield n;let e=0,r=0;function o(s){return s instanceof Nr?{value:s.next().then(l=>(e++,l.done&&r++,l.value)),recurse:!1}:{value:null,recurse:!0}}let i=yield aE(this.iterators,o);if(e===r)return{value:null,done:!0};if(r>0)switch(this.mismatchMode){case Of.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case Of.SHORTEST:return{value:null,done:!0};case Of.LONGEST:default:}return this.count++,{value:i,done:!1}})}next(){return z(this,null,function*(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise})}},uE=class extends Nr{constructor(n,e){super(),this.upstream=n,this.bufferSize=e,this.buffer=new nw(e)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){let n=this.upstream.next();this.buffer.push(n)}}next(){return this.refill(),this.buffer.shift()}},r7=class extends uE{constructor(n,e,r){super(n,e),this.upstream=n,this.windowSize=e,this.upstreamExhausted=!1,this.random=sne.alea(r||x.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}next(){return z(this,null,function*(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead})}randomInt(n){return Math.floor(this.random()*n)}chooseIndex(){return this.randomInt(this.buffer.length())}serialNext(){return z(this,null,function*(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let n=this.chooseIndex(),e=yield this.buffer.shuffleExcise(n);if(e.done)this.upstreamExhausted=!0;else return this.refill(),e}return{value:null,done:!0}})}};var Ff=(()=>{class t{constructor(){this.size=null}batch(e,r=!0){let o=this;x.assert(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`);let i;return this.size===1/0||this.size==null?i=this.size:r?i=Math.ceil(this.size/e):i=Math.floor(this.size/e),us(()=>z(this,null,function*(){return(yield o.iterator()).columnMajorBatch(e,r,iRe)}),i)}concatenate(e){let r=this,o;return this.size===1/0||e.size===1/0?o=1/0:this.size!=null&&e.size!=null?o=this.size+e.size:o=null,us(()=>z(this,null,function*(){return(yield r.iterator()).concatenate(yield e.iterator())}),o)}filter(e){let r=this,o;return this.size===1/0?o=1/0:o=null,us(()=>z(this,null,function*(){return(yield r.iterator()).filter(i=>te(()=>e(i)))}),o)}forEachAsync(e){return z(this,null,function*(){return(yield this.iterator()).forEachAsync(e)})}map(e){let r=this;return us(()=>z(this,null,function*(){return(yield r.iterator()).map(o=>te(()=>e(o)))}),this.size)}mapAsync(e){let r=this;return us(()=>z(this,null,function*(){return(yield r.iterator()).mapAsync(e)}),this.size)}prefetch(e){if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let r=this;return us(()=>z(this,null,function*(){return(yield r.iterator()).prefetch(e)}),this.size)}repeat(e){let r=this,o;return this.size!=null&&e>0?o=this.size*e:e===0?o=0:this.size!=null&&(e===void 0||e<0)?o=1/0:o=null,us(()=>z(this,null,function*(){let i=X_(()=>z(this,null,function*(){return{value:yield r.iterator(),done:!1}}));return ane(i.take(e))}),o)}skip(e){let r=this,o;return this.size!=null&&e>=0&&this.size>=e?o=this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?o=0:o=null,us(()=>z(this,null,function*(){return(yield r.iterator()).skip(e)}),o)}shuffle(e,r,o=!0){if(e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);let i=this,s=cne.alea(r||x.now().toString());return us(()=>z(this,null,function*(){let a=s.int32();return o&&(a+=s.int32()),(yield i.iterator()).shuffle(e,a.toString())}),this.size)}take(e){let r=this,o;return this.size!=null&&this.size>e?o=e:this.size!=null&&this.size<=e?o=this.size:o=null,us(()=>z(this,null,function*(){return(yield r.iterator()).take(e)}),o)}toArray(){return z(this,null,function*(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(yield this.iterator()).toArray()})}toArrayForTest(){return z(this,null,function*(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(yield this.iterator()).toArrayForTest()})}}return t.MAX_BUFFER_SIZE=1e4,t})();function us(t,n=null){return new class extends Ff{constructor(){super(...arguments),this.size=n}iterator(){return z(this,null,function*(){return t()})}}}function une(t){return us(()=>z(null,null,function*(){return o7(t)}),t.length)}function dne(t){if(!Rf(t))throw new Error("The argument to zip() must be an object or array.");let n;if(Array.isArray(t))for(let e=0;e<t.length;e++)n=n==null?t[e].size:Math.min(n,t[e].size);else if(t instanceof Object)for(let e in t)n=n==null?t[e].size:Math.min(n,t[e].size);return us(()=>z(null,null,function*(){let e=yield aE(t,r=>{if(r instanceof Ff)return{value:r.iterator(),recurse:!1};if(Rf(r))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return lne(e,Of.SHORTEST)}),n)}function iRe(t){if(t===null)return null;let n=t[0];return rne(n)?{value:sRe(t),recurse:!1}:{value:null,recurse:!0}}function sRe(t){if(t.length===0)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof Rt?Xn(t):Hr(t)}var rw=class extends Ff{constructor(n){super(),this.input=n}iterator(){return z(this,null,function*(){return(yield this.input.iterator()).decodeUTF8().split(`
`).map(o=>(o.endsWith("\r")&&(o=o.slice(0,-1)),o))})}};var dE='"',Y_=Symbol("out"),pne=Symbol("field"),pE=Symbol("quote"),i7=Symbol("quoteafterquote"),hne=Symbol("quoteinquote"),ow=class extends Ff{columnNames(){return z(this,null,function*(){return this.columnNamesValidated||(yield this.setColumnNames()),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames})}setColumnNames(){return z(this,null,function*(){let n=yield this.maybeReadHeaderLine();if(!this.fullColumnNames&&!n)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&n&&x.assert(n.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+n.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=n);let e=this.fullColumnNames.reduce((o,i)=>(o[i]=o[i]+1||1,o),{}),r=Object.keys(e).filter(o=>e[o]>1);if(x.assert(r.length===0,()=>"Duplicate column names found: "+r.toString()),this.columnConfigs){for(let o of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(o)===-1)throw new Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0})}maybeReadHeaderLine(){return z(this,null,function*(){if(this.hasHeader){let e=yield(yield this.base.iterator()).next();if(e.done)throw new Error("No data was found for CSV parsing.");let r=e.value;return this.parseRow(r,!1)}else return null})}constructor(n,e){super(),this.input=n,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new rw(n),e||(e={}),this.hasHeader=e.hasHeader!==!1,this.fullColumnNames=e.columnNames,this.columnConfigs=e.columnConfigs,this.configuredColumnsOnly=e.configuredColumnsOnly,e.delimWhitespace?(x.assert(e.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=e.delimiter?e.delimiter:","}iterator(){return z(this,null,function*(){this.columnNamesValidated||(yield this.setColumnNames());let n=yield this.base.iterator();return this.hasHeader&&(n=n.skip(1)),n.map(e=>this.makeDataElement(e))})}makeDataElement(n){let e=this.parseRow(n),r={},o={};for(let i=0;i<this.fullColumnNames.length;i++){let s=this.fullColumnNames[i],a=this.columnConfigs?this.columnConfigs[s]:null;if(!(this.configuredColumnsOnly&&!a)){let l=e[i],c=null;if(l==="")if(a&&a.default!==void 0)c=a.default;else{if(a&&(a.required||a.isLabel))throw new Error(`Required column ${s} is empty in this line: ${n}`);c=void 0}else{let u=Number(l);if(isNaN(u))a&&a.dtype==="bool"?c=this.getBoolean(l):c=l;else if(!a||!a.dtype)c=u;else switch(a.dtype){case"float32":c=u;break;case"int32":c=Math.floor(u);break;case"bool":c=this.getBoolean(l);break;default:c=u}}a&&a.isLabel?o[s]=c:r[s]=c}}return Object.keys(o).length===0?r:{xs:r,ys:o}}getBoolean(n){return n==="1"||n.toLowerCase()==="true"?1:0}parseRow(n,e=!0){let r=[],o=0,i=n.length,s=Y_;for(let a=0;a<i;a++)switch(s){case Y_:switch(n.charAt(a)){case dE:o=a+1,s=pE;break;case this.delimiter:if(o=a+1,this.delimiter===" "&&this.delimWhitespace)break;r.push(""),s=Y_;break;default:s=pne,o=a;break}break;case pne:switch(n.charAt(a)){case this.delimiter:r.push(n.substring(o,a)),s=Y_,o=a+1;break;default:}break;case pE:switch(n.charAt(a)){case dE:s=i7;break;default:}break;case i7:switch(n.charAt(a)){case this.delimiter:r.push(n.substring(o,a-1)),s=Y_,o=a+1;break;case dE:s=pE;break;default:s=hne;break}break;case hne:switch(n.charAt(a)){case dE:s=pE;break;default:}break;default:}if(s===i7?r.push(n.substring(o,i-1)):r.push(n.substring(o)),e&&r.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${r}`);return r}};var hE=class t extends Nr{constructor(n){super(),this.microphoneConfig=n,this.isClosed=!1,this.fftSize=n.fftSize||1024;let e=Math.log2(this.fftSize);if(this.fftSize<0||e<4||e>14||!Number.isInteger(e))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=n.numFramesPerSpectrogram||43,this.sampleRateHz=n.sampleRateHz,this.columnTruncateLength=n.columnTruncateLength||this.fftSize,this.audioTrackConstraints=n.audioTrackConstraints,this.smoothingTimeConstant=n.smoothingTimeConstant||0,this.includeSpectrogram=n.includeSpectrogram!==!1,this.includeWaveform=n.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static create(){return z(this,arguments,function*(n={}){if(!Y().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");let e=new t(n);return yield e.start(),e})}start(){return z(this,null,function*(){try{this.stream=yield navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(r){throw new Error(`Error thrown while initializing video stream: ${r.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let n=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new n,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`);let e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)})}next(){return z(this,null,function*(){if(this.isClosed)return{value:null,done:!0};let n,e,r=yield this.getAudioData();if(this.includeSpectrogram){let o=this.flattenQueue(r.freqDataQueue);n=this.getTensorFromAudioDataArray(o,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let o=this.flattenQueue(r.timeDataQueue);e=this.getTensorFromAudioDataArray(o,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:n,waveform:e},done:!1}})}capture(){return z(this,null,function*(){return(yield this.next()).value})}getAudioData(){return z(this,null,function*(){let n=[],e=[],r=0;return new Promise(o=>{let i=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&o({freqDataQueue:n,timeDataQueue:e}),n.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),e.push(this.timeData.slice())),++r===this.numFrames&&(clearInterval(i),o({freqDataQueue:n,timeDataQueue:e}))},this.fftSize/this.sampleRateHz*1e3)})})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(n){let e=n[0].length,r=new Float32Array(n.length*e);return n.forEach((o,i)=>r.set(o,i*e)),r}getTensorFromAudioDataArray(n,e){let r=new Float32Array(x.sizeFromShape(e));return r.set(n,r.length-n.length),Hr(r,e)}};var fE=class t extends Nr{constructor(n,e){if(super(),this.webcamVideoElement=n,this.webcamConfig=e,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Yn([0],"int32"),this.webcamConfig.centerCrop){let r=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,o=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,i=(1-r)/2,s=(1-o)/2,a=i+r,l=o+s;this.cropBox=$a([s,i,l,a],[1,4])}else this.cropBox=$a([0,0,1,1],[1,4])}summary(){return"webcam"}static create(r){return z(this,arguments,function*(n,e={}){if(!Y().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!n){if(n=document.createElement("video"),!e.resizeWidth||!e.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");n.width=e.resizeWidth,n.height=e.resizeHeight}let o=new t(n,e);return yield o.start(),o})}start(){return z(this,null,function*(){this.webcamConfig.facingMode&&x.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=yield navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(n){throw n.message=`Error thrown while initializing video stream: ${n.message}`,n}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(n){console.log(n),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(n=>{this.webcamVideoElement.onloadedmetadata=()=>{n()}})})}next(){return z(this,null,function*(){if(this.isClosed)return{value:null,done:!0};let n;try{n=x_.fromPixels(this.webcamVideoElement)}catch(e){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(e)}`)}if(this.resize)try{return{value:this.cropAndResizeFrame(n),done:!1}}catch(e){throw new Error(`Error thrown cropping the video: ${e.message}`)}finally{n.dispose()}else return{value:n,done:!1}})}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(n){return te(()=>{let e=ur(me(n,"float32"),0),r;r=yi.cropAndResize(e,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let o=r.shape;return $(r,o.slice(1))})}capture(){return z(this,null,function*(){return(yield this.next()).value})}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}};var iw=class{};var Q_=class extends Nr{split(n){return new s7(this,n)}},s7=class extends Q_{constructor(n,e){super(),this.upstream=n,this.impl=new a7(n,e)}summary(){return this.impl.summary()}next(){return z(this,null,function*(){return this.impl.next()})}},a7=class extends Jg{constructor(n,e){super(),this.upstream=n,this.separator=e,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}pump(){return z(this,null,function*(){let n=yield this.upstream.next();if(n.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);let e=n.value.split(this.separator);e[0]=this.carryover+e[0];for(let r of e.slice(0,-1))this.outputQueue.push(r);return this.carryover=e[e.length-1],!0})}};var mE=class extends Nr{decodeUTF8(){return new l7(this)}},l7=class extends Q_{constructor(n){super(),this.upstream=n,this.impl=new c7(n)}summary(){return this.impl.summary()}next(){return z(this,null,function*(){return this.impl.next()})}},c7=class extends Jg{constructor(n){if(super(),this.upstream=n,Y().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:e}=UL();this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}pump(){return z(this,null,function*(){let n=yield this.upstream.next(),e;if(n.done)return!1;e=n.value;let r;return Y().get("IS_BROWSER")?r=this.decoder.decode(e,{stream:!0}):r=this.decoder.write(Buffer.from(e.buffer)),this.outputQueue.push(r),!0})}};var sw=class extends mE{constructor(n,e={}){super(),this.file=n,this.options=e,x.assert(n instanceof Uint8Array||(Y().get("IS_BROWSER")?n instanceof File||n instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=e.offset||0,this.chunkSize=e.chunkSize||1024*1024}summary(){return`FileChunks ${this.file}`}next(){return z(this,null,function*(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:yield new Promise((e,r)=>{let o=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,o)));else{let i=new FileReader;i.onload=a=>{let l=i.result;if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),!(l instanceof Uint8Array))return r(new TypeError("FileReader returned unknown type."));e(l)},i.onabort=a=>r(new Error("Aborted")),i.onerror=a=>r(new Error(a.type));let s=this.file.slice(this.offset,o);i.readAsArrayBuffer(s)}this.offset=o}),done:!1}})}};function fne(r){return z(this,arguments,function*(t,n={},e){let o,i;typeof t=="string"?o=t:(o=t.url,i=aRe(t));let s=yield(e||x.fetch)(o,i);if(s.ok){let a=new Uint8Array(yield s.arrayBuffer());return new sw(a,n)}else throw new Error(s.statusText)})}var aRe=t=>({method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity});function gE(t){return typeof t=="string"&&t.slice(0,7)==="file://"}var aw=class extends iw{constructor(n,e={}){super(),this.input=n,this.options=e}iterator(){return z(this,null,function*(){if(gE(this.input)&&Y().get("IS_NODE")){let n=mne();this.input=n.readFileSync(this.input.slice(7))}return new sw(this.input,this.options)})}};var lw=class extends iw{constructor(n,e={}){super(),this.url=n,this.fileOptions=e}iterator(){return z(this,null,function*(){return gE(this.url)?new aw(this.url,this.fileOptions).iterator():fne(this.url,this.fileOptions)})}};function gne(t,n={}){return new ow(new lw(t),n)}function vne(t){let n=X_(t);return us(()=>z(null,null,function*(){return n}))}function wne(t){return us(()=>z(null,null,function*(){let n=yield t();return X_(()=>n.next())}))}function yne(t,n){return z(this,null,function*(){return fE.create(t,n)})}function xne(t){return z(this,null,function*(){return hE.create(t)})}var vE="4.22.0";function ke(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{e!=null&&x.assert(e.dtype!=="complex64",()=>`${n} does not support complex64 tensors in the CPU backend.`)})}var lRe=Zo.whereImpl,wE=(()=>{class t extends Ec{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Bh(this,na())}write(e,r,o){this.firstUse&&(this.firstUse=!1,Y().get("IS_NODE")&&O.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:o,refCount:1}),i}makeTensorInfo(e,r,o){let i;if(r==="string"&&o!=null&&o.length>0&&x.isString(o[0])){let s=o.map(a=>x.encodeString(a));i=this.write(s,e,r)}else i=this.write(o,e,r);return{dataId:i,shape:e,dtype:r}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let r=this.data.get(e);r.refCount++}decRef(e){if(this.data.has(e)){let r=this.data.get(e);r.refCount--}}move(e,r,o,i,s){this.data.set(e,{values:r,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}read(e){return z(this,null,function*(){return this.readSync(e)})}readSync(e){let{dtype:r,complexTensorInfos:o}=this.data.get(e);if(r==="complex64"){let i=this.readSync(o.real.dataId),s=this.readSync(o.imag.dataId);return O.mergeRealAndImagArrays(i,s)}return x.convertBackendValuesAndArrayBuffer(this.data.get(e).values,r)}bufferSync(e){let r=this.readSync(e.dataId);if(e.dtype==="string")try{let o=r.map(i=>x.decodeString(i));return ot(e.shape,e.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ot(e.shape,e.dtype,r)}makeOutput(e,r,o){return na().makeTensorFromTensorInfo(this.makeTensorInfo(r,o,e),this)}disposeData(e,r=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!r&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:o}=this.data.get(e);o!=null&&(this.disposeData(o.real.dataId,!0),this.disposeData(o.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}time(e){return z(this,null,function*(){let r=x.now();return e(),{kernelMs:x.now()-r}})}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){ke([e],"where");let r=this.readSync(e.dataId);return lRe(e.shape,r)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();var nb={};Qt(nb,{addImpl:()=>h7,bincountImpl:()=>dw,bincountReduceImpl:()=>yE,bitwiseAndImpl:()=>f7,castImpl:()=>p7,ceilImpl:()=>m7,concatImpl:()=>xE,equalImpl:()=>g7,expImpl:()=>w7,expm1Impl:()=>x7,floorDivImpl:()=>_7,floorImpl:()=>k7,gatherNdImpl:()=>kE,gatherV2Impl:()=>_E,greaterEqualImpl:()=>C7,greaterImpl:()=>b7,lessEqualImpl:()=>S7,lessImpl:()=>M7,linSpaceImpl:()=>bE,logImpl:()=>T7,maxImpl:()=>CE,maximumImpl:()=>E7,minimumImpl:()=>I7,multiplyImpl:()=>J_,negImpl:()=>D7,notEqualImpl:()=>N7,prodImpl:()=>A7,raggedGatherImpl:()=>ME,raggedRangeImpl:()=>SE,raggedTensorToTensorImpl:()=>TE,rangeImpl:()=>EE,rsqrtImpl:()=>O7,scatterImpl:()=>Yl,sigmoidImpl:()=>Yne,simpleAbsImpl:()=>d7,sliceImpl:()=>B7,sparseFillEmptyRowsImpl:()=>IE,sparseReshapeImpl:()=>DE,sparseSegmentReductionImpl:()=>hw,sqrtImpl:()=>ere,squaredDifferenceImpl:()=>P7,staticRegexReplaceImpl:()=>L7,stridedSliceImpl:()=>NE,stringNGramsImpl:()=>AE,stringSplitImpl:()=>RE,stringToHashBucketFastImpl:()=>OE,subImpl:()=>V7,tileImpl:()=>FE,topKImpl:()=>BE,transposeImpl:()=>pw,uniqueImpl:()=>PE});function d7(t){let n=new Float32Array(t.length);for(let e=0;e<t.length;++e)n[e]=Math.abs(t[e]);return n}var cRe=t=>{let{x:n}=t.inputs,e=t.backend;ke(n,"abs");let r=new Float32Array(x.sizeFromShape(n.shape)),o=e.data.get(n.dataId).values;return r=d7(o),e.makeOutput(r,n.shape,n.dtype)},kne={kernelName:"Abs",backendName:"cpu",kernelFunc:cRe};function on(t){return(n,e,r,o,i)=>{let s=O.assertAndGetBroadcastShape(n,e),a=s.length,l=x.computeStrides(s),c=x.sizeFromShape(s),u=x.getTypedArrayFromDType(i,c),d=n.length,p=e.length,h=x.computeStrides(n),f=x.computeStrides(e),m=O.getBroadcastDims(n,s),g=O.getBroadcastDims(e,s);if(m.length+g.length===0)for(let v=0;v<u.length;++v)u[v]=t(r[v%r.length],o[v%o.length]);else for(let v=0;v<u.length;++v){let w=x.indexToLoc(v,a,l),y=w.slice(-d);m.forEach(E=>y[E]=0);let k=x.locToIndex(y,d,h),_=w.slice(-p);g.forEach(E=>_[E]=0);let S=x.locToIndex(_,p,f);u[v]=t(r[k],o[S])}return[u,s]}}function vo(t){let{inputs:n,backend:e}=t,{real:r,imag:o}=n,i=e.data.get(r.dataId).values,s=e.data.get(o.dataId).values,a=e.makeTensorInfo(r.shape,"complex64"),l=e.data.get(a.dataId);return l.complexTensorInfos={real:e.makeTensorInfo(r.shape,"float32",i),imag:e.makeTensorInfo(o.shape,"float32",s)},a}var _ne={kernelName:n0,backendName:"cpu",kernelFunc:vo};function cw(t,n,e="float32"){if(e==="complex64"){let o=cw(t,n,"float32"),i=cw(t,n,"float32");return vo({inputs:{real:o,imag:i},backend:t})}let r=x.makeZerosTypedArray(x.sizeFromShape(n),e);return t.makeTensorInfo(n,e,r)}function di(t){let{inputs:n,backend:e}=t,{x:r}=n;return e.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var bne={kernelName:Sl,backendName:"cpu",kernelFunc:di};function Xa(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.data.get(r.dataId).complexTensorInfos.real,i=e.data.get(o.dataId).values;return e.makeTensorInfo(o.shape,o.dtype,i)}var Cne={kernelName:P0,backendName:"cpu",kernelFunc:Xa};function p7(t,n,e,r){if(r==="int32"){let o=Int32Array.from(t);return[n,"int32",o]}if(r==="bool"){let o=x.toTypedArray([0],e),[i,s]=on((a,l)=>a!==l?1:0)(n,[],t,o,"bool");return[s,"bool",i]}throw new Error(`Error in Cast: failed to cast ${e} to ${r}`)}function Ya(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return di({inputs:{x:o},backend:e});let u=cw(e,o.shape,o.dtype),d=Ya({inputs:{x:o},backend:e,attrs:{dtype:"float32"}}),p=vo({inputs:{real:d,imag:u},backend:e});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),p}if(o.dtype==="complex64"){let u=Xa({inputs:{input:o},backend:e}),d=Ya({inputs:{x:u},backend:e,attrs:{dtype:i}});return e.disposeIntermediateTensorInfo(u),d}if(!x.hasEncodingLoss(o.dtype,i)){let u=di({inputs:{x:o},backend:e});return{dataId:u.dataId,shape:u.shape,dtype:i}}let s=e.data.get(o.dataId).values,[a,l,c]=p7(s,o.shape,o.dtype,i);return e.makeTensorInfo(a,l,c)}var Mne={kernelName:Ml,backendName:"cpu",kernelFunc:Ya};function dn(t,n,e,r){return e==null?({inputs:o,backend:i})=>{let{a:s,b:a}=o,l=i;ke([s,a],t);let c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=s.dtype==="string"?O.fromUint8ToStringArray(c):c,p=s.dtype==="string"?O.fromUint8ToStringArray(u):u,h=r||s.dtype,[f,m]=n(s.shape,a.shape,d,p,h);return l.makeTensorInfo(m,h,f)}:({inputs:o,backend:i})=>{let{a:s,b:a}=o,l=i;if(s.dtype==="complex64"||a.dtype==="complex64"){let c=Ya({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,p=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,f=l.data.get(p.dataId).values,m=Ya({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),v=g.complexTensorInfos.real,w=g.complexTensorInfos.imag,y=l.data.get(v.dataId).values,k=l.data.get(w.dataId).values,[_,S,E]=e(s.shape,a.shape,h,f,y,k),N=l.makeTensorInfo(E,"float32",_),B=l.makeTensorInfo(E,"float32",S),D=vo({inputs:{real:N,imag:B},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo(B),D}else{let c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=r||s.dtype,[p,h]=n(s.shape,a.shape,c,u,d);return l.makeTensorInfo(h,d,p)}}}function uw(t){return(n,e,r,o,i,s)=>{let a=O.assertAndGetBroadcastShape(n,e),l=x.sizeFromShape(a),c=a.length,u=x.computeStrides(a),d=x.getTypedArrayFromDType("float32",l),p=x.getTypedArrayFromDType("float32",l),h=O.getBroadcastDims(n,a),f=O.getBroadcastDims(e,a),m=O.mergeRealAndImagArrays(r,o),g=O.mergeRealAndImagArrays(i,s),v=n.length,w=x.computeStrides(n),y=e.length,k=x.computeStrides(e);if(h.length+f.length===0)for(let _=0;_<d.length;_++){let S=_%m.length,E=_%g.length,N=t(m[S*2],m[S*2+1],g[E*2],g[E*2+1]);d[_]=N.real,p[_]=N.imag}else for(let _=0;_<d.length;_++){let S=x.indexToLoc(_,c,u),E=S.slice(-v);h.forEach(M=>E[M]=0);let N=x.locToIndex(E,v,w),B=S.slice(-y);f.forEach(M=>B[M]=0);let D=x.locToIndex(B,y,k),P=t(m[N*2],m[N*2+1],g[D*2],g[D*2+1]);d[_]=P.real,p[_]=P.imag}return[d,p,a]}}var h7=on((t,n)=>t+n),uRe=uw((t,n,e,r)=>({real:t+e,imag:n+r})),Au=dn("Add",h7,uRe),Sne={kernelName:"Add",backendName:"cpu",kernelFunc:Au};function dw(t,n,e,r,o){let i=x.sizeFromShape(r),s=x.makeZerosTypedArray(o,e);for(let a=0;a<t.length;a++){let l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(i>0?s[l]+=n[a]:s[l]+=1)}return s}function yE(t,n,e,r=!1){let o=t.shape[0],i=t.shape[1],s=ot([o,e],n.dtype);for(let a=0;a<o;a++)for(let l=0;l<i;l++){let c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=e||(r?s.set(1,a,c):n.size>0?s.set(s.get(a,c)+n.get(a,l),a,c):s.set(s.get(a,c)+1,a,c))}return s}var f7=on((t,n)=>t&n),dRe=dn($h,f7),Tne={kernelName:$h,backendName:"cpu",kernelFunc:dRe};function Fo(t){return(n,e,r)=>{let o=x.getArrayFromDType(e,n.length);for(let i=0;i<n.length;++i)o[i]=t(n[i],r);return o}}function _t(t,n,e){let r=Fo(n);return ds(t,r,e)}function ds(t,n,e){return({inputs:r,attrs:o,backend:i})=>{let{x:s}=r;ke(s,t);let a=i,l=a.data.get(s.dataId).values,c;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=O.fromUint8ToStringArray(l)}else c=l;let u=e||s.dtype,d=n(c,u,o);return a.makeTensorInfo(s.shape,u,d)}}var m7=Fo(t=>Math.ceil(t)),pRe=ds($c,m7),Ene={kernelName:$c,backendName:"cpu",kernelFunc:pRe};function xE(t,n,e,r){let o=x.getArrayFromDType(e,x.sizeFromShape(n));if(r&&e!=="string"){let i=0;t.forEach(s=>{let a=x.sizeFromShape(s.shape);o.set(s.vals,i),i+=a})}else{let i=0;t.forEach(s=>{let a=e==="string"?O.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let c=0;c<s.shape[0];++c){let u=c*n[1]+i;for(let d=0;d<s.shape[1];++d)o[u+d]=a[l++]}i+=s.shape[1]})}return o}var g7=on((t,n)=>t===n?1:0),v7=dn(zh,g7,null,"bool"),Ine={kernelName:zh,backendName:"cpu",kernelFunc:v7};var w7=Fo(t=>Math.exp(t)),y7=ds("Exp",w7,"float32"),Dne={kernelName:"Exp",backendName:"cpu",kernelFunc:y7};var x7=Fo(t=>Math.expm1(t)),hRe=ds(Hc,x7),Nne={kernelName:Hc,backendName:"cpu",kernelFunc:hRe};var k7=Fo(t=>Math.floor(t)),fRe=ds(Uc,k7),Ane={kernelName:Uc,backendName:"cpu",kernelFunc:fRe};var _7=on((t,n)=>Math.floor(t/n)),mRe=dn(Gc,_7,null,"int32"),Rne={kernelName:Gc,backendName:"cpu",kernelFunc:mRe};function kE(t,n,e,r,o,i,s,a,l){let c=ot([r,i],e);for(let u=0;u<r;u++){let d=[],p=0;for(let h=0;h<o;h++){let f=t[u*o+h];p+=f*s[h],d.push(f)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<i;h++)c.values[u*i+h]=n.get(...n.indexToLoc(p*i+h))}return c}function _E(t,n,e){let r=ot(e,t.dtype);for(let o=0;o<r.size;++o){let s=r.indexToLoc(o).slice(),a=s[0],l=s[2],c=n.locToIndex([a,l]);s[2]=n.values[c];let u=t.locToIndex(s);0<=u&&u<t.values.length&&(r.values[o]=t.values[u])}return r}var b7=on((t,n)=>t>n?1:0),gRe=dn(Uh,b7,null,"bool"),One={kernelName:Uh,backendName:"cpu",kernelFunc:gRe};var C7=on((t,n)=>t>=n?1:0),vRe=dn(Wc,C7,null,"bool"),Fne={kernelName:Wc,backendName:"cpu",kernelFunc:vRe};var M7=on((t,n)=>t<n?1:0),wRe=dn(Gh,M7,null,"bool"),Bne={kernelName:Gh,backendName:"cpu",kernelFunc:wRe};var S7=on((t,n)=>t<=n?1:0),yRe=dn(Wh,S7,null,"bool"),Pne={kernelName:Wh,backendName:"cpu",kernelFunc:yRe};function bE(t,n,e){let r=(n-t)/(e-1),o=x.makeZerosTypedArray(e,"float32");o[0]=t;for(let i=1;i<o.length;i++)o[i]=o[i-1]+r;return o}var T7=Fo(t=>Math.log(t)),xRe=ds("Log",T7),Lne={kernelName:"Log",backendName:"cpu",kernelFunc:xRe};function CE(t,n,e,r){let o=x.getTypedArrayFromDType(r,x.sizeFromShape(e));for(let i=0;i<o.length;++i){let s=i*n,a=t[s];for(let l=0;l<n;++l){let c=t[s+l];(Number.isNaN(c)||c>a)&&(a=c)}o[i]=a}return o}var E7=on((t,n)=>Math.max(t,n)),kRe=dn(Yc,E7),$ne={kernelName:Yc,backendName:"cpu",kernelFunc:kRe};var I7=on((t,n)=>Math.min(t,n)),_Re=dn(Qc,I7),Vne={kernelName:Qc,backendName:"cpu",kernelFunc:_Re};var J_=on((t,n)=>t*n),bRe=uw((t,n,e,r)=>({real:t*e-n*r,imag:t*r+n*e})),e2=dn(Jc,J_,bRe),jne={kernelName:Jc,backendName:"cpu",kernelFunc:e2};function D7(t,n,e){let r=x.createScalarValue(-1,e);return J_([],n,r,t,e)}function CRe(t){let{inputs:n,backend:e}=t,{x:r}=n;ke(r,"neg");let o=e.data.get(r.dataId).values,[i,s]=D7(o,r.shape,r.dtype);return e.makeTensorInfo(s,r.dtype,i)}var zne={kernelName:"Neg",backendName:"cpu",kernelFunc:CRe};var N7=on((t,n)=>t!==n?1:0),MRe=dn(Qh,N7,null,"bool"),Hne={kernelName:Qh,backendName:"cpu",kernelFunc:MRe};function pw(t,n,e,r,o){let i=n.length,s=x.sizeFromShape(n),a=x.computeStrides(n),l=x.computeStrides(o),c=x.getTypedArrayFromDType(e,x.sizeFromShape(o));for(let u=0;u<s;++u){let d=x.indexToLoc(u,i,a),p=new Array(d.length);for(let f=0;f<p.length;f++)p[f]=d[r[f]];let h=x.locToIndex(p,i,l);c[h]=t[u]}return c}function hr(t){let{inputs:n,attrs:e,backend:r}=t,{x:o}=n,{perm:i}=e;ke(o,"transpose");let s=o.shape.length,a=new Array(s);for(let d=0;d<a.length;d++)a[d]=o.shape[i[d]];let l=r.data.get(o.dataId).values,c=pw(l,o.shape,o.dtype,i,a);return{dataId:r.write(c,a,o.dtype),shape:a,dtype:o.dtype}}var Une={kernelName:El,backendName:"cpu",kernelFunc:hr};function A7(t,n,e,r){let[o,i]=O.computeOutAndReduceShapes(t,r),s=Lr(n,"int32"),a=x.makeZerosTypedArray(x.sizeFromShape(o),s),l=x.sizeFromShape(i);for(let c=0;c<a.length;++c){let u=c*l,d=1;for(let p=0;p<l;++p)d*=e[u+p];a[c]=d}return{outVals:a,outShape:o,outDtype:s}}function SRe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;ke(o,"prod");let a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=O.getAxesPermutation(l,a),u=l,d=o,p=[];c!=null&&(d=hr({inputs:{x:o},backend:e,attrs:{perm:c}}),p.push(d),u=O.getInnerMostAxes(u.length,a));let h=e.data.get(d.dataId).values,{outVals:f,outShape:m,outDtype:g}=A7(d.shape,d.dtype,h,u),v=m;return s&&(v=O.expandShapeToKeepDim(m,l)),p.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.makeTensorInfo(v,g,f)}var Gne={kernelName:tp,backendName:"cpu",kernelFunc:SRe};function TRe(t,n,e){t.forEach((r,o)=>{if(r<0||r>=e){let i=x.indexToLoc(o,n.length,x.computeStrides(n)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${e})`)}})}function ERe(t,n){for(let e=0;e<t.length;++e){let r=t[e],o=e===t.length-1?n:t[e+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function IRe(t,n,e,r){let o=[],i=0,s=n.length-1+e.length,a=new Array(s).fill(null).map(()=>[0]);ERe(e,r);let l=1;for(let c=0;c<n.length-1;++c){l*=n[c];let u=n[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let p=0;p<e.length;++p){let h=e[p],f=p+n.length-1;if(f>=0){let m=a[f],g=m[m.length-1]-h[u];for(let v=u;v<d;++v)a[f].push(h[v+1]+g)}u=h[u],d=h[d]}d!==u&&(o.push([u,d]),i+=d-u)}return{outSplits:a,valueSlices:o,numValues:i}}function DRe(t){let n=[];for(let e=0;e<t.length;++e){let r=t[e].length,o=x.getArrayFromDType("int32",r);n.push(o),t[e].forEach((i,s)=>o[s]=i)}return n}function Wne(t,n){let e=t.slice(0,n);for(;e.length<n;)e.push(1);for(let r=n;r<t.length;r++)e[n-1]*=t[r];return e}function NRe(t,n,e,r,o,i){let s=Wne(n,2)[1],a=Wne(i,2)[1],l=0;for(let c of e)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)o[l*a+d]=t[u*s+d];++l}}function ARe(t,n,e,r,o){let i=n.slice();i[0]=o;let s=x.getArrayFromDType(e,x.sizeFromShape(i)),a=t.length,l=a===0?0:a/n[0];return NRe(t,n,r,l,s,i),[s,i]}function ME(t,n,e,r,o,i,s,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(n[0].length===0)throw new Error("Split tensors must not be scalars");let l=n[0][0]-1;if(TRe(i,s,l),r.length===0)throw new Error("params.rank must be nonzero");let c=r[0],{outSplits:u,valueSlices:d,numValues:p}=IRe(i,s,t,c),h=DRe(u),f=ARe(e,r,o,d,p);return[h,f[0],f[1]]}var qne=2147483647;function SE(t,n,e,r,o,i,s){if(n.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let a=n.length===0,l=o.length===0,c=s.length===0,u=[];a||u.push(n[0]),l||u.push(o[0]),c||u.push(s[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");let d=u.length===0?1:u[0],p=x.getArrayFromDType("int32",d+1);p[0]=0;for(let g=0;g<d;++g){let v=a?t[0]:t[g],w=l?r[0]:r[g],y=c?i[0]:i[g];if(y===0)throw new Error("Requires delta != 0");let k;if(y>0&&w<v||y<0&&w>v)k=0;else if(k=Math.ceil(Math.abs((w-v)/y)),k>qne)throw new Error(`Requires ((limit - start) / delta) <= ${qne}`);p[g+1]=p[g]+k}let h=p[d],f=x.getArrayFromDType(e,h),m=0;for(let g=0;g<d;++g){let v=p[g+1]-p[g],w=a?t[0]:t[g],y=c?i[0]:i[g];for(let k=0;k<v;++k)f[m++]=w,w+=y}return[p,f]}var Qa=O.RowPartitionType,R7=class t{constructor(n,e,r,o,i,s,a,l,c,u){this.shape=n,this.shapeShape=e,this.values=r,this.valuesShape=o,this.valuesDType=i,this.defaultValue=s,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=O.getRowPartitionTypesHelper(u),this.raggedRank=O.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(n){return this.rowPartitionTypes[0]===Qa.FIRST_DIM_SIZE?this.rowPartitionTypes[n+1]:this.rowPartitionTypes[n]}getRowPartitionTensor(n){return this.rowPartitionTypes[0]===Qa.FIRST_DIM_SIZE?this.rowPartitionValues[n+1]:this.rowPartitionValues[n]}getMaxWidth(n){let e=this.getRowPartitionTensor(n-1);switch(this.getRowPartitionTypeByDimension(n-1)){case Qa.VALUE_ROWIDS:return t.getMaxWidthValueRowID(e);case Qa.ROW_SPLITS:return t.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${Qa[this.getRowPartitionTypeByDimension(n-1)]}`)}}static getMaxWidthRowSplit(n){let e=n.length;if(e===0||e===1)return 0;let r=0;for(let o=0;o<e-1;++o){let i=n[o+1]-n[o];i>r&&(r=i)}return r}static getMaxWidthValueRowID(n){let e=n.length;if(e===0)return 0;let r=0,o=n[0],i=0;for(let s=1;s<e;++s){let a=n[s];a!==o&&(o=a,i=Math.max(s-r,i),r=s)}return Math.max(e-r,i)}tensorShapeFromTensor(n,e,r=!0){if(e.length===0){if(n[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Zne(n,r)}calculateOutputSize(n){let e=this.valuesShape,r=this.defaultValueShape;O.validateDefaultValueShape(r,e);let o=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=O.combineRaggedTensorToTensorShapes(this.raggedRank,o,e);s[0]<0&&(s[0]=n);for(let a=1;a<=this.raggedRank;++a)s[a]<0&&(s[a]=this.getMaxWidth(a));return s}calculateFirstParentOutputIndex(n,e,r){let o=Math.min(n,r),i=[],s=0;for(let a=0;a<o;++a,s+=e)i.push(s);for(let a=o;a<n;++a)i.push(-1);return x.assert(i.length===n,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(n,e,r,o){let i=n.length,s=[];for(let a=0;a<i-1;++a){let l=n[a+1]-n[a],c=Math.min(o,l),u=e[a];u===-1&&(c=0);for(let d=0;d<c;++d)s.push(u),u+=r;for(let d=0;d<l-c;++d)s.push(-1)}if(i>0&&s.length!==n[i-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(n,e,r,o){let i=n.length,s=[];if(i===0)return[];let a=0,l=n[0];if(l>=e.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${e.length}`);let c=e[l];s.push(c);for(let u=1;u<i;++u){let d=n[u];if(d===l)c>=0&&(++a,a<o?c+=r:c=-1);else{if(a=0,l=d,d>=e.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${e.length}`);c=e[d]}s.push(c)}if(s.length!==n.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(n,e,r,o){let i=this.getRowPartitionTensor(n),s=this.getRowPartitionTypeByDimension(n);switch(s){case Qa.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,e,r,o);case Qa.ROW_SPLITS:if(i.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(i,e,r,o);default:throw new Error(`Unsupported partition type: ${Qa[s]}`)}}getFirstDimensionSize(){let n=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let e=this.rowPartitionTypes[0];switch(e){case Qa.FIRST_DIM_SIZE:return n[0];case Qa.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Qa.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Qa[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),r=this.calculateOutputSize(e),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let l=o.length-2;l>=0;--l)o[l]=o[l+1]*r[l+1];let i=Zne(r,!1),s=x.getArrayFromDType(this.valuesDType,x.sizeFromShape(i));if(o[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(e,o[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,o[c],r[c]);this.setOutput(this.raggedRank,l,s,i)}return[i,s]}setOutput(n,e,r,o){if(r.length===0)return;let i=this.values,s=r,a=o.slice();a=a.slice(n+1);let l=x.sizeFromShape(a),c=e.length,u=this.defaultValue;if(u.length!==l&&u.length!==1){let f=this.defaultValueShape;te(()=>{let m=$(u,f);u=Fl(m,a).dataSync()})}let d=0,p=0,h=0;for(let f=0;f<=c;++f){let m=f<c?e[f]:-1;if(m===h){++h;continue}if(p<h){let g=i.subarray(d*l),v=s.subarray(p*l),w=(h-p)*l;Kne(v,g,w)}if(f>=c){let g=r.length;m=Math.floor(g/l)}if(m>h)if(this.defaultValue.length===1)s.subarray(h*l,m*l).fill(this.defaultValue[0]),h=m;else for(;m>h;){let g=s.slice(h*l);Kne(g,u,l),++h}m<0?(d=f+1,p=h):(d=f,p=h,h=p+1)}}};function Kne(t,n,e){for(let r=0;r<e;r++)t[r]=n[r]}function Zne(t,n){let e=[];for(let r of t){if(r<0){if(!n)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}e.push(r)}return e}function TE(t,n,e,r,o,i,s,a,l,c){return new R7(t,n,e,r,o,i,s,a,l,c).compute()}function EE(t,n,e,r){let o=t===n,i=t<n&&e<0,s=n<t&&e>1;if(o||i||s)return x.makeZerosTypedArray(0,r);let a=Math.abs(Math.ceil((n-t)/e)),l=x.makeZerosTypedArray(a,r);n<t&&e===1&&(e=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+e;return l}var O7=Fo(t=>1/Math.sqrt(t)),RRe=ds(ou,O7),Xne={kernelName:ou,backendName:"cpu",kernelFunc:RRe};function Yl(t,n,e,r,o,i,s,a,l,c){let u=[r/o,o],d=t.values,p=n.values;if(r===0)return ot(e,n.dtype);let h=l instanceof gn?l:ot(u,n.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let f=0;f<i;f++){let m=[],g=0;for(let v=0;v<s;v++){let w=d[f*s+v];m.push(w),g+=w*a[v]}if(g<0||g>=r/o)throw new Error(`Invalid indices: ${m} does not index into ${e}`);for(let v=0;v<o;v++)c?h.values[g*o+v]+=p[f*o+v]:h.values[g*o+v]=n.rank===0?p[0]:p[f*o+v]}return h}var Yne=Fo(t=>1/(1+Math.exp(-t))),F7=_t(lu,t=>1/(1+Math.exp(-t))),Qne={kernelName:lu,backendName:"cpu",kernelFunc:F7};function B7(t,n,e,r,o){let i=go.isSliceContinous(r,n,e),s=x.sizeFromShape(e),a=x.computeStrides(r);if(i){let d=go.computeFlatOffset(n,a);return o==="string"?t.slice(d,d+s):t.subarray(d,d+s)}let l=o==="string"?O.fromUint8ToStringArray(t):t,c=ot(r,o,l),u=ot(e,o);for(let d=0;d<u.size;++d){let p=u.indexToLoc(d),h=p.map((f,m)=>f+n[m]);u.set(c.get(...h),...p)}return o==="string"?O.fromStringArrayToUint8(u.values):u.values}function Ja(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,size:s}=r;ke(o,"slice");let[a,l]=go.parseSliceParams(o,i,s);go.assertParamsValid(o,a,l);let c=e.data.get(o.dataId).values,u=B7(c,a,l,o.shape,o.dtype);return e.makeTensorInfo(l,o.dtype,u)}var Jne={kernelName:ap,backendName:"cpu",kernelFunc:Ja};function IE(t,n,e,r,o,i,s){let a=n[0],l=i[0],c=new Array(l),u=new Array(a),d=n[1];if(l===0){if(a!==0)throw new Error(O.getSparseFillEmptyRowsIndicesDenseShapeMismatch(a));let g=x.getArrayFromDType(e,0),v=x.getArrayFromDType(o,0);return[g,[0,d],v,c,u]}let p=!0,h=0,f=new Array(l).fill(0);for(let g=0;g<a;++g){let v=t[g*d];if(v<0)throw new Error(O.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,v));if(v>=l)throw new Error(O.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,v,l));++f[v],p=p&&v>=h,h=v}let m=!0;for(let g=0;g<l;++g){let v=f[g]===0;c[g]=v,m=m&&!v,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&p){let g=t,v=r;for(let w=0;w<a;++w)u[w]=w;return[g,[a,d],v,c,u]}else{let g=f[l-1],v=x.getArrayFromDType(e,g*d),w=x.getArrayFromDType(o,g),y=new Array(l).fill(0);for(let k=0;k<a;++k){let _=t[k*d],S=y[_],E=(_===0?0:f[_-1])+S;y[_]++;for(let N=0;N<d;++N)v[E*d+N]=t[k*d+N];w[E]=r[k],u[k]=E}for(let k=0;k<l;++k)if(y[k]===0){let S=k===0?0:f[k-1];v[S*d+0]=k;for(let E=1;E<d;++E)v[S*d+E]=0;w[S]=s}return[v,[g,d],w,c,u]}}function DE(t,n,e,r,o){let i=x.sizeFromShape(r),s=n[0],a=o.length,l=[],c=1,u=-1;for(let g=0;g<a;++g){let v=o[g];if(v===-1){if(u!==-1)throw new Error(O.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,g));u=g,l.push(1)}else{if(v<0)throw new Error(O.getSparseReshapeNegativeOutputDimErrorMessage(g,v));c*=v,l.push(v)}}if(u!==-1){if(c<=0)throw new Error(O.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let g=Math.trunc(i/c);if(c*g!==i)throw new Error(O.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[u]=g}if(x.sizeFromShape(l)!==i)throw new Error(O.getSparseReshapeInputOutputMismatchErrorMessage(r,l));let p=r.length,h=[];if(p>0){h[p-1]=1;for(let g=p-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}let f=[];if(a>0){f[a-1]=1;for(let g=a-2;g>=0;--g)f[g]=f[g+1]*l[g+1]}let m=x.getArrayFromDType(e,s*a);for(let g=0;g<s;++g){let v=0;for(let w=0;w<p;++w)v+=t[g*p+w]*h[w];for(let w=0;w<a;++w)m[g*a+w]=Math.trunc(v/f[w]),v%=f[w]}return[m,[s,a],l]}function hw(t,n,e,r,o,i=!1,s=0){let a=r.length,l=[n[0],t.length/n[0]],c=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(O.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=n.slice();p[0]=d;let h=p.reduce((y,k)=>y*k,1),f=x.getArrayFromDType(e,h);if(a===0)return d>0&&f.fill(s),[f,p];if(d<=0)throw new Error(O.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let m=0,g=1,v=0,w=o[m];for(;;){let y=0;if(g<a){if(y=o[g],w===y){++g;continue}if(w>=y)throw new Error(O.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(w<0||w>=d)throw new Error(O.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(w,d));w>v&&f.fill(s,v*c,w*c);for(let k=m;k<g;++k){let _=r[k];if(_<0||_>=l[0])throw new Error(O.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(k,r[k],l[0]));for(let S=0;S<c;S++)f[w*c+S]+=t[_*c+S]}if(i)for(let k=0;k<c;k++)f[w*c+k]/=g-m;if(m=g,++g,v=w+1,w=y,g>a)break}return v<d&&f.fill(s,v*c,d*c),[f,p]}var ere=Fo(t=>Math.sqrt(t)),ORe=_t(uu,t=>Math.sqrt(t)),tre={kernelName:uu,backendName:"cpu",kernelFunc:ORe};var P7=on((t,n)=>{let e=t-n;return e*e}),FRe=dn(du,P7),nre={kernelName:du,backendName:"cpu",kernelFunc:FRe};var L7=Fo((t,n)=>{let{pattern:e,replaceGlobal:r,rewrite:o}=n;return t.replace(new RegExp(e,r?"g":""),o)}),BRe=ds(tf,L7),rre={kernelName:tf,backendName:"cpu",kernelFunc:BRe};function NE(t,n,e,r){let o=ot(t,n.dtype);for(let i=0;i<o.size;i++){let s=o.indexToLoc(i),a=new Array(s.length);for(let l=0;l<a.length;l++)a[l]=s[l]*e[l]+r[l];o.set(n.get(...a),...s)}return o}var $7=class{constructor(n,e,r,o,i,s){this.separator=x.encodeString(n),this.nGramWidths=e,this.leftPad=x.encodeString(r),this.rightPad=x.encodeString(o),this.padWidth=i,this.preserveShort=s}getPadWidth(n){return Math.min(this.padWidth<0?n-1:this.padWidth,n-1)}getNumNGrams(n,e){let r=this.getPadWidth(e);return Math.max(0,n+2*r-e+1)}createNGrams(n,e,r,o,i,s){for(let a=0;a<i;++a){let l=this.getPadWidth(s),c=Math.max(0,l-a),u=Math.max(0,l-(i-(a+1))),d=s-(c+u),p=e+(c>0?0:a-l),h=0;h+=c*this.leftPad.length;for(let w=0;w<d;++w)h+=n[p+w].length;h+=u*this.rightPad.length;let f=c+u+d-1;h+=f*this.separator.length,r[o+a]=new Uint8Array(h);let m=r[o+a],g=0,v=w=>w.forEach(y=>m[g++]=y);for(let w=0;w<c;++w)v(this.leftPad),v(this.separator);for(let w=0;w<d-1;++w)v(n[p+w]),v(this.separator);if(d>0){v(n[p+d-1]);for(let w=0;w<u;++w)v(this.separator),v(this.rightPad)}else{for(let w=0;w<u-1;++w)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(n,e){let r=n.length,o=e.length;if(o>0){let l=e[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<o;++c){let u=e[c]>=l;if(u=u&&e[c]<=r,!u)throw new Error(`Invalid split value ${e[c]}, must be in [${l}, ${r}]`);l=e[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}let i=o-1,s=x.getArrayFromDType("int32",o);if(r===0||o===0){let l=new Array(r);for(let c=0;c<=i;++c)s[c]=0;return[l,s]}s[0]=0;for(let l=1;l<=i;++l){let c=e[l]-e[l-1],u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),s[l]=s[l-1]+u}let a=new Array(s[i]);for(let l=0;l<i;++l){let c=e[l],u=s[l];if(this.nGramWidths.forEach(d=>{let p=e[l+1]-e[l],h=this.getNumNGrams(p,d);this.createNGrams(n,c,a,u,h,d),u+=h}),this.preserveShort&&u===s[l]){let d=e[l+1]-e[l];if(d===0)continue;let p=d+2*this.padWidth;this.createNGrams(n,c,a,u,1,p)}}return[a,s]}};function AE(t,n,e,r,o,i,s,a){return new $7(e,r,o,i,s,a).compute(t,n)}function PRe(t,n,e,r){if(!t.length)return;if(n.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(n.length===1){let i=n[0],s=t.indexOf(i);for(;s!==-1;){let a=t.subarray(0,s);(!e||a.length!==0)&&r.push(a),t=t.subarray(s+1),s=t.indexOf(i)}(!e||t.length!==0)&&r.push(t);return}let o=0;for(let i=0;i<t.length+1;i++)if(i===t.length||n.indexOf(t[i])!==-1){let s=t.subarray(o,i);(!e||s.length!==0)&&r.push(s),o=i+1}}function RE(t,n,e){let r=t.length,o=[],i=0,s=0,a=new Array(r);for(let p=0;p<r;++p){let h=o.length;PRe(t[p],n,e,o);let f=o.length-h;a[p]=f,i+=f,s=Math.max(s,f)}let l=x.getArrayFromDType("int32",i*2),c=new Array(i),u=[r,s],d=0;for(let p=0;p<r;++p)for(let h=0;h<a[p];++h)l[d*2]=p,l[d*2+1]=h,c[d]=o[d],++d;return[l,c,u]}function OE(t,n){let e=x.getArrayFromDType("int32",t.length);for(let r=0;r<t.length;++r)e[r]=x.fingerPrint64(t[r]).modulo(n).getLowBitsUnsigned();return e}var V7=on((t,n)=>t-n),LRe=uw((t,n,e,r)=>({real:t-e,imag:n-r})),eb=dn("Sub",V7,LRe),ore={kernelName:"Sub",backendName:"cpu",kernelFunc:eb};function FE(t,n){let e=new Array(t.rank);for(let o=0;o<e.length;o++)e[o]=t.shape[o]*n[o];let r=ot(e,t.dtype);for(let o=0;o<r.values.length;++o){let i=r.indexToLoc(o),s=new Array(t.rank);for(let l=0;l<s.length;l++)s[l]=i[l]%t.shape[l];let a=t.locToIndex(s);r.values[o]=t.values[a]}return r}var tb=(t,n)=>{let e=n.value-t.value;return e===0?t.index-n.index:e};function ire(t,n,e=0,r=t.length-1){for(;r>e;){if(r-e>600){let a=r-e+1,l=n-e+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),p=Math.max(e,Math.floor(n-l*u/a+d)),h=Math.min(r,Math.floor(n+(a-l)*u/a+d));ire(t,n,p,h)}let o=t[n],i=e,s=r;for(x.swap(t,e,n),tb(t[r],o)>0&&x.swap(t,e,r);i<s;){for(x.swap(t,i,s),i++,s--;tb(t[i],o)<0;)i=i+1;for(;tb(t[s],o)>0;)s=s-1}tb(t[e],o)===0?x.swap(t,e,s):(s=s+1,x.swap(t,s,r)),s<=n&&(e=s+1),n<=s&&(r=s-1)}}function BE(t,n,e,r,o){let i=n[n.length-1],[s,a]=[t.length/i,i],l=x.getTypedArrayFromDType(e,s*r),c=x.getTypedArrayFromDType("int32",s*r);for(let d=0;d<s;d++){let p=d*a,h=t.subarray(p,p+a),f=new Array(h.length);h.forEach((w,y)=>f[y]={value:w,index:y}),r<f.length&&(ire(f,r),f=f.slice(0,r)),o&&f.sort(tb);let m=d*r,g=l.subarray(m,m+r),v=c.subarray(m,m+r);for(let w=0;w<r;w++)g[w]=f[w].value,v[w]=f[w].index}let u=n.slice();return u[u.length-1]=r,[ot(u,e,l),ot(u,"int32",c)]}function PE(t,n,e,r){let o=x.parseAxisParam(n,e)[0],i=[1,e[0],1];for(let f=0;f<o;f++)i[0]*=e[f];i[1]=e[o];for(let f=o+1;f<e.length;f++)i[2]*=e[f];let s=new Map,a=new Int32Array(e[o]),l=new gn(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let f=0;f<e[o];f++){let m;if(u)m=t[f].toString();else{let v=[];for(let w=0;w<i[0];w++)for(let y=0;y<i[2];y++)v.push(l.get(w,f,y));m=v.join(",")}let g=s.get(m);if(g!=null)a[f]=g;else{let v=s.size;s.set(m,v),a[f]=v,c.push(f)}}let d=i.slice();d[1]=s.size;let p=new gn(d,r);c.forEach((f,m)=>{for(let g=0;g<i[0];g++)for(let v=0;v<i[2];v++)p.set(l.get(g,f,v),g,m,v)});let h=e.slice();return h[o]=d[1],{outputValues:p.values,outputShape:h,indices:a}}var LE="4.22.0";gk("cpu",()=>new wE,1);var j7=_t("Elu",t=>t>=0?t:Math.exp(t)-1),sre={kernelName:"Elu",backendName:"cpu",kernelFunc:j7};function z7(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{alpha:i}=r;ke([o],"leakyRelu");let s=x.sizeFromShape(o.shape),a=e.data.get(o.dataId).values,l=x.getTypedArrayFromDType("float32",s);for(let c=0;c<a.length;c++)l[c]=a[c]<0?i*a[c]:a[c];return e.makeTensorInfo(o.shape,"float32",l)}var are={kernelName:Gd,backendName:"cpu",kernelFunc:z7};var $Re=on((t,n)=>t<0?n*t:t);function H7(t){let{inputs:n,backend:e}=t,{x:r,alpha:o}=n;ke([r,o],"prelu");let i=e.data.get(r.dataId).values,s=e.data.get(o.dataId).values,[a,l]=$Re(r.shape,o.shape,i,s,"float32");return e.makeTensorInfo(l,"float32",a)}var lre={kernelName:ep,backendName:"cpu",kernelFunc:H7};var U7=_t(tu,t=>Math.max(0,t)),cre={kernelName:tu,backendName:"cpu",kernelFunc:U7};var G7=_t(nu,t=>Math.min(Math.max(0,t),6)),ure={kernelName:nu,backendName:"cpu",kernelFunc:G7};function t2(t,n,e,r,o){if(e==="linear")return di({inputs:{x:n},backend:t});if(e==="relu")return U7({inputs:{x:n},backend:t});if(e==="elu")return j7({inputs:{x:n},backend:t});if(e==="relu6")return G7({inputs:{x:n},backend:t});if(e==="prelu")return H7({inputs:{x:n,alpha:r},backend:t});if(e==="leakyrelu")return z7({inputs:{x:n},backend:t,attrs:{alpha:o}});if(e==="sigmoid")return F7({inputs:{x:n},backend:t});throw new Error(`Activation ${e} has not been implemented for the CPU backend.`)}function sn(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{shape:i}=r,s=x.sizeFromShape(o.shape),a=x.inferFromImplicitShape(i,s),l=x.sizeFromShape(a);x.assert(s===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),e.incRef(o.dataId);let c=e.data.get(o.dataId);if(c.complexTensorInfos!=null){let u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}var dre={kernelName:np,backendName:"cpu",kernelFunc:sn};function W7(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i}=n,{transposeA:s,transposeB:a}=r;ke([o,i],"matMul");let l=o.shape.length,c=i.shape.length,u=s?o.shape[l-2]:o.shape[l-1],d=a?i.shape[c-1]:i.shape[c-2],p=s?o.shape[l-1]:o.shape[l-2],h=a?i.shape[c-2]:i.shape[c-1],f=o.shape.slice(0,-2),m=i.shape.slice(0,-2),g=x.sizeFromShape(f),v=x.sizeFromShape(m),y=os.assertAndGetBroadcastShape(o.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,h]);x.assert(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${o.shape} and ${i.shape} and transposeA=${s} and transposeB=${a} must match.`);let k=s?[g,u,p]:[g,p,u],_=a?[v,h,d]:[v,d,h],S=sn({inputs:{x:o},backend:e,attrs:{shape:k}}),E=sn({inputs:{x:i},backend:e,attrs:{shape:_}}),N=s?S.shape[1]:S.shape[2],B=s?S.shape[2]:S.shape[1],D=a?E.shape[1]:E.shape[2],P=Math.max(g,v),M=e.data.get(S.dataId).values,W=e.data.get(E.dataId).values,ie=x.computeStrides(S.shape),Z=x.computeStrides(E.shape),[X,G,H]=s?[ie[0],1,ie[1]]:[ie[0],ie[1],1],[V,K,pe]=a?[1,Z[1],Z[0]]:[Z[1],1,Z[0]],ce=B*D,se=ot([P,B,D],S.dtype),we=se.values,Ne=e.blockSize;for(let Ae=0;Ae<P;Ae++){let Ce=Ae%g,Je=Ae%v;for(let Ge=0;Ge<B;Ge+=Ne){let vt=Math.min(Ge+Ne,B);for(let kt=0;kt<D;kt+=Ne){let T=Math.min(kt+Ne,D);for(let ve=0;ve<N;ve+=Ne){let he=Math.min(ve+Ne,N);for(let q=Ge;q<vt;q++)for(let j=kt;j<T;j++){let oe=0;for(let xe=ve;xe<he;xe++){let Re=M[Ce*X+q*G+xe*H],ue=W[xe*V+j*K+Je*pe];oe+=Re*ue}we[Ae*ce+(q*D+j)]+=oe}}}}}return e.disposeIntermediateTensorInfo(S),e.disposeIntermediateTensorInfo(E),e.makeTensorInfo(y,se.dtype,se.values)}var pre={kernelName:Nd,backendName:"cpu",kernelFunc:W7};function VRe(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i,bias:s,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r,p,h,f,m=[];p=W7({inputs:{a:o,b:i},attrs:{transposeA:l,transposeB:c},backend:e}),s&&(h=Au({inputs:{a:p,b:s},backend:e}),m.push(p),p=h),u&&(f=t2(e,p,u,a,d),m.push(p),p=f);for(let v of m)e.disposeIntermediateTensorInfo(v);return p}var hre={kernelName:of,backendName:"cpu",kernelFunc:VRe};var jRe=_t(Nc,t=>Math.acos(t)),fre={kernelName:Nc,backendName:"cpu",kernelFunc:jRe};var zRe=_t(Ac,t=>Math.acosh(t)),mre={kernelName:Ac,backendName:"cpu",kernelFunc:zRe};function HRe(t){let{inputs:n,backend:e}=t,r=n;ke(n,"addN");let o=r.map(a=>e.data.get(a.dataId).values),i=ot(r[0].shape,r[0].dtype),s=i.values;for(let a=0;a<r.length;a++){let l=o[a];for(let c=0;c<s.length;c++)s[c]+=l[c]}return e.makeTensorInfo(i.shape,i.dtype,i.values)}var gre={kernelName:Sd,backendName:"cpu",kernelFunc:HRe};function URe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;ke(o,"all");let a=x.parseAxisParam(i,o.shape),l=a,c=O.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=hr({inputs:{x:o},backend:e,attrs:{perm:c}}),l=O.getInnerMostAxes(l.length,o.shape.length)),O.assertAxesAreInnerMostDims("all",l,u.shape.length);let[d,p]=O.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),f=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),m=e.data.get(u.dataId).values;for(let v=0;v<f.length;++v){let w=v*h,y=m[w];for(let k=0;k<h;++k){let _=m[w+k];y=y&&_}f[v]=y}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(d,u.dtype,f);if(s){let v=O.expandShapeToKeepDim(d,a),w=sn({inputs:{x:g},backend:e,attrs:{shape:v}});return e.disposeIntermediateTensorInfo(g),w}return g}var vre={kernelName:"All",backendName:"cpu",kernelFunc:URe};function GRe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;ke(o,"any");let a=x.parseAxisParam(i,o.shape),l=a,c=O.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=hr({inputs:{x:o},backend:e,attrs:{perm:c}}),l=O.getInnerMostAxes(l.length,o.shape.length)),O.assertAxesAreInnerMostDims("any",l,u.shape.length);let[d,p]=O.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),f=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),m=e.data.get(u.dataId).values;for(let v=0;v<f.length;++v){let w=v*h,y=m[w];for(let k=0;k<h;++k){let _=m[w+k];y=y||_}f[v]=y}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(d,u.dtype,f);if(s){let v=O.expandShapeToKeepDim(d,a),w=sn({inputs:{x:g},backend:e,attrs:{shape:v}});return e.disposeIntermediateTensorInfo(g),w}return g}var wre={kernelName:"Any",backendName:"cpu",kernelFunc:GRe};function WRe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r;ke(o,"argMax");let s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=hr({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],O.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[u,d]=O.computeOutAndReduceShapes(l.shape,s),p=x.sizeFromShape(u),h=x.makeZerosTypedArray(p,"int32"),f=x.sizeFromShape(d),m=e.data.get(l.dataId).values;for(let g=0;g<h.length;++g){let v=g*f,w=m[v],y=0;for(let k=0;k<f;++k){let _=m[v+k];_>w&&(w=_,y=k)}h[g]=y}return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),e.makeTensorInfo(u,"int32",h)}var yre={kernelName:Td,backendName:"cpu",kernelFunc:WRe};function qRe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r;ke(o,"argMin");let s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=hr({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],O.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[u,d]=O.computeOutAndReduceShapes(l.shape,s),p=x.sizeFromShape(u),h=x.makeZerosTypedArray(p,"int32"),f=x.sizeFromShape(d),m=e.data.get(l.dataId).values;for(let g=0;g<h.length;++g){let v=g*f,w=m[v],y=0;for(let k=0;k<f;++k){let _=m[v+k];_<w&&(w=_,y=k)}h[g]=y}return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),e.makeTensorInfo(u,"int32",h)}var xre={kernelName:Ed,backendName:"cpu",kernelFunc:qRe};var KRe=_t(Oc,t=>Math.asin(t)),kre={kernelName:Oc,backendName:"cpu",kernelFunc:KRe};var ZRe=_t(Fc,t=>Math.asinh(t)),_re={kernelName:Fc,backendName:"cpu",kernelFunc:ZRe};var XRe=_t(Bc,t=>Math.atan(t)),bre={kernelName:Bc,backendName:"cpu",kernelFunc:XRe};var YRe=on((t,n)=>Math.atan2(t,n)),QRe=dn(Lc,YRe),Cre={kernelName:Lc,backendName:"cpu",kernelFunc:QRe};var JRe=_t(Pc,t=>Math.atanh(t)),Mre={kernelName:Pc,backendName:"cpu",kernelFunc:JRe};function fw(t,n,e,r,o,i){let s=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,u=o.effectiveFilterHeight,d=o.effectiveFilterWidth,p=o.padInfo.top,h=o.padInfo.left,f=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=ot(o.outShape,e),g=m.values,v=o.outShape[1]*o.outShape[2]*o.outShape[3],w=o.outShape[2]*o.outShape[3],y=o.outShape[3];for(let k=0;k<o.batchSize;++k){let _=k*v,S=k*r[0];for(let E=0;E<o.inChannels;++E)for(let N=0;N<o.outHeight;++N){let B=N*s-p,D=Math.max(0,B),P=Math.min(o.inHeight,u+B),M=_+N*w;for(let W=0;W<o.outWidth;++W){let ie=W*a-h,Z=Math.max(0,ie),X=Math.min(o.inWidth,d+ie),G=f,H=0,V=0;for(let pe=D;pe<P;pe+=l){let ce=S+pe*r[1];for(let se=Z;se<X;se+=c){let we=ce+se*r[2],Ne=t[we+E];i==="max"&&Ne>G?G=Ne:i==="avg"&&(H+=Ne,V++)}if(isNaN(G))break}let K=M+W*y+E;g[K]=i==="avg"?H/V:G}}}return m}function $E(t,n,e,r,o=!1,i=!1){let s=ot(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,f=r.padInfo.left,m=ot(n,e,t);for(let g=0;g<r.batchSize;++g)for(let v=0;v<r.inChannels;++v)for(let w=0;w<r.outHeight;++w){let y=w*a-h,k=y;for(;k<0;)k+=c;let _=Math.min(r.inHeight,d+y);for(let S=0;S<r.outWidth;++S){let E=S*l-f,N=E;for(;N<0;)N+=u;let B=Math.min(r.inWidth,p+E),D=Number.NEGATIVE_INFINITY,P=-1;for(let M=k;M<_;M+=c){let W=M-y;for(let ie=N;ie<B;ie+=u){let Z=ie-E,X=m.get(g,M,ie,v);X>D&&(D=X,o?P=i?((g*r.inHeight+M)*r.inWidth+ie)*r.inChannels+v:(M*r.inWidth+ie)*r.inChannels+v:P=W*p+Z)}}s.set(P,g,w,S,v)}}return s}function VE(t,n,e,r,o,i){let s=o.strideDepth,a=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,u=o.dilationHeight,d=o.dilationWidth,p=o.effectiveFilterDepth,h=o.effectiveFilterHeight,f=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,v=o.padInfo.left,w=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=ot(o.outShape,e),k=y.values,_=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],S=o.outShape[2]*o.outShape[3]*o.outShape[4],E=o.outShape[3]*o.outShape[4],N=o.outShape[4];for(let B=0;B<o.batchSize;++B){let D=B*_,P=B*r[0];for(let M=0;M<o.inChannels;++M)for(let W=0;W<o.outDepth;++W){let ie=W*s-m,Z=ie;for(;Z<0;)Z+=c;let X=Math.min(o.inDepth,p+ie),G=D+W*S;for(let H=0;H<o.outHeight;++H){let V=H*a-g,K=V;for(;K<0;)K+=u;let pe=Math.min(o.inHeight,h+V),ce=G+H*E;for(let se=0;se<o.outWidth;++se){let we=se*l-v,Ne=we;for(;Ne<0;)Ne+=d;let Ae=Math.min(o.inWidth,f+we),Ce=ce+se*N,Je=w,Ge=0,vt=0;for(let T=Z;T<X;T+=c){let ve=P+T*r[1];for(let he=K;he<pe;he+=u){let q=ve+he*r[2];for(let j=Ne;j<Ae;j+=d){let oe=q+j*r[3],xe=t[oe+M];if(i==="max"&&xe>Je?Je=xe:i==="avg"&&(Ge+=xe,vt++),isNaN(Je))break}if(isNaN(Je))break}if(isNaN(Je))break}let kt=Ce+M;k[kt]=i==="avg"?Ge/Math.max(vt,1):Je}}}}return y}function Sre(t,n){let e=ot(n.outShape,"int32"),r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,s=n.dilationDepth,a=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterDepth,u=n.effectiveFilterHeight,d=n.effectiveFilterWidth,p=n.padInfo.front,h=n.padInfo.top,f=n.padInfo.left;for(let m=0;m<n.batchSize;++m)for(let g=0;g<n.inChannels;++g)for(let v=0;v<n.outDepth;++v){let w=v*r-p,y=w;for(;y<0;)y+=s;let k=Math.min(n.inDepth,c+w);for(let _=0;_<n.outHeight;++_){let S=_*o-h,E=S;for(;E<0;)E+=a;let N=Math.min(n.inHeight,u+S);for(let B=0;B<n.outWidth;++B){let D=B*i-f,P=D;for(;P<0;)P+=l;let M=Math.min(n.inWidth,d+D),W=Number.NEGATIVE_INFINITY,ie=-1;for(let Z=y;Z<k;Z+=s){let X=Z-w;for(let G=E;G<N;G+=a){let H=G-S;for(let V=P;V<M;V+=l){let K=V-D,pe=t.get(m,Z,G,V,g);pe>=W&&(W=pe,ie=X*u*d+H*u+K)}}}e.set(ie,m,v,_,B,g)}}}return e}function e6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;ke(o,"avgPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l),d;if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))d=di({inputs:{x:o},backend:e});else{let p=e.data.get(o.dataId).values,h=x.computeStrides(o.shape),f=fw(p,o.shape,o.dtype,h,u,"avg");d=e.makeTensorInfo(u.outShape,o.dtype,f.values)}return d}var Tre={kernelName:Id,backendName:"cpu",kernelFunc:e6e};function t6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r;ke(o,"avgPool3d");let u=O.computePool3DInfo(o.shape,i,s,1,a,l,c),d=e.data.get(o.dataId).values,p=VE(d,o.shape,o.dtype,x.computeStrides(o.shape),u,"avg");return e.makeTensorInfo(p.shape,"float32",p.values)}var Ere={kernelName:Dd,backendName:"cpu",kernelFunc:t6e};function n6e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=r;ke([o,i],"avgPool3DGrad");let u=O.computePool3DInfo(i.shape,s,a,1,l,c),d=u.strideDepth,p=u.strideHeight,h=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,v=u.dilationDepth,w=u.dilationHeight,y=u.dilationWidth,k=u.effectiveFilterDepth,_=u.effectiveFilterHeight,S=u.effectiveFilterWidth,E=k-1-u.padInfo.front,N=S-1-u.padInfo.left,B=_-1-u.padInfo.top,D=ot(i.shape,"float32"),P=1/(f*m*g),M=e.bufferSync(o);for(let W=0;W<u.batchSize;++W)for(let ie=0;ie<u.inChannels;++ie)for(let Z=0;Z<u.inDepth;++Z)for(let X=0;X<u.inHeight;++X)for(let G=0;G<u.inWidth;++G){let H=Z-E,V=X-B,K=G-N,pe=0;for(let ce=0;ce<k;ce+=v){let se=(H+ce)/d;if(!(se<0||se>=u.outDepth||Math.floor(se)!==se))for(let we=0;we<_;we+=w){let Ne=(V+we)/p;if(!(Ne<0||Ne>=u.outHeight||Math.floor(Ne)!==Ne))for(let Ae=0;Ae<S;Ae+=y){let Ce=(K+Ae)/h;if(Ce<0||Ce>=u.outWidth||Math.floor(Ce)!==Ce)continue;let Je=M.get(W,se,Ne,Ce,ie);pe+=Je}}}D.set(pe*P,W,Z,X,G,ie)}return e.makeTensorInfo(D.shape,D.dtype,D.values)}var Ire={kernelName:Jm,backendName:"cpu",kernelFunc:n6e};function r6e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i;ke([o,i],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=r,u=O.computePool2DInfo(s.shape,a,l,1,c),d=u.strideHeight,p=u.strideWidth,h=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,v=u.effectiveFilterHeight,w=u.effectiveFilterWidth,y=w-1-u.padInfo.left,k=v-1-u.padInfo.top,_=ot(s.shape,"float32"),S=1/(h*f),E=e.data.get(o.dataId).values,N=ot(o.shape,"float32",E);for(let B=0;B<u.batchSize;++B)for(let D=0;D<u.inChannels;++D)for(let P=0;P<u.inHeight;++P)for(let M=0;M<u.inWidth;++M){let W=P-k,ie=M-y,Z=0;for(let X=0;X<v;X+=m){let G=(W+X)/d;if(!(G<0||G>=u.outHeight||Math.floor(G)!==G))for(let H=0;H<w;H+=g){let V=(ie+H)/p;if(V<0||V>=u.outWidth||Math.floor(V)!==V)continue;let K=N.get(B,G,V,D);Z+=K}}_.set(Z*S,B,P,M,D)}return e.makeTensorInfo(_.shape,_.dtype,_.values)}var Dre={kernelName:Qm,backendName:"cpu",kernelFunc:r6e};function o6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,scale:i,offset:s,mean:a,variance:l}=n;x.assert(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),x.assert(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),x.assert(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),ke([o,a,l,i,s],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);let u=e.data.get(o.dataId).values,d=e.data.get(a.dataId).values,p=e.data.get(l.dataId).values,h=i?e.data.get(i.dataId).values:new Float32Array([1]),f=s?e.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,v=h.length,w=p.length,y=d.length,k=0,_=0,S=0,E=0;for(let N=0;N<u.length;++N)m[N]=f[k++]+(u[N]-d[_++])*h[S++]/Math.sqrt(p[E++]+c),k>=g&&(k=0),_>=y&&(_=0),S>=v&&(S=0),E>=w&&(E=0);return e.makeTensorInfo(o.shape,o.dtype,m)}var Nre={kernelName:Hd,backendName:"cpu",kernelFunc:o6e};function i6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,crops:s}=r;ke([o],"batchToSpaceND");let a=i.reduce((v,w)=>v*w),l=O.getReshaped(o.shape,i,a),c=O.getPermuted(l.length,i.length),u=O.getReshapedPermuted(o.shape,i,a),d=O.getSliceBeginCoords(s,i.length),p=O.getSliceSize(u,s,i.length),h=sn({inputs:{x:o},backend:e,attrs:{shape:l}}),f=hr({inputs:{x:h},backend:e,attrs:{perm:c}}),m=sn({inputs:{x:f},backend:e,attrs:{shape:u}}),g=Ja({inputs:{x:m},backend:e,attrs:{begin:d,size:p}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),g}var Are={kernelName:Ad,backendName:"cpu",kernelFunc:i6e};function s6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s}=r,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,c=dw(a,l,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,c)}var Rre={kernelName:e0,backendName:"cpu",kernelFunc:s6e};function a6e(t){let{inputs:n,backend:e}=t,{s0:r,s1:o}=n,i=e.data.get(r.dataId).values,s=e.data.get(o.dataId).values,a=O.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var Ore={kernelName:t0,backendName:"cpu",kernelFunc:a6e};var l6e=_t(Vc,(t,n)=>{let e=n;return t>e.clipValueMax?e.clipValueMax:t<e.clipValueMin?e.clipValueMin:t}),Fre={kernelName:Vc,backendName:"cpu",kernelFunc:l6e};var c6e=t=>{let{x:n}=t.inputs,e=t.backend,r=new Float32Array(x.sizeFromShape(n.shape)),o=e.data.get(n.dataId),i=o.complexTensorInfos.real,s=o.complexTensorInfos.imag,a=e.data.get(i.dataId).values,l=e.data.get(s.dataId).values;for(let c=0;c<a.length;c++){let u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return e.makeOutput(r,n.shape,"float32")},Bre={kernelName:Rd,backendName:"cpu",kernelFunc:c6e};function Ru(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.data.get(r.dataId).complexTensorInfos.imag,i=e.data.get(o.dataId).values;return e.makeTensorInfo(o.shape,o.dtype,i)}var Pre={kernelName:y0,backendName:"cpu",kernelFunc:Ru};function Bf(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r,i=x.parseAxisParam(o,n[0].shape)[0],s=n.map(m=>m.shape);O.assertParamsConsistent(s,i);let a=O.computeOutShape(n.map(m=>m.shape),i);if(x.sizeFromShape(a)===0)return e.makeTensorInfo(a,n[0].dtype,[]);let l=n.filter(m=>x.sizeFromShape(m.shape)>0);if(l.length===1)return di({inputs:{x:l[0]},backend:e});if(l[0].dtype==="complex64"){let m=l.map(k=>Xa({inputs:{input:k},backend:e})),g=l.map(k=>Ru({inputs:{input:k},backend:e})),v=Bf({inputs:m,backend:e,attrs:{axis:i}}),w=Bf({inputs:g,backend:e,attrs:{axis:i}}),y=vo({inputs:{real:v,imag:w},backend:e});return m.forEach(k=>e.disposeIntermediateTensorInfo(k)),g.forEach(k=>e.disposeIntermediateTensorInfo(k)),e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(w),y}let c=l.map(m=>{let v=[-1,x.sizeFromShape(m.shape.slice(i))];return sn({inputs:{x:m},backend:e,attrs:{shape:v}})}),u=c.map(m=>({vals:e.data.get(m.dataId).values,shape:m.shape}));a=O.computeOutShape(c.map(m=>m.shape),1);let d=c[0].shape[0]===1,p=xE(u,a,n[0].dtype,d),h=O.computeOutShape(l.map(m=>m.shape),i),f=e.makeTensorInfo(h,n[0].dtype,p);return c.forEach(m=>e.disposeIntermediateTensorInfo(m)),f}var Lre={kernelName:Od,backendName:"cpu",kernelFunc:Bf};function q7(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;ke([o,i],"conv2d");let d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,i.shape,s,c,a,u,!1,d),h=p.filterHeight,f=p.filterWidth,m=p.dilationHeight,g=p.dilationWidth,v=p.padInfo.left,w=p.padInfo.top,y=p.dataFormat==="channelsLast",k=new gn(p.outShape,o.dtype),_=x.computeStrides(o.shape),S=x.computeStrides(i.shape),E=_[0],N=y?_[1]:_[2],B=y?_[2]:1,D=y?1:_[1],P=k.strides[0],M=y?k.strides[1]:k.strides[2],W=y?k.strides[2]:1,ie=y?1:k.strides[1],Z=e.data.get(o.dataId).values,X=e.data.get(i.dataId).values,G=k.values;for(let H=0;H<p.batchSize;++H){let V=H*E,K=H*P;for(let pe=0;pe<p.outHeight;++pe){let ce=K+pe*M,se=pe*p.strideHeight-w;for(let we=0;we<h;++we){let Ne=se+we*m;if(Ne<0||Ne>=p.inHeight)continue;let Ae=we*S[0],Ce=V+Ne*N;for(let Je=0;Je<p.outWidth;++Je){let Ge=ce+Je*W,vt=Je*p.strideWidth-v;for(let kt=0;kt<f;++kt){let T=vt+kt*g;if(T<0||T>=p.inWidth)continue;let ve=Ae+kt*S[1],he=Ce+T*B,q=ve;for(let j=0;j<p.inChannels;++j){let oe=Z[he+j*D];for(let xe=0;xe<p.outChannels;++xe)G[Ge+xe*ie]+=oe*X[q+xe];q+=p.outChannels}}}}}}return e.makeTensorInfo(k.shape,k.dtype,G)}var $re={kernelName:Fd,backendName:"cpu",kernelFunc:q7};function u6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;ke([o,i],"conv2dBackpropFilter");let d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,u,s,1,a,c,!1,d),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:g}=p,v=p.dataFormat==="channelsLast",w=new gn(p.filterShape,"float32"),y=p.padInfo.left,k=p.padInfo.top,_=e.data.get(o.dataId).values,S=e.data.get(i.dataId).values,E=new gn(o.shape,o.dtype,_),N=new gn(i.shape,i.dtype,S);for(let B=0;B<m;++B){let D=Math.max(0,Math.ceil((k-B)/h)),P=Math.min(p.outHeight,(p.inHeight+k-B)/h);for(let M=0;M<g;++M){let W=Math.max(0,Math.ceil((y-M)/f)),ie=Math.min(p.outWidth,(p.inWidth+y-M)/f);for(let Z=0;Z<p.inChannels;++Z)for(let X=0;X<p.outChannels;++X){let G=0;for(let H=0;H<p.batchSize;++H)for(let V=D;V<P;++V){let K=B+V*h-k;for(let pe=W;pe<ie;++pe){let ce=M+pe*f-y;v?G+=E.get(H,K,ce,Z)*N.get(H,V,pe,X):G+=E.get(H,Z,K,ce)*N.get(H,X,V,pe)}}w.set(G,B,M,Z,X)}}}return e.makeTensorInfo(w.shape,w.dtype,w.values)}var Vre={kernelName:r0,backendName:"cpu",kernelFunc:u6e};function d6e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;ke([o,i],"conv2dBackpropInput");let d=x.computeStrides(i.shape),p=x.computeStrides(o.shape),h=O.convertConv2DDataFormat(c),f=O.computeConv2DInfo(s,i.shape,a,1,l,u,!1,h),m=new gn(f.inShape,"float32"),g=m.values,v=e.data.get(o.dataId).values,w=e.data.get(i.dataId).values,[y,k,_]=d,{batchSize:S,filterHeight:E,filterWidth:N,inChannels:B,inHeight:D,inWidth:P,outChannels:M,outHeight:W,outWidth:ie,strideHeight:Z,strideWidth:X}=f;h=f.dataFormat;let G=E-1-f.padInfo.top,H=N-1-f.padInfo.left,V=h==="channelsLast",K=m.strides[0],pe=V?m.strides[1]:m.strides[2],ce=V?m.strides[2]:1,se=V?1:m.strides[1],we=p[0],Ne=V?p[1]:p[2],Ae=V?p[2]:1,Ce=V?1:p[1];for(let Je=0;Je<S;++Je)for(let Ge=0;Ge<B;++Ge)for(let vt=0;vt<D;++vt){let kt=vt-G,T=Math.max(0,Math.ceil(kt/Z)),ve=Math.min(W,(E+kt)/Z);for(let he=0;he<P;++he){let q=he-H,j=Math.max(0,Math.ceil(q/X)),oe=Math.min(ie,(N+q)/X),xe=0;for(let ue=T;ue<ve;++ue){let ze=ue*Z-kt;for(let et=j;et<oe;++et){let qe=et*X-q,dt=we*Je+Ne*ue+Ae*et,yn=y*(E-1-ze)+k*(N-1-qe)+_*Ge;for(let an=0;an<M;++an){let ao=v[dt+Ce*an],vs=w[yn+an];xe+=ao*vs}}}let Re=K*Je+pe*vt+ce*he+se*Ge;g[Re]=xe}}return e.makeTensorInfo(m.shape,m.dtype,m.values)}var jre={kernelName:Bd,backendName:"cpu",kernelFunc:d6e};function p6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l}=r;ke([o,i],"conv3d");let c=O.computeConv3DInfo(o.shape,i.shape,s,l,a),{filterDepth:u,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:f,dilationWidth:m,padInfo:g}=c,v=g.front,w=g.left,y=g.top,k=new gn(c.outShape,o.dtype),_=e.data.get(o.dataId).values,S=e.data.get(i.dataId).values,E=k.values,N=x.computeStrides(o.shape),B=x.computeStrides(i.shape);for(let D=0;D<c.batchSize;++D){let P=D*N[0],M=D*k.strides[0];for(let W=0;W<c.outDepth;++W){let ie=M+W*k.strides[1],Z=W*c.strideDepth-v;for(let X=0;X<u;++X){let G=Z+X*h;if(G<0||G>=c.inDepth)continue;let H=X*B[0],V=P+G*N[1];for(let K=0;K<c.outHeight;++K){let pe=ie+K*k.strides[2],ce=K*c.strideHeight-y;for(let se=0;se<d;++se){let we=ce+se*f;if(we<0||we>=c.inHeight)continue;let Ne=H+se*B[1],Ae=V+we*N[2];for(let Ce=0;Ce<c.outWidth;++Ce){let Je=pe+Ce*c.outChannels,Ge=Ce*c.strideWidth-w;for(let vt=0;vt<p;++vt){let kt=Ge+vt*m;if(kt<0||kt>=c.inWidth)continue;let T=Ne+vt*B[2],ve=Ae+kt*c.inChannels,he=T;for(let q=0;q<c.inChannels;++q){let j=_[ve+q];for(let oe=0;oe<c.outChannels;++oe)E[Je+oe]+=j*S[he+oe];he+=c.outChannels}}}}}}}}return e.makeTensorInfo(k.shape,k.dtype,k.values)}var zre={kernelName:Pd,backendName:"cpu",kernelFunc:p6e};function h6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,filterShape:l}=r;ke([o,i],"conv3dBackpropFilterV2");let c=x.computeStrides(o.shape),u=x.computeStrides(i.shape),d=O.computeConv3DInfo(o.shape,l,s,1,a),p=d.strideDepth,h=d.strideHeight,f=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,w=new gn(d.filterShape,"float32"),y=w.values,[k,_,S,E]=w.strides,N=e.data.get(i.dataId).values,[B,D,P,M]=u,W=e.data.get(o.dataId).values,[ie,Z,X,G]=c,H=d.padInfo.front,V=d.padInfo.left,K=d.padInfo.top;for(let pe=0;pe<m;++pe){let ce=Math.max(0,Math.ceil((H-pe)/p)),se=Math.min(d.outDepth,(d.inDepth+H-pe)/p),we=pe*k;for(let Ne=0;Ne<g;++Ne){let Ae=Math.max(0,Math.ceil((K-Ne)/h)),Ce=Math.min(d.outHeight,(d.inHeight+K-Ne)/h),Je=Ne*_+we;for(let Ge=0;Ge<v;++Ge){let vt=Math.max(0,Math.ceil((V-Ge)/f)),kt=Math.min(d.outWidth,(d.inWidth+V-Ge)/f),T=Ge*S+Je;for(let ve=0;ve<d.inChannels;++ve){let he=ve*E+T;for(let q=0;q<d.outChannels;++q){let j=0;for(let oe=0;oe<d.batchSize;++oe){let xe=oe*ie,Re=oe*B;for(let ue=ce;ue<se;++ue){let et=(pe+ue*p-H)*Z+xe,qe=ue*D+Re;for(let dt=Ae;dt<Ce;++dt){let an=(Ne+dt*h-K)*X+et,ao=dt*P+qe;for(let vs=vt;vs<kt;++vs){let qu=(Ge+vs*f-V)*G+an,Mr=vs*M+ao;j+=W[qu+ve]*N[Mr+q]}}}}y[he+q]=j}}}}}return e.makeTensorInfo(w.shape,w.dtype,w.values)}var Hre={kernelName:o0,backendName:"cpu",kernelFunc:h6e};function f6e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{pad:s,strides:a,inputShape:l}=r;ke([o],"conv3dBackpropInputV2");let c=x.computeStrides(o.shape),u=x.computeStrides(i.shape),d=O.computeConv3DInfo(l,i.shape,a,1,s),p=new gn(d.inShape,"float32"),h=p.values,[f,m,g,v]=p.strides,w=e.data.get(o.dataId).values,[y,k,_,S]=c,E=e.data.get(i.dataId).values,[N,B,D,P]=u,{batchSize:M,filterDepth:W,filterHeight:ie,filterWidth:Z,inChannels:X,inDepth:G,inHeight:H,inWidth:V,outChannels:K,outDepth:pe,outHeight:ce,outWidth:se,strideDepth:we,strideHeight:Ne,strideWidth:Ae}=d,Ce=W-1-d.padInfo.front,Je=ie-1-d.padInfo.top,Ge=Z-1-d.padInfo.left;for(let vt=0;vt<M;++vt)for(let kt=0;kt<X;++kt)for(let T=0;T<G;++T){let ve=T-Ce,he=Math.max(0,Math.ceil(ve/we)),q=Math.min(pe,(W+ve)/we);for(let j=0;j<H;++j){let oe=j-Je,xe=Math.max(0,Math.ceil(oe/Ne)),Re=Math.min(ce,(ie+oe)/Ne);for(let ue=0;ue<V;++ue){let ze=ue-Ge,et=Math.max(0,Math.ceil(ze/Ae)),qe=Math.min(se,(Z+ze)/Ae),dt=0;for(let yn=he;yn<q;++yn){let an=yn*we-ve;for(let ao=xe;ao<Re;++ao){let vs=ao*Ne-oe;for(let _i=et;_i<qe;++_i){let qu=_i*Ae-ze,Mr=y*vt+k*yn+_*ao+S*_i,R2=N*(W-1-an)+B*(ie-1-vs)+D*(Z-1-qu)+P*kt;for(let rh=0;rh<K;++rh){let rl=w[Mr+rh],EC=E[R2+rh];dt+=rl*EC}}}}h[f*vt+m*T+g*j+v*ue+kt]=dt}}}return e.makeTensorInfo(p.shape,p.dtype,p.values)}var Ure={kernelName:i0,backendName:"cpu",kernelFunc:f6e};var m6e=_t("Cos",t=>Math.cos(t)),Gre={kernelName:"Cos",backendName:"cpu",kernelFunc:m6e};var g6e=_t(jc,t=>Math.cosh(t)),Wre={kernelName:jc,backendName:"cpu",kernelFunc:g6e};function v6e(t){let{inputs:n,backend:e,attrs:r}=t,{image:o,boxes:i,boxInd:s}=n,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,p,h]=o.shape,f=i.shape[0],[m,g]=a,v=ot([f,m,g,h],"float32"),w=e.data.get(i.dataId).values,y=e.data.get(s.dataId).values,k=e.data.get(o.dataId).values,_=x.computeStrides(o.shape),S=x.computeStrides(v.shape);for(let E=0;E<f;E++){let N=E*4,B=w[N],D=w[N+1],P=w[N+2],M=w[N+3],W=y[E];if(W>=u)continue;let ie=m>1?(P-B)*(d-1)/(m-1):0,Z=g>1?(M-D)*(p-1)/(g-1):0;for(let X=0;X<m;X++){let G=m>1?B*(d-1)+X*ie:.5*(B+P)*(d-1);if(G<0||G>d-1){for(let H=0;H<g;H++)for(let V=0;V<h;V++){let K=V+H*S[2]+X*S[1]+E*S[0];v.values[K]=c}continue}if(l==="bilinear"){let H=Math.floor(G),V=Math.ceil(G),K=G-H;for(let pe=0;pe<g;pe++){let ce=g>1?D*(p-1)+pe*Z:.5*(D+M)*(p-1);if(ce<0||ce>p-1){for(let Ae=0;Ae<h;Ae++){let Ce=Ae+pe*S[2]+X*S[1]+E*S[0];v.values[Ce]=c}continue}let se=Math.floor(ce),we=Math.ceil(ce),Ne=ce-se;for(let Ae=0;Ae<h;Ae++){let Ce=Ae+se*_[2]+H*_[1]+W*_[0],Je=k[Ce];Ce=Ae+we*_[2]+H*_[1]+W*_[0];let Ge=k[Ce];Ce=Ae+se*_[2]+V*_[1]+W*_[0];let vt=k[Ce];Ce=Ae+we*_[2]+V*_[1]+W*_[0];let kt=k[Ce],T=Je+(Ge-Je)*Ne,ve=vt+(kt-vt)*Ne;Ce=Ae+pe*S[2]+X*S[1]+E*S[0],v.values[Ce]=T+(ve-T)*K}}}else for(let H=0;H<g;++H){let V=g>1?D*(p-1)+H*Z:.5*(D+M)*(p-1);if(V<0||V>p-1){for(let ce=0;ce<h;ce++){let se=ce+H*S[2]+X*S[1]+E*S[0];v.values[se]=c}continue}let K=Math.round(V),pe=Math.round(G);for(let ce=0;ce<h;ce++){let se=ce+K*_[2]+pe*_[1]+W*_[0],we=ce+H*S[2]+X*S[1]+E*S[0];v.values[we]=k[se]}}}}return e.makeTensorInfo(v.shape,v.dtype,v.values)}var qre={kernelName:a0,backendName:"cpu",kernelFunc:v6e};function w6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;ke(o,"cumprod");let l=O.getAxesPermutation([i],o.shape.length),c=o;l!=null&&(c=hr({inputs:{x:o},backend:e,attrs:{perm:l}}));let u=O.getInnerMostAxes(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let d=Lr(c.dtype,"int32"),p=x.makeOnesTypedArray(x.sizeFromShape(c.shape),d),h=e.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=a?(v,w)=>v+f-w-1:(v,w)=>v+w;for(let v=0;v<h.length;v+=f)for(let w=0;w<f;w++){let y=m(v,w);if(w===0)p[y]=s?1:h[y];else{let k=m(v,w-1);p[y]=s?h[k]*p[k]:h[y]*p[k]}}let g=e.makeTensorInfo(c.shape,d,p);if(l!=null){let v=O.getUndoAxesPermutation(l),w=hr({inputs:{x:g},backend:e,attrs:{perm:v}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(c),w}return g}var Kre={kernelName:s0,backendName:"cpu",kernelFunc:w6e};function y6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;ke(o,"cumsum");let l=O.getAxesPermutation([i],o.shape.length),c=o;l!=null&&(c=hr({inputs:{x:o},backend:e,attrs:{perm:l}}));let u=O.getInnerMostAxes(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let d=Lr(c.dtype,"int32"),p=x.makeZerosTypedArray(x.sizeFromShape(c.shape),d),h=e.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=a?(v,w)=>v+f-w-1:(v,w)=>v+w;for(let v=0;v<h.length;v+=f)for(let w=0;w<f;w++){let y=m(v,w);if(w===0)p[y]=s?0:h[y];else{let k=m(v,w-1);p[y]=s?h[k]+p[k]:h[y]+p[k]}}let g=e.makeTensorInfo(c.shape,d,p);if(l!=null){let v=O.getUndoAxesPermutation(l),w=hr({inputs:{x:g},backend:e,attrs:{perm:v}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(c),w}return g}var Zre={kernelName:Ld,backendName:"cpu",kernelFunc:y6e};function x6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s,binaryOutput:a}=r;if(o.shape.length===1){let l=e.data.get(o.dataId).values,c=e.data.get(i.dataId).values,u=dw(l,c,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,u)}else if(o.shape.length===2){let l=e.bufferSync(o),c=e.bufferSync(i),u=yE(l,c,s,a);return e.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var Xre={kernelName:l0,backendName:"cpu",kernelFunc:x6e};function k6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockSize:i,dataFormat:s}=r;x.assert(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);let a=o.shape[0],l=o.shape[1],c=o.shape[2],u=o.shape[3],d=l*i,p=c*i,h=u/(i*i),f=e.data.get(o.dataId).values,m=new Float32Array(a*d*p*h),g=0;for(let v=0;v<a;++v)for(let w=0;w<d;++w){let y=Math.floor(w/i),k=w%i;for(let _=0;_<p;++_){let S=Math.floor(_/i),E=_%i,N=(k*i+E)*h;for(let B=0;B<h;++B){let P=B+N+u*(S+c*(y+l*v));m[g++]=f[P]}}}return e.makeTensorInfo([a,d,p,h],o.dtype,m)}var Yre={kernelName:c0,backendName:"cpu",kernelFunc:k6e};function K7(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=r;ke([o,i],"depthwiseConv2DNative");let u=x.computeStrides(o.shape),d=x.computeStrides(i.shape),p=l;p==null&&(p=[1,1]),x.assert(O.eitherStridesOrDilationsAreOne(s,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${p}'`);let h=O.computeConv2DInfo(o.shape,i.shape,s,p,a,c,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:w}=h,y=w.left,k=w.top,_=h.outChannels/h.inChannels,S=new gn(h.outShape,o.dtype),E=e.data.get(o.dataId).values,N=e.data.get(i.dataId).values,B=S.values;for(let D=0;D<h.batchSize;++D){let P=D*u[0],M=D*S.strides[0];for(let W=0;W<h.outHeight;++W){let ie=M+W*S.strides[1],Z=W*h.strideHeight-k;for(let X=0;X<f;++X){let G=Z+X*g;if(G<0||G>=h.inHeight)continue;let H=X*d[0],V=P+G*u[1];for(let K=0;K<h.outWidth;++K){let pe=ie+K*S.strides[2],ce=K*h.strideWidth-y;for(let se=0;se<m;++se){let we=ce+se*v;if(we<0||we>=h.inWidth)continue;let Ne=H+se*d[1],Ae=V+we*h.inChannels,Ce=pe,Je=Ne;for(let Ge=0;Ge<h.inChannels;++Ge){let vt=E[Ae+Ge];for(let kt=0;kt<_;++kt)B[Ce+kt]+=vt*N[Je+kt];Ce+=_,Je+=_}}}}}}return e.makeTensorInfo(S.shape,S.dtype,S.values)}var Qre={kernelName:$d,backendName:"cpu",kernelFunc:K7};function _6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;ke([o,i],"depthwiseConv2dNativeBackpropFilter");let d=O.computeConv2DInfo(o.shape,u,s,a,l,c,!0),{strideHeight:p,strideWidth:h,filterHeight:f,filterWidth:m}=d,g=new gn(d.filterShape,"float32"),v=d.padInfo.left,w=d.padInfo.top,y=d.outChannels/d.inChannels,k=e.data.get(o.dataId).values,_=new gn(o.shape,o.dtype,k),S=e.data.get(i.dataId).values,E=new gn(i.shape,i.dtype,S);for(let N=0;N<f;++N){let B=Math.max(0,Math.ceil((w-N)/p)),D=Math.min(d.outHeight,(d.inHeight+w-N)/p);for(let P=0;P<m;++P){let M=Math.max(0,Math.ceil((v-P)/h)),W=Math.min(d.outWidth,(d.inWidth+v-P)/h);for(let ie=0;ie<d.outChannels;++ie){let Z=Math.trunc(ie/y),X=ie%y,G=0;for(let H=0;H<d.batchSize;++H)for(let V=B;V<D;++V){let K=N+V*p-w;for(let pe=M;pe<W;++pe){let ce=P+pe*h-v;G+=_.get(H,K,ce,Z)*E.get(H,V,pe,ie)}}g.set(G,N,P,Z,X)}}}return e.makeTensorInfo(g.shape,g.dtype,g.values)}var Jre={kernelName:u0,backendName:"cpu",kernelFunc:_6e};function b6e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;ke([o,i],"depthwiseConv2DNativeBackpropInput");let d=x.computeStrides(o.shape),p=x.computeStrides(i.shape),h=O.computeConv2DInfo(u,i.shape,s,a,l,c,!0),f=new gn(h.inShape,"float32"),m=f.values,[g,v,w]=f.strides,y=e.data.get(o.dataId).values,[k,_,S]=d,E=e.data.get(i.dataId).values,[N,B,D]=p,{batchSize:P,filterHeight:M,filterWidth:W,inChannels:ie,inHeight:Z,inWidth:X,outChannels:G,outHeight:H,outWidth:V,strideHeight:K,strideWidth:pe}=h,ce=M-1-h.padInfo.top,se=W-1-h.padInfo.left,we=G/ie;for(let Ne=0;Ne<P;++Ne)for(let Ae=0;Ae<ie;++Ae)for(let Ce=0;Ce<Z;++Ce){let Je=Ce-ce,Ge=Math.max(0,Math.ceil(Je/K)),vt=Math.min(H,(M+Je)/K);for(let kt=0;kt<X;++kt){let T=kt-se,ve=Math.max(0,Math.ceil(T/pe)),he=Math.min(V,(W+T)/pe),q=0;for(let j=Ge;j<vt;++j){let oe=j*K-Je;for(let xe=ve;xe<he;++xe){let Re=xe*pe-T,ue=k*Ne+_*j+S*xe,ze=N*(M-1-oe)+B*(W-1-Re)+D*Ae;for(let et=0;et<we;++et){let qe=Ae*we+et,dt=y[ue+qe],yn=E[ze+et];q+=dt*yn}}}m[g*Ne+v*Ce+w*kt+Ae]=q}}return e.makeTensorInfo(f.shape,f.dtype,f.values)}var eoe={kernelName:d0,backendName:"cpu",kernelFunc:b6e};function C6e(t){let{inputs:n,backend:e}=t,{x:r}=n,o=x.sizeFromShape(r.shape),i=e.data.get(r.dataId).values,s=ot([o,o],r.dtype),a=s.values;for(let c=0;c<i.length;c++)a[c*o+c]=i[c];let l=[...r.shape,...r.shape];return e.makeTensorInfo(l,s.dtype,s.values)}var toe={kernelName:p0,backendName:"cpu",kernelFunc:C6e};var noe={kernelName:Vd,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:r,filter:o}=t,{strides:i,pad:s,dilations:a}=e,l=n,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(o.dataId).values,p=o.shape.length,{batchSize:h,inHeight:f,inWidth:m,inChannels:g,outHeight:v,outWidth:w,padInfo:y,strideHeight:k,strideWidth:_,filterHeight:S,filterWidth:E,dilationHeight:N,dilationWidth:B,outShape:D}=O.computeDilation2DInfo(r.shape,o.shape,i,s,"NHWC",a),P=x.sizeFromShape(D),M=D.length,W=x.getArrayFromDType(r.dtype,P);for(let Z=0;Z<h;++Z)for(let X=0;X<v;++X){let G=X*k-y.top;for(let H=0;H<w;++H){let V=H*_-y.left;for(let K=0;K<g;++K){let pe=Number.MIN_SAFE_INTEGER;for(let se=0;se<S;++se){let we=G+se*N;if(we>=0&&we<f)for(let Ne=0;Ne<E;++Ne){let Ae=V+Ne*B;if(Ae>=0&&Ae<m){let Ce=x.locToIndex([Z,we,Ae,K],u,x.computeStrides(r.shape)),Je=x.locToIndex([se,Ne,K],p,x.computeStrides(o.shape)),Ge=c[Ce]+d[Je];Ge>pe&&(pe=Ge)}}}let ce=x.locToIndex([Z,X,H,K],M,x.computeStrides(D));W[ce]=pe}}}return{dataId:l.write(x.toTypedArray(W,r.dtype),D,r.dtype),shape:D,dtype:r.dtype}}};var roe={kernelName:cv,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:r,filter:o,dy:i}=t,{strides:s,pad:a,dilations:l}=e,c=n,u=x.toNestedArray(r.shape,c.data.get(r.dataId).values),d=x.toNestedArray(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:w,strideHeight:y,strideWidth:k,filterHeight:_,filterWidth:S,dilationHeight:E,dilationWidth:N,outShape:B}=O.computeDilation2DInfo(r.shape,o.shape,s,a,"NHWC",l);x.assert(i.rank===B.length,()=>`Error in ${cv}, dy must have the same rank as output ${B.length}, but got ${i.rank}`);let D=x.toNestedArray(B,c.data.get(i.dataId).values),P=x.makeZerosNestedTypedArray(o.shape,o.dtype);for(let W=0;W<p;++W)for(let ie=0;ie<g;++ie){let Z=ie*y-w.top;for(let X=0;X<v;++X){let G=X*k-w.left;for(let H=0;H<m;++H){let V=Number.MIN_SAFE_INTEGER,K=0,pe=0;for(let ce=0;ce<_;++ce){let se=Z+ce*E;if(se>=0&&se<h)for(let we=0;we<S;++we){let Ne=G+we*N;if(Ne>=0&&Ne<f){let Ae=u[W][se][Ne][H]+d[ce][we][H];Ae>V&&(V=Ae,K=ce,pe=we)}}}P[K][pe][H]+=D[W][ie][X][H]}}}return{dataId:c.write(x.toTypedArray(P,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};var ooe={kernelName:lv,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:r,filter:o,dy:i}=t,{strides:s,pad:a,dilations:l}=e,c=n,u=x.toNestedArray(r.shape,c.data.get(r.dataId).values),d=x.toNestedArray(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:w,strideHeight:y,strideWidth:k,filterHeight:_,filterWidth:S,dilationHeight:E,dilationWidth:N,outShape:B}=O.computeDilation2DInfo(r.shape,o.shape,s,a,"NHWC",l);x.assert(i.rank===B.length,()=>`Error in ${lv}, dy must have the same rank as output ${B.length}, but got ${i.rank}`);let D=x.toNestedArray(B,c.data.get(i.dataId).values),P=x.makeZerosNestedTypedArray(r.shape,r.dtype);for(let W=0;W<p;++W)for(let ie=0;ie<g;++ie){let Z=ie*y-w.top;for(let X=0;X<v;++X){let G=X*k-w.left;for(let H=0;H<m;++H){let V=Number.MIN_SAFE_INTEGER,K=Z<0?0:Z,pe=G<0?0:G;for(let ce=0;ce<_;++ce){let se=Z+ce*E;if(se>=0&&se<h)for(let we=0;we<S;++we){let Ne=G+we*N;if(Ne>=0&&Ne<f){let Ae=u[W][se][Ne][H]+d[ce][we][H];Ae>V&&(V=Ae,K=se,pe=Ne)}}}P[W][K][pe][H]+=D[W][ie][X][H]}}}return{dataId:c.write(x.toTypedArray(P,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function M6e(t){let{inputs:n,backend:e,attrs:r}=t,{image:o}=n,{canvas:i,options:s}=r,{contextOptions:a,imageOptions:l}=s||{},c=l?.alpha||1,u=a?.contextType||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);let d=i.getContext(u,a?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);let[p,h]=o.shape.slice(0,2),f=o.shape.length===2?1:o.shape[2],m=e.data.get(o.dataId).values,g=o.dtype==="float32"?255:1,v=new Uint8ClampedArray(h*p*4);for(let y=0;y<p*h;++y){let k=[0,0,0,255*c];for(let S=0;S<f;S++){let E=m[y*f+S];if(o.dtype==="float32"){if(E<0||E>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${E}.`)}else if(o.dtype==="int32"&&(E<0||E>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${E}.`);f===1?(k[0]=E*g,k[1]=E*g,k[2]=E*g):k[S]=E*g}let _=y*4;v[_+0]=Math.round(k[0]),v[_+1]=Math.round(k[1]),v[_+2]=Math.round(k[2]),v[_+3]=Math.round(k[3])}i.width=h,i.height=p;let w=new ImageData(v,h,p);return d.putImageData(w,0,0),o}var ioe={kernelName:uv,backendName:"cpu",kernelFunc:M6e};function Up(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;ke(o,"sum");let a;o.dtype==="bool"?a=Ya({inputs:{x:o},backend:e,attrs:{dtype:"int32"}}):a=di({inputs:{x:o},backend:e});let l=a.shape.length,c=x.parseAxisParam(i,a.shape),u=O.getAxesPermutation(c,l),d=c,p=a;u!=null&&(p=hr({inputs:{x:a},backend:e,attrs:{perm:u}}),d=O.getInnerMostAxes(d.length,l)),O.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[h,f]=O.computeOutAndReduceShapes(p.shape,d),m=O.upcastType(p.dtype,"int32"),g=cw(e,h,m),v=x.sizeFromShape(f),w=e.data.get(g.dataId).values,y=e.data.get(p.dataId).values;for(let k=0;k<w.length;++k){let _=k*v,S=0;for(let E=0;E<v;++E)S+=y[_+E];w[k]=S}if(s){let k=O.expandShapeToKeepDim(g.shape,c),_=g;g=sn({inputs:{x:g},backend:e,attrs:{shape:k}}),e.disposeIntermediateTensorInfo(_)}return e.disposeIntermediateTensorInfo(a),u!=null&&e.disposeIntermediateTensorInfo(p),g}var soe={kernelName:"Sum",backendName:"cpu",kernelFunc:Up};function S6e(t){let{inputs:n,backend:e,attrs:r}=t,{equation:o}=r,i=n,{allDims:s,summedDims:a,idDims:l}=O.decodeEinsumEquation(o,i.length);O.checkEinsumDimSizes(s.length,l,i);let{path:c,steps:u}=O.getEinsumComputePath(a,l),d=u.length,p=null,h=s.length,f=[];for(let m=0;m<d;++m){for(let g of u[m]){let{permutationIndices:v,expandDims:w}=O.getEinsumPermutation(h,l[g]),y;O.isIdentityPermutation(v)?y=i[g]:(y=hr({inputs:{x:i[g]},backend:e,attrs:{perm:v}}),f.push(y));let k=y.shape.slice();for(let _=0;_<w.length;++_)k.splice(w[_],0,1);x.arraysEqual(y.shape,k)||(y=sn({inputs:{x:y},backend:e,attrs:{shape:k}}),f.push(y)),p===null?p=y:(p=e2({inputs:{a:y,b:p},backend:e}),f.push(p))}m<d-1&&(c[m]>=0&&(p=Up({inputs:{x:p},backend:e,attrs:{axis:c[m]-(s.length-h),keepDims:!1}}),f.push(p)),h--)}for(let m of f)m!==p&&e.disposeIntermediateTensorInfo(m);return p}var aoe={kernelName:h0,backendName:"cpu",kernelFunc:S6e};function T6e(t){let{inputs:n,backend:e}=t,{dy:r,y:o}=n;ke([r,o],"eluGrad");let i=new Float32Array(x.sizeFromShape(o.shape)),s=e.data.get(o.dataId).values,a=e.data.get(r.dataId).values;for(let l=0;l<s.length;++l){let c=s[l];c>=0?i[l]=a[l]:i[l]=a[l]*(c+1)}return e.makeTensorInfo(o.shape,"float32",i)}var loe={kernelName:f0,backendName:"cpu",kernelFunc:T6e};var E6e=O.ERF_P,I6e=O.ERF_A1,D6e=O.ERF_A2,N6e=O.ERF_A3,A6e=O.ERF_A4,R6e=O.ERF_A5,O6e=_t("Erf",t=>{let n=Math.sign(t),e=Math.abs(t),r=1/(1+E6e*e);return n*(1-((((R6e*r+A6e)*r+N6e)*r+D6e)*r+I6e)*r*Math.exp(-e*e))}),coe={kernelName:"Erf",backendName:"cpu",kernelFunc:O6e};function mw(t){let{inputs:n,backend:e,attrs:r}=t,{input:o}=n,{dim:i}=r,s=o.shape.length,a=o.shape.slice(),l=i;return i<0&&(x.assert(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),a.splice(l,0,1),sn({inputs:{x:o},backend:e,attrs:{shape:a}})}var uoe={kernelName:zd,backendName:"cpu",kernelFunc:mw};var F6e=on((t,n)=>t/n),rb=dn(zc,F6e),ob={kernelName:zc,backendName:"cpu",kernelFunc:rb};function jE(t,n,e){let r=t.shape,o=r[0],i=r[1],s=e.data.get(t.dataId),a=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[o,i],u=x.sizeFromShape(c),d=x.getTypedArrayFromDType("float32",u),p=x.getTypedArrayFromDType("float32",u);for(let g=0;g<o;g++){let v=Ja({inputs:{x:a},backend:e,attrs:{begin:[g,0],size:[1,i]}}),w=Ja({inputs:{x:l},backend:e,attrs:{begin:[g,0],size:[1,i]}}),y=vo({inputs:{real:v,imag:w},backend:e}),{real:k,imag:_}=B6e(y,n,e),S=O.mergeRealAndImagArrays(k,_);for(let E=0;E<i;E++){let N=O.getComplexWithIndex(S,E);d[g*i+E]=N.real,p[g*i+E]=N.imag}e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(w),e.disposeIntermediateTensorInfo(y)}let h=e.makeTensorInfo(c,"float32",d),f=e.makeTensorInfo(c,"float32",p),m=vo({inputs:{real:h,imag:f},backend:e});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),m}function B6e(t,n,e){let r=x.sizeFromShape(t.shape),o=e.data.get(t.dataId),i=e.data.get(o.complexTensorInfos.real.dataId).values,s=e.data.get(o.complexTensorInfos.imag.dataId).values;if(P6e(r)){let a=Z7(i,s,r,n,e),l=[t.shape[0],t.shape[1]];if(n){let c=e.makeTensorInfo(l,"float32",a.real),u=e.makeTensorInfo(l,"float32",a.imag),d=e.makeTensorInfo([],"float32",x.createScalarValue(r,"float32")),p=di({inputs:{x:d},backend:e}),h=ob.kernelFunc({inputs:{a:c,b:d},backend:e}),f=ob.kernelFunc({inputs:{a:u,b:p},backend:e}),m=e.data.get(h.dataId).values,g=e.data.get(f.dataId).values;return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),{real:m,imag:g}}return a}else{let a=O.mergeRealAndImagArrays(i,s),l=L6e(a,r,n);return O.splitRealAndImagArrays(l)}}function P6e(t){return(t&t-1)===0}function Z7(t,n,e,r,o){if(e===1)return{real:t,imag:n};let i=O.mergeRealAndImagArrays(t,n),s=e/2,a=O.complexWithEvenIndex(i),l=a.real,c=a.imag,u=[l.length],d=o.makeTensorInfo(u,"float32",l),p=o.makeTensorInfo(u,"float32",c),h=vo({inputs:{real:d,imag:p},backend:o}),f=O.complexWithOddIndex(i),m=f.real,g=f.imag,v=[m.length],w=o.makeTensorInfo(v,"float32",m),y=o.makeTensorInfo(v,"float32",g),k=vo({inputs:{real:w,imag:y},backend:o}),_=Z7(l,c,s,r,o),S=_.real,E=_.imag,N=[S.length],B=o.makeTensorInfo(N,"float32",S),D=o.makeTensorInfo(N,"float32",E),P=vo({inputs:{real:B,imag:D},backend:o}),M=Z7(m,g,s,r,o),W=M.real,ie=M.imag,Z=[W.length],X=o.makeTensorInfo(Z,"float32",W),G=o.makeTensorInfo(Z,"float32",ie),H=vo({inputs:{real:X,imag:G},backend:o}),V=O.exponents(e,r),K=[V.real.length],pe=o.makeTensorInfo(K,"float32",V.real),ce=o.makeTensorInfo(K,"float32",V.imag),se=vo({inputs:{real:pe,imag:ce},backend:o}),we=e2({inputs:{a:se,b:H},backend:o}),Ne=Au({inputs:{a:P,b:we},backend:o}),Ae=eb({inputs:{a:P,b:we},backend:o}),Ce=Xa({inputs:{input:Ne},backend:o}),Je=Xa({inputs:{input:Ae},backend:o}),Ge=Ru({inputs:{input:Ne},backend:o}),vt=Ru({inputs:{input:Ae},backend:o}),kt=Bf({inputs:[Ce,Je],backend:o,attrs:{axis:0}}),T=Bf({inputs:[Ge,vt],backend:o,attrs:{axis:0}}),ve=o.data.get(kt.dataId).values,he=o.data.get(T.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(P),o.disposeIntermediateTensorInfo(X),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(pe),o.disposeIntermediateTensorInfo(ce),o.disposeIntermediateTensorInfo(se),o.disposeIntermediateTensorInfo(we),o.disposeIntermediateTensorInfo(Ne),o.disposeIntermediateTensorInfo(Ae),o.disposeIntermediateTensorInfo(Ce),o.disposeIntermediateTensorInfo(Ge),o.disposeIntermediateTensorInfo(Je),o.disposeIntermediateTensorInfo(vt),o.disposeIntermediateTensorInfo(kt),o.disposeIntermediateTensorInfo(T),{real:ve,imag:he}}function L6e(t,n,e){let r=new Float32Array(n*2);for(let o=0;o<n;o++){let i=0,s=0;for(let a=0;a<n;a++){let l=O.exponent(o*a,n,e),c=O.getComplexWithIndex(t,a);i+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}e&&(i/=n,s/=n),O.assignToTypedArray(r,i,s,o)}return r}function $6e(t){let{inputs:n,backend:e}=t,{input:r}=n,o=x.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=o/i,a=sn({inputs:{x:r},backend:e,attrs:{shape:[s,i]}}),l=jE(a,!1,e),c=sn({inputs:{x:l},backend:e,attrs:{shape:r.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var doe={kernelName:"FFT",backendName:"cpu",kernelFunc:$6e};function ib(t){let{backend:n,attrs:e}=t,{shape:r,value:o,dtype:i}=e,s=i||x.inferDtype(o),a=x.getArrayFromDType(s,x.sizeFromShape(r));return V6e(a,o,s),n.makeTensorInfo(r,s,a)}var poe={kernelName:m0,backendName:"cpu",kernelFunc:ib};function V6e(t,n,e){t.fill(n)}var hoe={kernelName:g0,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:r}=t,o=e,i=x.getTypedArrayFromDType(r.dtype,x.sizeFromShape(r.shape)),[s,a,l,c]=r.shape,u=o.data.get(r.dataId).values;for(let p=0;p<s;p++){let h=p*l*a*c;for(let f=0;f<a;f++){let m=f*(l*c);for(let g=0;g<l;g++){let v=g*c;for(let w=0;w<c;w++){let y=Math.round(l-g-1),k=h+m+v+w,_=u[k];if(y>=0&&y<l){let S=y*c,E=h+m+S+w;_=u[E]}i[k]=_}}}}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function j6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=q7({inputs:{x:o,filter:i},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(s){let g=m;if(u==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){let v=sn({inputs:{x:s},backend:e,attrs:{shape:[s.shape[0],1,1]}});m=Au({inputs:{a:m,b:v},backend:e}),e.disposeIntermediateTensorInfo(v)}else m=Au({inputs:{a:m,b:s},backend:e});e.disposeIntermediateTensorInfo(g)}if(h){let g=m;if(u==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){let v=sn({inputs:{x:a},backend:e,attrs:{shape:[a.shape[0],1,1]}});m=t2(e,m,h,v,f),e.disposeIntermediateTensorInfo(v)}else m=t2(e,m,h,a,f);e.disposeIntermediateTensorInfo(g)}return m}var foe={kernelName:sf,backendName:"cpu",kernelFunc:j6e};function z6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=K7({inputs:{x:o,filter:i},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(s){let g=m;m=Au({inputs:{a:m,b:s},backend:e}),e.disposeIntermediateTensorInfo(g)}if(h){let g=m;m=t2(e,m,h,a,f),e.disposeIntermediateTensorInfo(g)}return m}var moe={kernelName:af,backendName:"cpu",kernelFunc:z6e};function H6e(t){let{inputs:n,backend:e}=t,{params:r,indices:o}=n,i=x.sizeFromShape(r.shape),s=o.shape,a=s[s.length-1],[l,c,u,d]=O.prepareAndValidate(r,o);if(c===0)return e.makeTensorInfo(l,r.dtype,[]);let p=e.data.get(o.dataId).values,h=e.bufferSync(r),f=kE(p,h,r.dtype,c,a,u,d,r.shape,i);return e.makeTensorInfo(l,r.dtype,f.values)}var goe={kernelName:v0,backendName:"cpu",kernelFunc:H6e};function U6e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,indices:i}=n,{axis:s,batchDims:a}=r;ke([o,i],"gatherV2");let l=x.parseAxisParam(s,o.shape)[0],c=e.data.get(i.dataId).values,u=o.shape[l];for(let k=0;k<c.length;++k){let _=c[k];x.assert(_<=u-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);let p=x.sizeFromShape(i.shape),h=O.segment_util.collectGatherOpShapeInfo(o,i,l,d),f=sn({inputs:{x:o},backend:e,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=sn({inputs:{x:i},backend:e,attrs:{shape:[h.batchSize,p/h.batchSize]}}),g=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],v=e.bufferSync(m),w=e.bufferSync(f),y=_E(w,v,g);return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),e.makeTensorInfo(h.outputShape,y.dtype,y.values)}var voe={kernelName:Ud,backendName:"cpu",kernelFunc:U6e};function G6e(t){let{inputs:n,backend:e}=t,{input:r}=n,o=x.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=o/i,a=sn({inputs:{x:r},backend:e,attrs:{shape:[s,i]}}),l=jE(a,!0,e),c=sn({inputs:{x:l},backend:e,attrs:{shape:r.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var woe={kernelName:w0,backendName:"cpu",kernelFunc:G6e};var W6e=_t(qc,t=>Number.isFinite(t)?1:0,"bool"),yoe={kernelName:qc,backendName:"cpu",kernelFunc:W6e};var q6e=_t(Kc,t=>Math.abs(t)===1/0?1:0,"bool"),xoe={kernelName:Kc,backendName:"cpu",kernelFunc:q6e};var K6e=_t(Zc,t=>Number.isNaN(t)?1:0,"bool"),koe={kernelName:Zc,backendName:"cpu",kernelFunc:K6e};function Z6e(t){let{backend:n,attrs:e}=t,{start:r,stop:o,num:i}=e,s=bE(r,o,i);return n.makeTensorInfo([s.length],"float32",s)}var _oe={kernelName:x0,backendName:"cpu",kernelFunc:Z6e};var X6e=_t(Xc,t=>Math.log1p(t)),boe={kernelName:Xc,backendName:"cpu",kernelFunc:X6e};var Y6e=on((t,n)=>t&&n),Q6e=dn(Kh,Y6e,null,"bool"),Coe={kernelName:Kh,backendName:"cpu",kernelFunc:Q6e};var J6e=_t(Zh,t=>t?0:1,"bool"),Moe={kernelName:Zh,backendName:"cpu",kernelFunc:J6e};var e8e=on((t,n)=>t||n),t8e=dn(Xh,e8e,null,"bool"),Soe={kernelName:Xh,backendName:"cpu",kernelFunc:t8e};function n8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{depthRadius:i,bias:s,alpha:a,beta:l}=r;ke(o,"LRN");let c=o.shape[3],u=c-1,d=e.data.get(o.dataId).values,p=x.sizeFromShape(o.shape),h=new Float32Array(p);function f(m){let g=m%c,v=m-g+Math.max(0,g-i),w=m-g+Math.min(g+i,u),y=0;for(;v<=w;v++){let k=d[v];y+=k*k}return y}for(let m=0;m<p;m++){let g=f(m),v=d[m]*Math.pow(s+a*g,-l);h[m]=v}return e.makeTensorInfo(o.shape,o.dtype,h)}var Toe={kernelName:"LRN",backendName:"cpu",kernelFunc:n8e};function r8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,y:i,dy:s}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=r;ke(s,"LRNGrad");let d=x.sizeFromShape(s.shape),p=s.shape[3],h=e.data.get(s.dataId).values,f=e.data.get(o.dataId).values,m=e.data.get(i.dataId).values,g=new Float32Array(d),v=d;for(let w=0;w<v;w++){let y=w%p,k=w-y+Math.max(0,y-a),_=w-y+Math.min(p,y+a+1),S=0;for(let E=k;E<_;E++)S+=Math.pow(f[E],2);S=c*S+l;for(let E=k;E<_;E++){let N=-2*c*u*f[E]*m[w]/S;w===E&&(N+=Math.pow(S,-u)),N*=h[w],g[E]+=N}}return e.makeTensorInfo(s.shape,o.dtype,g)}var Eoe={kernelName:_0,backendName:"cpu",kernelFunc:r8e};function X7(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reductionIndices:i,keepDims:s}=r,a=e,l=o.shape,c=l.length,u=x.parseAxisParam(i,l),d=u,p=O.getAxesPermutation(d,c),h=a.data.get(o.dataId).values;if(p!=null){let k=new Array(c);for(let _=0;_<k.length;_++)k[_]=l[p[_]];h=pw(h,l,o.dtype,p,k),d=O.getInnerMostAxes(d.length,c),l=k}ke(o,"max"),O.assertAxesAreInnerMostDims("max",d,c);let[f,m]=O.computeOutAndReduceShapes(l,d),g=x.sizeFromShape(m),v=CE(h,g,f,o.dtype),w=a.write(v,f,o.dtype),y=f;return s&&(y=O.expandShapeToKeepDim(f,u)),{dataId:w,shape:y,dtype:o.dtype}}var Ioe={kernelName:"Max",backendName:"cpu",kernelFunc:X7};function o8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;ke(o,"maxPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l),d;if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))d=di({inputs:{x:o},backend:e});else{let p=e.data.get(o.dataId).values,h=x.computeStrides(o.shape),f=fw(p,o.shape,o.dtype,h,u,"max");d=e.makeTensorInfo(u.outShape,o.dtype,f.values)}return d}var Doe={kernelName:Wd,backendName:"cpu",kernelFunc:o8e};function i8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r;ke(o,"maxPool3d");let u=O.computePool3DInfo(o.shape,i,s,1,a,l,c),d=e.data.get(o.dataId).values,p=VE(d,o.shape,o.dtype,x.computeStrides(o.shape),u,"max");return e.makeTensorInfo(p.shape,"float32",p.values)}var Noe={kernelName:qd,backendName:"cpu",kernelFunc:i8e};function s8e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=r;ke([o,i],"maxPool3DGrad");let u=O.computePool3DInfo(i.shape,s,a,1,l,c),d=e.bufferSync(i),p=Sre(d,u),h=u.strideDepth,f=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,v=u.dilationHeight,w=u.dilationWidth,y=u.effectiveFilterDepth,k=u.effectiveFilterHeight,_=u.effectiveFilterWidth,S=y-1-u.padInfo.front,E=_-1-u.padInfo.left,N=k-1-u.padInfo.top,B=ot(i.shape,"float32"),D=e.bufferSync(o);for(let P=0;P<u.batchSize;++P)for(let M=0;M<u.inChannels;++M)for(let W=0;W<u.inDepth;++W)for(let ie=0;ie<u.inHeight;++ie)for(let Z=0;Z<u.inWidth;++Z){let X=W-S,G=ie-N,H=Z-E,V=0;for(let K=0;K<y;K+=g){let pe=(X+K)/h;if(!(pe<0||pe>=u.outDepth||Math.floor(pe)!==pe))for(let ce=0;ce<k;ce+=v){let se=(G+ce)/f;if(!(se<0||se>=u.outHeight||Math.floor(se)!==se))for(let we=0;we<_;we+=w){let Ne=(H+we)/m;if(Ne<0||Ne>=u.outWidth||Math.floor(Ne)!==Ne)continue;let Ae=y*k*_-1-p.get(P,pe,se,Ne,M),Ce=K*k*_+ce*_+we,Je=Ae===Ce?1:0;if(Je===0)continue;let Ge=D.get(P,pe,se,Ne,M);V+=Ge*Je}}}B.set(V,P,W,ie,Z,M)}return e.makeTensorInfo(B.shape,B.dtype,B.values)}var Aoe={kernelName:M0,backendName:"cpu",kernelFunc:s8e};function a8e(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i,output:s}=n,a=i;ke([i,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,p=O.computePool2DInfo(a.shape,l,c,1,u,d),h=e.data.get(a.dataId).values,f=ot(p.outShape,a.dtype,$E(h,a.shape,a.dtype,p).values),m=p.strideHeight,g=p.strideWidth,v=p.dilationHeight,w=p.dilationWidth,y=p.effectiveFilterHeight,k=p.effectiveFilterWidth,_=k-1-p.padInfo.left,S=y-1-p.padInfo.top,E=ot(a.shape,"float32"),N=e.data.get(o.dataId).values,B=ot(o.shape,"float32",N);for(let D=0;D<p.batchSize;++D)for(let P=0;P<p.inChannels;++P)for(let M=0;M<p.inHeight;++M)for(let W=0;W<p.inWidth;++W){let ie=M-S,Z=W-_,X=0;for(let G=0;G<y;G+=v){let H=(ie+G)/m;if(!(H<0||H>=p.outHeight||Math.floor(H)!==H))for(let V=0;V<k;V+=w){let K=(Z+V)/g;if(K<0||K>=p.outWidth||Math.floor(K)!==K)continue;let pe=y*k-1-f.get(D,H,K,P),ce=G*k+V,se=pe===ce?1:0;if(se===0)continue;let we=B.get(D,H,K,P);X+=we*se}}E.set(X,D,M,W,P)}return e.makeTensorInfo(E.shape,E.dtype,E.values)}var Roe={kernelName:C0,backendName:"cpu",kernelFunc:a8e};function Ooe(t,n,e,r,o){let i=x.computeStrides(n),s=fw(t,n,e,i,o,"max"),a=$E(t,n,e,o,!0,r);return[s.values,a.values]}var Foe={kernelName:S0,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:r}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=n,l=e;ke(r,"MaxPoolWithArgmax");let c=l.data.get(r.dataId).values,u=O.computePool2DInfo(r.shape,o,i,[1,1],s),[d,p]=Ooe(c,r.shape,r.dtype,a,u),h=l.write(d,u.outShape,r.dtype),f=l.write(p,u.outShape,r.dtype);return[{dataId:h,shape:u.outShape,dtype:r.dtype},{dataId:f,shape:u.outShape,dtype:"int32"}]}};function l8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=x.parseAxisParam(i,o.shape),c=O.computeOutAndReduceShapes(o.shape,a)[1],u=x.sizeFromShape(c),d=[],p=e.makeTensorInfo([],"float32",new Float32Array([u]));d.push(p);let h=Ya({inputs:{x:o},backend:e,attrs:{dtype:"float32"}});d.push(h);let f=rb({inputs:{a:h,b:p},backend:e});d.push(f);let m=Up({inputs:{x:f},backend:e,attrs:{axis:i,keepDims:s}});return d.forEach(g=>e.disposeIntermediateTensorInfo(g)),m}var Boe={kernelName:Kd,backendName:"cpu",kernelFunc:l8e};function c8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;ke(o,"min");let a=x.parseAxisParam(i,o.shape),l=a,c=O.getAxesPermutation(l,o.shape.length),u=o;c!=null&&(u=hr({inputs:{x:o},backend:e,attrs:{perm:c}}),l=O.getInnerMostAxes(l.length,o.shape.length)),O.assertAxesAreInnerMostDims("min",l,u.shape.length);let[d,p]=O.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),f=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),m=e.data.get(u.dataId).values;for(let v=0;v<f.length;++v){let w=v*h,y=m[w];for(let k=0;k<h;++k){let _=m[w+k];(Number.isNaN(_)||_<y)&&(y=_)}f[v]=y}c!=null&&e.disposeIntermediateTensorInfo(u);let g=e.makeTensorInfo(d,u.dtype,f);if(s){let v=O.expandShapeToKeepDim(d,a),w=sn({inputs:{x:g},backend:e,attrs:{shape:v}});return e.disposeIntermediateTensorInfo(g),w}return g}var Poe={kernelName:"Min",backendName:"cpu",kernelFunc:c8e};function u8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{paddings:i,mode:s}=r;ke(o,"mirrorPad");let a=i.map((y,k)=>y[0]+o.shape[k]+y[1]),l=i.map(y=>y[0]),c=i.map((y,k)=>y[0]+o.shape[k]),u=s==="reflect"?0:1,d=e.data.get(o.dataId).values,p=o.shape.length,h=x.computeStrides(o.shape),f=x.sizeFromShape(a),m=a.length,g=x.computeStrides(a),v=x.getTypedArrayFromDType(o.dtype,f);for(let y=0;y<f;y++){let k=x.indexToLoc(y,m,g);for(let S=0;S<m;S++)k[S]<l[S]?k[S]=l[S]*2-k[S]-u:k[S]>=c[S]&&(k[S]=(c[S]-1)*2-k[S]+u);k=k.map((S,E)=>S-l[E]);let _=x.locToIndex(k,p,h);v[y]=d[_]}return{dataId:e.write(v,a,o.dtype),shape:a,dtype:o.dtype}}var Loe={kernelName:Zd,backendName:"cpu",kernelFunc:u8e};var d8e=on((t,n)=>{let e=t%n;return t<0&&n<0||t>=0&&n>=0?e:(e+n)%n}),p8e=dn("Mod",d8e),$oe={kernelName:"Mod",backendName:"cpu",kernelFunc:p8e};var joe=O2(a_());function Y7(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{dim:i}=r,s=o.shape.length,a=i;if(a===-1&&(a=s-1),a!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${a}`);let l=x.parseAxisParam([a],o.shape),c=X7({inputs:{x:o},backend:e,attrs:{reductionIndices:l,keepDims:!1}}),u=O.expandShapeToKeepDim(c.shape,l),d=sn({inputs:{x:c},backend:e,attrs:{shape:u}}),p=eb({inputs:{a:o,b:d},backend:e}),h=y7({inputs:{x:p},backend:e}),f=Up({inputs:{x:h},backend:e,attrs:{axis:l,keepDims:!1}}),m=sn({inputs:{x:f},backend:e,attrs:{shape:u}}),g=rb({inputs:{a:h,b:m},backend:e});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),g}var Voe={kernelName:up,backendName:"cpu",kernelFunc:Y7};function h8e(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{numSamples:i,seed:s,normalized:a}=r;ke(o,"multinomial");let l=a?o:Y7({inputs:{logits:o},backend:e,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=e.data.get(l.dataId).values,p=[c,i],h=x.makeZerosTypedArray(x.sizeFromShape(p),"int32");for(let f=0;f<c;++f){let m=f*u,g=new Float32Array(u-1);g[0]=d[m];for(let y=1;y<g.length;++y)g[y]=g[y-1]+d[m+y];let v=joe.alea(s.toString()),w=f*i;for(let y=0;y<i;++y){let k=v();h[w+y]=g.length;for(let _=0;_<g.length;_++)if(k<g[_]){h[w+y]=_;break}}}return a||e.disposeIntermediateTensorInfo(l),e.makeTensorInfo(p,"int32",h)}var zoe={kernelName:E0,backendName:"cpu",kernelFunc:h8e};var f8e=Zo.nonMaxSuppressionV3Impl;function m8e(t){let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r;ke(o,"NonMaxSuppression");let c=e.data.get(o.dataId).values,u=e.data.get(i.dataId).values,{selectedIndices:d}=f8e(c,u,s,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}var Hoe={kernelName:D0,backendName:"cpu",kernelFunc:m8e};var g8e=Zo.nonMaxSuppressionV4Impl;function v8e(t){let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;ke(o,"NonMaxSuppressionPadded");let u=e.data.get(o.dataId).values,d=e.data.get(i.dataId).values,{selectedIndices:p,validOutputs:h}=g8e(u,d,s,a,l,c);return[e.makeTensorInfo([p.length],"int32",new Int32Array(p)),e.makeTensorInfo([],"int32",new Int32Array([h]))]}var Uoe={kernelName:N0,backendName:"cpu",kernelFunc:v8e};var w8e=Zo.nonMaxSuppressionV5Impl;function y8e(t){let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;ke(o,"NonMaxSuppressionWithScore");let u=e.data.get(o.dataId).values,d=e.data.get(i.dataId).values,p=s,h=a,f=l,m=c,{selectedIndices:g,selectedScores:v}=w8e(u,d,p,h,f,m);return[e.makeTensorInfo([g.length],"int32",new Int32Array(g)),e.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var Goe={kernelName:A0,backendName:"cpu",kernelFunc:y8e};function x8e(t){let{inputs:n,backend:e,attrs:r}=t,{indices:o}=n,{dtype:i,depth:s,onValue:a,offValue:l}=r;ke(o,"oneHot");let c=x.sizeFromShape(o.shape),u=new Float32Array(c*s);u.fill(l);let d=e.data.get(o.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<s&&(u[p*s+d[p]]=a);return e.makeTensorInfo([...o.shape,s],i,u)}var Woe={kernelName:Yd,backendName:"cpu",kernelFunc:x8e};function sb(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){let o=Xa({inputs:{input:r},backend:e}),i=sb({inputs:{x:o},backend:e}),s=Ru({inputs:{input:r},backend:e}),a=sb({inputs:{x:s},backend:e}),l=vo({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return ib({backend:e,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var qoe={kernelName:hp,backendName:"cpu",kernelFunc:sb};function Koe(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){let o=Xa({inputs:{input:r},backend:e}),i=Koe({inputs:{x:o},backend:e}),s=Ru({inputs:{input:r},backend:e}),a=sb({inputs:{x:s},backend:e}),l=vo({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return ib({backend:e,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}var Zoe={kernelName:Xd,backendName:"cpu",kernelFunc:Koe};function Q7(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r;if(n.length===1)return mw({inputs:{input:n[0]},backend:e,attrs:{dim:o}});let i=n[0].shape,s=n[0].dtype;n.forEach(u=>{x.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),x.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=n.map(u=>{let d=mw({inputs:{input:u},backend:e,attrs:{dim:o}});return a.push(d),d}),c=Bf({inputs:l,backend:e,attrs:{axis:o}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var Xoe={kernelName:Qd,backendName:"cpu",kernelFunc:Q7};function k8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{paddings:i,constantValue:s}=r;ke(o,"pad");let a=i.map((w,y)=>w[0]+o.shape[y]+w[1]),l=i.map(w=>w[0]),c=e.data.get(o.dataId).values,u=x.sizeFromShape(o.shape),d=o.shape.length,p=x.computeStrides(o.shape),h=x.sizeFromShape(a),f=a.length,m=x.computeStrides(a),g=x.getTypedArrayFromDType(o.dtype,h);s!==0&&g.fill(s);for(let w=0;w<u;w++){let k=x.indexToLoc(w,d,p).map((S,E)=>S+l[E]),_=x.locToIndex(k,f,m);g[_]=c[w]}return{dataId:e.write(g,a,o.dtype),shape:a,dtype:o.dtype}}var zE={kernelName:Jd,backendName:"cpu",kernelFunc:k8e};var _8e=on((t,n)=>Math.pow(t,n)),b8e=dn("Pow",_8e),Yoe={kernelName:"Pow",backendName:"cpu",kernelFunc:b8e};function C8e(t){let{inputs:n,backend:e,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:i,indices:s}=n,{outputRaggedRank:a}=r,l=o.map(v=>e.data.get(v.dataId).values),c=o.map(v=>v.shape),u=e.data.get(i.dataId).values,d=e.data.get(s.dataId).values,[p,h,f]=ME(l,c,u,i.shape,i.dtype,d,s.shape,a),m=p.map(v=>e.makeTensorInfo([v.length],"int32",v)),g=e.makeTensorInfo(f,i.dtype,h);return m.concat([g])}var Qoe={kernelName:R0,backendName:"cpu",kernelFunc:C8e};function M8e(t){let{inputs:n,backend:e}=t,{starts:r,limits:o,deltas:i}=n,s=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,[c,u]=SE(s,r.shape,r.dtype,a,o.shape,l,i.shape),d=e.makeTensorInfo([c.length],"int32",c),p=e.makeTensorInfo([u.length],r.dtype,u);return[d,p]}var Joe={kernelName:O0,backendName:"cpu",kernelFunc:M8e};function S8e(t){let{inputs:n,backend:e,attrs:r}=t,{shape:o,values:i,defaultValue:s,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=r,c=e.data.get(o.dataId).values,u=e.data.get(i.dataId).values,d=e.data.get(s.dataId).values,p=a.map(g=>e.data.get(g.dataId).values),h=a.map(g=>g.shape),[f,m]=TE(c,o.shape,u,i.shape,i.dtype,d,s.shape,p,h,l);return e.makeTensorInfo(f,i.dtype,m)}var eie={kernelName:F0,backendName:"cpu",kernelFunc:S8e};function T8e(t){let{backend:n,attrs:e}=t,{start:r,stop:o,dtype:i,step:s}=e,a=EE(r,o,s,i);return n.makeTensorInfo([a.length],i,a)}var tie={kernelName:B0,backendName:"cpu",kernelFunc:T8e};var E8e=_t(eu,t=>1/t),nie={kernelName:eu,backendName:"cpu",kernelFunc:E8e};function I8e(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r;ke(o,"resizeBilinear");let l=x.computeStrides(o.shape),[c,u]=a,[d,p,h,f]=o.shape,m=e.data.get(o.dataId).values,g=new Float32Array(x.sizeFromShape([d,c,u,f])),v=[i&&c>1?p-1:p,i&&u>1?h-1:h],w=[i&&c>1?c-1:c,i&&u>1?u-1:u],y=0,k=v[0]/w[0],_=v[1]/w[1];for(let S=0;S<d;S++)for(let E=0;E<c;E++){let N;s?N=k*(E+.5)-.5:N=k*E;let B=Math.max(0,Math.floor(N)),D=N-B,P=Math.min(p-1,Math.ceil(N)),M=S*l[0]+B*l[1],W=S*l[0]+P*l[1];for(let ie=0;ie<u;ie++){let Z;s?Z=_*(ie+.5)-.5:Z=_*ie;let X=Math.max(0,Math.floor(Z)),G=Z-X,H=Math.min(h-1,Math.ceil(Z)),V=M+X*l[2],K=W+X*l[2],pe=M+H*l[2],ce=W+H*l[2];for(let se=0;se<f;se++){let we=m[V+se],Ne=m[K+se],Ae=m[pe+se],Ce=m[ce+se],Je=we+(Ae-we)*G,Ge=Ne+(Ce-Ne)*G,vt=Je+(Ge-Je)*D;g[y++]=vt}}}return e.makeTensorInfo([d,c,u,f],"float32",g)}var rie={kernelName:op,backendName:"cpu",kernelFunc:I8e};function D8e(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r;ke([i,o],"resizeBilinearGrad");let a=x.computeStrides(o.shape),[l,c,u,d]=o.shape,[,p,h]=i.shape,f=new Float32Array(l*c*u*d),m=[s&&p>1?c-1:c,s&&h>1?u-1:u],g=[s&&p>1?p-1:p,s&&h>1?h-1:h],v=m[0]/g[0],w=m[1]/g[1],y=e.data.get(i.dataId).values,k=0;for(let _=0;_<l;_++){let S=_*a[0];for(let E=0;E<p;E++){let N=E*v,B=Math.floor(N),D=Math.min(Math.ceil(N),c-1),P=S+B*a[1],M=S+D*a[1],W=N-B,ie=1-W;for(let Z=0;Z<h;Z++){let X=Z*w,G=Math.floor(X),H=Math.min(Math.ceil(X),u-1),V=X-G,K=1-V,pe=P+G*a[2],ce=P+H*a[2],se=M+G*a[2],we=M+H*a[2],Ne=ie*K,Ae=ie*V,Ce=W*K,Je=W*V;for(let Ge=0;Ge<d;Ge++){let vt=y[k++];f[pe+Ge]+=vt*Ne,f[ce+Ge]+=vt*Ae,f[se+Ge]+=vt*Ce,f[we+Ge]+=vt*Je}}}}return e.makeTensorInfo([l,u,c,d],"float32",f)}var oie={kernelName:$0,backendName:"cpu",kernelFunc:D8e};function N8e(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r;ke(o,"resizeNearestNeighbor");let l=x.computeStrides(o.shape),[c,u]=a,[d,p,h,f]=o.shape,m=e.data.get(o.dataId).values,g=new Float32Array(d*c*u*f),v=[i&&c>1?p-1:p,i&&u>1?h-1:h],w=[i&&c>1?c-1:c,i&&u>1?u-1:u],y=v[0]/w[0],k=v[1]/w[1],_=0;for(let S=0;S<d;S++){let E=S*l[0];for(let N=0;N<c;N++){let B=s?y*(N+.5):y*N,D=Math.min(p-1,i?Math.round(B):Math.floor(B));s&&(D=Math.max(0,D));let P=E+D*l[1];for(let M=0;M<u;M++){let W=s?k*(M+.5):k*M,ie=Math.min(h-1,i?Math.round(W):Math.floor(W));s&&(ie=Math.max(0,ie));let Z=P+ie*l[2];for(let X=0;X<f;X++){let G=m[Z+X];g[_++]=G}}}}return e.makeTensorInfo([d,c,u,f],o.dtype,g)}var iie={kernelName:rp,backendName:"cpu",kernelFunc:N8e};function A8e(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r;ke([i,o],"resizeNearestNeighborGrad");let a=x.computeStrides(o.shape),l=x.computeStrides(i.shape),[c,u,d,p]=o.shape,[,h,f]=i.shape,m=new Float32Array(c*u*d*p),g=e.data.get(i.dataId).values,v=[s&&h>1?u-1:u,s&&f>1?d-1:d],w=[s&&h>1?h-1:h,s&&f>1?f-1:f],y=v[0]/w[0],k=v[1]/w[1],_=1/y,S=1/k,E=Math.ceil(_)*2+2,N=Math.ceil(S)*2+2;for(let B=0;B<c;B++){let D=B*a[0];for(let P=0;P<u;P++){let M=D+P*a[1],W=Math.floor(P*_),ie=Math.floor(W-E/2);for(let Z=0;Z<d;Z++){let X=M+Z*a[2],G=Math.floor(Z*S),H=Math.floor(G-N/2);for(let V=0;V<p;V++){let K=0;for(let pe=0;pe<E;pe++){let ce=pe+ie;if(ce<0||ce>=h)continue;let se=D+ce*l[1],we=ce*y,Ne=Math.min(u-1,s?Math.round(we):Math.floor(we));if(P===Ne)for(let Ae=0;Ae<N;Ae++){let Ce=Ae+H;if(Ce<0||Ce>=f)continue;let Je=se+Ce*l[2],Ge=Ce*k,vt=Math.min(d-1,s?Math.round(Ge):Math.floor(Ge));Z===vt&&(K+=g[Je+V])}}m[X+V]=K}}}}return e.makeTensorInfo(o.shape,o.dtype,m)}var sie={kernelName:L0,backendName:"cpu",kernelFunc:A8e};function R8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dims:i}=r;ke(o,"reverse");let s=o.shape.length,a=x.parseAxisParam(i,o.shape);if(s===0)return di({inputs:{x:o},backend:e});let l=new gn(o.shape,o.dtype),c=e.bufferSync(o);for(let u=0;u<l.size;u++){let d=l.indexToLoc(u),p=d.slice();a.forEach(h=>p[h]=o.shape[h]-1-p[h]),l.set(c.get(...p),...d)}return e.makeTensorInfo(l.shape,l.dtype,l.values)}var aie={kernelName:ip,backendName:"cpu",kernelFunc:R8e};var lie={kernelName:rg,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:r}=t,{radians:o,fillValue:i,center:s}=n,a=e,l=x.getTypedArrayFromDType(r.dtype,x.sizeFromShape(r.shape)),[c,u,d,p]=r.shape,[h,f]=O.getImageCenter(s,u,d),m=255,g=Math.sin(o),v=Math.cos(o),w=a.data.get(r.dataId).values;for(let k=0;k<c;k++){let _=k*d*u*p;for(let S=0;S<u;S++){let E=S*(d*p);for(let N=0;N<d;N++){let B=N*p;for(let D=0;D<p;D++){let P=[c,S,N,D],M=P[2],W=P[1],ie=(M-h)*v-(W-f)*g,Z=(M-h)*g+(W-f)*v;ie=Math.round(ie+h),Z=Math.round(Z+f);let X=i;if(typeof i!="number"&&(D===3?X=m:X=i[D]),ie>=0&&ie<d&&Z>=0&&Z<u){let H=Z*(d*p),V=ie*p,K=_+H+V+D;X=w[K]}let G=_+E+B+D;l[G]=X}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};var O8e=_t(ru,t=>{let n=Math.floor(t);return t-n<.5?Math.floor(t):t-n>.5?Math.ceil(t):n%2===0?n:n+1}),cie={kernelName:ru,backendName:"cpu",kernelFunc:O8e};function F8e(t){let{inputs:n,backend:e,attrs:r}=t,{indices:o,updates:i}=n,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=O.calculateShapes(i,o,s),p=!0,h=e.bufferSync(o),f=e.bufferSync(i),m=Yl(h,f,s,d,c,l,a,u,0,p);return e.makeTensorInfo(s,m.dtype,m.values)}var uie={kernelName:V0,backendName:"cpu",kernelFunc:F8e};function B8e(t,n){let e=0,r=t.length,o=0;for(;e<r;)o=Math.floor((e+r)/2),t[o]<n?e=o+1:r=o;return r}function P8e(t,n){let e=0,r=t.length,o=0;for(;e<r;)o=Math.floor((e+r)/2),t[o]<=n?e=o+1:r=o;return r}function die(t,n,e,r,o,i){let s=x.getArrayFromDType("int32",e*o);for(let a=0;a<e;++a){let l=t.slice(a*r,(a+1)*r),c=a*o;for(let u=0;u<o;++u)s[c+u]=i==="left"?B8e(l,n[u+c]):P8e(l,n[u+c])}return s}function L8e(t){let{inputs:n,backend:e,attrs:r}=t,{sortedSequence:o,values:i}=n,{side:s}=r,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,c=die(a,l,o.shape[0],o.shape[1],i.shape[1],s);return e.makeTensorInfo(i.shape,"int32",c)}var pie={kernelName:z0,backendName:"cpu",kernelFunc:L8e};function $8e(t){let{inputs:n,backend:e}=t,{condition:r,t:o,e:i}=n;ke([r,o,i],"select");let s=r.shape.length,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=e.data.get(i.dataId).values,u=Lr(o.dtype,i.dtype),d=x.makeZerosTypedArray(x.sizeFromShape(o.shape),u),p=0,h=s===0||s>1||o.shape.length===1?1:x.sizeFromShape(o.shape.slice(1));for(let f=0;f<a.length;f++)for(let m=0;m<h;m++)a[f]===1?d[p++]=l[f]:d[p++]=c[f];return e.makeTensorInfo(o.shape,u,d)}var hie={kernelName:sp,backendName:"cpu",kernelFunc:$8e};var V8e=O.SELU_SCALEALPHA,j8e=O.SELU_SCALE,z8e=_t(iu,t=>t>=0?j8e*t:V8e*(Math.exp(t)-1)),fie={kernelName:iu,backendName:"cpu",kernelFunc:z8e};var H8e=_t(au,t=>t<0?-1:t>0?1:0),mie={kernelName:au,backendName:"cpu",kernelFunc:H8e};var U8e=_t("Sin",t=>Math.sin(t)),gie={kernelName:"Sin",backendName:"cpu",kernelFunc:U8e};var G8e=_t(su,t=>Math.sinh(t)),vie={kernelName:su,backendName:"cpu",kernelFunc:G8e};var W8e=11920928955078125e-23,wie=Math.log(W8e)+2,q8e=_t(cu,t=>{let n=t>-wie,e=t<wie,r=Math.exp(t),o;return e?o=r:n?o=t:o=Math.log(1+r),o}),yie={kernelName:cu,backendName:"cpu",kernelFunc:q8e};function K8e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,paddings:s}=r;ke([o],"spaceToBatchND");let a=x.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let S=1+i.length;S<o.shape.length;++S)l.push([0,0]);let c=zE.kernelFunc({inputs:{x:o},backend:e,attrs:{paddings:l,constantValue:0}}),u=O.getReshaped(c.shape,i,a,!1),d=O.getPermuted(u.length,i.length,!1),p=O.getReshapedPermuted(c.shape,i,a,!1),m=sn({inputs:{x:c},backend:e,attrs:{shape:u}}),w=hr({inputs:{x:m},backend:e,attrs:{perm:d}}),_=sn({inputs:{x:w},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(w),_}var xie={kernelName:lp,backendName:"cpu",kernelFunc:K8e};function Z8e(t){let{inputs:n,backend:e}=t,{indices:r,values:o,denseShape:i,defaultValue:s}=n;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=e.data.get(i.dataId).values,u=e.data.get(s.dataId).values[0],[d,p,h,f,m]=IE(a,r.shape,r.dtype,l,o.dtype,c,u);return[e.makeTensorInfo(p,r.dtype,d),e.makeTensorInfo([p[0]],o.dtype,h),e.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),e.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var kie={kernelName:U0,backendName:"cpu",kernelFunc:Z8e};function X8e(t){let{inputs:n,backend:e}=t,{inputIndices:r,inputShape:o,newShape:i}=n;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=Array.from(e.data.get(o.dataId).values),a=e.data.get(r.dataId).values,l=Array.from(e.data.get(i.dataId).values),[c,u,d]=DE(a,r.shape,r.dtype,s,l);return[e.makeTensorInfo(u,r.dtype,c),e.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var _ie={kernelName:G0,backendName:"cpu",kernelFunc:X8e};function Y8e(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,[c,u]=hw(s,r.shape,r.dtype,a,l,!0);return e.makeTensorInfo(u,r.dtype,c)}var bie={kernelName:W0,backendName:"cpu",kernelFunc:Y8e};function Q8e(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(o.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=e.data.get(r.dataId).values,a=e.data.get(o.dataId).values,l=e.data.get(i.dataId).values,[c,u]=hw(s,r.shape,r.dtype,a,l);return e.makeTensorInfo(u,r.dtype,c)}var Cie={kernelName:q0,backendName:"cpu",kernelFunc:Q8e};function J8e(t){let{inputs:n,backend:e,attrs:r}=t,{sparseIndices:o,sparseValues:i,defaultValue:s}=n,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=O.calculateShapes(i,o,a),h=!1,f=e.bufferSync(o),m;switch(i.dtype){case"bool":{let g=e.bufferSync(i),v=!!e.data.get(s.dataId).values[0];m=Yl(f,g,a,p,u,c,l,d,v,h);break}case"float32":{let g=e.bufferSync(i),v=e.data.get(s.dataId).values[0];m=Yl(f,g,a,p,u,c,l,d,v,h);break}case"int32":{let g=e.bufferSync(i),v=e.data.get(s.dataId).values[0];m=Yl(f,g,a,p,u,c,l,d,v,h);break}case"string":{let g=e.bufferSync(i),v=x.decodeString(e.data.get(s.dataId).values[0]);m=Yl(f,g,a,p,u,c,l,d,v,h);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return e.makeTensorInfo(a,m.dtype,m.values)}var Mie={kernelName:K0,backendName:"cpu",kernelFunc:J8e};function eOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{numOrSizeSplits:i,axis:s}=r,a=x.parseAxisParam(s,o.shape)[0],l=O.prepareSplitSize(o,i,a),c=new Array(o.shape.length).fill(0),u=o.shape.slice();return l.map(d=>{let p=[...u];p[a]=d;let h=Ja({inputs:{x:o},backend:e,attrs:{begin:c,size:p}});return c[a]+=d,h})}var Sie={kernelName:cp,backendName:"cpu",kernelFunc:eOe};var Tie={kernelName:Z0,backendName:"cpu",kernelFunc:({inputs:t,backend:n})=>{let{x:e}=t,r=n;ke(e,"square");let o=r.data.get(e.dataId).values,i=new Float32Array(o.length);for(let a=0;a<o.length;++a){let l=o[a];i[a]=l*l}return{dataId:r.write(i,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}};var tOe=_t(hu,(t,n)=>{let e=n;return isNaN(t)?NaN:t>0?1:e.alpha}),Eie={kernelName:hu,backendName:"cpu",kernelFunc:tOe};function nOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=r;ke(o,"stridedSlice");let{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:w,end:y,strides:k}=go.sliceInfo(o.shape,i,s,a,l,c,u,d,p),_;if(m)_=sn({inputs:{x:o},backend:e,attrs:{shape:f}});else if(g||v){x.assert(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let S=go.computeOutShape(w,y,k),E=Ja({inputs:{x:o},backend:e,attrs:{begin:w,size:S}});_=sn({inputs:{x:E},backend:e,attrs:{shape:f}}),e.disposeIntermediateTensorInfo(E)}else{let S=e.bufferSync(o),E=NE(h,S,k,w);_=e.makeTensorInfo(f,E.dtype,E.values)}return _}var Iie={kernelName:X0,backendName:"cpu",kernelFunc:nOe};function rOe(t){let{inputs:n,backend:e,attrs:r}=t,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=n,p=e.data.get(u.dataId).values,h=e.data.get(d.dataId).values,[f,m]=AE(p,h,o,i,s,a,l,c);return[e.makeTensorInfo([f.length],"string",f),e.makeTensorInfo(d.shape,"int32",m)]}var Die={kernelName:Y0,backendName:"cpu",kernelFunc:rOe};function oOe(t){let{inputs:n,backend:e,attrs:r}=t,{skipEmpty:o}=r,{input:i,delimiter:s}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=e.data.get(i.dataId).values,l=e.data.get(s.dataId).values[0],[c,u,d]=RE(a,l,o),p=u.length;return[e.makeTensorInfo([p,2],"int32",c),e.makeTensorInfo([p],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}var Nie={kernelName:Q0,backendName:"cpu",kernelFunc:oOe};function iOe(t){let{inputs:n,backend:e,attrs:r}=t,{numBuckets:o}=r,{input:i}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");let s=e.data.get(i.dataId).values,a=OE(s,o);return e.makeTensorInfo(i.shape,"int32",a)}var Aie={kernelName:J0,backendName:"cpu",kernelFunc:iOe};var sOe=_t("Tan",t=>Math.tan(t)),Rie={kernelName:"Tan",backendName:"cpu",kernelFunc:sOe};var aOe=_t(pu,t=>Math.tanh(t)),Oie={kernelName:pu,backendName:"cpu",kernelFunc:aOe};function lOe(t){let{inputs:n,backend:e}=t,{tensor:r,indices:o,updates:i}=n,{sliceRank:s,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=O.calculateShapes(i,o,r.shape),d=!1,p=e.bufferSync(o),h=e.bufferSync(i),f=e.bufferSync(r),m=Yl(p,h,r.shape,u,l,a,s,c,f,d);return e.makeTensorInfo(r.shape,m.dtype,m.values)}var Fie={kernelName:j0,backendName:"cpu",kernelFunc:lOe};function cOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reps:i}=r;ke(o,"tile");let s=FE(e.bufferSync(o),i);return e.makeTensorInfo(s.shape,s.dtype,s.values)}var Bie={kernelName:Tl,backendName:"cpu",kernelFunc:cOe};function uOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{k:i,sorted:s}=r;ke(o,"topk");let a=e.data.get(o.dataId).values,[l,c]=BE(a,o.shape,o.dtype,i,s);return[e.makeTensorInfo(l.shape,l.dtype,l.values),e.makeTensorInfo(c.shape,c.dtype,c.values)]}var Pie={kernelName:eg,backendName:"cpu",kernelFunc:uOe};function dOe(t){let{inputs:n,attrs:e,backend:r}=t,{image:o,transforms:i}=n,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=e,[u,d,p,h]=o.shape,[f,m]=c??[d,p],g=[u,f,m,h],v=x.computeStrides(o.shape),w=v[0],y=v[1],k=v[2],_=x.computeStrides(g),S=_[0],E=_[1],N=_[2],B=x.getTypedArrayFromDType(o.dtype,x.sizeFromShape(g));B.fill(l);let D=r.data.get(o.dataId).values,P=r.data.get(i.dataId).values;for(let W=0;W<u;++W){let ie=i.shape[0]===1?P:P.subarray(W*8,W*8+8);for(let Z=0;Z<f;++Z)for(let X=0;X<m;++X)for(let G=0;G<h;++G){let H,V=ie[6]*X+ie[7]*Z+1;if(V===0)continue;let K=(ie[0]*X+ie[1]*Z+ie[2])/V,pe=(ie[3]*X+ie[4]*Z+ie[5])/V,ce=Lie(K,p,a),se=Lie(pe,d,a);switch(s){case"nearest":H=gOe(D,d,p,w,y,k,W,se,ce,G,l);break;case"bilinear":H=vOe(D,d,p,w,y,k,W,se,ce,G,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}let we=W*S+Z*E+X*N+G;B[we]=H}return r.makeTensorInfo(g,o.dtype,B)}return{dataId:r.write(B,g,o.dtype),shape:o.shape,dtype:o.dtype}}var $ie={kernelName:tg,backendName:"cpu",kernelFunc:dOe};function Lie(t,n,e){switch(e){case"reflect":return pOe(t,n);case"wrap":return hOe(t,n);case"nearest":return mOe(t,n);case"constant":default:return fOe(t,n)}}function pOe(t,n){let e=t;if(e<0)if(n<=1)e=0;else{let r=2*n;e<r&&(e=r*Math.trunc(-e/r)+e),e=e<-n?e+r:-e-1}else if(e>n-1)if(n<=1)e=0;else{let r=2*n;e-=r*Math.trunc(e/r),e>=n&&(e=r-e-1)}return x.clamp(0,e,n-1)}function hOe(t,n){let e=t;if(e<0)if(n<=1)e=0;else{let r=n-1;e+=n*(Math.trunc(-e/r)+1)}else if(e>n-1)if(n<=1)e=0;else{let r=n-1;e-=n*Math.trunc(e/r)}return x.clamp(0,e,n-1)}function fOe(t,n){return t}function mOe(t,n){return x.clamp(0,t,n-1)}function ab(t,n,e,r,o,i,s,a,l,c,u){let d=s*r+a*o+l*i+c;return 0<=a&&a<n&&0<=l&&l<e?t[d]:u}function gOe(t,n,e,r,o,i,s,a,l,c,u){let d=Math.round(a),p=Math.round(l);return ab(t,n,e,r,o,i,s,d,p,c,u)}function vOe(t,n,e,r,o,i,s,a,l,c,u){let d=Math.floor(a),p=Math.floor(l),h=d+1,f=p+1,m=(f-l)*ab(t,n,e,r,o,i,s,d,p,c,u)+(l-p)*ab(t,n,e,r,o,i,s,d,f,c,u),g=(f-l)*ab(t,n,e,r,o,i,s,h,p,c,u)+(l-p)*ab(t,n,e,r,o,i,s,h,f,c,u);return(h-a)*m+(a-d)*g}function wOe(t){let{inputs:n,attrs:e,backend:r}=t,{axis:o}=e,{x:i}=n;ke(i,"unique");let s=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:c}=PE(s,o,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}var Vie={kernelName:ng,backendName:"cpu",kernelFunc:wOe};function yOe(t){let{inputs:n,backend:e,attrs:r}=t,{value:o}=n,{axis:i}=r;i<0&&(i+=o.shape.length);let s=o.shape.length,a=o.shape[i],l=new Array(s-1),c=0;for(let h=0;h<s;h++)h!==i&&(l[c++]=o.shape[h]);let u=new Array(s).fill(0),d=o.shape.slice();d[i]=1;let p=new Array(a);for(let h=0;h<p.length;h++){u[i]=h;let f=Ja({inputs:{x:o},backend:e,attrs:{begin:u,size:d}});p[h]=sn({inputs:{x:f},backend:e,attrs:{shape:l}}),e.disposeIntermediateTensorInfo(f)}return p}var jie={kernelName:dp,backendName:"cpu",kernelFunc:yOe};function xOe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,segmentIds:i}=n,{numSegments:s}=r;ke(o,"unsortedSegmentSum");let a=o.shape.length,l=i.shape.length,c=[],u=[],d=a-l,p=i;for(let f=0;f<d;++f){let m=mw({inputs:{input:p},backend:e,attrs:{dim:f+1}});p=m,u.push(m)}for(let f=0;f<s;++f){let m=x.createScalarValue(f,"int32"),g=e.makeTensorInfo([],"int32",m),v=v7({inputs:{a:g,b:p},backend:e}),w=Ya({inputs:{x:v},backend:e,attrs:{dtype:"float32"}}),y=e2({inputs:{a:w,b:o},backend:e}),k=Up({inputs:{x:y},backend:e,attrs:{axis:0,keepDims:!1}});c.push(k),u.push(g),u.push(v),u.push(w),u.push(y),u.push(k)}let h=Q7({inputs:c,backend:e,attrs:{axis:0}});return u.forEach(f=>e.disposeIntermediateTensorInfo(f)),h}var zie={kernelName:pp,backendName:"cpu",kernelFunc:xOe};var kOe=[hre,kne,fre,mre,Sne,gre,vre,wre,yre,xre,kre,_re,bre,Cre,Mre,Tre,Ere,Ire,Dre,pre,Nre,Are,Rre,Tne,Ore,Mne,Ene,Fre,_ne,Bre,Lre,$re,Vre,jre,zre,Hre,Ure,Gre,Wre,qre,Kre,Zre,Xre,Yre,Qre,Jre,eoe,toe,noe,roe,ooe,ioe,aoe,sre,loe,Ine,coe,Dne,uoe,Nne,doe,poe,hoe,Ane,Rne,foe,moe,goe,voe,One,Fne,bne,woe,Pre,yoe,xoe,koe,are,Bne,Pne,_oe,Lne,boe,Coe,Moe,Soe,Toe,Eoe,Ioe,$ne,Doe,Noe,Aoe,Roe,Foe,Boe,Poe,Vne,Loe,$oe,zoe,jne,zne,Hoe,Uoe,Goe,Hne,Woe,Zoe,Xoe,zE,Yoe,lre,Gne,Qoe,Joe,eie,tie,Cne,ob,nie,cre,ure,dre,rie,oie,iie,sie,aie,lie,cie,Xne,uie,pie,hie,fie,Qne,mie,gie,vie,Jne,Voe,yie,xie,kie,_ie,bie,Cie,Mie,Sie,tre,Tie,nre,rre,Eie,Iie,Die,Nie,Aie,ore,soe,Rie,Oie,Fie,Bie,Pie,$ie,Une,Vie,jie,zie,qoe];for(let t of kOe)fv(t);var i2={};Qt(i2,{assertNotComplex:()=>Ql,bindCanvasToFramebuffer:()=>DOe,bindColorTextureToFramebuffer:()=>db,bindTextureToProgramUniformSampler:()=>h9,bindTextureUnit:()=>Wie,bindVertexBufferToProgramAttribute:()=>ZE,callAndCheck:()=>Qe,canBeRepresented:()=>t9,createFragmentShader:()=>r9,createFramebuffer:()=>u9,createProgram:()=>o9,createStaticIndexBuffer:()=>a9,createStaticVertexBuffer:()=>s9,createTexture:()=>l9,createVertexShader:()=>n9,getBatchDim:()=>Wp,getExtensionOrThrow:()=>gw,getFramebufferErrorMessage:()=>qie,getMaxTexturesInShader:()=>g9,getNumChannels:()=>EOe,getProgramUniformLocation:()=>p9,getProgramUniformLocationOrThrow:()=>d9,getRowsCols:()=>qp,getShapeAs3D:()=>ww,getTextureShapeFromLogicalShape:()=>f9,getWebGLDisjointQueryTimerVersion:()=>v9,getWebGLErrorMessage:()=>Gie,getWebGLMaxTextureSize:()=>m9,hasExtension:()=>Ps,isCapableOfRenderingToFloatTexture:()=>w9,isDownloadFloatTextureEnabled:()=>y9,isReshapeFree:()=>Pf,isWebGLFenceEnabled:()=>x9,isWebGLVersionEnabled:()=>YE,linkProgram:()=>i9,logShaderSourceAndInfoLog:()=>KE,resetMaxTextureSize:()=>NOe,resetMaxTexturesInShader:()=>AOe,unbindColorTextureFromFramebuffer:()=>XE,unbindTextureUnit:()=>IOe,validateFramebuffer:()=>vw,validateProgram:()=>ub,validateTextureSize:()=>c9});var n2={},HE={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function UE(t,n){n2[t]=n}function Bs(t,n){if(!(t in n2)||n!=null){let r=bOe(t,n);if(r!==null)n2[t]=r;else return console.log("Could not get context for WebGL version",t),null}let e=n2[t];return e==null||e.isContextLost()?(delete n2[t],Bs(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),n2[t])}function _Oe(t){if(!Y().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function bOe(t,n){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let e=n??_Oe(t);return e.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete n2[t]},!1),Y().getBool("SOFTWARE_WEBGL_ENABLED")&&(HE.failIfMajorPerformanceCaveat=!1),t===1?e.getContext("webgl",HE)||e.getContext("experimental-webgl",HE):e.getContext("webgl2",HE)}var r2=(function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t})(r2||{}),ki=(function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t})(ki||{}),pi=(function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t})(pi||{});function o2(t,n){return[n,t]}function Hie(t,n){return t*n}function lb(t){let n=x.sizeFromShape(t),e=Math.ceil(n/4);return x.sizeToSquarishShape(e)}function Ou(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function Uie(t,n){let[e,r]=Ou(t,n);return e*r*4}function cb(t,n){let e=t,r,o,i,s,a,l,c,u,d,p;return Y().getNumber("WEBGL_VERSION")===2?(r=e.R32F,o=e.R16F,i=e.RGBA16F,s=e.RGBA32F,a=e.RED,c=4,u=1,d=e.HALF_FLOAT,p=e.FLOAT,l=e.RGBA8):(r=t.RGBA,o=t.RGBA,i=t.RGBA,s=e.RGBA,a=t.RGBA,c=4,u=4,d=n!=null?n.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:p}}function Qe(t,n){let e=n();return Y().getBool("DEBUG")&&COe(t),e}function COe(t){let n=t.getError();if(n!==t.NO_ERROR)throw new Error("WebGL Error: "+Gie(t,n))}var MOe=596e-10,SOe=65504;function t9(t){return!!(Y().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||MOe<Math.abs(t)&&Math.abs(t)<SOe)}function Gie(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${n}`}}function gw(t,n){return Gp(t,()=>t.getExtension(n),'Extension "'+n+'" not supported on this browser.')}function n9(t,n){let e=Gp(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Qe(t,()=>t.shaderSource(e,n)),Qe(t,()=>t.compileShader(e)),t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}function r9(t,n){let e=Gp(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Qe(t,()=>t.shaderSource(e,n)),Qe(t,()=>t.compileShader(e)),Y().get("ENGINE_COMPILE_ONLY"))return e;if(t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw KE(n,t.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}var TOe=/ERROR: [0-9]+:([0-9]+):/g;function KE(t,n){let e=TOe.exec(n);if(e==null){console.log(`Couldn't parse line number in error: ${n}`),console.log(t);return}let r=+e[1],o=t.split(`
`),i=o.length.toString().length+2,s=o.map((d,p)=>x.rightPad((p+1).toString(),i)+d),a=0;for(let d=0;d<s.length;d++)a=Math.max(s[d].length,a);let l=s.slice(0,r-1),c=s.slice(r-1,r),u=s.slice(r);console.log(l.join(`
`)),console.log(n.split(`
`)[0]),console.log(`%c ${x.rightPad(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function o9(t){return Gp(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function i9(t,n){if(Qe(t,()=>t.linkProgram(n)),!Y().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function ub(t,n){if(Qe(t,()=>t.validateProgram(n)),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function s9(t,n){let e=Gp(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),Qe(t,()=>t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)),e}function a9(t,n){let e=Gp(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Qe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e)),Qe(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)),e}function EOe(){return Y().getNumber("WEBGL_VERSION")===2?1:4}function l9(t){return Gp(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function c9(t,n){let e=Y().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){let r=`[${t}x${n}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>e||n>e){let r=`[${t}x${n}]`,o=`[${e}x${e}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function u9(t){return Gp(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function ZE(t,n,e,r,o,i,s){let a=t.getAttribLocation(n,e);return a===-1?!1:(Qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Qe(t,()=>t.vertexAttribPointer(a,o,t.FLOAT,!1,i,s)),Qe(t,()=>t.enableVertexAttribArray(a)),!0)}function Wie(t,n,e){Kie(t,e),Qe(t,()=>t.activeTexture(t.TEXTURE0+e)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,n))}function IOe(t,n){Kie(t,n),Qe(t,()=>t.activeTexture(t.TEXTURE0+n)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function d9(t,n,e){return Gp(t,()=>t.getUniformLocation(n,e),'uniform "'+e+'" not present in program.')}function p9(t,n,e){return t.getUniformLocation(n,e)}function h9(t,n,e,r){Qe(t,()=>Wie(t,n,r)),Qe(t,()=>t.uniform1i(e,r))}function DOe(t){Qe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Qe(t,()=>t.viewport(0,0,t.canvas.width,t.canvas.height)),Qe(t,()=>t.scissor(0,0,t.canvas.width,t.canvas.height))}function db(t,n,e){Qe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Qe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0))}function XE(t,n){Qe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Qe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function vw(t){let n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+qie(t,n))}function qie(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${n}`}}function Gp(t,n,e){let r=Qe(t,()=>n());if(r==null)throw new Error(e);return r}function Kie(t,n){let e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+t.TEXTURE0;if(r<t.TEXTURE0||r>e){let o=`[gl.TEXTURE0, gl.TEXTURE${e}]`;throw new Error(`textureUnit must be in ${o}.`)}}function Wp(t,n=2){return x.sizeFromShape(t.slice(0,t.length-n))}function qp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function ww(t){let n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[Wp(t),...qp(t)]),n}function f9(t,n=!1){let e=Y().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Y().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Y().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=e/2),n&&(e=e*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?x.nearestLargerEven(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=x.squeezeShape(t).newShape);let o=x.sizeFromShape(t),i=null;t.length<=1&&o<=e?i=[1,o]:t.length===2&&t[0]<=e&&t[1]<=e?i=t:t.length===3&&t[0]*t[1]<=e&&t[2]<=e?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=e&&t[1]*t[2]<=e?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=e&&t[3]<=e?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=e&&t[1]*t[2]*t[3]<=e&&(i=[t[0],t[1]*t[2]*t[3]]);let s=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(n?2:1)&&Math.min(...i)>0;if(i==null||s)if(n){let a=Wp(t),l=2,c=2;t.length&&([l,c]=qp(t)),o=a*(l/2)*(c/2),i=x.sizeToSquarishShape(o).map(u=>u*2)}else i=x.sizeToSquarishShape(o);return i}function GE(t){return t%2===0}function Pf(t,n){if(t=t.slice(-2),n=n.slice(-2),x.arraysEqual(t,n)||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){let e=t[t.length-1],r=n[n.length-1];if(e===r||GE(e)&&GE(r)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&GE(t[0])&&GE(n[0])}var WE,qE;function m9(t){if(WE==null){let n=Bs(t);WE=n.getParameter(n.MAX_TEXTURE_SIZE)}return WE}function NOe(){WE=null}function AOe(){qE=null}function g9(t){if(qE==null){let n=Bs(t);qE=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,qE)}function v9(t){if(t===0)return 0;let n,e=Bs(t);return Ps(e,"EXT_disjoint_timer_query_webgl2")&&t===2?n=2:Ps(e,"EXT_disjoint_timer_query")?n=1:n=0,n}function Ps(t,n){return t.getExtension(n)!=null}function YE(t){try{if(Bs(t)!=null)return!0}catch(n){return console.log("Error when getting WebGL context: ",n),!1}return!1}function w9(t){if(t===0)return!1;let n=Bs(t);if(t===1){if(!Ps(n,"OES_texture_float"))return!1}else if(!Ps(n,"EXT_color_buffer_float"))return!1;return e9(n)}function y9(t){if(t===0)return!1;let n=Bs(t);if(t===1){if(!Ps(n,"OES_texture_float")||!Ps(n,"WEBGL_color_buffer_float"))return!1}else{if(Ps(n,"EXT_color_buffer_float"))return e9(n);let r="EXT_color_buffer_half_float";if(Ps(n,r)){let o=n.getExtension(r);return ROe(n,o)}return!1}return e9(n)}function e9(t){let n=cb(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);let i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(i),s}function ROe(t,n){let e=cb(t,n),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatHalfFloat,1,1,0,e.textureFormatFloat,e.textureTypeHalfFloat,null);let s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);let a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(s),a}function x9(t){return t!==2?!1:Bs(t).fenceSync!=null}function Ql(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{e!=null&&x.assert(e.dtype!=="complex64",()=>`${n} does not support complex64 tensors in the WebGL backend.`)})}var ft=Y();ft.registerFlag("HAS_WEBGL",()=>ft.getNumber("WEBGL_VERSION")>0);ft.registerFlag("WEBGL_VERSION",()=>YE(2)?2:YE(1)?1:0);ft.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ft.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ft.get("WEBGL_VERSION")===2);ft.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ft.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ft.registerFlag("WEBGL_PACK",()=>ft.getBool("HAS_WEBGL"));ft.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_PACK_CLIP",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_PACK_REDUCE",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_LAZILY_UNPACK",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_CONV_IM2COL",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>ft.getBool("WEBGL_PACK"));ft.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>m9(ft.getNumber("WEBGL_VERSION")));ft.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>g9(ft.getNumber("WEBGL_VERSION")));ft.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let t=ft.getNumber("WEBGL_VERSION");return t===0?0:v9(t)});ft.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ft.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!fp.isMobile());ft.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>w9(ft.getNumber("WEBGL_VERSION")));ft.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ft.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ft.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ft.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>y9(ft.getNumber("WEBGL_VERSION")));ft.registerFlag("WEBGL_FENCE_API_ENABLED",()=>x9(ft.getNumber("WEBGL_VERSION")));ft.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ft.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ft.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});ft.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>fp.isMobile()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});ft.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);ft.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);ft.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);ft.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);ft.registerFlag("WEBGL_EXP_CONV",()=>!1);ft.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>ft.getBool("IS_TEST"));ft.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);ft.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);ft.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);ft.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function fr(){let t,n,e,r,o,i,s,a,l,c;return Y().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",r="in",o="texture",i="outputColor",s="out vec4 outputColor;",a=Y().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",r="varying",o="texture2D",i="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:r,texture2D:o,output:i,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}function Jl(t,n,e="index"){let r=x.computeStrides(n);return r.map((o,i)=>{let s=`int ${t[i]} = ${e} / ${o}`,a=i===r.length-1?`int ${t[i+1]} = ${e} - ${t[i]} * ${o}`:`index -= ${t[i]} * ${o}`;return`${s}; ${a};`}).join("")}function s2(t,n,e="index"){let r=x.computeStrides(n);return r.map((o,i)=>{let s=`int ${t[i]} = ${e} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${e} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${s}; ${a};`}).join("")}function OOe(t,n){let e=t.length,r=t.map(i=>`${n}[${i}]`),o=new Array(e-1);o[e-2]=r[e-1];for(let i=e-3;i>=0;--i)o[i]=`(${o[i+1]} * ${r[i+1]})`;return o}function Zie(t,n,e="index"){let r=t.map((i,s)=>s),o=OOe(r,n);return o.map((i,s)=>{let a=`int ${t[s]} = ${e} / ${o[s]}`,l=s===o.length-1?`int ${t[s+1]} = ${e} - ${t[s]} * ${o[s]}`:`index -= ${t[s]} * ${o[s]}`;return`${a}; ${l};`}).join("")}function yw(t){let n=x.computeStrides(t).map(e=>e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${n[0]} + coords.y * ${n[1]} + coords.z;
  }
`}function xw(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var QE=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:Xie}=O;function Yie(t,n,e){let r=[];if(t.forEach(h=>{let f=x.sizeFromShape(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${f>1?`[${f}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),e.enableShapeUniforms){let{uniformShape:m}=JE(e.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break;default:break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),e.enableShapeUniforms){switch(n.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break;default:break}r.push("uniform ivec2 outTexShape;")}e.customUniforms&&e.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});let o=r.join(`
`),i=t.map(h=>FOe(h,n,e.packedInputs,e.enableShapeUniforms)).join(`
`),s=n.texShape,a=fr(),l=LOe(a),c,u,d=jOe(a);return n.isPacked?(c=BOe(n.logicalShape,s,e.enableShapeUniforms),u=VOe(a)):(c=POe(n.logicalShape,s,e.enableShapeUniforms),u=$Oe(a)),e.packedInputs&&(d+=GOe),[d,l,u,o,c,i,e.userCode].join(`
`)}function _w(t,n=!1){let e=t.shapeInfo.logicalShape;switch(e.length){case 0:return rFe(t,n);case 1:return iFe(t,n);case 2:return aFe(t,n);case 3:return cFe(t,n);case 4:return dFe(t,n);case 5:return pFe(t);case 6:return hFe(t);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function Qie(t,n){switch(t.shapeInfo.logicalShape.length){case 0:return nFe(t);case 1:return oFe(t,n);case 2:return sFe(t,n);case 3:return lFe(t,n);default:return uFe(t,n)}}function FOe(t,n,e=!1,r){let o="";e?o+=Qie(t,r):o+=_w(t,r);let i=t.shapeInfo.logicalShape,s=n.logicalShape;return i.length<=s.length&&(e?o+=fFe(t,n):o+=mFe(t,n)),o}function BOe(t,n,e){switch(t.length){case 0:return Jie();case 1:return WOe(t,n,e);case 2:return eFe(t,n,e);case 3:return KOe(t,n,e);default:return XOe(t,n,e)}}function POe(t,n,e){switch(t.length){case 0:return Jie();case 1:return qOe(t,n,e);case 2:return tFe(t,n,e);case 3:return ZOe(t,n,e);case 4:return YOe(t,n,e);case 5:return QOe(t,n);case 6:return JOe(t,n);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function LOe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function $Oe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function VOe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function jOe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${zOe}
    ${HOe}
    ${UOe}
  `}var zOe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,HOe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,UOe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,GOe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Jie(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function WOe(t,n,e){let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return r[0]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function qOe(t,n,e){return n[0]===1?e?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${n[1]}.0);
      }
    `:n[1]===1?e?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${n[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      return resTexRC.x * ${n[1]} + resTexRC.y;
    }
  `}function KOe(t,n,e){if(e)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],o=Math.ceil(t[2]/2),i=o*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function ZOe(t,n,e){if(e)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${s2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;let r=Jl(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function XOe(t,n,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],o=Math.ceil(t[t.length-1]/2),i=o*Math.ceil(t[t.length-2]/2),s=i,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)s*=t[t.length-c-1],a=`
      int b${c} = index / ${s};
      index -= b${c} * ${s};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${t.length}(${l});
    }
  `}function YOe(t,n,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${s2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;let r=Jl(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function QOe(t,n){let e=Jl(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},
                             ${n[1]}));

      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${e}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function JOe(t,n){let e=Jl(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${e}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function eFe(t,n,e){let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(x.arraysEqual(t,n))return e?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;let o=Math.ceil(t[1]/2);return e?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function tFe(t,n,e){return x.arraysEqual(t,n)?e?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));
      }
    `:t[1]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.x * ${n[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.x * ${n[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:e?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function a2(t){return`offset${t}`}function nFe(t){let n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),r=fr();return`
    vec4 ${e}() {
      return ${r.texture2D}(${n}, halfCR);
    }
  `}function rFe(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${e};}`;let[o,i]=t.shapeInfo.texShape;if(o===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${e}, halfCR);
      }
    `;let s=a2(e);if(n)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], ${s});
      return sampleTexture(${e}, uv);
    }
  `;let[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${s});
      return sampleTexture(${e}, uv);
    }
  `}function oFe(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=t.shapeInfo.texShape,i=fr();if(n)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${e}, uv);
    }
  `;let s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${i.texture2D}(${e}, uv);
    }
  `}function iFe(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${bw(t)}
      }
    `;let o=t.shapeInfo.texShape,i=o[0],s=o[1];if(s===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${e}, halfCR);
      }
    `;let a=a2(e);return s===1?n?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${e}TexShape[0]));
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${e}, uv);
      }
    `:i===1?n?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${e}TexShape[1]), 0.5);
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${e}, uv);
      }
    `:n?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], index + ${a});
      return sampleTexture(${e}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${s}, index + ${a});
      return sampleTexture(${e}, uv);
    }
  `}function sFe(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=i[0],a=i[1],l=fr();if(i!=null&&x.arraysEqual(e,i))return n?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(n)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;let c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(e[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function aFe(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&x.arraysEqual(e,i)){if(n)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;let p=i[0],h=i[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}let{newShape:s,keptDims:a}=x.squeezeShape(e),l=s;if(l.length<e.length){let p=Cw(t,l),h=["row","col"];return`
      ${_w(p,n)}
      float ${o}(int row, int col) {
        return ${o}(${Mw(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));
        ${bw(t)}
      }
    `;let c=i[0],u=i[1],d=a2(r);return u===1?n?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?n?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:n?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${e[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function lFe(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(e[0]===1){let p=e.slice(1),h=[1,2],f=Cw(t,p),m=["b","row","col"];return`
        ${Qie(f,n)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${Mw(m,h)});
        }
      `}let a=fr();if(n)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;let l=s[0],c=s[1],u=Math.ceil(e[2]/2),d=u*Math.ceil(e[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function cFe(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e[1]*e[2],s=e[2],{newShape:a,keptDims:l}=x.squeezeShape(e),c=a;if(c.length<e.length){let m=Cw(t,c),g=["row","col","depth"];return`
        ${_w(m,n)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${Mw(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${s}, 1)));
        ${bw(t)}
      }
    `;let u=t.shapeInfo.texShape,d=u[0],p=u[1],h=t.shapeInfo.flatOffset;if(p===i&&h==null)return n?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===s&&h==null)return n?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;let f=a2(r);return n?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${f};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${s} + depth + ${f};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function uFe(t,n){let e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=fr();if(n)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${e}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${e}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${e}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${e}, uv);
    }
  `;let i=t.shapeInfo.logicalShape,s=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[s-1]/2),p=d*Math.ceil(i[s-2]/2),h="int b, int row, int col",f=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<s-1;m++)h=`int b${m}, `+h,p*=i[s-m-1],f=`b${m} * ${p} + `+f;return`
    vec4 ${r}(${h}) {
      int index = ${f};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${o.texture2D}(${e}, uv);
    }
  `}function dFe(t,n){let e=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e[3],s=e[2]*i,a=e[1]*s,{newShape:l,keptDims:c}=x.squeezeShape(e);if(l.length<e.length){let w=Cw(t,l),y=["row","col","depth","depth2"];return`
      ${_w(w,n)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${Mw(y,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${s}, ${i}, 1)));
        ${bw(t)}
      }
    `;let u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&u==null)return n?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${f}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===i&&u==null)return n?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${e[1]*e[2]}, ${e[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;let v=a2(r);return n?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${f}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${h}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function pFe(t){let n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),o=n[4],i=n[3]*o,s=n[2]*i,a=n[1]*s,{newShape:l,keptDims:c}=x.squeezeShape(n);if(l.length<n.length){let m=Cw(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${_w(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Mw(g,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${s}, ${i}, ${o})) +
          depth3;
        ${bw(t)}
      }
    `;let u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1];if(h===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(h===o&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${n[1]*n[2]*n[3]},
               ${n[2]*n[3]}, ${n[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${e}, uv);
      }
    `;let f=a2(e);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} + depth * ${i} +
          depth2 * ${o} + depth3 + ${f};
      vec2 uv = uvFromFlat(${p}, ${h}, index);
      return sampleTexture(${e}, uv);
    }
  `}function hFe(t){let n=t.shapeInfo.logicalShape,e=t.name,r="get"+e.charAt(0).toUpperCase()+e.slice(1),{newShape:o,keptDims:i}=x.squeezeShape(n);if(o.length<n.length){let g=Cw(t,o),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${_w(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Mw(v,i)});
      }
    `}let s=n[5],a=n[4]*s,l=n[3]*a,c=n[2]*l,u=n[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${bw(t)}
      }
    `;let d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],f=p[1];if(f===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(f===s&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${n[1]*n[2]*n[3]*n[4]},
               ${n[2]*n[3]*n[4]},
               ${n[3]*n[4]},
               ${n[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${e}, uv);
      }
    `;let m=a2(e);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${s} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${e}, uv);
    }
  `}function bw(t){let n=t.name,e=x.sizeFromShape(t.shapeInfo.logicalShape);return e<2?`return ${n};`:`
    for (int i = 0; i < ${e}; i++) {
      if (i == index) {
        return ${n}[i];
      }
    }
  `}function fFe(t,n){let e=t.name,r=e.charAt(0).toUpperCase()+e.slice(1),o="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=n.logicalShape.length,a=Xie(t.shapeInfo.logicalShape,n.logicalShape),l=$t(s),c=s-i,u,d=["x","y","z","w","u","v"];i===0?u="":s<2&&a.length>=1?u="coords = 0;":u=a.map(w=>`coords.${d[w+c]} = 0;`).join(`
`);let p="";s<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((w,y)=>`coords.${d[y+c]}`).join(", ");let h="return outputValue;",m=x.sizeFromShape(t.shapeInfo.logicalShape)===1,v=x.sizeFromShape(n.logicalShape)===1;if(i===1&&!m&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!v)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){let w=i-2,y=i-1;a.indexOf(w)>-1&&a.indexOf(y)>-1?h="return vec4(outputValue.x);":a.indexOf(w)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(y)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${p});
      ${h}
    }
  `}function mFe(t,n){let e=t.name,r=e.charAt(0).toUpperCase()+e.slice(1),o="get"+r+"AtOutCoords",i=n.texShape,s=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=n.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&x.arraysEqual(s,i))return`
      float ${o}() {
        return sampleTexture(${e}, resultUV);
      }
    `;let c=$t(l),u=Xie(t.shapeInfo.logicalShape,n.logicalShape),d=l-a,p,h=["x","y","z","w","u","v"];a===0?p="":l<2&&u.length>=1?p="coords = 0;":p=u.map(m=>`coords.${h[m+d]} = 0;`).join(`
`);let f="";return l<2&&a>0?f="coords":f=t.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+d]}`).join(", "),`
    float ${o}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${f});
    }
  `}function $t(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function JE(t,n,e){let{newShape:r,keptDims:o}=x.squeezeShape(n),i=n.length,s=t&&i===3&&n[0]===1,a=s?n.slice(1):r,l=!t&&i>1&&!x.arraysEqual(n,e)&&r.length<i||s;return{useSqueezeShape:l,uniformShape:l?a:n,keptDims:o}}function Cw(t,n){let e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function Mw(t,n){return n.map(e=>t[e]).join(", ")}function tse(t,n,e,r){let o=e.map((u,d)=>{let p={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(p.flatOffset=u.texData.slice.flatOffset),{name:n.variableNames[d],shapeInfo:p}}),i=o.map(u=>u.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=Yie(o,s,n),l=r9(t.gl,a),c=t.createProgram(l);return Y().get("ENGINE_COMPILE_ONLY")?{program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:s},k9(t,n,c)))}function k9(t,n,e){let r=[],o=[],i,s,a,l=null,c=null;c=t.getUniformLocation(e,"NAN",!1),Y().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(e,"INFINITY",!1));let u=!1;for(let d of n.variableNames){let p={name:d,uniform:t.getUniformLocation(e,d,u),offset:t.getUniformLocation(e,`offset${d}`,u)};n.enableShapeUniforms&&(p.shape=t.getUniformLocation(e,`${d}Shape`,u),p.texShape=t.getUniformLocation(e,`${d}TexShape`,u)),r.push(p)}if(n.enableShapeUniforms&&(i=t.getUniformLocation(e,"outShape",u),a=t.getUniformLocation(e,"outShapeStrides",u),s=t.getUniformLocation(e,"outTexShape",u)),n.customUniforms)for(let d of n.customUniforms)o.push(t.getUniformLocation(e,d.name,u));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:s}}function ese(t,n){if(t.length!==n.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${n.length} inputs`);t.forEach((e,r)=>{let o=e.logicalShape,i=n[r],s=i.shape;if(!x.arraysEqual(o,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${s} must match`);if(e.isUniform&&i.isUniform)return;let a=e.texShape,l=i.isUniform?null:i.texData.texShape;if(!x.arraysEqual(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function nse(t,n,e,r,o){n.program.enableShapeUniforms||(ese(n.inShapeInfos,e),ese([n.outShapeInfo],[r]));let i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):t.setOutputMatrixTexture(i.texture,s[0],s[1]),t.setProgram(n.webGLProgram),t.bindVertexArray(n.webGLProgram.vao),Y().getNumber("WEBGL_VERSION")===1&&n.infLoc!==null&&t.gl.uniform1f(n.infLoc,1/0),n.nanLoc!==null&&t.gl.uniform1f(n.nanLoc,NaN);for(let l=0;l<e.length;++l){let c=e[l],{uniform:u,offset:d,shape:p,texShape:h}=n.variablesLocations[l];if(p){let{uniformShape:f}=JE(n.program.packedInputs,c.shape,c.texData.texShape);switch(f.length){case 1:t.gl.uniform1iv(p,new Int32Array(f));break;case 2:t.gl.uniform2iv(p,new Int32Array(f));break;case 3:t.gl.uniform3iv(p,new Int32Array(f));break;case 4:t.gl.uniform4iv(p,new Int32Array(f));break;default:break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(x.sizeFromShape(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let f=c.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),t.gl.uniform1fv(u,f)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}let a=n.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break;default:break}if(n.outShapeStridesLocation){let l=x.computeStrides(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(l));break;default:break}}if(n.outTexShapeLocation&&t.gl.uniform2i(n.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),n.program.customUniforms&&o)for(let l=0;l<n.program.customUniforms.length;++l){let c=n.program.customUniforms[l],u=n.customUniformLocations[l],d=o[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function rse(t,n,e){let r="";n.concat(e).forEach(s=>{let a=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!s.isUniform){let l=s.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=JE(t.packedInputs,s.shape,l),p="",h="",f="";if(u.length===1&&t.packedInputs){let _=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${_[0]>1}_${_[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){let _=x.computeStrides(u);f=`${_[0]===l[1]}_${_[_.length-1]===l[1]}`}let m=s.shape.length,g=u.length===2&&x.arraysEqual(s.shape,l),v=x.sizeFromShape(s.shape)===1,w=O.getBroadcastDims(s.shape,e.shape),y=!t.packedInputs&&m===e.shape.length&&x.arraysEqual(l,e.texData.texShape),k=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${y}_${c?d:""}_${u.length}_${v}_${w}_${g}_${p}_${h}_${f}_${k}_${a}`}else{let l=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${l}_${a}`}});let o=t.userCode,i=t.constructor.name;return i+="_"+r+"_"+o+`${Y().getNumber("WEBGL_VERSION")}`,i}function Sn(t){return Y().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}var eI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=r2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=fr();this.outputShape=n,this.enableShapeUniforms=Sn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?s2(["r","c","d"],n):Jl(["r","c","d"],n)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${e.output} = result;
      }
    `}};var tI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=r2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=fr();this.outputShape=n,this.enableShapeUniforms=Sn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?s2(["r","c","d"],n):Jl(["r","c","d"],n)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${e.output} = result;
      }
    `}};var nI=class{constructor(n){this.variableNames=["A"],this.outTexUsage=ki.DOWNLOAD;let e=fr();this.outputShape=n,this.userCode=`
      ${QE}

      void main() {
        float x = getAAtOutCoords();
        ${e.output} = encode_float(x);
      }
    `}};var rI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ki.DOWNLOAD;let e=fr();this.outputShape=n,this.userCode=`
      ${QE}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${e.output} = encode_float(x);
      }
    `}};var wFe={R:0,G:1,B:2,A:3},pb=class{constructor(n,e=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let o=fr();this.outputShape=n,this.enableShapeUniforms=Sn(this.outputShape.length);let i="result";e&&(i="floor(result * 255. + 0.5)");let s="";for(let a=0;a<r.length;a++){let l=r[a];s+=`
          if(offset == ${a}) {
            result = values[${wFe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?xw():yw(n)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${s}
        }
        ${o.output} = vec4(${i}, 0., 0., 0.);
      }
    `}};var oI=class{constructor(n,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=fr();this.outputShape=n,this.enableShapeUniforms=Sn(this.outputShape.length);let o="",i="result";e&&(i="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let a=0;a<=1;a++){let l=s*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${n[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${n[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?xw():yw(n)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${i};
        }
    `}};var uI={};Qt(uI,{bindVertexProgramAttributeStreams:()=>D9,createBufferFromOutputTexture:()=>R9,createFloat16MatrixTexture:()=>S9,createFloat16PackedMatrixTexture:()=>I9,createFloat32MatrixTexture:()=>M9,createIndexBuffer:()=>C9,createPackedMatrixTexture:()=>E9,createUnsignedBytesMatrixTexture:()=>T9,createVertexBuffer:()=>b9,createVertexShader:()=>_9,downloadByteEncodedFloatMatrixFromOutputTexture:()=>F9,downloadFloat32MatrixFromBuffer:()=>O9,downloadMatrixFromPackedOutputTexture:()=>P9,downloadPackedMatrixFromBuffer:()=>B9,getInternalFormatForFloat16MatrixTexture:()=>sI,getInternalFormatForFloat16PackedMatrixTexture:()=>cI,getInternalFormatForFloat32MatrixTexture:()=>iI,getInternalFormatForPackedMatrixTexture:()=>lI,getInternalFormatForUnsignedBytesMatrixTexture:()=>aI,uploadDenseMatrixToTexture:()=>N9,uploadPixelDataToTexture:()=>A9});function _9(t){let n=fr(),e=`${n.version}
    precision highp float;
    ${n.attribute} vec3 clipSpacePos;
    ${n.attribute} vec2 uv;
    ${n.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return n9(t,e)}function b9(t){let n=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return s9(t,n)}function C9(t){let n=new Uint16Array([0,1,2,2,1,3]);return a9(t,n)}function hb(t,n,e,r,o,i){c9(n,e);let s=l9(t),a=t.TEXTURE_2D;return Qe(t,()=>t.bindTexture(a,s)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Qe(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),Y().getNumber("WEBGL_VERSION")===1?Qe(t,()=>t.texImage2D(a,0,r,n,e,0,o,i,null)):Qe(t,()=>t.texStorage2D(a,1,r,n,e)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[e,n]}}function iI(t){return t.internalFormatFloat}function M9(t,n,e,r){let[o,i]=o2(n,e);return hb(t,o,i,iI(r),r.textureFormatFloat,t.FLOAT)}function sI(t){return t.internalFormatHalfFloat}function S9(t,n,e,r){let[o,i]=o2(n,e);return hb(t,o,i,sI(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function aI(t){return t.downloadTextureFormat}function T9(t,n,e,r){let[o,i]=o2(n,e);return hb(t,o,i,aI(r),t.RGBA,t.UNSIGNED_BYTE)}function lI(t){return t.internalFormatPackedFloat}function E9(t,n,e,r){let[o,i]=Ou(n,e);return hb(t,o,i,lI(r),t.RGBA,t.FLOAT)}function cI(t){return t.internalFormatPackedHalfFloat}function I9(t,n,e,r){let[o,i]=Ou(n,e);return hb(t,o,i,cI(r),t.RGBA,r.textureTypeHalfFloat)}function D9(t,n,e){return Qe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),ZE(t,n,"clipSpacePos",e,3,20,0)&&ZE(t,n,"uv",e,2,20,12)}function N9(t,n,e,r,o,i){Qe(t,()=>t.bindTexture(t.TEXTURE_2D,n));let s,a,l;o instanceof Uint8Array?(s=new Uint8Array(e*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(e*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),s.set(o),Y().getNumber("WEBGL_VERSION")===2?Qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e,r,t.RGBA,a,s)):Qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,e,r,0,t.RGBA,a,s)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function A9(t,n,e){Qe(t,()=>t.bindTexture(t.TEXTURE_2D,n)),e.data instanceof Uint8Array?Y().getNumber("WEBGL_VERSION")===2?Qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,e.data)):Qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e.data)):Y().getNumber("WEBGL_VERSION")===2?Qe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e)):Qe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)),Qe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function R9(t,n,e,r){let o=t.createBuffer();Qe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,o));let a=4*4*n*e;return Qe(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Qe(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,0)),Qe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),o}function O9(t,n,e){let r=t,o=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function F9(t,n,e,r){let[o,i]=o2(n,e),s=4,a=new Uint8Array(Hie(n*e,s));return Qe(t,()=>t.readPixels(0,0,o,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function B9(t,n,e,r,o,i,s,a){let l=t,c=new Float32Array(Uie(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function P9(t,n,e){let r=new Float32Array(n*e*4);return Qe(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,r)),r}var Lf=class{constructor(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let e=Y().getNumber("WEBGL_VERSION");if(n!=null?(this.gl=n,UE(e,n)):this.gl=Bs(e),n=this.gl,Y().getNumber("WEBGL_VERSION")===2){let i=n;this.createVertexArray=()=>Qe(i,()=>i.createVertexArray()),this.bindVertexArray=s=>Qe(i,()=>i.bindVertexArray(s)),this.deleteVertexArray=s=>Qe(i,()=>i.deleteVertexArray(s)),this.getVertexArray=()=>Qe(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(n!=null){let i=n.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Qe(n,()=>i.createVertexArrayOES()),this.bindVertexArray=s=>Qe(n,()=>i.bindVertexArrayOES(s)),this.deleteVertexArray=s=>Qe(n,()=>i.deleteVertexArrayOES(s)),this.getVertexArray=()=>Qe(n,()=>n.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Y().getNumber("WEBGL_VERSION")===1){let i="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=gw(this.gl,i),Ps(this.gl,s))this.textureHalfFloatExtension=gw(this.gl,s);else if(Y().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ps(this.gl,o))this.colorBufferHalfFloatExtension=gw(this.gl,o);else if(Y().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ps(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Ps(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=b9(this.gl),this.indexBuffer=C9(this.gl),this.framebuffer=u9(this.gl),this.textureConfig=cb(this.gl,this.textureHalfFloatExtension)}get debug(){return Y().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let n=this.gl;Qe(n,()=>n.finish()),Qe(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,null)),Qe(n,()=>n.deleteFramebuffer(this.framebuffer)),Qe(n,()=>n.bindBuffer(n.ARRAY_BUFFER,null)),Qe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)),Qe(n,()=>n.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(n,e){return this.throwIfDisposed(),M9(this.gl,n,e,this.textureConfig)}createFloat16MatrixTexture(n,e){return this.throwIfDisposed(),S9(this.gl,n,e,this.textureConfig)}createUnsignedBytesMatrixTexture(n,e){return this.throwIfDisposed(),T9(this.gl,n,e,this.textureConfig)}uploadPixelDataToTexture(n,e){this.throwIfDisposed(),A9(this.gl,n,e)}uploadDenseMatrixToTexture(n,e,r,o){this.throwIfDisposed(),N9(this.gl,n,e,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(n,e){return this.throwIfDisposed(),I9(this.gl,n,e,this.textureConfig)}createPackedMatrixTexture(n,e){return this.throwIfDisposed(),E9(this.gl,n,e,this.textureConfig)}deleteMatrixTexture(n){this.throwIfDisposed(),this.outputTexture===n&&(XE(this.gl,this.framebuffer),this.outputTexture=null),Qe(this.gl,()=>this.gl.deleteTexture(n))}downloadByteEncodedFloatMatrixFromOutputTexture(n,e,r){return this.downloadMatrixDriver(n,()=>F9(this.gl,e,r,this.textureConfig))}downloadPackedMatrixFromBuffer(n,e,r,o,i,s){return B9(this.gl,n,e,r,o,i,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(n,e){return O9(this.gl,n,e)}createBufferFromTexture(n,e,r){this.bindTextureToFrameBuffer(n);let o=R9(this.gl,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){let n=this.createFence(this.gl);return this.pollFence(n)}createFence(n){let e,r;if(Y().getBool("WEBGL_FENCE_API_ENABLED")){let o=n,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=()=>{let s=o.clientWaitSync(i,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},e=i}else Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(e,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:e,isFencePassed:r}}downloadMatrixFromPackedTexture(n,e,r){return this.downloadMatrixDriver(n,()=>P9(this.gl,e,r))}createProgram(n){this.throwIfDisposed();let e=this.gl;this.vertexShader==null&&(this.vertexShader=_9(e));let r=o9(e);Qe(e,()=>e.attachShader(r,this.vertexShader)),Qe(e,()=>e.attachShader(r,n)),i9(e,r);let o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&ub(e,o),o}buildVao(n){this.setProgram(n),this.bindVertexArray(n.vao);let e=this.gl;Qe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),D9(e,n,this.vertexBuffer)}deleteProgram(n){this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&(Qe(this.gl,()=>this.gl.deleteProgram(n)),this.deleteVertexArray(n.vao))}setProgram(n){this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&ub(this.gl,this.program),Qe(this.gl,()=>this.gl.useProgram(n))}getUniformLocation(n,e,r=!0){return this.throwIfDisposed(),r?d9(this.gl,n,e):p9(this.gl,n,e)}getAttributeLocation(n,e){return this.throwIfDisposed(),Qe(this.gl,()=>this.gl.getAttribLocation(n,e))}getUniformLocationNoThrow(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)}setInputMatrixTexture(n,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),h9(this.gl,n,e,r)}setOutputMatrixTexture(n,e,r){this.setOutputMatrixTextureDriver(n,r,e)}setOutputPackedMatrixTexture(n,e,r){this.throwIfDisposed();let[o,i]=Ou(e,r);this.setOutputMatrixTextureDriver(n,o,i)}setOutputMatrixWriteRegion(n,e,r,o){this.setOutputMatrixWriteRegionDriver(r,n,o,e)}setOutputPackedMatrixWriteRegion(n,e,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&ub(this.gl,this.program),vw(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let n=this.gl;if(this.debug){let e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Qe(n,()=>n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Qe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=gw(this.gl,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,i),i}let n=this.getQueryTimerExtensionWebGL1(),e=n.createQueryEXT();return n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),e}endQuery(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT);return}let n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(n){return z(this,null,function*(){return yield x.repeatedTry(()=>this.disposed||this.isQueryAvailable(n,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(n,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(n,e){if(e===0)return null;if(e===2){let r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}else{let r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(n,e){if(e===0)return!0;if(e===2){let r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{let r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(n,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(n){return new Promise(e=>{this.addItemToPoll(()=>n.isFencePassed(),()=>e())})}pollItems(){let n=yFe(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=n;++e){let{resolveFn:r}=this.itemsToPoll[e];r()}this.itemsToPoll=this.itemsToPoll.slice(n+1)}addItemToPoll(n,e){if(this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Y().platform&&(r=Y().platform.setTimeoutCustom.bind(Y().platform)),x.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(n){this.throwIfDisposed(),db(this.gl,n,this.framebuffer),this.debug&&vw(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(db(this.gl,this.outputTexture,this.framebuffer),this.debug&&vw(this.gl)):XE(this.gl,this.framebuffer)}downloadMatrixDriver(n,e){this.bindTextureToFrameBuffer(n);let r=e();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(n,e,r){this.throwIfDisposed();let o=this.gl;db(o,n,this.framebuffer),this.debug&&vw(o),this.outputTexture=n,Qe(o,()=>o.viewport(0,0,e,r)),Qe(o,()=>o.scissor(0,0,e,r))}setOutputMatrixWriteRegionDriver(n,e,r,o){this.throwIfDisposed(),Qe(this.gl,()=>this.gl.scissor(n,e,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function yFe(t){let n=0;for(;n<t.length&&t[n]();++n);return n-1}var{addImpl:ose,bincountImpl:dI,bincountReduceImpl:ise,bitwiseAndImpl:sse,castImpl:ase,ceilImpl:lse,concatImpl:cse,equalImpl:use,expImpl:dse,expm1Impl:pse,floorImpl:hse,gatherNdImpl:fse,gatherV2Impl:mse,greaterImpl:gse,greaterEqualImpl:vse,lessImpl:wse,lessEqualImpl:yse,linSpaceImpl:xse,logImpl:kse,maxImpl:_se,maximumImpl:bse,minimumImpl:Cse,multiplyImpl:Mse,negImpl:Sse,notEqualImpl:Tse,prodImpl:Ese,raggedGatherImpl:Ise,raggedRangeImpl:Dse,raggedTensorToTensorImpl:Nse,rangeImpl:Ase,rsqrtImpl:Rse,scatterImpl:Ose,sigmoidImpl:Fse,simpleAbsImpl:pI,sliceImpl:Bse,sparseFillEmptyRowsImpl:Pse,sparseReshapeImpl:Lse,sparseSegmentReductionImpl:hI,sqrtImpl:$se,staticRegexReplaceImpl:Vse,stridedSliceImpl:jse,stringNGramsImpl:zse,stringSplitImpl:Hse,stringToHashBucketFastImpl:Use,subImpl:Gse,tileImpl:Wse,topKImpl:qse,transposeImpl:l2,uniqueImpl:Kse}=nb;function L9(t,n){return["x","y","z","w","u","v"].slice(0,n).map(e=>`${t}.${e}`)}function Ar(t,n){return n===1?[t]:L9(t,n)}function Zse(t,n){if(t===1)return"rc";let e="";for(let r=0;r<t;r++)e+=n[r],r<t-1&&(e+=",");return e}var fI=class{constructor(n){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.enableShapeUniforms=Sn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let e=Ar("rc",this.rank),r=$t(this.rank),o=this.getOutOfBoundsCondition(e),i=this.getSetup(e),s=this.getOutput(e);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(n){let e=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let i=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)i=`${n[n.length-1-s]},`+i;e.push(i)}return e}getOutOfBoundsCondition(n){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let r=this.rank-2;r<this.rank;r++)e+=`${n[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(e+="||");return e}getSetup(n){if(this.rank===1)return"";let e=n.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${e[0]};
      int c = ${e[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(n){let e=this.getSourceCoordsArr(n);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${e[0]}),
            cEdge ? 0. : getA(${e[1]}),
            rEdge ? 0. : getA(${e[2]}),
            rEdge || cEdge ? 0. : getA(${e[3]})`}};var Sw=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=n,this.enableShapeUniforms=Sn(this.outputShape.length);let r="";for(let o=0;o<4;o++){let i="thisRC = rc;";o%2===1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${xFe(e,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?xw():yw(n)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":n[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":n[2]};

        ${r}

        setOutput(result);
      }
    `}};function xFe(t,n){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${n?Zie(["r","c","d"],"inputShape"):Jl(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}var mI=class{constructor(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(n,e,r){let o=Yse(e,r),i=Qse(n,o,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);let s=Xse(n,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();let l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return o===pi.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):o===pi.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):o===pi.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):o===pi.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):o===pi.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(n,e,r,o){if(this.freeTextures==null)return;let i=Yse(r,o),s=Qse(e,i,o);s in this.freeTextures||(this.freeTextures[s]=[]);let a=Xse(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=Y().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(n.texture),this._numBytesAllocated-=a):(this.freeTextures[s].push(n),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;let c=this.usedTextures[s],u=c&&c.indexOf(n);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${n})`);let e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let n in this.freeTextures)this.freeTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(let n in this.usedTextures)this.usedTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function kFe(t,n){let e=t;if(n===e.R32F)return 4;if(n===e.R16F)return 2;if(n===e.RGBA32F)return 16;if(n===t.RGBA)return 16;if(n===e.RGBA16F)return 8;if(n===e.RGBA8)return 4;throw new Error(`Unknown internal format ${n}`)}function Xse(t,n,e,r,o){let i=_Fe(n,r),s;if(o){let[l,c]=Ou(t[0],t[1]);s=l*c}else{let[l,c]=o2(t[0],t[1]);s=l*c}let a=kFe(e,i);return s*a}function _Fe(t,n){switch(t){case pi.PACKED_2X2_FLOAT32:return lI(n);case pi.PACKED_2X2_FLOAT16:return cI(n);case pi.UNPACKED_FLOAT32:return iI(n);case pi.UNPACKED_FLOAT16:return sI(n);case pi.PACKED_4X1_UNSIGNED_BYTE:return aI(n);default:throw new Error(`Unknown physical texture type ${t}`)}}function bFe(t){return Y().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?pi.PACKED_2X2_FLOAT32:pi.UNPACKED_FLOAT32:t?pi.PACKED_2X2_FLOAT16:pi.UNPACKED_FLOAT16}function Yse(t,n){if(t===ki.UPLOAD)return pi.PACKED_2X2_FLOAT32;if(t===ki.RENDER||t==null)return bFe(n);if(t===ki.DOWNLOAD||t===ki.PIXELS)return pi.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function Qse(t,n,e){return`${t[0]}_${t[1]}_${n}_${e}`}var Yo=class{constructor(n,e){this.variableNames=["A"],this.outputShape=n,this.enableShapeUniforms=Sn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${e}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},io="if (isnan(x)) return x;",Jse="return x;",$9="return abs(x);";var eae="return (x >= 0.0) ? x : (exp(x) - 1.0);",tae=io+`
  return (x < 0.0) ? 0.0 : x;
`,nae=io+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Fu="return x;",rae="return 1.0 / (1.0 + exp(-1.0 * x));";var iae="return x;",sae=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,aae=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,lae=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cae="return 1.0 / (1.0 + exp(-1.0 * x));",ps=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=Sn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${e}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var gI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n,this.enableShapeUniforms=Sn(this.outputShape.length);let e=n.length,r=Ar("rc",e),o=$t(e),i=Zse(e,r),s=r.slice(-2),a=e<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}};var MFe=Zo.whereImpl,SFe=1e-7,TFe=1e-4,vI={};function EFe(t){return t in vI||(vI[t]={}),vI[t]}var IFe=Y().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),DFe=600;function NFe(){return Y().global.screen==null?1024:Y().global.screen.height*Y().global.screen.width*window.devicePixelRatio*DFe/1024/1024}var wI=(()=>{class t extends Ec{nextDataId(){return t.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Y().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let r;if(e!=null){if(e instanceof Lf)r=e;else{let o=Bs(Y().getNumber("WEBGL_VERSION"),e);r=new Lf(o)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let o=Bs(Y().getNumber("WEBGL_VERSION"));r=new Lf(o),this.binaryCache=EFe(Y().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=r,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new mI(this.gpgpu),this.numMBBeforeWarning=NFe(),this.texData=new Bh(this,na())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,r,o,i,s,a){let l=this.makeTensorInfo(r,o),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[i,s]},c.texShape=[i,s];let u=ww(r),d=new pb(u,!1,a),p=this.runWebGLProgram(d,[l],o,[[i,s]]);return p.shape=r,c.texture=null,this.disposeIntermediateTensorInfo(l),p.dataId}write(e,r,o){if((Y().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Y().getBool("DEBUG"))&&this.checkNumericalProblems(e),o==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let i={id:this.nextDataId()};return this.texData.set(i,{shape:r,dtype:o,values:e,usage:ki.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){let r=this.texData.get(e);r.refCount++}decRef(e){if(this.texData.has(e)){let r=this.texData.get(e);r.refCount--}}move(e,r,o,i,s){if(Y().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:o,dtype:i,values:r,usage:ki.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let r=this.texData.get(e),{values:o,dtype:i,complexTensorInfos:s,slice:a,shape:l,isPacked:c}=r;if(a!=null){let h;c?h=new ps(l,Fu):h=new Yo(l,Fu);let f=this.runWebGLProgram(h,[{dataId:e,shape:l,dtype:i}],i),m=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),m}if(o!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return o;let u=this.activeTimers!=null,d;u&&(d=x.now());let p;if(i==="complex64"){let h=this.readSync(s.real.dataId),f=this.readSync(s.imag.dataId);p=O.mergeRealAndImagArrays(h,f)}else p=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=x.now()-d),this.convertAndCacheOnCPU(e,p)}read(e){return z(this,null,function*(){if(this.pendingRead.has(e)){let m=this.pendingRead.get(e);return new Promise(g=>m.push(g))}let r=this.texData.get(e),{values:o,shape:i,slice:s,dtype:a,complexTensorInfos:l,isPacked:c}=r;if(s!=null){let m;c?m=new ps(i,Fu):m=new Yo(i,Fu);let g=this.runWebGLProgram(m,[{dataId:e,shape:i,dtype:a}],a),v=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),v}if(o!=null)return this.convertAndCacheOnCPU(e);if(Y().getBool("DEBUG")&&!Y().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Y().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,d;if(a!=="complex64"&&Y().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(e);let m=this.texData.get(d.dataId);u=this.gpgpu.createBufferFromTexture(m.texture.texture,...lb(i))}this.pendingRead.set(e,[]),a!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let p;if(a==="complex64"){let m=yield Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]),g=m[0],v=m[1];p=O.mergeRealAndImagArrays(g,v)}else if(u==null)p=this.getValuesFromTexture(e);else{let m=x.sizeFromShape(i);p=this.gpgpu.downloadFloat32MatrixFromBuffer(u,m)}if(d!=null&&this.disposeIntermediateTensorInfo(d),u!=null){let m=this.gpgpu.gl;Qe(m,()=>m.deleteBuffer(u))}let h=this.convertAndCacheOnCPU(e,p),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(m=>m(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&na().removeDataId(e,this),this.pendingDeletes--),h})}readToGPU(e,r={}){let o=this.texData.get(e),{values:i,shape:s,slice:a,dtype:l,isPacked:c,texture:u}=o;if(l==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let f;c?f=new ps(s,Fu):f=new Yo(s,Fu);let m=this.runWebGLProgram(f,[{dataId:e,shape:s,dtype:l}],l),g=this.readToGPU(m,r);return this.disposeIntermediateTensorInfo(m),g}if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(e,r.customTexShape),p=na().makeTensorFromTensorInfo(d),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}bufferSync(e){let r=this.readSync(e.dataId);if(e.dtype==="string")try{let o=r.map(i=>x.decodeString(i));return ot(e.shape,e.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ot(e.shape,e.dtype,r)}checkNumericalProblems(e){if(e!=null)for(let r=0;r<e.length;r++){let o=e[r];if(!t9(o))throw Y().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${o} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${o} cannot be represented on this device.`)}}getValuesFromTexture(e){let{shape:r,dtype:o,isPacked:i}=this.texData.get(e),s=x.sizeFromShape(r);if(Y().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let h=this.decode(e),f=this.texData.get(h.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...lb(r)).subarray(0,s);return this.disposeIntermediateTensorInfo(h),m}let a=Y().getBool("WEBGL_PACK")&&i===!0,l=a?ww(r):r,c=a?new rI(l):new nI(l),u=this.runWebGLProgram(c,[{shape:l,dtype:o,dataId:e}],"float32"),d=this.texData.get(u.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),p}timerAvailable(){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let r=this.activeTimers,o=[],i=!1;this.programTimersStack==null?(this.programTimersStack=o,i=!0):this.activeTimers.push(o),this.activeTimers=o,e();let s=x.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),a=x.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=r,i&&(this.programTimersStack=null);let l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return z(this,null,function*(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(s);l.kernelMs=x.sum(c),l.getExtraProfileInfo=()=>c.map((u,d)=>({name:a[d],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else l.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,l})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:x.now(),endMs:null}}endTimer(e){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=x.now(),e)}getQueryTime(e){return z(this,null,function*(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let r=e;return r.endMs-r.startMs})}disposeData(e,r=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(r?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!r&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:o}=this.texData.get(e);return o!=null&&(this.disposeData(o.real.dataId,r),this.disposeData(o.imag.dataId,r)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:r,dtype:o,texShape:i,usage:s,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),r!=null&&(this.numBytesInGPU-=this.computeBytes(i,o),this.textureManager.releaseTexture(r,i,s,a)));let d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,r=IFe){return Y().getBool("WEBGL_CPU_FORWARD")&&e.every(o=>this.texData.get(o.dataId).texture==null&&x.sizeFromShape(o.shape)<r)}getGPGPUContext(){return this.gpgpu}where(e){O.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let r=e.dataSync();return MFe(e.shape,r)}packedUnaryOp(e,r,o){let i=new ps(e.shape,r),s=this.compileAndRun(i,[e],o);return na().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){let i=pI(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,$9,e.dtype);let r=new Yo(e.shape,$9),o=this.compileAndRun(r,[e]);return na().makeTensorFromTensorInfo(o)}makeTensorInfo(e,r,o){let i;if(r==="string"&&o!=null&&o.length>0&&x.isString(o[0])){let s=o.map(a=>x.encodeString(a));i=this.write(s,e,r)}else i=this.write(o,e,r);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:r}}makeOutput(e,r,o){return na().makeTensorFromTensorInfo(this.makeTensorInfo(e,r,o),this)}unpackTensor(e){let r=new gI(e.shape);return this.runWebGLProgram(r,[e],e.dtype)}packTensor(e){let r=new fI(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)}packedReshape(e,r){let o=[Wp(e.shape),...qp(e.shape)],i={dtype:e.dtype,shape:o,dataId:e.dataId},s=[Wp(r),...qp(r)],a=new Sw(s,o),l=!0,c=[o],u=this.runWebGLProgram(a,[i],e.dtype,c,l);return{dataId:u.dataId,shape:r,dtype:u.dtype}}decode(e,r){let o=this.texData.get(e),{isPacked:i,shape:s,dtype:a}=o;if(r!=null){let h=x.sizeFromShape(s),f=r[0]*r[1]*4;x.assert(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let l=ww(s),c;i?c=new tI(l):c=new eI(l);let u=!0,d=[r??lb(l)],p=this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,d,u,r);return{dtype:a,shape:s,dataId:p.dataId}}runWebGLProgram(e,r,o,i,s=!1,a){let l=this.makeTensorInfo(e.outputShape,o),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===r2.DENSE){let w=a??lb(e.outputShape);c.texShape=w.map(y=>y*2)}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),x.sizeFromShape(l.shape)===0)return c.values=x.getTypedArrayFromDType(l.dtype,0),l;let u=[],d=r.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let y=this.texData.get(w.dataId);if(y.texture==null){if(!e.packedInputs&&x.sizeFromShape(w.shape)<=Y().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:y.values};e.packedInputs&&(y.isPacked=!0,y.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!y.isPacked!=!!e.packedInputs)w=y.isPacked?this.unpackTensor(w):this.packTensor(w),u.push(w),y=this.texData.get(w.dataId);else if(y.isPacked&&!Pf(y.shape,w.shape)){let k=w,_=w.shape;w.shape=y.shape,w=this.packedReshape(w,_),u.push(w),y=this.texData.get(w.dataId),k.shape=_}return{shape:w.shape,texData:y,isUniform:!1}});this.uploadToGPU(l.dataId);let p={shape:l.shape,texData:c,isUniform:!1},h=rse(e,d,p),f=this.getAndSaveBinary(h,()=>tse(this.gpgpu,e,d,p)),m=this.activeTimers!=null,g;m&&(g=this.startTimer()),Y().get("ENGINE_COMPILE_ONLY")||nse(this.gpgpu,f,d,p,i),u.forEach(w=>this.disposeIntermediateTensorInfo(w)),m&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)}));let v=Y().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){let w=x.now();w-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!Y().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&s===!1){let w=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),w}return l}compileAndRun(e,r,o,i,s=!1){return o=o||r[0].dtype,this.runWebGLProgram(e,r,o,i,s)}getAndSaveBinary(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Y().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(r=>{this.gpgpu.deleteProgram(this.binaryCache[r].webGLProgram),delete this.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=te(()=>{if(!Y().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=Y().getBool("DEBUG");Y().set("DEBUG",!1);let r=this.abs($e(1e-8)).dataSync()[0];if(Y().set("DEBUG",e),r>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?SFe:TFe}uploadToGPU(e){let r=this.texData.get(e),{shape:o,dtype:i,values:s,texture:a,usage:l,isPacked:c}=r;if(a!=null)return;let u=this.activeTimers!=null,d;u&&(d=x.now());let p=r.texShape;if(p==null&&(p=f9(o,c),r.texShape=p),s!=null){let h=ww(o),f,m=p[1],g=p[0],v=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(c||!v)&&([m,g]=Ou(p[0],p[1])),c?f=new oI(h,v):f=new pb(h,v);let w=v?[g,m]:p,y=this.makeTensorInfo(w,i),k=this.texData.get(y.dataId);v?k.usage=ki.PIXELS:k.usage=ki.UPLOAD,k.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),m,g,s);let _=[[g,m]],E=this.runWebGLProgram(f,[y],i,_,!0),N=this.texData.get(E.dataId);r.texShape=N.texShape,r.isPacked=N.isPacked,r.usage=N.usage,Y().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(r.texture=N.texture,r.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(y),u&&(this.uploadWaitMs+=x.now()-d)}else{let h=this.acquireTexture(p,l,i,c);r.texture=h}}convertAndCacheOnCPU(e,r){let o=this.texData.get(e),{dtype:i}=o;return r!=null&&(o.values=AFe(r,i)),o.values}acquireTexture(e,r,o,i){if(this.numBytesInGPU+=this.computeBytes(e,o),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,r,i)}computeBytes(e,r){return e[0]*e[1]*x.bytesPerElement(r)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}checkCompileCompletionAsync(){return z(this,null,function*(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,r]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(r));return Promise.all(e)}else{for(let[,r]of Object.entries(this.binaryCache)){let o=new Promise(i=>{try{this.checkCompletion_(r),i(!0)}catch(s){throw s}});e.push(o)}return Promise.all(e)}})}checkCompletionAsync_(e){return z(this,null,function*(){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(yield Ov(),this.checkCompletionAsync_(e))})}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(KE(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);let{variablesLocations:r,customUniformLocations:o,infLoc:i,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=k9(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=r,e.customUniformLocations=o,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,r,o){e.channels=e.channels||"RGBA";let{texture:i,height:s,width:a,channels:l}=e,c=na().backend;if(!c.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let u=c.writeTexture(i,r,o,s,a,l);return na().makeTensorFromDataId(u,r,o,c)}}return t.nextDataId=0,t})();function AFe(t,n){if(n==="float32"||n==="complex64")return t;if(n==="int32"||n==="bool"){let e=n==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<e.length;++r)e[r]=Math.round(t[r]);return e}else throw new Error(`Unknown dtype ${n}`)}var yI="4.22.0";function V9(){Y().set("WEBGL_FORCE_F16_TEXTURES",!0)}fp.isBrowser()&&gk("webgl",()=>new wI,2);var RFe={forceHalfFloat:V9};var Tw=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var hs=class{constructor(n,e,r){this.variableNames=["A","B"],this.outputShape=O.assertAndGetBroadcastShape(e,r),this.enableShapeUniforms=Sn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${n}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};var $s=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var Ls=class{constructor(n,e,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=O.assertAndGetBroadcastShape(e,r);let i=this.outputShape.length;this.enableShapeUniforms=Sn(i);let s="";if(o)if(i===0||x.sizeFromShape(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${$t(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let l=Ar("coords",i);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${n}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}};function Rr(t){let{inputs:n,backend:e}=t,{x:r}=n;return e.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var uae={kernelName:Sl,backendName:"webgl",kernelFunc:Rr};function fs(t){let{inputs:n,backend:e}=t,{real:r,imag:o}=n,i=e.makeTensorInfo(r.shape,"complex64"),s=e.texData.get(i.dataId),a=Rr({inputs:{x:r},backend:e}),l=Rr({inputs:{x:o},backend:e});return s.complexTensorInfos={real:a,imag:l},i}var dae={kernelName:n0,backendName:"webgl",kernelFunc:fs};var j9="return (a < 0.) ? b * a : a;",z9=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function OFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{alpha:i}=r,s=e.makeTensorInfo([],"float32",x.createScalarValue(i,"float32")),a=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ls(z9,o.shape,s.shape):new hs(j9,o.shape,s.shape),l=e.runWebGLProgram(a,[o,s],"float32");return e.disposeIntermediateTensorInfo(s),l}var pae={kernelName:Gd,backendName:"webgl",kernelFunc:OFe};var H9="return (a < 0.) ? b * a : a;",U9=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function FFe(t){let{inputs:n,backend:e}=t,{x:r,alpha:o}=n,i=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ls(U9,r.shape,o.shape):new hs(H9,r.shape,o.shape);return e.runWebGLProgram(i,[r,o],"float32")}var hae={kernelName:ep,backendName:"webgl",kernelFunc:FFe};var el="if (isnan(x)) return x;";function st({opSnippet:t,packedOpSnippet:n,cpuKernelImpl:e,dtype:r}){return({inputs:o,backend:i})=>{let{x:s}=o,a=i,l=r||s.dtype;if(a.shouldExecuteOnCPU([s])&&e!=null){let d=a.texData.get(s.dataId),p=e(d.values,l);return a.makeTensorInfo(s.shape,l,p)}let c=Y().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&n!=null,u;return c?u=new ps(s.shape,n):u=new Yo(s.shape,t),a.runWebGLProgram(u,[s],l)}}function kn({opSnippet:t,packedOpSnippet:n,checkOutOfBounds:e=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:i}){return({inputs:s,backend:a})=>{let{a:l,b:c}=s,u=a;if(r&&l.dtype==="complex64"){let f=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[g,v]=[[f.complexTensorInfos.real,m.complexTensorInfos.real],[f.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(y=>{let[k,_]=y,S={dataId:k.dataId,dtype:k.dtype,shape:l.shape},E={dataId:_.dataId,dtype:_.dtype,shape:c.shape},N=new hs(t,l.shape,c.shape);return u.runWebGLProgram(N,[S,E],Lr(k.dtype,_.dtype))}),w=fs({inputs:{real:g,imag:v},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(v),w}let d=i||Lr(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&o!=null){let f=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,g=l.dtype==="string"?O.fromUint8ToStringArray(f):f,v=l.dtype==="string"?O.fromUint8ToStringArray(m):m,[w,y]=o(l.shape,c.shape,g,v,d),k=u.makeTensorInfo(y,d),_=u.texData.get(k.dataId);return _.values=w,k}let p=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&n!=null,h;return p?h=new Ls(n,l.shape,c.shape,e):h=new hs(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function Kp(t,n=!1){if(t==="linear")return n?iae:Jse;if(t==="relu")return n?aae:tae;if(t==="elu")return n?sae:eae;if(t==="relu6")return n?lae:nae;if(t==="prelu")return n?U9:H9;if(t==="leakyrelu")return n?z9:j9;if(t==="sigmoid")return n?cae:rae;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}var Ew=class{constructor(n,e,r,o=!1,i=!1,s=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Sn(this.outputShape.length);let u=o?n[1]:n[2],d=Math.ceil(u/2),p=o?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",f=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",v="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");let w=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let y="rc.x",k="rc.x";n[0]<e[0]?y=`imod(rc.x, ${n[0]})`:e[0]<n[0]&&(k=`imod(rc.x, ${e[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${y};
        int batchB = ${k};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${f[0]} * ${m[0]});
          result += (${f[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${w}

        ${v}

        setOutput(result);
      }
    `}};var G9={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},fb=class{constructor(n,e,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=O.assertAndGetBroadcastShape(e,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${n}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var fae="return a * b;";function mb(t){let{inputs:n,backend:e}=t,{a:r,b:o}=n,i=O.upcastType(r.dtype,o.dtype);if(r.dtype==="complex64"){let a=e.texData.get(r.dataId),l=e.texData.get(o.dataId),c=new fb(G9.REAL,r.shape,o.shape),u=new fb(G9.IMAG,r.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],p=e.runWebGLProgram(c,d,"float32"),h=e.runWebGLProgram(u,d,"float32"),f=fs({inputs:{real:p,imag:h},backend:e});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),f}if(e.shouldExecuteOnCPU([r,o])){let a=e.texData.get(r.dataId),l=e.texData.get(o.dataId),[c,u]=Mse(r.shape,o.shape,a.values,l.values,i),d=e.makeTensorInfo(u,i),p=e.texData.get(d.dataId);return p.values=c,d}let s;return Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new Ls(fae,r.shape,o.shape):s=new hs(fae,r.shape,o.shape),e.runWebGLProgram(s,[r,o],i)}var mae={kernelName:Jc,backendName:"webgl",kernelFunc:mb};function gae(t,n,e){let r=[Wp(t.shape),...qp(t.shape)],o={dtype:t.dtype,shape:r,dataId:t.dataId},i=[Wp(n),...qp(n)],s=new Sw(i,r),a=!0,l=[r],c=e.runWebGLProgram(s,[o],t.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}function De(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{shape:i}=r,s=e,a=x.sizeFromShape(o.shape),l=x.inferFromImplicitShape(i,a),c=x.sizeFromShape(l);x.assert(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);let u=s.texData.get(o.dataId);return u.isPacked&&!Pf(o.shape,l)&&!(u.texture!==null&&Pf(u.shape,l))?gae(o,l,s):(s.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}var vae={kernelName:np,backendName:"webgl",kernelFunc:De};var gb=class{constructor(n,e){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:i,outSize:s}=n;this.outputShape=[o,s];let a=Math.floor(r/4)*4,l=r%4,c="sumValue += dot(values, ones);";if(e!=null){let d=1/e;c=`sumValue += dot(values * ${x.isInt(d)?d.toPrecision(2):d}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var xI=class{constructor(n,e){this.variableNames=["x"];let{windowSize:r,batchSize:o,inSize:i,outSize:s}=n;this.outputShape=[o,s];let a="0.0",l="";e==="prod"?a="1.0":e==="min"?(a="1.0 / 1e-20",l="min"):e==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");let u=Math.floor(r/4)*4,d=r%4,p=`
      if (${e==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${e==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${e==="min"} || ${e==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";e==="all"?(a="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):e==="any"&&(a="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function PFe(t){let n=[];for(;n.length===0||n[n.length-1].outSize!==1;){let e=n.length?n[n.length-1].outSize:t[1],r=O.computeOptimalWindowSize(e);n.push({inSize:e,windowSize:r,outSize:Math.ceil(e/r)})}return n}function Vs(t,n,e,r){let o=PFe(t.shape),i=t;for(let s=0;s<o.length;s++){let{inSize:a,windowSize:l,outSize:c}=o[s],u,d;e==="mean"?u=s===0?new gb({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new gb({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new xI({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},e),d=i,i=r.runWebGLProgram(u,[i],n),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}var kI=class{constructor(n,e){this.variableNames=["A"];let r=new Array(n.length);for(let s=0;s<r.length;s++)r[s]=n[e[s]];this.outputShape=r,this.rank=r.length;let o=$t(this.rank),i=LFe(e);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}};function LFe(t){let n=t.length;if(n>6)throw Error(`Transpose for rank ${n} is not yet supported`);let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(n);for(let o=0;o<t.length;o++)r[t[o]]=e[o];return r.join()}var _I=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let r=new Array(n.length);for(let u=0;u<r.length;u++)r[u]=n[e[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let o=$t(this.rank),i=L9("rc",this.rank),s=new Array(this.rank);for(let u=0;u<e.length;u++)s[e[u]]=i[u];let a=`vec2(${s.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function $f(t,n,e){let r=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _I(t.shape,n):new kI(t.shape,n);return e.runWebGLProgram(r,[t],t.dtype)}function wae(t,n,e,r){let o=n,i=t.shape.length,s=x.parseAxisParam(o,t.shape),a=s,l=O.getAxesPermutation(a,i),c=l!=null,u=t;c&&(u=$f(t,l,r),a=O.getInnerMostAxes(a.length,i)),O.assertAxesAreInnerMostDims("sum",a,i);let[d,p]=O.computeOutAndReduceShapes(u.shape,a),h=d;e&&(h=O.expandShapeToKeepDim(d,s));let f=x.sizeFromShape(p),g=x.sizeFromShape(t.shape)/f,v=De({inputs:{x:u},attrs:{shape:[g,f]},backend:r}),w=uf(t.dtype),y=Vs(v,w,"sum",r),k=De({inputs:{x:y},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(y),c&&r.disposeIntermediateTensorInfo(u),k}function c2(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r;return wae(o,i,s,e)}var yae={kernelName:"Sum",backendName:"webgl",kernelFunc:c2};function tr(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{perm:i}=r,s=e,a=o.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=o.shape[i[u]];let c;if(s.shouldExecuteOnCPU([o])){let d=s.texData.get(o.dataId).values,p=l2(d,o.shape,o.dtype,i,l);c=s.makeTensorInfo(l,o.dtype);let h=s.texData.get(c.dataId);h.values=p}else c=$f(o,i,s);return c}var xae={kernelName:El,backendName:"webgl",kernelFunc:tr};var W9=1e3;function u2({a:t,b:n,transposeA:e,transposeB:r,backend:o,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let c=t.shape.length,u=n.shape.length,d=e?t.shape[c-2]:t.shape[c-1],p=r?n.shape[u-1]:n.shape[u-2],h=e?t.shape[c-1]:t.shape[c-2],f=r?n.shape[u-2]:n.shape[u-1],m=t.shape.slice(0,-2),g=n.shape.slice(0,-2),v=x.sizeFromShape(m),w=x.sizeFromShape(g),k=os.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([h,f]);x.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${e} and transposeB=${r} must match.`);let _=e?[v,d,h]:[v,h,d],S=r?[w,f,p]:[w,p,f],E=De({inputs:{x:t},backend:o,attrs:{shape:_}}),N=De({inputs:{x:n},backend:o,attrs:{shape:S}}),B=[E,N],D=Math.max(v,w),P=e?E.shape[1]:E.shape[2],M=i!=null,W=s!=null,ie=l==="leakyrelu",Z=l!=null?Kp(l,!0):null,X=M||W||ie||Z!=null,G;if((h===1||f===1)&&P>W9&&X===!1){let V=E,K=N;e&&(V=tr({inputs:{x:E},backend:o,attrs:{perm:[0,2,1]}}),B.push(V)),r&&(K=tr({inputs:{x:N},backend:o,attrs:{perm:[0,2,1]}}),B.push(K));let pe=f!==1,ce=f===1,se=V;pe&&(se=De({inputs:{x:V},backend:o,attrs:{shape:[D,P,1]}}),B.push(se));let we=f===1?2:1,Ne=K;ce&&(Ne=De({inputs:{x:K},backend:o,attrs:{shape:[D,1,P]}}),B.push(Ne));let Ae=mb({inputs:{a:se,b:Ne},backend:o});G=c2({inputs:{x:Ae},backend:o,attrs:{axis:we,keepDims:!0}}),B.push(Ae)}else{let V=Lr(t.dtype,n.dtype),K=new Ew(_,S,[D,h,f],e,r,M,Z,W,ie),pe=[E,N];if(i!=null&&pe.push(i),W&&pe.push(s),ie){let ce=o.makeTensorInfo([],"float32",x.createScalarValue(a,"float32"));pe.push(ce),B.push(ce)}G=o.runWebGLProgram(K,pe,V)}let H=De({inputs:{x:G},backend:o,attrs:{shape:k}});B.push(G);for(let V of B)o.disposeIntermediateTensorInfo(V);return H}function $Fe(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i,bias:s,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return u2({a:o,b:i,transposeA:l,transposeB:c,backend:e,bias:s,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}var kae={kernelName:of,backendName:"webgl",kernelFunc:$Fe};var _ae="return abs(x);";function VFe(t){let{inputs:n,backend:e}=t,{x:r}=n;if(e.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){let i=e.texData.get(r.dataId),s=pI(i.values);return e.makeTensorInfo(r.shape,r.dtype,s)}let o;return Y().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new ps(r.shape,_ae):o=new Yo(r.shape,_ae),e.runWebGLProgram(o,[r],r.dtype)}var bae={kernelName:"Abs",backendName:"webgl",kernelFunc:VFe};var jFe=io+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,zFe=st({opSnippet:jFe}),Cae={kernelName:Nc,backendName:"webgl",kernelFunc:zFe};var HFe=io+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,UFe=st({opSnippet:HFe}),Mae={kernelName:Ac,backendName:"webgl",kernelFunc:UFe};var Sae="return a + b;",GFe=kn({opSnippet:Sae,packedOpSnippet:Sae,supportsComplex:!0,cpuKernelImpl:ose}),Tae={kernelName:"Add",backendName:"webgl",kernelFunc:GFe};var bI=class{constructor(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map((i,s)=>`T${s}`);let r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}};var CI=class{constructor(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map((i,s)=>`T${s}`);let r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});let o=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}};function MI(t){let{inputs:n,backend:e}=t,r=n;if(r.length===1)return Rr({inputs:{x:r[0]},backend:e});if(r.length>Y().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let l=Math.floor(r.length/2),c=MI({inputs:r.slice(0,l),backend:e}),u=MI({inputs:r.slice(l),backend:e});return MI({inputs:[c,u],backend:e})}let o=r.map(l=>l.dtype).reduce((l,c)=>Lr(l,c)),i=r.map(l=>l.shape),a=Y().getBool("WEBGL_PACK")?new CI(r[0].shape,i):new bI(r[0].shape,i);return e.runWebGLProgram(a,r,o)}var Eae={kernelName:Sd,backendName:"webgl",kernelFunc:MI};function WFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=o;u!=null&&(d=tr({inputs:{x:o},backend:e,attrs:{perm:u}}),c=O.getInnerMostAxes(c.length,a)),O.assertAxesAreInnerMostDims("all",c,a);let[p,h]=O.computeOutAndReduceShapes(d.shape,c),f=x.sizeFromShape(h),m=De({inputs:{x:d},backend:e,attrs:{shape:[-1,f]}}),g=Vs(m,m.dtype,"all",e),v;if(s){let w=O.expandShapeToKeepDim(p,l);v=De({inputs:{x:g},backend:e,attrs:{shape:w}})}else v=De({inputs:{x:g},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(d),v}var Iae={kernelName:"All",backendName:"webgl",kernelFunc:WFe};function qFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=o;u!=null&&(d=tr({inputs:{x:o},backend:e,attrs:{perm:u}}),c=O.getInnerMostAxes(c.length,a)),O.assertAxesAreInnerMostDims("any",c,a);let[p,h]=O.computeOutAndReduceShapes(d.shape,c),f=x.sizeFromShape(h),m=De({inputs:{x:d},backend:e,attrs:{shape:[-1,f]}}),g=Vs(m,m.dtype,"any",e),v;if(s){let w=O.expandShapeToKeepDim(p,l);v=De({inputs:{x:g},backend:e,attrs:{shape:w}})}else v=De({inputs:{x:g},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(d),v}var Dae={kernelName:"Any",backendName:"webgl",kernelFunc:qFe};var SI=class{constructor(n,e,r){this.variableNames=["A"];let{windowSize:o,batchSize:i,outSize:s}=n;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];let a=e==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};var TI=class{constructor(n,e,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,x.assert(n.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);let i=n[n.length-1],s=Math.ceil(i/e);this.outputShape=n.slice(0,-1),s>1&&this.outputShape.push(s),o||this.variableNames.push("bestIndicesA");let a=this.outputShape,l=a.length,c=$t(l),u=Ar("coords",l),d,p;if(s===1){p=l+1;let N=$t(p);d=`
        ${N} sourceLocR = ${N}(${u.join()}, 0);
        ++${u[l-1]};
        ${N} sourceLocG = ${N}(${u.join()}, 0);
        ++${u[l-2]};
        ${N} sourceLocA = ${N}(${u.join()}, 0);
        --${u[l-1]};
        ${N} sourceLocB = ${N}(${u.join()}, 0);
        --${u[l-2]};`}else p=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;let h=["x","y","z","w","u","v"].slice(0,p),f="."+h[p-1],m=h.map(N=>"int "+N),g=Ar("sourceLocR",p-1).concat("inIdx.r"),v=Ar("sourceLocG",p-1).concat("inIdx.g"),w=Ar("sourceLocB",p-1).concat("inIdx.b"),y=Ar("sourceLocA",p-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",_=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${y.join()})));`,S=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${w.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,E=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${E}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${f}, sourceLocG${f},
          sourceLocB${f}, sourceLocA${f}) * ${e};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${e}; i++) {
          inIdx = srcIdx;
          ${_}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${k}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function Nae(t,n,e,r=null){let o=n.shape[0],i=n.shape[1];r!=null&&(o=r.shape[0],i=r.shape[1]);let s=O.computeOptimalWindowSize(i),a={windowSize:s,inSize:i,batchSize:o,outSize:Math.ceil(i/s)},l=new SI(a,e,r==null),c=[n];r!=null&&c.push(r);let u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;let d=Nae(t,n,e,u);return t.disposeIntermediateTensorInfo(u),d}function Aae(t,n,e,r=null){let o=r!=null?r.shape:n.shape,i=o[o.length-1],s=O.computeOptimalWindowSize(i),a=new TI(o,s,e,r==null),l=r==null?[n]:[n,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===n.shape.length){let u=Aae(t,n,e,c);return t.disposeIntermediateTensorInfo(c),u}return c}function EI(t,n,e,r){let o=[e];if(O.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,n.shape.length),!Y().getBool("WEBGL_PACK_REDUCE")||n.shape.length<=2){let i=[],s=t.texData.get(n.dataId),a=s!==null&&s.isPacked,l=n;a&&(l=t.unpackTensor(n),i.push(l));let[c,u]=O.computeOutAndReduceShapes(l.shape,o),d=x.sizeFromShape(u),p=De({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(p);let h=Nae(t,p,r);i.push(h);let f=De({inputs:{x:h},backend:t,attrs:{shape:c}});return i.forEach(m=>t.disposeIntermediateTensorInfo(m)),f}return Aae(t,n,r)}function KFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r,s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=tr({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),O.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let u=EI(e,l,s[0],"max");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}var Rae={kernelName:Td,backendName:"webgl",kernelFunc:KFe};function ZFe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i}=r,s=x.parseAxisParam(i,o.shape),a=O.getAxesPermutation(s,o.shape.length),l=o,c=[];a!=null&&(l=tr({inputs:{x:o},backend:e,attrs:{perm:a}}),c.push(l),s=O.getInnerMostAxes(s.length,l.shape.length)),O.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let u=EI(e,l,s[0],"min");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}var Oae={kernelName:Ed,backendName:"webgl",kernelFunc:ZFe};var XFe=io+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,YFe=st({opSnippet:XFe}),Fae={kernelName:Oc,backendName:"webgl",kernelFunc:YFe};var QFe=io+"return log(x + sqrt(x * x + 1.0));",JFe=st({opSnippet:QFe}),Bae={kernelName:Fc,backendName:"webgl",kernelFunc:JFe};var eBe=io+`
  return atan(x);
`,tBe=st({opSnippet:eBe}),Pae={kernelName:Bc,backendName:"webgl",kernelFunc:tBe};var nBe=Tw+`
  return atan(a, b);
`,rBe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+$s+`
  return result;
`,oBe=kn({opSnippet:nBe,packedOpSnippet:rBe}),Lae={kernelName:Lc,backendName:"webgl",kernelFunc:oBe};var iBe=io+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,sBe=st({opSnippet:iBe}),$ae={kernelName:Pc,backendName:"webgl",kernelFunc:sBe};var ec=class{constructor(n,e,r,o=!1,i=!1){if(this.variableNames=["x"],e==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let s=n.filterWidth,a=n.strideHeight,l=n.strideWidth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,h=n.padInfo.top,f=n.padInfo.left;this.outputShape=n.outShape;let m=e==="avg",g=`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`,v=`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`,w="0.0";if(m||(w="-1.0 / 1e-20"),r){this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${f});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?i?g:v:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let y="max",k=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(k="avgValue / max(count, 1.0)");let _=Math.floor(s/4)*4,S=s%4,E=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${y}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${f});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${n.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${n.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${_}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${E}
          }

          int xC = xCCorner + ${_};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${E}
          }
        }
        setOutput(${k});
      }
    `}},Vf=class{constructor(n,e,r,o=!1,i=!1){if(this.variableNames=["x"],e==="avg"&&r)throw new Error("Cannot compute positions for average pool.");let s=n.filterWidth,a=n.strideDepth,l=n.strideHeight,c=n.strideWidth,u=n.dilationDepth,d=n.dilationHeight,p=n.dilationWidth,h=n.effectiveFilterDepth,f=n.effectiveFilterHeight,m=n.effectiveFilterWidth,g=n.padInfo.front,v=n.padInfo.top,w=n.padInfo.left;this.outputShape=n.outShape;let y=e==="avg",k="0.0";if(y||(k="-1.0 / 1e-20"),r){this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${g}, ${v}, ${w});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${n.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${f};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${n.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${n.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?i?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${f} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let _="max",S=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(S="avgValue / max(count, 1.0)");let E=Math.floor(s/4)*4,N=s%4,B=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${g}, ${v}, ${w});
      const float initializationValue = ${k};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${n.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${k});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${n.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${E}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${B}
            }

            int xC = xCCorner + ${E};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${B}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${B}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${B}
            }
          }
        }
        setOutput(${S});
      }
    `}};function aBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;Ql(o,"avgPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))return Rr({inputs:{x:o},backend:e});let d=new ec(u,"avg",!1);return e.runWebGLProgram(d,[o],"float32")}var Vae={kernelName:Id,backendName:"webgl",kernelFunc:aBe};function lBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=O.computePool3DInfo(o.shape,i,s,u,a,l,c),p=new Vf(d,"avg",!1);return e.runWebGLProgram(p,[o],"float32")}var jae={kernelName:Dd,backendName:"webgl",kernelFunc:lBe};var II=class{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;let e=n.filterHeight,r=n.filterWidth,o=n.strideHeight,i=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,u=l-1-n.padInfo.top,d=c-1-n.padInfo.left,p=1/(e*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},DI=class{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;let e=n.filterDepth,r=n.filterHeight,o=n.filterWidth,i=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,h=n.effectiveFilterWidth,f=d-1-n.padInfo.front,m=p-1-n.padInfo.top,g=h-1-n.padInfo.left,v=1/(e*r*o);this.userCode=`
      const ivec3 pads = ivec3(${f}, ${m}, ${g});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function cBe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],p=O.computePool3DInfo(s.shape,a,l,d,c,u),h=new DI(p);return e.runWebGLProgram(h,[o],s.dtype)}var zae={kernelName:Jm,backendName:"webgl",kernelFunc:cBe};function uBe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i;Ql([o,i],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=r,u=O.computePool2DInfo(s.shape,a,l,1,c),d=new II(u);return e.runWebGLProgram(d,[o],s.dtype)}var Hae={kernelName:Qm,backendName:"webgl",kernelFunc:uBe};function dBe(t){let{inputs:n,backend:e,attrs:r}=t,{a:o,b:i}=n,{transposeA:s,transposeB:a}=r;return u2({a:o,b:i,transposeA:s,transposeB:a,backend:e})}var Uae={kernelName:Nd,backendName:"webgl",kernelFunc:dBe};var NI=class{constructor(n,e,r,o,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],O.assertAndGetBroadcastShape(n,e),O.assertAndGetBroadcastShape(n,r);let a="0.0";o!=null&&(O.assertAndGetBroadcastShape(n,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(O.assertAndGetBroadcastShape(n,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};var AI=class{constructor(n,e,r,o,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],O.assertAndGetBroadcastShape(n,e),O.assertAndGetBroadcastShape(n,r);let a="vec4(0.0)";o!=null&&(O.assertAndGetBroadcastShape(n,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(O.assertAndGetBroadcastShape(n,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var pBe=({inputs:t,backend:n,attrs:e})=>{let{x:r,mean:o,variance:i,offset:s,scale:a}=t;x.assert(o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),x.assert(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),x.assert(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=e;l==null&&(l=.001);let c=[r,o,i],u=null;s!=null&&(u=s.shape,c.push(s));let d=null;a!=null&&(d=a.shape,c.push(a));let p=Y().getBool("WEBGL_PACK_NORMALIZATION")?new AI(r.shape,o.shape,i.shape,u,d,l):new NI(r.shape,o.shape,i.shape,u,d,l);return n.runWebGLProgram(p,c,c[0].dtype)},Gae={kernelName:Hd,backendName:"webgl",kernelFunc:pBe};var RI=class{constructor(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;let e=$t(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let r=hBe(this.rank),o,i=n.map((s,a)=>`sourceLoc.${q9[a]} = start[${a}] + coords.${q9[a]};`);o=`
        ${e} sourceLoc;
        ${e} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}},q9=["x","y","z","w","u","v"];function hBe(t){if(t===1)return"sourceLoc";if(t<=6)return q9.slice(0,t).map(n=>"sourceLoc."+n).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}var OI=class{constructor(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let e=$t(this.rank),r=Ar("coords",this.rank),o=Ar("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,s=`getChannel(getSource(${o.join()}), ${i})`,a=`
      result.x = ${s};
      if (++${r[this.rank-1]} < ${n[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${s};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${n[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${s};
        if (++${r[this.rank-1]} < ${n[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${s};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${e}(${n.map((u,d)=>`start[${d}]`).join()});`:n.map((u,d)=>`${o[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${e} coords = getOutputCoords();
        ${e} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}};function fBe(t,n,e,r){let o=r.texData.get(t.dataId),i=r.makeTensorInfo(e,t.dtype),s=r.texData.get(i.dataId);Object.assign(s,o),s.refCount=1,s.shape=e,s.dtype=t.dtype;let a=go.computeFlatOffset(n,x.computeStrides(t.shape));o.slice&&(a+=o.slice.flatOffset),s.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||t.dataId};let l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),i}function tc(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,size:s}=r,[a,l]=go.parseSliceParams(o,i,s);if(go.assertParamsValid(o,a,l),x.sizeFromShape(l)===0)return e.makeTensorInfo(l,o.dtype,[]);if(e.shouldExecuteOnCPU([o])||o.dtype==="string"){let d=e.texData.get(o.dataId),p=Bse(d.values,a,l,o.shape,o.dtype);return e.makeTensorInfo(l,o.dtype,p)}let{isPacked:c}=e.texData.get(o.dataId),u=go.isSliceContinous(o.shape,a,l);if(c||!u){let d=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OI(l):new RI(l),p=[a];return e.runWebGLProgram(d,[o],o.dtype,p)}return e.uploadToGPU(o.dataId),fBe(o,a,l,e)}var Wae={kernelName:ap,backendName:"webgl",kernelFunc:tc};var mBe=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,crops:s}=r;x.assert(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((w,y)=>w*y),l=O.getReshaped(o.shape,i,a),c=O.getPermuted(l.length,i.length),u=O.getReshapedPermuted(o.shape,i,a),d=O.getSliceBeginCoords(s,i.length),p=O.getSliceSize(u,s,i.length),h=[],f=De({inputs:{x:o},backend:e,attrs:{shape:l}}),m=tr({inputs:{x:f},backend:e,attrs:{perm:c}}),g=De({inputs:{x:m},backend:e,attrs:{shape:u}}),v=tc({inputs:{x:g},backend:e,attrs:{begin:d,size:p}});return h.push(f),h.push(m),h.push(g),h.forEach(w=>e.disposeIntermediateTensorInfo(w)),v},qae={kernelName:Ad,backendName:"webgl",kernelFunc:mBe};function gBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s}=r,a=e.readSync(o.dataId),l=e.readSync(i.dataId),c=dI(a,l,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,c)}var Kae={kernelName:e0,backendName:"webgl",kernelFunc:gBe};var vBe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,wBe=`
  return float(int(a.r) & int(b.r));
`;function yBe(t){let{inputs:n,backend:e}=t,{a:r,b:o}=n,i=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=Y().getNumber("WEBGL_VERSION");if(e.shouldExecuteOnCPU([r,o])||s===1){let l=e.texData.get(r.dataId).values,c=e.texData.get(o.dataId).values,[u,d]=sse(r.shape,o.shape,l,c,r.dtype),p=e.makeTensorInfo(d,r.dtype),h=e.texData.get(p.dataId);return h.values=u,p}let a;return i?a=new Ls(vBe,r.shape,o.shape,!1):a=new hs(wBe,r.shape,o.shape),e.runWebGLProgram(a,[r,o],r.dtype)}var Zae={kernelName:$h,backendName:"webgl",kernelFunc:yBe};function xBe(t){let{inputs:n,backend:e}=t,{s0:r,s1:o}=n,i=e.readSync(r.dataId),s=e.readSync(o.dataId),a=O.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var Xae={kernelName:t0,backendName:"webgl",kernelFunc:xBe};var kBe="return float(a != b);",K9=kn({opSnippet:kBe,cpuKernelImpl:Tse,dtype:"bool"}),Yae={kernelName:Qh,backendName:"webgl",kernelFunc:K9};function Zp(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.texData.get(r.dataId);return Rr({inputs:{x:o.complexTensorInfos.real},backend:e})}var Qae={kernelName:P0,backendName:"webgl",kernelFunc:Zp};var _Be="return float(int(x));";function Jae(t,n){let e=new Yo(t.shape,_Be),r=n.runWebGLProgram(e,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function Z9(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dtype:i}=r;if(i==="complex64"){if(o.dtype==="complex64")return Rr({inputs:{x:o},backend:e});let s=On(o.shape),a=Z9({inputs:{x:o},backend:e,attrs:{dtype:"float32"}}),l=fs({inputs:{real:a,imag:s},backend:e});return s.dispose(),e.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){let s=Zp({inputs:{input:o},backend:e}),a=Z9({inputs:{x:s},backend:e,attrs:{dtype:i}});return e.disposeIntermediateTensorInfo(s),a}if(!x.hasEncodingLoss(o.dtype,i)){let s=Rr({inputs:{x:o},backend:e});return{dataId:s.dataId,shape:s.shape,dtype:i}}if(e.shouldExecuteOnCPU([o])){let s=e.texData.get(o.dataId).values,[a,l,c]=ase(s,o.shape,o.dtype,i);return e.makeTensorInfo(a,l,c)}if(i==="int32")return Jae(o,e);if(i==="bool"){let s=e.makeTensorInfo([],"bool",x.getTypedArrayFromDType("bool",1)),l=K9({inputs:{a:o,b:s},backend:e});return e.disposeIntermediateTensorInfo(s),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${i}`)}var ele={kernelName:Ml,backendName:"webgl",kernelFunc:Z9};var tle="return ceil(x);",bBe=st({opSnippet:tle,packedOpSnippet:tle,cpuKernelImpl:lse}),nle={kernelName:$c,backendName:"webgl",kernelFunc:bBe};var FI=class{constructor(n){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var BI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function CBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{clipValueMin:i,clipValueMax:s}=r,a;Y().getBool("WEBGL_PACK_CLIP")?a=new BI(o.shape):a=new FI(o.shape);let l=[[i],[s]];return e.runWebGLProgram(a,[o],o.dtype,l)}var rle={kernelName:Vc,backendName:"webgl",kernelFunc:CBe};var PI=class{constructor(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function ole(t,n){return{dataId:n.dataId,dtype:n.dtype,shape:t.shape}}function MBe(t){let{inputs:n,backend:e}=t,{x:r}=n,o=e.texData.get(r.dataId),i=new PI(r.shape),s=[ole(r,o.complexTensorInfos.real),ole(r,o.complexTensorInfos.imag)];return e.runWebGLProgram(i,s,s[0].dtype)}var ile={kernelName:Rd,backendName:"webgl",kernelFunc:MBe};var LI=class{constructor(n){this.outputShape=[],this.outputShape=O.computeOutShape(n,1),this.variableNames=n.map((s,a)=>`T${a}`);let e=new Array(n.length-1);e[0]=n[0][1];for(let s=1;s<e.length;s++)e[s]=e[s-1]+n[s][1];let r=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<e.length;s++){let a=e[s-1];r.push(`else if (yC < ${e[s]}) setOutput(getT${s}(yR, yC-${a}));`)}let o=e.length,i=e[e.length-1];r.push(`else setOutput(getT${o}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}};var VI=class{constructor(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=O.computeOutShape(n,e);let r=this.outputShape,o=r.length,i=$t(o),s=Ar("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=n.map((m,g)=>`T${g}`);let l=new Array(n.length-1);l[0]=n[0][e];for(let m=1;m<l.length;m++)l[m]=l[m-1]+n[m][e];let c=a[e],u=a.slice(-2),d=a.join(),p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let m=1;m<l.length;m++){let g=l[m-1];p+=`
        if (${c} < ${l[m]}  && ${c} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${$I(a,c,g)}),
            vec2(${$I(u,c,g)}));
        }`}let h=l.length,f=l[l.length-1];p+=`
        return getChannel(
          getT${h}(${$I(a,c,f)}),
          vec2(${$I(u,c,f)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[o-1]} = ${s[o-1]} + 1;
        if (${s[o-1]} < ${r[o-1]}) {
          result.g = getValue(${s});
        }

        ${s[o-2]} = ${s[o-2]} + 1;
        if (${s[o-2]} < ${r[o-2]}) {
          result.a = getValue(${s});
        }

        ${s[o-1]} = ${s[o-1]} - 1;
        if (${s[o-2]} < ${r[o-2]} &&
            ${s[o-1]} < ${r[o-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}};function $I(t,n,e){let r=t.indexOf(n);return t.map((i,s)=>s===r?`${i} - ${e}`:i).join()}function d2(t){let{inputs:n,backend:e}=t,{input:r}=n,o=e.texData.get(r.dataId);return Rr({inputs:{x:o.complexTensorInfos.imag},backend:e})}var sle={kernelName:y0,backendName:"webgl",kernelFunc:d2};function Iw(t,n,e){let r=t[0].dtype;if(r==="complex64"){let h=t.map(w=>Zp({inputs:{input:w},backend:e})),f=t.map(w=>d2({inputs:{input:w},backend:e})),m=Iw(h,n,e),g=Iw(f,n,e),v=fs({inputs:{real:m,imag:g},backend:e});return h.forEach(w=>e.disposeIntermediateTensorInfo(w)),f.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),v}let o=e.shouldExecuteOnCPU(t);if(r==="string"&&(o=!0),o){let h=t.map(k=>{let S=[-1,x.sizeFromShape(k.shape.slice(n))];return De({inputs:{x:k},backend:e,attrs:{shape:S}})}),f=h.map(k=>({vals:e.readSync(k.dataId),shape:k.shape})),m=O.computeOutShape(h.map(k=>k.shape),1),g=h[0].shape[0]===1,v=cse(f,m,r,g),w=O.computeOutShape(t.map(k=>k.shape),n),y=e.makeTensorInfo(w,r,v);return h.forEach(k=>e.disposeIntermediateTensorInfo(k)),y}let i=t.filter(h=>x.sizeFromShape(h.shape)>0),s=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){let h=s?new Yo(t[0].shape,Fu):new ps(t[0].shape,Fu);return e.runWebGLProgram(h,t,r)}let a=Y().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){let h=[];for(let m=0;m<i.length;m+=a){let g=i.slice(m,m+a);h.push(Iw(g,n,e))}let f=Iw(h,n,e);for(let m of h)e.disposeIntermediateTensorInfo(m);return f}if(s){let h=new VI(i.map(f=>f.shape),n);return e.runWebGLProgram(h,i,r)}let{tensors2D:l,outShape:c}=SBe(i,n,e),u=new LI(l.map(h=>h.shape)),d=e.runWebGLProgram(u,l,r);l.forEach(h=>e.disposeIntermediateTensorInfo(h));let p=De({inputs:{x:d},attrs:{shape:c},backend:e});return e.disposeIntermediateTensorInfo(d),p}function SBe(t,n,e){let r=O.computeOutShape(t.map(i=>i.shape),n);return{tensors2D:t.map(i=>De({inputs:{x:i},attrs:{shape:[-1,x.sizeFromShape(i.shape.slice(n))]},backend:e})),outShape:r}}function X9(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r,i=x.parseAxisParam(o,n[0].shape)[0],s=n.map(c=>c.shape);O.assertParamsConsistent(s,i);let a=O.computeOutShape(n.map(c=>c.shape),i);if(x.sizeFromShape(a)===0)return e.makeTensorInfo(a,n[0].dtype,[]);let l=n.filter(c=>x.sizeFromShape(c.shape)>0);return l.length===1?Rr({inputs:{x:l[0]},backend:e}):Iw(l,i,e)}var ale={kernelName:Od,backendName:"webgl",kernelFunc:X9};var Dw=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;let s=n.padInfo.top,a=n.padInfo.left,l=n.strideHeight,c=n.strideWidth,u=n.dilationHeight,d=n.dilationWidth,p=n.filterHeight,h=n.filterWidth,f=Math.floor(n.inChannels/4)*4,m=n.inChannels%4,g=n.dataFormat==="channelsLast",v=g?1:2,w=g?2:3,y=g?3:1,k="",_="";r&&(o?k=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?k=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:k=`
          float activation(float x) {
            ${r}
          }
        `,_="result = activation(result);");let S=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${k}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${y}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${w}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${n.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${n.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${f}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${f}) *
                    getW(wR, wC, ${f}, d2);
              } else {
                dotProd +=
                    getX(batch, ${f}, xR, xC) *
                    getW(wR, wC, ${f}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${f}, d2),
                getW(wR, wC, ${f} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${f}),
                  getX(batch, xR, xC, ${f} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${f}, xR, xC),
                  getX(batch, ${f} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${f}, d2),
                getW(wR, wC, ${f} + 1, d2),
                getW(wR, wC, ${f} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${f}),
                  getX(batch, xR, xC, ${f} + 1),
                  getX(batch, xR, xC, ${f} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${f}, xR, xC),
                  getX(batch, ${f} + 1, xR, xC),
                  getX(batch, ${f} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${_}
        setOutput(result);
      }
    `}},jI=class{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;let e=n.padInfo.front,r=n.padInfo.top,o=n.padInfo.left,i=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.filterDepth,p=n.filterHeight,h=n.filterWidth,f=Math.floor(n.inChannels/4)*4,m=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${s}, ${a});
      const ivec3 pads = ivec3(${e}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${n.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${f}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${f}) *
                  getW(wF, wR, wC, ${f}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${f}),
                  getX(batch, xF, xR, xC, ${f} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${f}, d2),
                  getW(wF, wR, wC, ${f} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${f}),
                  getX(batch, xF, xR, xC, ${f} + 1),
                  getX(batch, xF, xR, xC, ${f} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${f}, d2),
                  getW(wF, wR, wC, ${f} + 1, d2),
                  getW(wF, wR, wC, ${f} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};var Nw=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=Sn(this.outputShape.length);let s=n.padInfo.left,a=n.strideWidth,l=n.dilationWidth,c=n.filterHeight,u=n.filterWidth,d=u,p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<u;g++)p+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${n.inChannels}; d1 += 2) {
       `;for(let g=0;g<u;g++)p+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){let v=g*2;if(p+=`
           xC = xCCorner + ${v*l};
           `,a===1){if(v<u&&(s%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,l===1&&v>0?p+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<u)){let w=s%2===0?x.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${w};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:p+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):w===1?p+=`
                     xC${v+1} = xTexelC${v};
                     `:p+=`
                     xCOffset = xC + ${w};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<u&&(s%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<u&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<u&&(p+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<u&&(p+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${n.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<u&&(p+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${n.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let h="",f="";r&&(o?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,f="result = activation(result);");let m=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${f}
         setOutput(result);
       }
     `}};var zI=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=n,this.enableShapeUniforms=Sn(this.outputShape.length);let{dataFormat:r}=e,o=fr(),i=r==="channelsLast",s=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${n[2]} && pos < ${n[1]}) {`,c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${o.output} = result;
      }
    `}};function HI(t,n){let e=t.length;return e>=3?n?[...t.slice(0,-3),t[e-3]*t[e-2],t[e-1]]:[...t.slice(0,-3),t[e-3],t[e-2]*t[e-1]]:!n&&e===1&&t[0]>1?[t[0],1]:null}function UI({x:t,filter:n,convInfo:e,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let l=t.shape,c=r.texData.get(t.dataId),u=e.inChannels,d=l[0]*l[1]*l[2],p=e.outChannels,h=e.dataFormat==="channelsLast",f=!1,m=!1,g,v=[];if(i!=null){let k=HI(i.shape,h);k!=null&&(i=De({inputs:{x:i},backend:r,attrs:{shape:k}}),v.push(i))}if(o!=null){let k=HI(o.shape,h);k!=null&&(o=De({inputs:{x:o},backend:r,attrs:{shape:k}}),v.push(o))}if(!((d===1||p===1)&&u>W9)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&x.arraysEqual(c.shape.slice(-3),l.slice(-3))){let k=l[0]*l[1]*(l[2]+1),_={dataId:t.dataId,shape:[1,k,e.inChannels],dtype:t.dtype},S=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,x.assert(Pf(c.shape,_.shape),()=>`packed reshape ${c.shape} to ${_.shape} isn't free`);let E=De({inputs:{x:n},backend:r,attrs:{shape:[1,e.inChannels,e.outChannels]}});v.push(E);let N=u2({a:_,b:E,backend:r,transposeA:f,transposeB:m,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s}),B=r.texData.get(N.dataId);x.assert(B.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=S,B.shape=e.outShape,g=Rr({inputs:{x:N},backend:r}),g.shape=e.outShape,v.push(N)}else{let k=e.outHeight*e.outWidth,_=De({inputs:{x:t},backend:r,attrs:{shape:h?[e.batchSize,k,e.inChannels]:[e.batchSize,e.inChannels,k]}}),S=De({inputs:{x:n},backend:r,attrs:{shape:[1,e.inChannels,e.outChannels]}}),E=u2({a:h?_:S,b:h?S:_,transposeA:!h,transposeB:m,backend:r,bias:o,activation:a,preluActivationWeights:i,leakyreluAlpha:s});g=De({inputs:{x:E},backend:r,attrs:{shape:e.outShape}}),v.push(_),v.push(S),v.push(E)}for(let k of v)r.disposeIntermediateTensorInfo(k);return g}function GI({x:t,filter:n,convInfo:e,backend:r,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:s=0,activation:a=null}){let{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:p,dataFormat:h}=e,f=h==="channelsLast",m=l*c*u,g=p*d,v=[e.batchSize,m,g],w=!0,y=!1,k=[];if(i!=null){let H=HI(i.shape,f);H!=null&&(i=De({inputs:{x:i},backend:r,attrs:{shape:H}}),k.push(i))}if(o!=null){let H=HI(o.shape,f);H!=null&&(o=De({inputs:{x:o},backend:r,attrs:{shape:H}}),k.push(o))}let _=De({inputs:{x:n},backend:r,attrs:{shape:[1,m,x.sizeFromShape(n.shape)/m]}});k.push(_);let S=new zI(v,e),E=[t.shape,[e.padInfo.top,e.padInfo.left],[e.strideHeight,e.strideWidth],[e.dilationHeight,e.dilationWidth],[e.inChannels],[e.filterWidth*e.inChannels],[e.outWidth]],N=r.runWebGLProgram(S,[t],"float32",E),B=De({inputs:{x:N},backend:r,attrs:{shape:v}});k.push(N),k.push(B);let D=o!=null,P=i!=null,M=a==="leakyrelu",W=a?Kp(a,!0):null,ie=new Ew(f?B.shape:_.shape,f?_.shape:B.shape,f?[e.batchSize,g,e.outChannels]:[e.batchSize,e.outChannels,g],w,y,D,W,P,M),Z=f?[B,_]:[_,B];if(o&&Z.push(o),P&&Z.push(i),M){let H=r.makeTensorInfo([],"float32",x.createScalarValue(s,"float32"));Z.push(H),k.push(H)}let X=r.runWebGLProgram(ie,Z,"float32"),G=De({inputs:{x:X},backend:r,attrs:{shape:e.outShape}});k.push(X);for(let H of k)r.disposeIntermediateTensorInfo(H);return G}function TBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,i.shape,s,c,a,u,!1,d),h;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))h=UI({x:o,filter:i,convInfo:p,backend:e});else if(p.strideWidth<=2&&d==="channelsLast"&&Y().getBool("WEBGL_EXP_CONV")){let m=new Nw(p),g=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=e.runWebGLProgram(m,[o,i],"float32",g)}else if(Y().getBool("WEBGL_CONV_IM2COL"))h=GI({x:o,filter:i,convInfo:p,backend:e});else{let m=new Dw(p);h=e.runWebGLProgram(m,[o,i],"float32")}let f=De({inputs:{x:h},backend:e,attrs:{shape:p.outShape}});return e.disposeIntermediateTensorInfo(h),f}var lle={kernelName:Fd,backendName:"webgl",kernelFunc:TBe};var WI=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideHeight,r=n.strideWidth,o=n.padInfo.top,i=n.padInfo.left,s=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yR = 0; yR < ${n.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${o};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${n.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},qI=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterHeight,r=n.filterWidth,o=n.strideHeight,i=n.strideWidth,s=n.dataFormat==="channelsLast",a=e-1-n.padInfo.top,l=r-1-n.padInfo.left,c=s?1:2,u=s?2:3,d=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},KI=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideDepth,r=n.strideHeight,o=n.strideWidth,i=n.padInfo.front,s=n.padInfo.top,a=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yF = 0; yF < ${n.outDepth}; yF++) {
            int xF = wF + yF * ${e} - ${i};

            if (xF < 0 || xF >= ${n.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${n.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${s};

              if (xR < 0 || xR >= ${n.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${n.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${n.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},ZI=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterDepth,r=n.filterHeight,o=n.filterWidth,i=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=e-1-n.padInfo.front,c=r-1-n.padInfo.top,u=o-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${e}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${e} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function EBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=O.convertConv2DDataFormat(l),p=O.computeConv2DInfo(o.shape,u,s,1,a,c,!1,d),h=new WI(p);return e.runWebGLProgram(h,[o,i],"float32")}var cle={kernelName:r0,backendName:"webgl",kernelFunc:EBe};var XI=class{constructor(n){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=n.inShape,this.enableShapeUniforms=Sn(this.outputShape.length);let e=n.filterHeight,r=n.filterWidth,o=e-1-n.padInfo.top,i=r-1-n.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${n.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${n.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function IBe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=O.convertConv2DDataFormat(c),p=O.computeConv2DInfo(s,i.shape,a,1,l,u,!1,d);if(Y().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let h=[[p.strideHeight,p.strideWidth]],f=new XI(p);return e.runWebGLProgram(f,[o,i],"float32",h)}else{let h=new qI(p);return e.runWebGLProgram(h,[o,i],"float32")}}var ule={kernelName:Bd,backendName:"webgl",kernelFunc:IBe};function DBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l}=r,c=O.computeConv3DInfo(o.shape,i.shape,s,l,a),u=new jI(c);return e.runWebGLProgram(u,[o,i],"float32")}var dle={kernelName:Pd,backendName:"webgl",kernelFunc:DBe};function NBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,pad:a,filterShape:l}=r,c=O.computeConv3DInfo(o.shape,l,s,1,a),u=new KI(c);return e.runWebGLProgram(u,[o,i],"float32")}var ple={kernelName:o0,backendName:"webgl",kernelFunc:NBe};function ABe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{pad:s,strides:a,inputShape:l}=r,c=O.computeConv3DInfo(l,i.shape,a,1,s),u=new ZI(c);return e.runWebGLProgram(u,[o,i],"float32")}var hle={kernelName:i0,backendName:"webgl",kernelFunc:ABe};var RBe=el+`
  return cos(x);
`,OBe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${$s}
  return result;
`,FBe=st({opSnippet:RBe,packedOpSnippet:OBe}),fle={kernelName:"Cos",backendName:"webgl",kernelFunc:FBe};var BBe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,PBe=st({opSnippet:BBe}),mle={kernelName:jc,backendName:"webgl",kernelFunc:PBe};var YI=class{constructor(n,e,r,o,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[s,a,l,c]=n,[u]=e,[d,p]=r;this.outputShape=[u,d,p,c];let h=o==="bilinear"?1:0,[f,m]=[`${a-1}.0`,`${l-1}.0`],[g,v,w]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${f} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${f}`],[y,k,_]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${y});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${k};

        float in_y = ${w};
        if( in_y < 0.0 || in_y > ${f} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${_};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var LBe=t=>{let{inputs:n,backend:e,attrs:r}=t,{image:o,boxes:i,boxInd:s}=n,{cropSize:a,method:l,extrapolationValue:c}=r,u=new YI(o.shape,i.shape,a,l,c);return e.runWebGLProgram(u,[o,i,s],"float32")},gle={kernelName:a0,backendName:"webgl",kernelFunc:LBe};var Aw=(function(t){return t.Prod="*",t.Sum="+",t})(Aw||{}),vb=class{constructor(n,e,r,o){this.op=n,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let i=this.outputShape.length,s=this.op===Aw.Prod?"1.0":"0.0",a=r?s:`getX(${vle(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1],c="",u="";r?(c=o?`end != ${l-1}`:"end != 0",u=o?"end + 1":"end - 1"):(c=o?`end + pow2 < ${l}`:"end >= pow2",u=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${$t(i)} coords = getOutputCoords();
        int end = ${wle(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${wle(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${vle(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function vle(t,n,e){if(t===1)return`${n}`;if(t===2)return`${n}.x, ${n}.y`;if(t===3)return`${n}.x, ${n}.y, ${n}.z`;if(t===4)return`${n}.x, ${n}.y, ${n}.z, ${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function wle(t,n,e){if(t===1)return`${n}`;if(t===2)return`${n}.y`;if(t===3)return`${n}.z`;if(t===4)return`${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function QI(t,n,e,r,o,i){let s=n.shape.length,a=O.getAxesPermutation([r],s),l=n;a!=null&&(l=tr({inputs:{x:n},backend:e,attrs:{perm:a}}));let c=O.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${n.shape.length-1} but got axis=${r}`);let u=l.shape[c],d=Rr({inputs:{x:l},backend:e});for(let p=0;p<=Math.ceil(Math.log2(u))-1;p++){let h=new vb(t,l.shape,!1,i),f=[[p]],m=d;d=e.runWebGLProgram(h,[d],d.dtype,f),e.disposeIntermediateTensorInfo(m)}if(o){let p=new vb(t,l.shape,o,i),h=d;d=e.runWebGLProgram(p,[d],d.dtype),e.disposeIntermediateTensorInfo(h)}if(a!=null){let p=O.getUndoAxesPermutation(a),h=tr({inputs:{x:d},backend:e,attrs:{perm:p}});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(l),h}return d}function $Be(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;return QI(Aw.Prod,o,e,i,s,a)}var yle={kernelName:s0,backendName:"webgl",kernelFunc:$Be};function VBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,exclusive:s,reverse:a}=r;return QI(Aw.Sum,o,e,i,s,a)}var xle={kernelName:Ld,backendName:"webgl",kernelFunc:VBe};function jBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,weights:i}=n,{size:s,binaryOutput:a}=r;if(o.shape.length===1){let l=e.readSync(o.dataId),c=e.readSync(i.dataId),u=dI(l,c,i.dtype,i.shape,s);return e.makeTensorInfo([s],i.dtype,u)}else if(o.shape.length===2){let l=e.bufferSync(o),c=e.bufferSync(i),u=ise(l,c,s,a);return e.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}var kle={kernelName:l0,backendName:"webgl",kernelFunc:jBe};var JI=class{constructor(n,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${e};
      int offset_h = imod(h, ${e});
      int in_w = w / ${e};
      int offset_w = imod(w, ${e});
      int offset_d = (offset_h * ${e} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function zBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockSize:i,dataFormat:s}=r,a=o.shape[0],l=s==="NHWC"?o.shape[1]:o.shape[2],c=s==="NHWC"?o.shape[2]:o.shape[3],u=s==="NHWC"?o.shape[3]:o.shape[1],d=l*i,p=c*i,h=u/(i*i),f=s==="NHWC"?[a,d,p,h]:[a,h,d,p],m=new JI(f,i,s);return e.runWebGLProgram(m,[o],o.dtype)}var _le={kernelName:c0,backendName:"webgl",kernelFunc:zBe};var Rw=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=Sn(this.outputShape.length);let s=n.filterHeight,a=n.filterWidth,l=n.outChannels/n.inChannels,c="",u="";r&&(o?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");let d=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}};var Ow=class{constructor(n,e=!1,r=null,o=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=Sn(this.outputShape.length);let s=n.outChannels/n.inChannels,a=n.padInfo.left,l=n.strideWidth,c=n.dilationWidth,u=n.filterHeight,d=n.filterWidth,p=d,h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(p+1)/2;v++){let w=v*2;if(h+=`
          xC = xCCorner + ${w*c};
          `,l===1){if(w<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }
              `,c===1&&w>0?h+=`
                xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                  } else {
                    xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xC${w} = xTexelC${w};
                `,w+1<d)){let y=a%2===0?x.nearestLargerEven(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${y};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                    xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${w+1}.zw = vec2(0.0);
                    }
                    xTexelC${w+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                    } else {
                     xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                    }
                    `:h+=`
                    xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                    `):y===1?h+=`
                    xC${w+1} = xTexelC${w};
                    `:h+=`
                    xCOffset = xC + ${y};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                      xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${w+1}.zw = vec2(0.0);
                      }
                      xTexelC${w+1}Ready = 1;
                    }

                    xC${w+1} = xTexelC${w+1};
                    `}}else w<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.0);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
              `,w+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                  xTexelC${w} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${w}.zw = vec2(0.0);
                  }
                  xTexelC${w}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                  xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${w+1}.zw = vec2(0.);
                  }
                  xTexelC${w+1}Ready = 1;
                }

                xC${w} = vec4(
                  xTexelC${w}.xy, xTexelC${w+1}.xy);
              `,w+1<d&&(h+=`
                  xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                `)));w<d&&(h+=`
            wTexel = getW(r, ${w}, d1, q);
            dotProd += xC${w} * vec4(wTexel.xz, wTexel.xz);
          `,w+1<d&&(h+=`
              wTexel = getW(r, ${w+1}, d1, q);
              dotProd += xC${w+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let f="",m="";r&&(o?f=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?f=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:f=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");let g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${f}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}};function HBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=r,u=l;u==null&&(u=[1,1]),x.assert(O.eitherStridesOrDilationsAreOne(s,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let d=O.computeConv2DInfo(o.shape,i.shape,s,u,a,c,!0),p;Y().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new Ow(d):p=new Rw(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return e.runWebGLProgram(p,[o,i],"float32",h)}var ble={kernelName:$d,backendName:"webgl",kernelFunc:HBe};var eD=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideHeight,r=n.strideWidth,o=n.padInfo.top,i=n.padInfo.left,s=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yR = 0; yR < ${n.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${o};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${n.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},tD=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterHeight,r=n.filterWidth,o=n.strideHeight,i=n.strideWidth,s=e-1-n.padInfo.top,a=r-1-n.padInfo.left,l=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function UBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,dy:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=O.computeConv2DInfo(o.shape,u,s,a,l,c,!0),p=new eD(d);return e.runWebGLProgram(p,[o,i],"float32")}var Cle={kernelName:u0,backendName:"webgl",kernelFunc:UBe};function GBe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,filter:i}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=O.computeConv2DInfo(u,i.shape,s,a,l,c,!0),p=new tD(d);return e.runWebGLProgram(p,[o,i],"float32")}var Mle={kernelName:d0,backendName:"webgl",kernelFunc:GBe};var nD=class{constructor(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function WBe(t){let{inputs:n,backend:e}=t,{x:r}=n,o=[...r.shape,...r.shape],i=x.sizeFromShape(r.shape),s=De({inputs:{x:r},backend:e,attrs:{shape:[i]}}),a=new nD(i),l=e.runWebGLProgram(a,[s],s.dtype),c=De({inputs:{x:l},backend:e,attrs:{shape:o}});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(l),c}var Sle={kernelName:p0,backendName:"webgl",kernelFunc:WBe};var rD=class{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;let{inHeight:e,inWidth:r,padInfo:o,strideHeight:i,strideWidth:s,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=n,{top:d,left:p}=o;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${s});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${e}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function qBe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i}=n,{strides:s,pad:a,dilations:l}=r,c=O.computeDilation2DInfo(o.shape,i.shape,s,a,"NHWC",l),u,d=new rD(c);u=e.runWebGLProgram(d,[o,i],"float32");let p=De({inputs:{x:u},backend:e,attrs:{shape:c.outShape}});return e.disposeIntermediateTensorInfo(u),p}var Tle={kernelName:Vd,backendName:"webgl",kernelFunc:qBe};function KBe(t){let{inputs:n,backend:e,attrs:r}=t,{equation:o}=r,i=n,{allDims:s,summedDims:a,idDims:l}=O.decodeEinsumEquation(o,i.length);O.checkEinsumDimSizes(s.length,l,i);let{path:c,steps:u}=O.getEinsumComputePath(a,l),d=u.length,p=null,h=s.length,f=[];for(let m=0;m<d;++m){for(let g of u[m]){let{permutationIndices:v,expandDims:w}=O.getEinsumPermutation(h,l[g]),y;O.isIdentityPermutation(v)?y=i[g]:(y=tr({inputs:{x:i[g]},backend:e,attrs:{perm:v}}),f.push(y));let k=y.shape.slice();for(let _=0;_<w.length;++_)k.splice(w[_],0,1);x.arraysEqual(y.shape,k)||(y=De({inputs:{x:y},backend:e,attrs:{shape:k}}),f.push(y)),p===null?p=y:(p=mb({inputs:{a:y,b:p},backend:e}),f.push(p))}m<d-1&&(c[m]>=0&&(p=c2({inputs:{x:p},backend:e,attrs:{axis:c[m]-(s.length-h),keepDims:!1}}),f.push(p)),h--)}for(let m of f)m!==p&&e.disposeIntermediateTensorInfo(m);return p}var Ele={kernelName:h0,backendName:"webgl",kernelFunc:KBe};var ZBe="return (x >= 0.0) ? x : (exp(x) - 1.0);",XBe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,YBe=st({opSnippet:ZBe,packedOpSnippet:XBe}),Ile={kernelName:"Elu",backendName:"webgl",kernelFunc:YBe};var QBe="return (b >= 0.0) ? a : a * (b + 1.0);",JBe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,ePe=t=>{let{inputs:n,backend:e}=t,{dy:r,y:o}=n,i=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ls(JBe,r.shape,o.shape):new hs(QBe,r.shape,o.shape);return e.runWebGLProgram(i,[r,o],r.dtype)},Dle={kernelName:f0,backendName:"webgl",kernelFunc:ePe};var tPe=`
  return vec4(equal(a, b));
`,nPe="return float(a == b);",rPe=kn({opSnippet:nPe,packedOpSnippet:tPe,dtype:"bool",cpuKernelImpl:use}),Nle={kernelName:zh,backendName:"webgl",kernelFunc:rPe};var oPe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${O.ERF_P};
  float a1 = ${O.ERF_A1};
  float a2 = ${O.ERF_A2};
  float a3 = ${O.ERF_A3};
  float a4 = ${O.ERF_A4};
  float a5 = ${O.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,iPe=st({opSnippet:oPe}),Ale={kernelName:"Erf",backendName:"webgl",kernelFunc:iPe};var sPe=el+`
  return exp(x);
`,aPe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Y9=st({opSnippet:sPe,packedOpSnippet:aPe,cpuKernelImpl:dse,dtype:"float32"}),Rle={kernelName:"Exp",backendName:"webgl",kernelFunc:Y9};function oD(t){let{inputs:n,attrs:e,backend:r}=t,{dim:o}=e,{input:i}=n,s=i.shape.length,a=i.shape.slice(),l=o;return o<0&&(x.assert(-(s+1)<=o,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+o+1),a.splice(l,0,1),De({inputs:{x:i},backend:r,attrs:{shape:a}})}var Ole={kernelName:zd,backendName:"webgl",kernelFunc:oD};var Fle="return exp(x) - 1.0;",lPe=st({opSnippet:Fle,packedOpSnippet:Fle,cpuKernelImpl:pse}),Ble={kernelName:Hc,backendName:"webgl",kernelFunc:lPe};var wb=class{constructor(n,e,r){this.variableNames=["real","imag"];let o=e[1];this.outputShape=e;let i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=r?`${o}.0`:"1.0",a;if(n==="real")a="return real * expR - imag * expI;";else if(n==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${n}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function iD(t,n,e){let r=e.texData.get(t.dataId),o=x.sizeFromShape(t.shape),i=t.shape[t.shape.length-1],s=o/i,a=De({inputs:{x:t},backend:e,attrs:{shape:[s,i]}}),l=a.shape,c=new wb("real",l,n),u=new wb("imag",l,n),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=e.runWebGLProgram(c,d,"float32"),h=e.runWebGLProgram(u,d,"float32"),f=fs({inputs:{real:p,imag:h},backend:e});e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h);let m=De({inputs:{x:f},backend:e,attrs:{shape:t.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(f),m}function cPe(t){let{inputs:n,backend:e}=t,{input:r}=n;return iD(r,!1,e)}var Ple={kernelName:"FFT",backendName:"webgl",kernelFunc:cPe};var sD=class{constructor(n,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function Xp(t){let{backend:n,attrs:e}=t,{shape:r,value:o}=e,{dtype:i}=e;if(i=i||x.inferDtype(o),i==="string"){let s=x.getArrayFromDType(i,x.sizeFromShape(r));return s.fill(o),n.makeTensorInfo(r,i,s)}else{let s=new sD(r,o),a=[[o]];return n.runWebGLProgram(s,[],i,a)}}var Lle={kernelName:m0,backendName:"webgl",kernelFunc:Xp};var aD=class{constructor(n){this.variableNames=["Image"],this.outputShape=[];let e=n[2];this.outputShape=n,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${e} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${e}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var $le={kernelName:g0,backendName:"webgl",kernelFunc:({inputs:t,backend:n})=>{let{image:e}=t,r=n,o=new aD(e.shape);return r.runWebGLProgram(o,[e],e.dtype)}};var Vle="return floor(x);",uPe=st({opSnippet:Vle,packedOpSnippet:Vle,cpuKernelImpl:hse}),jle={kernelName:Uc,backendName:"webgl",kernelFunc:uPe};var dPe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,pPe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,hPe=kn({opSnippet:dPe,packedOpSnippet:pPe,dtype:"int32"}),zle={kernelName:Gc,backendName:"webgl",kernelFunc:hPe};var lD=class{constructor(n){this.variableNames=["A"];let e=fr(),[r,o]=n;this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${e.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var cD=class{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let e=fr(),[r,o]=n;this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${e.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${e.output} = result;
      }
    `}};var Hle={kernelName:pv,backendName:"webgl",kernelFunc:fPe},Fw,Q9=Y().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function fPe(t){let{inputs:n,backend:e,attrs:r}=t,{pixels:o}=n,{numChannels:i}=r,s=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[l,c]=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[c,l],d=[c,l,i];if(a||s){let m=Y().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Fw==null||m!==Q9)&&(Q9=m,Fw=document.createElement("canvas").getContext("2d",{willReadFrequently:Q9})),Fw.canvas.width=l,Fw.canvas.height=c,Fw.drawImage(o,0,0,l,c),o=Fw.canvas}let p=e.makeTensorInfo(u,"int32");e.texData.get(p.dataId).usage=ki.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(p.dataId),o);let h=Y().getBool("WEBGL_PACK")?new cD(d):new lD(d),f=e.runWebGLProgram(h,[p],"int32");return e.disposeData(p.dataId),f}function mPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:f}=r,m=O.convertConv2DDataFormat(u),g=O.computeConv2DInfo(o.shape,i.shape,l,d,c,p,!1,m),v,w=[],y=s!=null,k=a!=null,_=h==="leakyrelu",S=()=>{let N=[o,i],B=(D,P)=>{if(P==="NCHW"&&D.shape.length===1&&D.shape[0]!==1){let M=De({inputs:{x:D},backend:e,attrs:{shape:[D.shape[0],1,1]}});return w.push(M),M}return D};if(y&&N.push(B(s,u)),k&&N.push(B(a,u)),_){let D=e.makeTensorInfo([],"float32",x.createScalarValue(f,"float32"));N.push(D),w.push(D)}return N};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))v=UI({x:o,filter:i,convInfo:g,backend:e,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:f});else if(g.strideWidth<=2&&m==="channelsLast"&&Y().getBool("WEBGL_EXP_CONV")){let N=h?Kp(h,!0):null,B=new Nw(g,y,N,k,_),D=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],P=S();v=e.runWebGLProgram(B,P,"float32",D)}else if(Y().getBool("WEBGL_CONV_IM2COL"))v=GI({x:o,filter:i,convInfo:g,backend:e,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:f});else{let N=h?Kp(h,!1):null,B=new Dw(g,y,N,k,_),D=S();v=e.runWebGLProgram(B,D,"float32")}let E=De({inputs:{x:v},backend:e,attrs:{shape:g.outShape}});return w.push(v),w.forEach(N=>e.disposeIntermediateTensorInfo(N)),E}var Ule={kernelName:sf,backendName:"webgl",kernelFunc:mPe};function gPe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,filter:i,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=r,f=[],m=u;m==null&&(m=[1,1]),x.assert(O.eitherStridesOrDilationsAreOne(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);let g=O.computeConv2DInfo(o.shape,i.shape,l,m,c,d,!0),v=Y().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,w=p?Kp(p,v):null,y=[o,i],k=s!=null,_=a!=null,S=p==="leakyrelu";if(k&&y.push(s),_&&y.push(a),S){let D=e.makeTensorInfo([],"float32",x.createScalarValue(h,"float32"));y.push(D),f.push(D)}let E;v?E=new Ow(g,k,w,_,S):E=new Rw(g,k,w,_,S);let N=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],B=e.runWebGLProgram(E,y,"float32",N);return f.forEach(D=>e.disposeIntermediateTensorInfo(D)),B}var Gle={kernelName:af,backendName:"webgl",kernelFunc:gPe};var uD=class{constructor(n,e,r,o){this.sliceDim=n,this.strides=e,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;let i=$t(r.length),s=`
    int index;`;for(let a=0;a<this.sliceDim;a++)s+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function vPe(t){let{inputs:n,backend:e}=t,{params:r,indices:o}=n,i=o.shape,s=i[i.length-1],a=x.sizeFromShape(r.shape),[l,c,u,d]=O.prepareAndValidate(r,o),p=De({inputs:{x:o},backend:e,attrs:{shape:[c,s]}}),h=De({inputs:{x:r},backend:e,attrs:{shape:[x.sizeFromShape(r.shape)/u,u]}});if(e.shouldExecuteOnCPU([r,o])||r.dtype==="string"){let v=e.readSync(o.dataId),w=e.bufferSync(r),y=fse(v,w,r.dtype,c,s,u,d,r.shape,a);return e.makeTensorInfo(l,r.dtype,y.values)}let f=new uD(s,d,[c,u],r.shape),m=e.runWebGLProgram(f,[h,p],h.dtype),g=De({inputs:{x:m},backend:e,attrs:{shape:l}});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),g}var Wle={kernelName:v0,backendName:"webgl",kernelFunc:vPe};var dD=class{constructor(n,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;let r=$t(this.rank),o=wPe(n,2);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${n[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}};function wPe(t,n){let e=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<t.length;o++)o===2?r.push("index"):r.push(`${e[o]}`);return r.join()}function J9(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,indices:i}=n,{axis:s,batchDims:a}=r,l=x.parseAxisParam(s,o.shape)[0];if(Y().get("DEBUG")){let w=e.readSync(i.dataId),y=o.shape[l];for(let k=0;k<w.length;++k){let _=w[k];x.assert(_<=y-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${y-1}]`)}}let c=O.segment_util.collectGatherOpShapeInfo(o,i,l,a),u=x.sizeFromShape(i.shape),d=[],p=De({inputs:{x:o},backend:e,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=De({inputs:{x:i},backend:e,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(p),d.push(h);let f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(e.shouldExecuteOnCPU([o,i])||o.dtype==="string"){let w=e.bufferSync(h),y=e.bufferSync(p),k=mse(y,w,f);return d.forEach(_=>e.disposeIntermediateTensorInfo(_)),e.makeTensorInfo(c.outputShape,k.dtype,k.values)}let m=new dD(p.shape,f),g=e.runWebGLProgram(m,[p,h],p.dtype);d.push(g);let v=De({inputs:{x:g},backend:e,attrs:{shape:c.outputShape}});return d.forEach(w=>e.disposeIntermediateTensorInfo(w)),v}var qle={kernelName:Ud,backendName:"webgl",kernelFunc:J9};var yPe="return float(a > b);",xPe=`
  return vec4(greaterThan(a, b));
`,kPe=kn({opSnippet:yPe,packedOpSnippet:xPe,cpuKernelImpl:gse,dtype:"bool"}),Kle={kernelName:Uh,backendName:"webgl",kernelFunc:kPe};var _Pe="return float(a >= b);",bPe=`
  return vec4(greaterThanEqual(a, b));
`,CPe=kn({opSnippet:_Pe,packedOpSnippet:bPe,dtype:"bool",cpuKernelImpl:vse}),Zle={kernelName:Wc,backendName:"webgl",kernelFunc:CPe};function MPe(t){let{inputs:n,backend:e}=t,{input:r}=n;return iD(r,!0,e)}var Xle={kernelName:w0,backendName:"webgl",kernelFunc:MPe};var SPe="return float(!isnan(x) && !isinf(x));",TPe=st({opSnippet:SPe,dtype:"bool"}),Yle={kernelName:qc,backendName:"webgl",kernelFunc:TPe};var EPe="return float(isinf(x));",IPe=st({opSnippet:EPe,dtype:"bool"}),Qle={kernelName:Kc,backendName:"webgl",kernelFunc:IPe};var DPe="return float(isnan(x));",NPe=st({opSnippet:DPe,dtype:"bool"}),Jle={kernelName:Zc,backendName:"webgl",kernelFunc:NPe};var APe="return float(a < b);",RPe=`
  return vec4(lessThan(a, b));
`,OPe=kn({opSnippet:APe,packedOpSnippet:RPe,cpuKernelImpl:wse,dtype:"bool"}),ece={kernelName:Gh,backendName:"webgl",kernelFunc:OPe};var FPe="return float(a <= b);",BPe=`
  return vec4(lessThanEqual(a, b));
`,PPe=kn({opSnippet:FPe,packedOpSnippet:BPe,cpuKernelImpl:yse,dtype:"bool"}),tce={kernelName:Wh,backendName:"webgl",kernelFunc:PPe};function LPe(t){let{backend:n,attrs:e}=t,{start:r,stop:o,num:i}=e,s=xse(r,o,i);return n.makeTensorInfo([s.length],"float32",s)}var nce={kernelName:x0,backendName:"webgl",kernelFunc:LPe};var $Pe=el+`
  return x < 0.0 ? 0./0. : log(x);
`,VPe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,jPe=st({opSnippet:$Pe,packedOpSnippet:VPe,cpuKernelImpl:kse}),rce={kernelName:"Log",backendName:"webgl",kernelFunc:jPe};var zPe=el+`
  return log(1.0 + x);
`,HPe=st({opSnippet:zPe}),oce={kernelName:Xc,backendName:"webgl",kernelFunc:HPe};var UPe="return float(a >= 1.0 && b >= 1.0);",GPe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,WPe=kn({opSnippet:UPe,packedOpSnippet:GPe,dtype:"bool"}),ice={kernelName:Kh,backendName:"webgl",kernelFunc:WPe};var qPe="return float(!(x >= 1.0));",KPe=st({opSnippet:qPe}),sce={kernelName:Zh,backendName:"webgl",kernelFunc:KPe};var ZPe="return float(a >= 1.0 || b >= 1.0);",XPe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,YPe=kn({opSnippet:ZPe,packedOpSnippet:XPe,dtype:"bool"}),ace={kernelName:Xh,backendName:"webgl",kernelFunc:YPe};var pD=class{constructor(n,e,r,o,i){this.variableNames=["x"],this.outputShape=[];let s=e,a=n[3]-1;this.outputShape=n;let l,c=`float(${r}) + float(${o}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}};var hD=class{constructor(n,e,r,o,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let s=e,a=n[3]-1;this.outputShape=n;let l,c=`float(${r}) + float(${o}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}};var QPe=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{depthRadius:i,bias:s,alpha:a,beta:l}=r,c=Y().getBool("WEBGL_PACK_NORMALIZATION")?new hD(o.shape,i,s,a,l):new pD(o.shape,i,s,a,l);return e.runWebGLProgram(c,[o],o.dtype)},lce={kernelName:"LRN",backendName:"webgl",kernelFunc:QPe};var fD=class{constructor(n,e,r,o,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=r,this.alpha=o,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${e})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${e} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var JPe=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o,y:i,dy:s}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new fD(o.shape,a,l,c,u);return e.runWebGLProgram(d,[o,i,s],o.dtype)},cce={kernelName:_0,backendName:"webgl",kernelFunc:JPe};function uce(t,n,e,r){let o=x.sizeFromShape(n),s=x.sizeFromShape(t.shape)/o,a=De({inputs:{x:t},attrs:{shape:[s,o]},backend:r}),l=Vs(a,t.dtype,"max",r),c=De({inputs:{x:l},attrs:{shape:e},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}function e$(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reductionIndices:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=u!=null,p=e.shouldExecuteOnCPU([o]),h=o;if(d){if(p){let y=e.texData.get(h.dataId).values,k=new Array(a);for(let E=0;E<k.length;E++)k[E]=o.shape[u[E]];let _=l2(y,o.shape,o.dtype,u,k);h=e.makeTensorInfo(k,o.dtype);let S=e.texData.get(h.dataId);S.values=_}else h=$f(o,u,e);c=O.getInnerMostAxes(c.length,a)}O.assertAxesAreInnerMostDims("max",c,a);let[f,m]=O.computeOutAndReduceShapes(h.shape,c),g=f;s&&(g=O.expandShapeToKeepDim(f,l));let v;if(p){let y=e.texData.get(h.dataId).values,k=_se(y,x.sizeFromShape(m),g,o.dtype);v=e.makeTensorInfo(g,o.dtype);let _=e.texData.get(v.dataId);_.values=k}else v=uce(h,m,g,e);return d&&e.disposeIntermediateTensorInfo(h),v}var dce={kernelName:"Max",backendName:"webgl",kernelFunc:e$};var eLe=Tw+`
  return max(a, b);
`,tLe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+$s+`
  return result;
`,nLe=kn({opSnippet:eLe,packedOpSnippet:tLe,cpuKernelImpl:bse}),pce={kernelName:Yc,backendName:"webgl",kernelFunc:nLe};function rLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;Ql(o,"maxPool");let{filterSize:i,strides:s,pad:a,dimRoundingMode:l}=r,c=1;x.assert(O.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=O.computePool2DInfo(o.shape,i,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))return Rr({inputs:{x:o},backend:e});let d=new ec(u,"max",!1);return e.runWebGLProgram(d,[o],o.dtype)}var hce={kernelName:Wd,backendName:"webgl",kernelFunc:rLe};function oLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{filterSize:i,strides:s,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=O.computePool3DInfo(o.shape,i,s,u,a,c,l),p=new Vf(d,"max",!1);return e.runWebGLProgram(p,[o],o.dtype)}var fce={kernelName:qd,backendName:"webgl",kernelFunc:oLe};var mD=class{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;let e=n.strideHeight,r=n.strideWidth,o=n.dilationHeight,i=n.effectiveFilterHeight,s=n.effectiveFilterWidth,a=i-1-n.padInfo.top,l=s-1-n.padInfo.left,c=i*s-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${e}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},gD=class{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;let e=n.strideDepth,r=n.strideHeight,o=n.strideWidth,i=n.dilationDepth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterDepth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth,d=l-1-n.padInfo.front,p=c-1-n.padInfo.top,h=u-1-n.padInfo.left,f=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${e}.0;

          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${f} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function iLe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i}=n,s=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],p=O.computePool3DInfo(s.shape,a,l,d,c,u),h=new Vf(p,"max",!0),f=e.runWebGLProgram(h,[s],s.dtype),m=new gD(p),g=e.runWebGLProgram(m,[o,f],s.dtype);return e.disposeIntermediateTensorInfo(f),g}var mce={kernelName:M0,backendName:"webgl",kernelFunc:iLe};function sLe(t){let{inputs:n,backend:e,attrs:r}=t,{dy:o,input:i,output:s}=n,a=i;Ql([i,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,p=O.computePool2DInfo(a.shape,l,c,1,u,d),h=!0,f=new ec(p,"max",h),m=e.runWebGLProgram(f,[a],a.dtype),g=new mD(p),v=e.runWebGLProgram(g,[o,m],a.dtype);return e.disposeIntermediateTensorInfo(m),v}var gce={kernelName:C0,backendName:"webgl",kernelFunc:sLe};function vce(t,n,e,r){let o=new ec(e,"max",!1),i=r.runWebGLProgram(o,[t],"float32");o=new ec(e,"max",!0,!0,n);let s=r.runWebGLProgram(o,[t],"float32");return[i,s]}var wce={kernelName:S0,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:r}=t,{filterSize:o,strides:i,pad:s,includeBatchInIndex:a}=n,l=e;x.assert(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let c=[1,1];x.assert(O.eitherStridesOrDilationsAreOne(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);let u=O.computePool2DInfo(r.shape,o,i,c,s),[d,p]=vce(r,a,u,l);return[d,p]}};function yce(t,n,e,r){let o=x.sizeFromShape(n),s=x.sizeFromShape(t.shape)/o,a=De({inputs:{x:t},attrs:{shape:[s,o]},backend:r}),l=Vs(a,"float32","mean",r),c=De({inputs:{x:l},attrs:{shape:e},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}var xce={kernelName:Kd,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:r}=t,{keepDims:o,axis:i}=n,s=e,a=r.shape.length,l=x.parseAxisParam(i,r.shape),c=l,u=O.getAxesPermutation(c,a),d=u!=null,p=s.shouldExecuteOnCPU([r]),h=[],f=r;if(d){if(p){let k=s.texData.get(f.dataId).values,_=new Array(a);for(let N=0;N<_.length;N++)_[N]=r.shape[u[N]];let S=l2(k,r.shape,r.dtype,u,_);f=s.makeTensorInfo(_,r.dtype);let E=s.texData.get(f.dataId);E.values=S}else f=$f(r,u,s);h.push(f),c=O.getInnerMostAxes(c.length,a)}O.assertAxesAreInnerMostDims("sum",c,a);let[m,g]=O.computeOutAndReduceShapes(f.shape,c),v=m;o&&(v=O.expandShapeToKeepDim(m,l));let w=yce(f,g,v,s);for(let y of h)s.disposeIntermediateTensorInfo(y);return w}};function aLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=x.parseAxisParam(i,o.shape),c=l,u=O.getAxesPermutation(c,a),d=o;u!=null&&(d=tr({inputs:{x:o},backend:e,attrs:{perm:u}}),c=O.getInnerMostAxes(c.length,o.shape.length)),O.assertAxesAreInnerMostDims("min",c,a);let[p,h]=O.computeOutAndReduceShapes(d.shape,c),f=x.sizeFromShape(h),m=De({inputs:{x:d},backend:e,attrs:{shape:[-1,f]}}),g=Vs(m,m.dtype,"min",e),v;if(s){let w=O.expandShapeToKeepDim(p,l);v=De({inputs:{x:g},backend:e,attrs:{shape:w}})}else v=De({inputs:{x:g},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),u!=null&&e.disposeIntermediateTensorInfo(d),v}var kce={kernelName:"Min",backendName:"webgl",kernelFunc:aLe};var lLe=Tw+`
  return min(a, b);
`,cLe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+$s+`
  return result;
`,uLe=kn({opSnippet:lLe,packedOpSnippet:cLe,cpuKernelImpl:Cse}),_ce={kernelName:Qc,backendName:"webgl",kernelFunc:uLe};var vD=class{constructor(n,e,r){this.variableNames=["x"],this.outputShape=e.map((u,d)=>u[0]+n[d]+u[1]);let o=n.length,i=$t(o),s=e.map(u=>u[0]).join(","),a=e.map((u,d)=>u[0]+n[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),c=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}};var wD=class{constructor(n,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((f,m)=>f[0]+n[m]+f[1]);let o=n.length,i=$t(o),s=e.map(f=>f[0]).join(","),a=e.map((f,m)=>f[0]+n[m]).join(","),l=Ar("rc",o),c=Ar("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1,h="";if(o===1){let f=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${f}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${u}) {
          ${f}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{let f=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;h=`
        ${i} rc = outputLoc;
        ${f}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${u}) {
          ${f}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${f}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[o-1]} += 1;
          if(${u}) {
            ${f}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var dLe=({inputs:t,backend:n,attrs:e})=>{let{x:r}=t,{paddings:o,mode:i}=e,s=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wD(r.shape,o,i):new vD(r.shape,o,i);return n.runWebGLProgram(s,[r],r.dtype)},bce={kernelName:Zd,backendName:"webgl",kernelFunc:dLe};var pLe=`if (b == 0.0) return NAN;
  return mod(a, b);`,hLe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+$s+`
  return result;
`,fLe=kn({opSnippet:pLe,packedOpSnippet:hLe}),Cce={kernelName:"Mod",backendName:"webgl",kernelFunc:fLe};var yD=class{constructor(n,e,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[n,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${e-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${e-1}));
      }
    `}};var mLe=`
if (a == b) {
  return 1.0;
};
return a / b;`,gLe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,t$=kn({opSnippet:mLe,packedOpSnippet:gLe,checkOutOfBounds:!0}),Mce={kernelName:zc,backendName:"webgl",kernelFunc:t$};var Sce="return a - b;",n$=kn({opSnippet:Sce,packedOpSnippet:Sce,supportsComplex:!0,cpuKernelImpl:Gse}),Tce={kernelName:"Sub",backendName:"webgl",kernelFunc:n$};function r$(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{dim:i}=r,s=x.parseAxisParam([i],o.shape),a=e$({inputs:{x:o},backend:e,attrs:{reductionIndices:s,keepDims:!1}}),l=O.expandShapeToKeepDim(a.shape,s),c=De({inputs:{x:a},backend:e,attrs:{shape:l}}),u=n$({inputs:{a:o,b:c},backend:e}),d=Y9({inputs:{x:u},backend:e}),p=c2({inputs:{x:d},backend:e,attrs:{axis:s,keepDims:!1}}),h=De({inputs:{x:p},backend:e,attrs:{shape:l}}),f=t$({inputs:{a:d,b:h},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),f}var Ece={kernelName:up,backendName:"webgl",kernelFunc:r$};function vLe(t){let{inputs:n,backend:e,attrs:r}=t,{logits:o}=n,{numSamples:i,seed:s,normalized:a}=r,l=a?o:r$({inputs:{logits:o},backend:e,attrs:{dim:o.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new yD(c,u,i),p=[[s]],h=e.runWebGLProgram(d,[l],"int32",p);return a||e.disposeIntermediateTensorInfo(l),h}var Ice={kernelName:E0,backendName:"webgl",kernelFunc:vLe};var wLe=io+`
  return -x;
`,yLe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function xLe(t){let{inputs:n,backend:e}=t,{x:r}=n;if(e.shouldExecuteOnCPU([r])){let i=e.texData.get(r.dataId),[s,a]=Sse(i.values,r.shape,r.dtype);return e.makeTensorInfo(a,r.dtype,s)}let o;return Y().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new ps(r.shape,yLe):o=new Yo(r.shape,wLe),e.runWebGLProgram(o,[r],r.dtype)}var Dce={kernelName:"Neg",backendName:"webgl",kernelFunc:xLe};var kLe=Zo.nonMaxSuppressionV3Impl;function _Le(t){O.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r,c=e.readSync(o.dataId),u=e.readSync(i.dataId),{selectedIndices:d}=kLe(c,u,s,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}var Nce={kernelName:D0,backendName:"webgl",kernelFunc:_Le};var bLe=Zo.nonMaxSuppressionV4Impl;function CLe(t){O.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=e.readSync(o.dataId),d=e.readSync(i.dataId),{selectedIndices:p,validOutputs:h}=bLe(u,d,s,a,l,c);return[e.makeTensorInfo([p.length],"int32",new Int32Array(p)),e.makeTensorInfo([],"int32",new Int32Array([h]))]}var Ace={kernelName:N0,backendName:"webgl",kernelFunc:CLe};var MLe=Zo.nonMaxSuppressionV5Impl;function SLe(t){O.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:r}=t,{boxes:o,scores:i}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=e.readSync(o.dataId),d=e.readSync(i.dataId),p=s,h=a,f=l,m=c,{selectedIndices:g,selectedScores:v}=MLe(u,d,p,h,f,m);return[e.makeTensorInfo([g.length],"int32",new Int32Array(g)),e.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var Rce={kernelName:A0,backendName:"webgl",kernelFunc:SLe};var xD=class{constructor(n,e,r,o){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}};var TLe=t=>{let{inputs:n,backend:e,attrs:r}=t,{indices:o}=n,{dtype:i,depth:s,onValue:a,offValue:l}=r,c=x.sizeFromShape(o.shape),u=new xD(c,s,a,l),d=De({inputs:{x:o},backend:e,attrs:{shape:[c]}}),p=e.runWebGLProgram(u,[d],i);e.disposeIntermediateTensorInfo(d);let h=[...o.shape,s],f=De({inputs:{x:p},backend:e,attrs:{shape:h}});return e.disposeIntermediateTensorInfo(p),f},Oce={kernelName:Yd,backendName:"webgl",kernelFunc:TLe};function yb(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="complex64"){let o=Zp({inputs:{input:r},backend:e}),i=yb({inputs:{x:o},backend:e}),s=d2({inputs:{input:r},backend:e}),a=yb({inputs:{x:s},backend:e}),l=fs({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return Xp({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:e})}var Fce={kernelName:hp,backendName:"webgl",kernelFunc:yb};function Bce(t){let{inputs:n,backend:e}=t,{x:r}=n;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){let o=Zp({inputs:{input:r},backend:e}),i=Bce({inputs:{x:o},backend:e}),s=d2({inputs:{input:r},backend:e}),a=yb({inputs:{x:s},backend:e}),l=fs({inputs:{real:i,imag:a},backend:e});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return Xp({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:e})}var Pce={kernelName:Xd,backendName:"webgl",kernelFunc:Bce};function ELe(t){let{inputs:n,backend:e,attrs:r}=t,{axis:o}=r;if(n.length===1)return oD({inputs:{input:n[0]},backend:e,attrs:{dim:o}});let i=n[0].shape,s=n[0].dtype;n.forEach(u=>{x.assertShapesMatch(i,u.shape,"All tensors passed to stack must have matching shapes"),x.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=n.map(u=>{let d=oD({inputs:{input:u},backend:e,attrs:{dim:o}});return a.push(d),d}),c=X9({inputs:l,backend:e,attrs:{axis:o}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var Lce={kernelName:Qd,backendName:"webgl",kernelFunc:ELe};var kD=class{constructor(n,e,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((c,u)=>c[0]+n[u]+c[1]);let o=n.length,i=$t(o),s=e.map(c=>c[0]).join(","),a=e.map((c,u)=>c[0]+n[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${s});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}};var _D=class{constructor(n,e,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((m,g)=>m[0]+n[g]+m[1]);let o=n.length,i=$t(o),s=e.map(m=>m[0]).join(","),a=e.map((m,g)=>m[0]+n[g]).join(","),l=Ar("rc",o),c=Ar("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${u}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${u}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="";for(let m=0,g=o===1?2:4;m<g;m++)f+=`
        ${p[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${c.join()}), ${d});
        }
      `;f+=o===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${s});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}};var o$=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{paddings:i,constantValue:s}=r;if(x.sizeFromShape(o.shape)===0){let c=i.map((u,d)=>u[0]+o.shape[d]+u[1]);return Xp({backend:e,attrs:{shape:c,value:s,dtype:o.dtype}})}let a=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _D(o.shape,i,s):new kD(o.shape,i,s),l=[[s]];return e.runWebGLProgram(a,[o],o.dtype,l)},$ce={kernelName:Jd,backendName:"webgl",kernelFunc:o$};var ILe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,DLe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+$s+`
  return result;
`,NLe=kn({opSnippet:ILe,packedOpSnippet:DLe}),Vce={kernelName:"Pow",backendName:"webgl",kernelFunc:NLe};function ALe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{axis:i,keepDims:s}=r,a=o.shape.length,l=[],c=x.parseAxisParam(i,o.shape),u=c,d=O.getAxesPermutation(u,a),p=o;d!=null&&(p=tr({inputs:{x:o},backend:e,attrs:{perm:d}}),u=O.getInnerMostAxes(u.length,a),l.push(p)),O.assertAxesAreInnerMostDims("prod",u,a);let h;if(e.shouldExecuteOnCPU([p])){let f=e.texData.get(p.dataId).values,{outVals:m,outShape:g,outDtype:v}=Ese(p.shape,p.dtype,f,u);h=e.makeTensorInfo(g,v,m)}else{let[f,m]=O.computeOutAndReduceShapes(p.shape,u),g=x.sizeFromShape(m),v=De({inputs:{x:p},backend:e,attrs:{shape:[-1,g]}}),w=uf(o.dtype),y=Vs(v,w,"prod",e);h=De({inputs:{x:y},backend:e,attrs:{shape:f}}),l.push(v),l.push(y)}if(s){l.push(h);let f=O.expandShapeToKeepDim(h.shape,c);h=De({inputs:{x:h},backend:e,attrs:{shape:f}})}return l.forEach(f=>e.disposeIntermediateTensorInfo(f)),h}var jce={kernelName:tp,backendName:"webgl",kernelFunc:ALe};function RLe(t){let{inputs:n,backend:e,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:i,indices:s}=n,{outputRaggedRank:a}=r,l=o.map(v=>e.readSync(v.dataId)),c=o.map(v=>v.shape),u=e.readSync(i.dataId),d=e.readSync(s.dataId),[p,h,f]=Ise(l,c,u,i.shape,i.dtype,d,s.shape,a),m=p.map(v=>e.makeTensorInfo([v.length],"int32",v)),g=e.makeTensorInfo(f,i.dtype,h);return m.concat([g])}var zce={kernelName:R0,backendName:"webgl",kernelFunc:RLe};function OLe(t){let{inputs:n,backend:e}=t,{starts:r,limits:o,deltas:i}=n,s=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(i.dataId),[c,u]=Dse(s,r.shape,r.dtype,a,o.shape,l,i.shape),d=e.makeTensorInfo([c.length],"int32",c),p=e.makeTensorInfo([u.length],r.dtype,u);return[d,p]}var Hce={kernelName:O0,backendName:"webgl",kernelFunc:OLe};function FLe(t){let{inputs:n,backend:e,attrs:r}=t,{shape:o,values:i,defaultValue:s,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=r,c=e.readSync(o.dataId),u=e.readSync(i.dataId),d=e.readSync(s.dataId),p=a.map(g=>e.readSync(g.dataId)),h=a.map(g=>g.shape),[f,m]=Nse(c,o.shape,u,i.shape,i.dtype,d,s.shape,p,h,l);return e.makeTensorInfo(f,i.dtype,m)}var Uce={kernelName:F0,backendName:"webgl",kernelFunc:FLe};var i$=t=>{let{backend:n,attrs:e}=t,{start:r,stop:o,step:i,dtype:s}=e,a=Ase(r,o,i,s);return n.makeTensorInfo([a.length],s,a)},Gce={kernelName:B0,backendName:"webgl",kernelFunc:i$};var BLe="return 1.0 / x;",PLe=st({opSnippet:BLe}),Wce={kernelName:eu,backendName:"webgl",kernelFunc:PLe};var LLe=io+`
  return (x < 0.0) ? 0.0 : x;
`,$Le=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,VLe=st({opSnippet:LLe,packedOpSnippet:$Le}),qce={kernelName:tu,backendName:"webgl",kernelFunc:VLe};var jLe=io+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,zLe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,HLe=st({opSnippet:jLe,packedOpSnippet:zLe}),Kce={kernelName:nu,backendName:"webgl",kernelFunc:HLe};var bD=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var CD=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function ULe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r,[l,c]=a,u=Y().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new CD(o.shape,l,c,i,s):new bD(o.shape,l,c,i,s);return e.runWebGLProgram(u,[o],"float32")}var Zce={kernelName:op,backendName:"webgl",kernelFunc:ULe};var MD=class{constructor(n,e,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,o,i]=e,[,s,a]=n,l=[r&&s>1?o-1:o,r&&a>1?i-1:i],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],p=1/u,h=1/d,f=Math.ceil(p)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${f});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function GLe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r,a=new MD(i.shape,o.shape,s);return e.runWebGLProgram(a,[i],i.dtype)}var Xce={kernelName:$0,backendName:"webgl",kernelFunc:GLe};var SD=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p=o?"0.5":"0.0",h;i?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var TD=class{constructor(n,e,r,o,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,r,c];let u=[o&&e>1?a-1:a,o&&r>1?l-1:l],d=[o&&e>1?e-1:e,o&&r>1?r-1:r],p=o?"0.5":"0.0",h;i?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function WLe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o}=n,{alignCorners:i,halfPixelCenters:s,size:a}=r,[l,c]=a,u=Y().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new TD(o.shape,l,c,i,s):new SD(o.shape,l,c,i,s);return e.runWebGLProgram(u,[o],o.dtype)}var Yce={kernelName:rp,backendName:"webgl",kernelFunc:WLe};var ED=class{constructor(n,e,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,o,i]=e,[,s,a]=n,l=[r&&s>1?o-1:o,r&&a>1?i-1:i],c=[r&&s>1?s-1:s,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],p=1/u,h=1/d,f=Math.ceil(p)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${f});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function qLe(t){let{inputs:n,backend:e,attrs:r}=t,{images:o,dy:i}=n,{alignCorners:s}=r,a=new ED(i.shape,o.shape,s);return e.runWebGLProgram(a,[i],i.dtype)}var Qce={kernelName:L0,backendName:"webgl",kernelFunc:qLe};var ID=class{constructor(n,e){this.variableNames=["x"];let r=n.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=n,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${n[0]} - coord - 1));
        }
      `;return}let o=a=>e.indexOf(a)!==-1&&n[a]!==1?`${n[a]} - coords[${a}] - 1`:`coords[${a}]`,i=n.map((a,l)=>o(l)).join(","),s=$t(r);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}};var DD=class{constructor(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let r=n.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=n;let o=Ar("rc",r),i=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,s=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=$t(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${n[0]} - rc - 1),
            ${n[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),
                ${n[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${i}){
            result.g = ${c(o.slice())};
          }
          if(${s}) {
            result.b = ${u(o.slice())};
            if(${i}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(f){return p(f)}function c(f){return f[r-1]="("+f[r-1]+" + 1)",p(f)}function u(f){return f[r-2]="("+f[r-2]+" + 1)",p(f)}function d(f){return f[r-1]="("+f[r-1]+" + 1)",f[r-2]="("+f[r-2]+" + 1)",p(f)}function p(f){let m=n.map((w,y)=>h(y,f)),g=m.join(","),v=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${v}))`}function h(f,m){return e.indexOf(f)!==-1&&n[f]!==1?`${n[f]} - ${m[f]} - 1`:`${m[f]}`}}};function KLe(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{dims:i}=r,s=o.shape.length,a=x.parseAxisParam(i,o.shape);if(s===0)return Rr({inputs:{x:o},backend:e});let l=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new DD(o.shape,a):new ID(o.shape,a);return e.runWebGLProgram(l,[o],o.dtype)}var Jce={kernelName:ip,backendName:"webgl",kernelFunc:KLe};var ND=class{constructor(n,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let r=n[1],o=n[2];this.outputShape=n;let i="";typeof e=="number"?i=`float outputValue = ${e.toFixed(2)};`:i=`
        vec3 fill = vec3(${e.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var eue={kernelName:rg,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:r}=t,{radians:o,fillValue:i,center:s}=n,a=e,l=new ND(r.shape,i),[c,u]=O.getImageCenter(s,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};var ZLe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,XLe=st({opSnippet:ZLe}),tue={kernelName:ru,backendName:"webgl",kernelFunc:XLe};var YLe="return inversesqrt(x);",QLe=st({opSnippet:YLe,cpuKernelImpl:Rse}),nue={kernelName:ou,backendName:"webgl",kernelFunc:QLe};var jf=class{constructor(n,e,r,o,i,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;let c=$t(i.length),u=$t(s.length),d="";r===1?d="i":r===2&&(d="i, j");let p=`getIndices(${d})`,h="";o===1?h="i":o===2&&(h="i, coords[1]");let f=`getUpdates(${h})`,m="";l&&(m="coords[0], coords[1]");let g=`getDefaultValue(${m})`,v=e>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${n}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${e}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${v};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}};var AD=class{constructor(n,e,r,o,i,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;let c=$t(i.length),u=$t(s.length),d="";r===1?d="i":r===2&&(d="i, j");let p=`getIndices(${d})`,h="";o===1?h="i":o===2&&(h="i, coords[1]");let f=`getUpdates(${h})`,m="";l&&(m="coords[0], coords[1]");let g=`getDefaultValue(${m})`,v=e>1?"strides[j]":"strides",w=e>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${n}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${e}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${v};
              if (j + 1 < ${e}) {
                flattenedIndex += index.yw * ${w};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${f};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}};function JLe(t){let{inputs:n,backend:e,attrs:r}=t,{indices:o,updates:i}=n,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=O.calculateShapes(i,o,s),p=[d/c,c];if(d===0)return e.makeTensorInfo(s,o.dtype);let h=De({inputs:{x:o},backend:e,attrs:{shape:[l,a]}}),f=De({inputs:{x:i},backend:e,attrs:{shape:[l,c]}}),m=e.makeTensorInfo([],"float32",new Float32Array([0])),g;Y().getBool("WEBGL_PACK")?g=new AD(l,a,h.shape.length,f.shape.length,u,p):g=new jf(l,a,h.shape.length,f.shape.length,u,p);let v=e.runWebGLProgram(g,[f,h,m],f.dtype),w=De({inputs:{x:v},backend:e,attrs:{shape:s}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(v),e.disposeIntermediateTensorInfo(m),w}var rue={kernelName:V0,backendName:"webgl",kernelFunc:JLe};var RD=class{constructor(n,e,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[n,r];let i="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,a=Y().getNumber("WEBGL_VERSION")===2?i:s,l=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function e7e(t){let{inputs:n,backend:e,attrs:r}=t,{sortedSequence:o,values:i}=n,{side:s}=r,a=new RD(o.shape[0],o.shape[1],i.shape[1],s),l=[[o.shape[1]]];return e.runWebGLProgram(a,[o,i],"int32",l)}var oue={kernelName:z0,backendName:"webgl",kernelFunc:e7e};var OD=class{constructor(n,e,r){this.variableNames=["c","a","b"],this.outputShape=e;let o,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",o="resRC";else{let a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<e.length;u++)c.push(`${a[u]}`),u<n&&l.push(`${a[u]}`);o=l.join(),i=c.join()}let s=$t(r);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}};function t7e(t){let{inputs:n,backend:e}=t,{condition:r,t:o,e:i}=n,s=new OD(r.shape.length,o.shape,o.shape.length);return e.runWebGLProgram(s,[r,o,i],Lr(o.dtype,i.dtype))}var iue={kernelName:sp,backendName:"webgl",kernelFunc:t7e};var n7e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${O.SELU_SCALEALPHA};
  float scale = ${O.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,r7e=st({opSnippet:n7e}),sue={kernelName:iu,backendName:"webgl",kernelFunc:r7e};var o7e=el+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,i7e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,s7e=st({opSnippet:o7e,packedOpSnippet:i7e,cpuKernelImpl:Fse}),aue={kernelName:lu,backendName:"webgl",kernelFunc:s7e};var a7e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,l7e=st({opSnippet:a7e}),lue={kernelName:au,backendName:"webgl",kernelFunc:l7e};var c7e=el+`
  return sin(x);
`,u7e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${$s}
  return result;
`,d7e=st({opSnippet:c7e,packedOpSnippet:u7e}),cue={kernelName:"Sin",backendName:"webgl",kernelFunc:d7e};var p7e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,h7e=st({opSnippet:p7e}),uue={kernelName:su,backendName:"webgl",kernelFunc:h7e};var f7e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,m7e=st({opSnippet:f7e}),due={kernelName:cu,backendName:"webgl",kernelFunc:m7e};var g7e=t=>{let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{blockShape:i,paddings:s}=r;x.assert(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let a=i.reduce((v,w)=>v*w),l=[[0,0]];l.push(...s);for(let v=1+i.length;v<o.shape.length;++v)l.push([0,0]);let c=[],u=o$({inputs:{x:o},backend:e,attrs:{paddings:l,constantValue:0}}),d=O.getReshaped(u.shape,i,a,!1),p=O.getPermuted(d.length,i.length,!1),h=O.getReshapedPermuted(u.shape,i,a,!1),f=De({inputs:{x:u},backend:e,attrs:{shape:d}}),m=tr({inputs:{x:f},backend:e,attrs:{perm:p}}),g=De({inputs:{x:m},backend:e,attrs:{shape:h}});return c.push(u),c.push(f),c.push(m),c.forEach(v=>e.disposeIntermediateTensorInfo(v)),g},pue={kernelName:lp,backendName:"webgl",kernelFunc:g7e};function v7e(t){let{inputs:n,backend:e}=t,{indices:r,values:o,denseShape:i,defaultValue:s}=n;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=e.readSync(r.dataId),l=e.readSync(o.dataId),c=e.readSync(i.dataId),u=e.readSync(s.dataId)[0],[d,p,h,f,m]=Pse(a,r.shape,r.dtype,l,o.dtype,c,u);return[e.makeTensorInfo(p,r.dtype,d),e.makeTensorInfo([p[0]],o.dtype,h),e.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),e.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}var hue={kernelName:U0,backendName:"webgl",kernelFunc:v7e};function w7e(t){let{inputs:n,backend:e}=t,{inputIndices:r,inputShape:o,newShape:i}=n;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);let s=Array.from(e.readSync(o.dataId)),a=e.readSync(r.dataId),l=Array.from(e.readSync(i.dataId)),[c,u,d]=Lse(a,r.shape,r.dtype,s,l);return[e.makeTensorInfo(u,r.dtype,c),e.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}var fue={kernelName:G0,backendName:"webgl",kernelFunc:w7e};function y7e(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);let s=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(i.dataId),[c,u]=hI(s,r.shape,r.dtype,a,l,!0);return e.makeTensorInfo(u,r.dtype,c)}var mue={kernelName:W0,backendName:"webgl",kernelFunc:y7e};function x7e(t){let{inputs:n,backend:e}=t,{data:r,indices:o,segmentIds:i}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);let s=e.readSync(r.dataId),a=e.readSync(o.dataId),l=e.readSync(i.dataId),[c,u]=hI(s,r.shape,r.dtype,a,l);return e.makeTensorInfo(u,r.dtype,c)}var gue={kernelName:q0,backendName:"webgl",kernelFunc:x7e};function k7e(t){let{inputs:n,backend:e,attrs:r}=t,{sparseIndices:o,sparseValues:i,defaultValue:s}=n,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=O.calculateShapes(i,o,a),h=!1;if(i.dtype==="string"){let v=e.bufferSync(o),w=e.bufferSync(i),y=x.decodeString(e.readSync(s.dataId)[0]),k=Ose(v,w,a,p,u,c,l,d,y,h);return e.makeTensorInfo(a,k.dtype,k.values)}let f=new jf(c,l,o.shape.length,i.shape.length,d,[p,1],h),m=e.runWebGLProgram(f,[i,o,s],i.dtype),g=De({inputs:{x:m},backend:e,attrs:{shape:a}});return e.disposeIntermediateTensorInfo(m),g}var vue={kernelName:K0,backendName:"webgl",kernelFunc:k7e};function _7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{numOrSizeSplits:i,axis:s}=r,a=x.parseAxisParam(s,o.shape)[0],l=O.prepareSplitSize(o,i,a),c=o.shape.length,u=new Array(c).fill(0),d=o.shape.slice();return l.map(p=>{let h=[...d];h[a]=p;let f=tc({inputs:{x:o},backend:e,attrs:{begin:u,size:h}});return u[a]+=p,f})}var wue={kernelName:cp,backendName:"webgl",kernelFunc:_7e};var yue="return sqrt(x);",b7e=st({opSnippet:yue,packedOpSnippet:yue,cpuKernelImpl:$se}),xue={kernelName:uu,backendName:"webgl",kernelFunc:b7e};var C7e="return x * x;",M7e=st({opSnippet:C7e}),kue={kernelName:Z0,backendName:"webgl",kernelFunc:M7e};var _ue="return (a - b) * (a - b);",S7e=kn({opSnippet:_ue,packedOpSnippet:_ue}),bue={kernelName:du,backendName:"webgl",kernelFunc:S7e};function T7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");let i=e.readSync(o.dataId),s=O.fromUint8ToStringArray(i),a=Vse(s,"string",r);return e.makeTensorInfo(o.shape,"string",a)}var Cue={kernelName:tf,backendName:"webgl",kernelFunc:T7e};function E7e({inputs:t,attrs:n,backend:e}){let{x:r}=t,o=io+`
    return x > 0.0 ? 1.0 : float(${n.alpha});
  `,i=new Yo(r.shape,o);return e.runWebGLProgram(i,[r],r.dtype)}var Mue={kernelName:hu,backendName:"webgl",kernelFunc:E7e};var FD=class{constructor(n,e,r){this.variableNames=["x"],this.outputShape=r;let o=r.length,i=$t(r.length),s=$t(r.length),a="";if(o===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${n});
      ${i} strides = ${i}(${e});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}};function I7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{begin:i,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:w,end:y,strides:k}=go.sliceInfo(o.shape,i,s,a,l,c,u,d,p),_;if(m)_=De({inputs:{x:o},backend:e,attrs:{shape:f}});else if(g||v){x.assert(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);let E=go.computeOutShape(w,y,k),N=tc({inputs:{x:o},backend:e,attrs:{begin:w,size:E}});_=De({inputs:{x:N},backend:e,attrs:{shape:f}}),e.disposeIntermediateTensorInfo(N)}else if(e.shouldExecuteOnCPU([o])){let N=e.readSync(o.dataId),B=ot(o.shape,o.dtype,N),D=jse(h,B,k,w);_=e.makeTensorInfo(f,o.dtype,D.values)}else{let N=new FD(w,k,h);_=e.runWebGLProgram(N,[o],o.dtype)}let S=De({inputs:{x:_},backend:e,attrs:{shape:f}});return e.disposeIntermediateTensorInfo(_),S}var Sue={kernelName:X0,backendName:"webgl",kernelFunc:I7e};function D7e(t){let{inputs:n,backend:e,attrs:r}=t,{separator:o,nGramWidths:i,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=n,p=e.readSync(u.dataId),h=e.readSync(d.dataId),[f,m]=zse(p,h,o,i,s,a,l,c);return[e.makeTensorInfo([f.length],"string",f),e.makeTensorInfo(d.shape,"int32",m)]}var Tue={kernelName:Y0,backendName:"webgl",kernelFunc:D7e};function N7e(t){let{inputs:n,backend:e,attrs:r}=t,{skipEmpty:o}=r,{input:i,delimiter:s}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=e.readSync(i.dataId),l=e.readSync(s.dataId)[0],[c,u,d]=Hse(a,l,o),p=u.length;return[e.makeTensorInfo([p,2],"int32",c),e.makeTensorInfo([p],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}var Eue={kernelName:Q0,backendName:"webgl",kernelFunc:N7e};function A7e(t){let{inputs:n,backend:e,attrs:r}=t,{numBuckets:o}=r,{input:i}=n;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");let s=e.readSync(i.dataId),a=Use(s,o);return e.makeTensorInfo(i.shape,"int32",a)}var Iue={kernelName:J0,backendName:"webgl",kernelFunc:A7e};var R7e="return tan(x);",O7e=st({opSnippet:R7e}),Due={kernelName:"Tan",backendName:"webgl",kernelFunc:O7e};var F7e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,B7e=st({opSnippet:F7e}),Nue={kernelName:pu,backendName:"webgl",kernelFunc:B7e};function P7e(t){let{inputs:n,backend:e,attrs:r}=t,{tensor:o,indices:i,updates:s}=n,{}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=O.calculateShapes(s,i,o.shape),p=[d/c,c];if(d===0)return e.makeTensorInfo(o.shape,i.dtype);let h=De({inputs:{x:i},backend:e,attrs:{shape:[l,a]}}),f=De({inputs:{x:s},backend:e,attrs:{shape:[l,c]}}),m=De({inputs:{x:o},backend:e,attrs:{shape:p}}),g=new jf(l,a,h.shape.length,f.shape.length,u,p,!1,!0),v=e.runWebGLProgram(g,[f,h,m],m.dtype),w=De({inputs:{x:v},backend:e,attrs:{shape:o.shape}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(v),w}var Aue={kernelName:j0,backendName:"webgl",kernelFunc:P7e};var BD=class{constructor(n,e){this.variableNames=["A"];let r=new Array(n.length);for(let s=0;s<r.length;s++)r[s]=n[s]*e[s];this.outputShape=r,this.rank=r.length;let o=$t(this.rank),i=L7e(n);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}};function L7e(t){let n=t.length;if(n>5)throw Error(`Tile for rank ${n} is not yet supported`);if(n===1)return`imod(resRC, ${t[0]})`;let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<t.length;o++)r.push(`imod(${e[o]}, ${t[o]})`);return r.join()}function s$(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{reps:i}=r;if(o.dtype==="string"||o.shape.length>5){let l=e.readSync(o.dataId),c=o.dtype==="string"?l.map(p=>x.decodeString(p)):l,u=ot(o.shape,o.dtype,c),d=Wse(u,i);return e.makeTensorInfo(d.shape,d.dtype,d.values)}let s=new BD(o.shape,i);return e.runWebGLProgram(s,[o],o.dtype)}var Rue={kernelName:Tl,backendName:"webgl",kernelFunc:s$};var PD=class{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=n,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},LD=class{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=n,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function p2(t,n){n!==null&&t.disposeIntermediateTensorInfo(n)}function Oue(t){let n=1;for(;n<t;)n*=2;return n}function $7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o}=n,{k:i,sorted:s}=r,a=Y().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Y().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=o.shape,u=c[c.length-1];if(e.shouldExecuteOnCPU([o])||u<a||i>l){let D=e.readSync(o.dataId),[P,M]=qse(D,c,o.dtype,i,s);return[e.makeTensorInfo(P.shape,P.dtype,P.values),e.makeTensorInfo(M.shape,M.dtype,M.values)]}if(i===0)return c[c.length-1]=0,[e.makeTensorInfo(c,o.dtype,[]),e.makeTensorInfo(c,"int32",[])];if(u===1)return[o,Xp({attrs:{shape:c,dtype:"int32",value:0},backend:e})];let d=e.texData.get(o.dataId),p=d!==null&&d.isPacked,h=p?e.unpackTensor(o):o,m=x.sizeFromShape(c)/u,g=De({inputs:{x:h},attrs:{shape:[m,u]},backend:e});p&&p2(e,h);let v=Oue(i),w=Oue(u),y=null,k=()=>y===null?[g,g]:[g,y],_=(D,P,M)=>{let W=k(),ie=new PD(M),X=[[u],[y===null?1:0],[Number.NEGATIVE_INFINITY],[D],[P]],G=y;y=e.runWebGLProgram(ie,W,"int32",X),p2(e,G)};for(let D=1;D<v;D*=2){let P=D*2;for(let M=D;M>=1;M/=2)_(P,M,[m,w])}for(let D=w;D>v;D/=2){let P=k(),M=new LD([m,D/2]),ie=[[u],[y===null?1:0],[v]],Z=y;y=e.runWebGLProgram(M,P,"int32",ie),p2(e,Z);let X=v/2,G=X*2;for(let H=X;H>=1;H/=2)_(G,H,y.shape)}let S=y;y=tc({inputs:{x:y},backend:e,attrs:{begin:0,size:[m,i]}}),p2(e,S);let E=J9({inputs:{x:g,indices:y},backend:e,attrs:{axis:1,batchDims:1}});p2(e,g);let N=c.slice(0,-1);N.push(i),S=y,y=De({inputs:{x:y},attrs:{shape:N},backend:e}),p2(e,S);let B=E;return E=De({inputs:{x:E},attrs:{shape:N},backend:e}),p2(e,B),[E,y]}var Fue={kernelName:eg,backendName:"webgl",kernelFunc:$7e};var $D=class{constructor(n,e,r,o,i,s){this.variableNames=["Image","Transforms"],this.outputShape=s;let a=r==="nearest"?1:2,l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${n} && 0 <= coordX && coordX < ${e}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${e}));
                float mapY = mapCoord(inY, float(${n}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function V7e(t){let{inputs:n,backend:e,attrs:r}=t,{image:o,transforms:i}=n,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,p,h]=o.shape,[f,m]=c??[d,p],g=[u,f,m,h],v=new $D(d,p,s,a,l,g);return e.runWebGLProgram(v,[o,i],"float32")}var Bue={kernelName:tg,backendName:"webgl",kernelFunc:V7e};function j7e(t){let{inputs:n,attrs:e,backend:r}=t,{axis:o}=e,{x:i}=n;Ql(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:c}=Kse(s,o,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}var Pue={kernelName:ng,backendName:"webgl",kernelFunc:j7e};function z7e(t){let{inputs:n,backend:e,attrs:r}=t,{value:o}=n,{axis:i}=r;i<0&&(i+=o.shape.length);let s=o,a=s.shape.length,l=o.shape[i],c=new Array(a-1),u=0;for(let m=0;m<a;m++)m!==i&&(c[u++]=s.shape[m]);let d=[],p=new Array(a).fill(0),h=s.shape.slice();h[i]=1;let f=new Array(l);for(let m=0;m<f.length;m++){p[i]=m;let g=tc({inputs:{x:s},backend:e,attrs:{begin:p,size:h}}),v=De({inputs:{x:g},backend:e,attrs:{shape:c}});f[m]=v,d.push(g)}return d.forEach(m=>e.disposeIntermediateTensorInfo(m)),f}var Lue={kernelName:dp,backendName:"webgl",kernelFunc:z7e};var VD=class{constructor(n,e){this.variableNames=["x","segmentIds"];let r=n.windowSize,o=n.batchSize,i=n.inSize,s=n.numSegments,a=s*Math.ceil(i/r);this.outputShape=[o,a];let l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `,h="";i%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${f}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function H7e(t){let{inputs:n,backend:e,attrs:r}=t,{x:o,segmentIds:i}=n,{numSegments:s}=r,a=o.shape.length,l=[],c=0,u=O.getAxesPermutation([c],a),d=o;u!=null&&(d=tr({inputs:{x:o},backend:e,attrs:{perm:u}}),l.push(d),c=O.getInnerMostAxes(1,a)[0]);let p=O.segment_util.computeOutShape(d.shape,c,s),h=x.sizeFromShape([d.shape[c]]),f=De({inputs:{x:d},backend:e,attrs:{shape:[-1,h]}});l.push(f);let m=uf(o.dtype),g=(k,_,S,E,N)=>{let B=k.shape[0],D=k.shape[1],P=O.segment_util.segOpComputeOptimalWindowSize(D,N),M={windowSize:P,inSize:D,batchSize:B,numSegments:N},W=new VD(M,_),ie=e.compileAndRun(W,[k,S],E);if(l.push(ie),ie.shape[1]===N)return ie;let Z=i$({backend:e,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),X=s$({inputs:{x:Z},backend:e,attrs:{reps:[D/P]}});return l.push(Z),l.push(X),g(ie,_,X,E,N)},v=g(f,"unsortedSegmentSum",i,m,s),w=De({inputs:{x:v},backend:e,attrs:{shape:p}}),y=w;if(u!=null){l.push(w);let k=O.getUndoAxesPermutation(u);y=tr({inputs:{x:y},backend:e,attrs:{perm:k}})}return l.forEach(k=>e.disposeIntermediateTensorInfo(k)),y}var $ue={kernelName:pp,backendName:"webgl",kernelFunc:H7e};var U7e=[kae,bae,Cae,Mae,Tae,Eae,Iae,Dae,Rae,Oae,Fae,Bae,Pae,Lae,$ae,Vae,jae,zae,Hae,Uae,Gae,qae,Kae,Zae,Xae,ele,nle,rle,dae,ile,ale,lle,cle,ule,dle,ple,hle,fle,mle,gle,yle,xle,kle,_le,ble,Cle,Mle,Sle,Tle,Ele,Ile,Dle,Nle,Ale,Rle,Ole,Ble,Ple,Lle,$le,jle,zle,Hle,Ule,Gle,Wle,qle,Kle,Zle,uae,Xle,sle,Yle,Qle,Jle,pae,ece,tce,nce,rce,oce,ice,sce,ace,lce,cce,dce,pce,hce,fce,mce,gce,wce,xce,kce,_ce,bce,Cce,Ice,mae,Dce,Nce,Ace,Rce,Yae,Oce,Pce,Lce,$ce,Vce,hae,jce,zce,Hce,Uce,Gce,Qae,Mce,Wce,qce,Kce,vae,Zce,Xce,Yce,Qce,Jce,eue,tue,nue,rue,oue,iue,sue,aue,lue,cue,uue,Wae,Ece,due,pue,hue,fue,mue,gue,vue,wue,xue,kue,bue,Cue,Mue,Sue,Tue,Eue,Iue,Tce,yae,Due,Nue,Aue,Rue,Fue,Bue,xae,Pue,Lue,$ue,Fce];for(let t of U7e)fv(t);var Vue="4.22.0";var G7e={"tfjs-core":FS,"tfjs-backend-cpu":LE,"tfjs-backend-webgl":yI,"tfjs-data":vE,"tfjs-layers":Df,"tfjs-converter":tE,tfjs:Vue};var Hue=O2(zue());var c$=t=>z(null,null,function*(){let n=yield t.async("blob");return new File([n],t.name,{type:n.type||"application/octet-stream"})}),Uue=t=>z(null,null,function*(){let n=yield Hue.default.loadAsync(t),e=/(^|\/)(__MACOSX|\.DS_Store|\.?_\w+)/,r=n.file(/\.json$/).filter(({name:s})=>!e.test(s)),o=n.file(/\.bin$/).filter(({name:s})=>!e.test(s)),i=n.file(/\.js$/).filter(({name:s})=>!e.test(s));if(r.length!==1||o.length<1||i.length!==1)throw new Error("Invalid zip file");return Promise.all([c$(r[0]),Promise.all(o.map(s=>c$(s))),c$(i[0])])});var nc=class t{constructor(n){this.config=n;let e=localStorage.getItem("models")?.split(",");e&&e.length>0&&Promise.all(e.map(r=>qv(`localstorage://${r}_model`))).then(r=>{this._models=e.map((o,i)=>{let s=r[i],a=localStorage.getItem(`${o}_script`),l=mO(a);return{id:o,name:s.name,model:s,script:l}}),this._modelsSubject.next(this._models)}),this._modelsSubject=new nr(this._models)}static _instance;static get instance(){return t._instance}_models;_modelsSubject;get models(){return this._models}get models$(){return this._modelsSubject.asObservable()}static init(n){return t.instance||(t._instance=new t(n)),t.instance}_load(n){return z(this,null,function*(){let e=[];for(let r of n){let[o,i,s]=yield Uue(r),a=yield qv(qr.browserFiles([o,...i])),l=yield s.text(),c=mO(l),u=a.name.toLowerCase().replace(/\s+/g,"_"),d=a.name;e.push({id:u,name:d,model:a,script:c}),a.save(`localstorage://${u}_model`),localStorage.setItem(`${u}_script`,l)}this._models=e,this._modelsSubject.next(this._models),localStorage.setItem("models",e.map(({id:r})=>r).join(","))})}loadFromFile(){Es.promise(zn.openFile(".zip",!0).then(n=>this._load(n)),{loading:this.config.translate.instant("MODELS_LOADING"),success:()=>this.config.translate.instant("MODELS_LOADED"),error:n=>(console.error(n),this.config.translate.instant("MODELS_NOT_LOADED"))})}deleteFile(){for(let n of this._models??[])qr.removeModel(`localstorage://${n.id}_model`),localStorage.removeItem(`${n.id}_script`);localStorage.removeItem("models"),this._models=void 0,this._modelsSubject.next(this._models),Es.success(this.config.translate.instant("MODELS_DELETED"))}static \u0275fac=function(e){return new(e||t)(rt(zn))};static \u0275prov=_e({token:t,factory:t.\u0275fac})};var q7e=40,Or=class t{static _instance;static get instance(){return t._instance}static UseState=n=>class extends n{constructor(...e){super(...e),this.fromObject(t.instance.state),t.instance.state$.subscribe(r=>this.fromObject(r)),t.instance._requestStateSubject.pipe(uh(500)).subscribe(()=>t.instance.setState(this.toObject(),!1))}};static SetState=(n,e,r)=>{let{value:o,set:i}=r;if(o)r.value=function(...s){let a=o.apply(this,s);return t.instance._requestStateSubject.next(),a};else if(i)r.set=function(s){i.apply(this,[s]),t.instance._requestStateSubject.next()};else throw new Error("The setState decorator can only be used on methods or properties that change the state.")};_states;_index;get state(){return this._states[this._index]}_requestStateSubject;_stateSubject;get state$(){return this._stateSubject.asObservable()}get canUndo(){return this._index>0}get canRedo(){return this._index<this._states.length-1}constructor(){let n=sessionStorage.getItem("state");n?this._states=[JSON.parse(n)]:this._states=[{}],this._index=0,this._requestStateSubject=new Qu(1),this._stateSubject=new nr(this._states[this._index])}static init(){return t.instance||(t._instance=new t),t.instance}setState(n,e=!0){this._states=this._states.slice(0,this._index+1),this._states.push(n),this._index++,this._states.length>q7e&&(this._states.shift(),this._index--),e&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state))}replaceState(n,e=!0){this._states[this._index]=n,e&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state))}undo(n=!0){this.canUndo&&(this._index--,n&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state)))}redo(n=!0){this.canRedo&&(this._index++,n&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state)))}reset(n=!0){this._states=[{}],this._index=0,n&&this._stateSubject.next(this.state),sessionStorage.setItem("state",JSON.stringify(this.state))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})};var Z7e=["frame"],X7e=["*"],Y7e=(t,n)=>({width:t,height:n}),Q7e=(t,n,e,r,o)=>({minWidth:t,maxWidth:n,minHeight:e,maxHeight:r,transform:o}),J7e=t=>({"grid-view":t}),Bw=class t{config=R(zn);frame=_s.required("frame");showGrid=this.config.grid;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["app-canvas"]],viewQuery:function(e,r){e&1&&es(r.frame,Z7e,5),e&2&&bo()},ngContentSelectors:X7e,decls:5,vars:14,consts:[["frame",""],[1,"frame","fixed","left-0","top-0","h-screen","w-screen","cursor-default","overflow-scroll"],[1,"m-auto","flex","items-center","justify-center","overflow-visible",3,"ngStyle"],[1,"relative","overflow-hidden","transition-transform",3,"ngStyle","ngClass"]],template:function(e,r){e&1&&(pn(),ne(0,"div",1,0)(2,"div",2)(3,"div",3),Nt(4),re()()()),e&2&&(ee(2),Ke("ngStyle",vd(3,Y7e,r.config.size()*r.config.zoom()+"px",r.config.size()*r.config.zoom()+"px")),ee(),Ke("ngStyle",y6(6,Q7e,r.config.size()+"px",r.config.size()+"px",r.config.size()+"px",r.config.size()+"px","scale("+r.config.zoom()+")"))("ngClass",gl(12,J7e,r.showGrid())))},dependencies:[xr,Nm,bx],styles:[".frame[_ngcontent-%COMP%]{background-color:hsl(var(--background))}  .high-contrast .frame{background-color:hsl(var(--border))!important}.grid-view[_ngcontent-%COMP%]{background-image:radial-gradient(circle,hsl(var(--border)) 1.5px,transparent 1.5px);background-size:20px 20px}  .high-contrast .grid-view{background-image:radial-gradient(circle,hsl(var(--muted-foreground)) 1.5px,transparent 1.5px)}"]})};var u$;try{u$=typeof Intl<"u"&&Intl.v8BreakIterator}catch{u$=!1}var Qo=(()=>{class t{_platformId=R(zo);isBrowser=this._platformId?Cs(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||u$)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var d$;function e9e(){if(d$==null){let t=typeof document<"u"?document.head:null;d$=!!(t&&(t.createShadowRoot||t.attachShadow))}return d$}function Gue(t){if(e9e()){let n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function jD(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function ca(t){return t.composedPath?t.composedPath()[0]:t.target}function p$(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var zD=new WeakMap,h2=(()=>{class t{_appRef;_injector=R(Ct);_environmentInjector=R(ir);load(e){let r=this._appRef=this._appRef||this._injector.get(Xs),o=zD.get(r);o||(o={loaders:new Set,refs:[]},zD.set(r,o),r.onDestroy(()=>{zD.get(r)?.refs.forEach(i=>i.destroy()),zD.delete(r)})),o.loaders.has(e)||(o.loaders.add(e),o.refs.push(MM(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wo(t){return t==null?"":typeof t=="string"?t:`${t}px`}function h$(t){return Array.isArray(t)?t:[t]}function HD(t,n=0){return Wue(t)?Number(t):arguments.length===2?n:0}function Wue(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function f2(t){return t instanceof Ft?t.nativeElement:t}var t9e=new Ee("cdk-dir-doc",{providedIn:"root",factory:n9e});function n9e(){return R(Gt)}var r9e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function que(t){let n=t?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?r9e.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var js=(()=>{class t{get value(){return this.valueSignal()}valueSignal=Ye("ltr");change=new cn;constructor(){let e=R(t9e,{optional:!0});if(e){let r=e.body?e.body.dir:null,o=e.documentElement?e.documentElement.dir:null;this.valueSignal.set(que(r||o||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var m2;function Kue(){if(m2==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return m2=!1,m2;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)m2=!0;else{let t=Element.prototype.scrollTo;t?m2=!/\{\s*\[native code\]\s*\}/.test(t.toString()):m2=!1}}return m2}var xb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({})}return t})();var o9e=20,Pw=(()=>{class t{_ngZone=R(Zt);_platform=R(Qo);_renderer=R(co).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new nt;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=o9e){return this._platform.isBrowser?new tn(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let o=e>0?this._scrolled.pipe(i4(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):ct()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){let o=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(Cn(i=>!i||o.indexOf(i)>-1))}getAncestorScrollContainers(e){let r=[];return this.scrollContainers.forEach((o,i)=>{this._scrollableContainsElement(i,e)&&r.push(i)}),r}_scrollableContainsElement(e,r){let o=f2(r),i=e.getElementRef().nativeElement;do if(o==i)return!0;while(o=o.parentElement);return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var i9e=20,Lw=(()=>{class t{_platform=R(Qo);_listeners;_viewportSize;_change=new nt;_document=R(Gt);constructor(){let e=R(Zt),r=R(co).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let o=i=>this._change.next(i);this._listeners=[r.listen("window","resize",o),r.listen("window","orientationchange",o)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,r=this._getWindow(),o=e.documentElement,i=o.getBoundingClientRect(),s=-i.top||e.body.scrollTop||r.scrollY||o.scrollTop||0,a=-i.left||e.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:s,left:a}}change(e=i9e){return e>0?this._change.pipe(i4(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var f$=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({})}return t})(),m$=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({imports:[xb,f$,xb,f$]})}return t})();var kb=class{_attachedHost;attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},zf=class extends kb{component;viewContainerRef;injector;projectableNodes;constructor(n,e,r,o){super(),this.component=n,this.viewContainerRef=e,this.injector=r,this.projectableNodes=o}},Yp=class extends kb{templateRef;viewContainerRef;context;injector;constructor(n,e,r,o){super(),this.templateRef=n,this.viewContainerRef=e,this.context=r,this.injector=o}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}},g$=class extends kb{element;constructor(n){super(),this.element=n instanceof Ft?n.nativeElement:n}},$w=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof zf)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof Yp)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof g$)return this._attachedPortal=n,this.attachDomPortal(n)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},UD=class extends $w{outletElement;_appRef;_defaultInjector;constructor(n,e,r){super(),this.outletElement=n,this._appRef=e,this._defaultInjector=r}attachComponentPortal(n){let e;if(n.viewContainerRef){let r=n.injector||n.viewContainerRef.injector,o=r.get(ml,null,{optional:!0})||void 0;e=n.viewContainerRef.createComponent(n.component,{index:n.viewContainerRef.length,injector:r,ngModuleRef:o,projectableNodes:n.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let r=this._appRef,o=n.injector||this._defaultInjector||Ct.NULL,i=o.get(ir,r.injector);e=MM(n.component,{elementInjector:o,environmentInjector:i,projectableNodes:n.projectableNodes||void 0}),r.attachView(e.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=n,e}attachTemplatePortal(n){let e=n.viewContainerRef,r=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return r.rootNodes.forEach(o=>this.outletElement.appendChild(o)),r.detectChanges(),this.setDisposeFn(()=>{let o=e.indexOf(r);o!==-1&&e.remove(o)}),this._attachedPortal=n,r}attachDomPortal=n=>{let e=n.element;e.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");e.parentNode.insertBefore(r,e),this.outletElement.appendChild(e),this._attachedPortal=n,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(e,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}};var v$=(()=>{class t extends $w{_moduleRef=R(ml,{optional:!0});_document=R(Gt);_viewContainerRef=R(_o);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new cn;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let r=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,o=r.createComponent(e.component,{index:r.length,injector:e.injector||r.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=e=>{let r=e.element;r.parentNode;let o=this._document.createComment("dom-portal");e.setAttachedHost(this),r.parentNode.insertBefore(o,r),this._getRootNode().appendChild(r),this._attachedPortal=e,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(r,o)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[wr]})}return t})();var w$=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({})}return t})();var y$={},Hf=(()=>{class t{_appId=R(_h);getId(e){return this._appId!=="ng"&&(e+=this._appId),y$.hasOwnProperty(e)||(y$[e]=0),`${e}${y$[e]++}`}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function so(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var Zue=Kue();function YD(t){return new GD(t.get(Lw),t.get(Gt))}var GD=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(n,e){this._viewportRuler=n,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=wo(-this._previousScrollPosition.left),n.style.top=wo(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let n=this._document.documentElement,e=this._document.body,r=n.style,o=e.style,i=r.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),Zue&&(r.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Zue&&(r.scrollBehavior=i,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.documentElement,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}};function nde(t,n){return new WD(t.get(Pw),t.get(Zt),t.get(Lw),n)}var WD=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(n,e,r,o){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=r,this._config=o}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(this._scrollSubscription)return;let n=this._scrollDispatcher.scrolled(0).pipe(Cn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var _b=class{enable(){}disable(){}attach(){}};function x$(t,n){return n.some(e=>{let r=t.bottom<e.top,o=t.top>e.bottom,i=t.right<e.left,s=t.left>e.right;return r||o||i||s})}function Xue(t,n){return n.some(e=>{let r=t.top<e.top,o=t.bottom>e.bottom,i=t.left<e.left,s=t.right>e.right;return r||o||i||s})}function jw(t,n){return new qD(t.get(Pw),t.get(Lw),t.get(Zt),n)}var qD=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(n,e,r,o){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=r,this._config=o}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(!this._scrollSubscription){let n=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(n).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:o}=this._viewportRuler.getViewportSize();x$(e,[{width:r,height:o,bottom:o,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Cb=(()=>{class t{_injector=R(Ct);constructor(){}noop=()=>new _b;close=e=>nde(this._injector,e);block=()=>YD(this._injector);reposition=e=>jw(this._injector,e);static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bu=class{positionStrategy;scrollStrategy=new _b;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(n){if(n){let e=Object.keys(n);for(let r of e)n[r]!==void 0&&(this[r]=n[r])}}};var KD=class{connectionPair;scrollableViewProperties;constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}};var rde=(()=>{class t{_attachedOverlays=[];_document=R(Gt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ode=(()=>{class t extends rde{_ngZone=R(Zt);_renderer=R(co).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[o]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),QD=(()=>{class t extends rde{_platform=R(Qo);_ngZone=R(Zt);_renderer=R(co).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let r=this._document.body,o={capture:!0},i=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[i.listen(r,"pointerdown",this._pointerDownListener,o),i.listen(r,"click",this._clickListener,o),i.listen(r,"auxclick",this._clickListener,o),i.listen(r,"contextmenu",this._clickListener,o)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=ca(e)};_clickListener=e=>{let r=ca(e),o=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let i=this._attachedOverlays.slice();for(let s=i.length-1;s>-1;s--){let a=i[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(Yue(a.overlayElement,r)||Yue(a.overlayElement,o))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(e)):l.next(e)}};static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Yue(t,n){let e=typeof ShadowRoot<"u"&&ShadowRoot,r=n;for(;r;){if(r===t)return!0;r=e&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var ide=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,o){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),JD=(()=>{class t{_platform=R(Qo);_containerElement;_document=R(Gt);_styleLoader=R(h2);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||p$()){let o=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let i=0;i<o.length;i++)o[i].remove()}let r=this._document.createElement("div");r.classList.add(e),p$()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(ide)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),k$=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(n,e,r,o){this._renderer=e,this._ngZone=r,this.element=n.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",o)}detach(){this._ngZone.runOutsideAngular(()=>{let n=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(n,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),n.style.pointerEvents="none",n.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Vw=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new nt;_attachments=new nt;_detachments=new nt;_positionStrategy;_scrollStrategy;_locationChanges=Nn.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new nt;_outsidePointerEvents=new nt;_afterNextRenderRef;constructor(n,e,r,o,i,s,a,l,c,u=!1,d,p){this._portalOutlet=n,this._host=e,this._pane=r,this._config=o,this._ngZone=i,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._renderer=p,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Si(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let n=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){let n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,n&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config=ae(ae({},this._config),n),this._updateElementSize()}setDirection(n){this._config=lt(ae({},this._config),{direction:n}),this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){let n=this._config.direction;return n?typeof n=="string"?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let n=this._pane.style;n.width=wo(this._config.width),n.height=wo(this._config.height),n.minWidth=wo(this._config.minWidth),n.minHeight=wo(this._config.minHeight),n.maxWidth=wo(this._config.maxWidth),n.maxHeight=wo(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){let n="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new k$(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(n))}):this._backdropRef.element.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(n,e,r){let o=h$(e||[]).filter(i=>!!i);o.length&&(r?n.classList.add(...o):n.classList.remove(...o))}_detachContentWhenEmpty(){let n=!1;try{this._detachContentAfterRenderRef=Si(()=>{n=!0,this._detachContent()},{injector:this._injector})}catch(e){if(n)throw e;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let n=this._scrollStrategy;n?.disable(),n?.detach?.()}},Que="cdk-overlay-connected-position-bounding-box",s9e=/([A-Za-z%]+)$/;function zw(t,n){return new ZD(n,t.get(Lw),t.get(Gt),t.get(Qo),t.get(JD))}var ZD=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new nt;_resizeSubscription=Nn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(n,e,r,o,i){this._viewportRuler=e,this._document=r,this._platform=o,this._overlayContainer=i,this.setOrigin(n)}attach(n){this._overlayRef&&this._overlayRef,this._validatePositions(),n.hostElement.classList.add(Que),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._originRect,e=this._overlayRect,r=this._viewportRect,o=this._containerRect,i=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(n,o,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,r,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,r)){i.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(i.length){let a=null,l=-1;for(let c of i){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&g2(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Que),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,n.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,r){let o;if(r.originX=="center")o=n.left+n.width/2;else{let s=this._isRtl()?n.right:n.left,a=this._isRtl()?n.left:n.right;o=r.originX=="start"?s:a}e.left<0&&(o-=e.left);let i;return r.originY=="center"?i=n.top+n.height/2:i=r.originY=="top"?n.top:n.bottom,e.top<0&&(i-=e.top),{x:o,y:i}}_getOverlayPoint(n,e,r){let o;r.overlayX=="center"?o=-e.width/2:r.overlayX==="start"?o=this._isRtl()?-e.width:0:o=this._isRtl()?0:-e.width;let i;return r.overlayY=="center"?i=-e.height/2:i=r.overlayY=="top"?0:-e.height,{x:n.x+o,y:n.y+i}}_getOverlayFit(n,e,r,o){let i=ede(e),{x:s,y:a}=n,l=this._getOffset(o,"x"),c=this._getOffset(o,"y");l&&(s+=l),c&&(a+=c);let u=0-s,d=s+i.width-r.width,p=0-a,h=a+i.height-r.height,f=this._subtractOverflows(i.width,u,d),m=this._subtractOverflows(i.height,p,h),g=f*m;return{visibleArea:g,isCompletelyWithinViewport:i.width*i.height===g,fitsInViewportVertically:m===i.height,fitsInViewportHorizontally:f==i.width}}_canFitWithFlexibleDimensions(n,e,r){if(this._hasFlexibleDimensions){let o=r.bottom-e.y,i=r.right-e.x,s=Jue(this._overlayRef.getConfig().minHeight),a=Jue(this._overlayRef.getConfig().minWidth),l=n.fitsInViewportVertically||s!=null&&s<=o,c=n.fitsInViewportHorizontally||a!=null&&a<=i;return l&&c}return!1}_pushOverlayOnScreen(n,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};let o=ede(e),i=this._viewportRect,s=Math.max(n.x+o.width-i.width,0),a=Math.max(n.y+o.height-i.height,0),l=Math.max(i.top-r.top-n.y,0),c=Math.max(i.left-r.left-n.x,0),u=0,d=0;return o.width<=i.width?u=c||-s:u=n.x<this._viewportMargin?i.left-r.left-n.x:0,o.height<=i.height?d=l||-a:d=n.y<this._viewportMargin?i.top-r.top-n.y:0,this._previousPushAmount={x:u,y:d},{x:n.x+u,y:n.y+d}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!a9e(this._lastScrollVisibility,r)){let o=new KD(n,r);this._positionChanges.next(o)}this._lastScrollVisibility=r}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,o=n.overlayY;n.overlayX==="center"?r="center":this._isRtl()?r=n.overlayX==="start"?"right":"left":r=n.overlayX==="start"?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${r} ${o}`}_calculateBoundingBoxRect(n,e){let r=this._viewportRect,o=this._isRtl(),i,s,a;if(e.overlayY==="top")s=n.y,i=r.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=r.height-n.y+this._viewportMargin*2,i=r.height-a+this._viewportMargin;else{let h=Math.min(r.bottom-n.y+r.top,n.y),f=this._lastBoundingBoxSize.height;i=h*2,s=n.y-h,i>f&&!this._isInitialRender&&!this._growAfterOpen&&(s=n.y-f/2)}let l=e.overlayX==="start"&&!o||e.overlayX==="end"&&o,c=e.overlayX==="end"&&!o||e.overlayX==="start"&&o,u,d,p;if(c)p=r.width-n.x+this._viewportMargin*2,u=n.x-this._viewportMargin;else if(l)d=n.x,u=r.right-n.x;else{let h=Math.min(r.right-n.x+r.left,n.x),f=this._lastBoundingBoxSize.width;u=h*2,d=n.x-h,u>f&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.x-f/2)}return{top:s,left:d,bottom:a,right:p,width:u,height:i}}_setBoundingBoxStyles(n,e){let r=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let i=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=wo(r.height),o.top=wo(r.top),o.bottom=wo(r.bottom),o.width=wo(r.width),o.left=wo(r.left),o.right=wo(r.right),e.overlayX==="center"?o.alignItems="center":o.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?o.justifyContent="center":o.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",i&&(o.maxHeight=wo(i)),s&&(o.maxWidth=wo(s))}this._lastBoundingBoxSize=r,g2(this._boundingBox.style,o)}_resetBoundingBoxStyles(){g2(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){g2(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){let r={},o=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){let u=this._viewportRuler.getViewportScrollPosition();g2(r,this._getExactOverlayY(e,n,u)),g2(r,this._getExactOverlayX(e,n,u))}else r.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(o?r.maxHeight=wo(s.maxHeight):i&&(r.maxHeight="")),s.maxWidth&&(o?r.maxWidth=wo(s.maxWidth):i&&(r.maxWidth="")),g2(this._pane.style,r)}_getExactOverlayY(n,e,r){let o={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,n);if(this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r)),n.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;o.bottom=`${s-(i.y+this._overlayRect.height)}px`}else o.top=wo(i.y);return o}_getExactOverlayX(n,e,r){let o={left:"",right:""},i=this._getOverlayPoint(e,this._overlayRect,n);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r));let s;if(this._isRtl()?s=n.overlayX==="end"?"left":"right":s=n.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;o.right=`${a-(i.x+this._overlayRect.width)}px`}else o.left=wo(i.x);return o}_getScrollVisibility(){let n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Xue(n,r),isOriginOutsideView:x$(n,r),isOverlayClipped:Xue(e,r),isOverlayOutsideView:x$(e,r)}}_subtractOverflows(n,...e){return e.reduce((r,o)=>r-Math.max(o,0),n)}_getNarrowedViewportRect(){let n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+n-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return e==="x"?n.offsetX==null?this._offsetX:n.offsetX:n.offsetY==null?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&h$(n).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){let n=this._origin;if(n instanceof Ft)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();let e=n.width||0,r=n.height||0;return{top:n.y,bottom:n.y+r,left:n.x,right:n.x+e,height:r,width:e}}};function g2(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function Jue(t){if(typeof t!="number"&&t!=null){let[n,e]=t.split(s9e);return!e||e==="px"?parseFloat(n):null}return t||null}function ede(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function a9e(t,n){return t===n?!0:t.isOriginClipped===n.isOriginClipped&&t.isOriginOutsideView===n.isOriginOutsideView&&t.isOverlayClipped===n.isOverlayClipped&&t.isOverlayOutsideView===n.isOverlayOutsideView}var eN=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],b$=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom"}],tde="cdk-global-overlay-wrapper";function tN(t){return new XD}var XD=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(n){let e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(tde),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:o,height:i,maxWidth:s,maxHeight:a}=r,l=(o==="100%"||o==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(i==="100%"||i==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",h="",f="",m="";l?m="flex-start":u==="center"?(m="center",p?f=d:h=d):p?u==="left"||u==="end"?(m="flex-end",h=d):(u==="right"||u==="start")&&(m="flex-start",f=d):u==="left"||u==="start"?(m="flex-start",h=d):(u==="right"||u==="end")&&(m="flex-end",f=d),n.position=this._cssPosition,n.marginLeft=l?"0":h,n.marginTop=c?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=l?"0":f,e.justifyContent=m,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(tde),r.justifyContent=r.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}},Mb=(()=>{class t{_injector=R(Ct);constructor(){}global(){return tN()}flexibleConnectedTo(e){return zw(this._injector,e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Uf(t,n){t.get(h2).load(ide);let e=t.get(JD),r=t.get(Gt),o=t.get(Hf),i=t.get(Xs),s=t.get(js),a=r.createElement("div"),l=r.createElement("div");l.id=o.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),e.getContainerElement().appendChild(a);let c=new UD(l,i,t),u=new Bu(n),d=t.get(vr,null,{optional:!0})||t.get(co).createRenderer(null,null);return u.direction=u.direction||s.value,new Vw(c,a,l,u,t.get(Zt),t.get(ode),r,t.get(yc),t.get(QD),n?.disableAnimations??t.get(y1,null,{optional:!0})==="NoopAnimations",t.get(ir),d)}var Sb=(()=>{class t{scrollStrategies=R(Cb);_positionBuilder=R(Mb);_injector=R(Ct);constructor(){}create(e){return Uf(this._injector,e)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),l9e=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],sde=new Ee("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=R(Ct);return()=>jw(t)}}),bb=(()=>{class t{elementRef=R(Ft);constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),Hw=(()=>{class t{_dir=R(js,{optional:!0});_injector=R(Ct);_overlayRef;_templatePortal;_backdropSubscription=Nn.EMPTY;_attachSubscription=Nn.EMPTY;_detachSubscription=Nn.EMPTY;_positionSubscription=Nn.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=R(sde);_disposeOnNavigation=!1;_ngZone=R(Zt);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new cn;positionChange=new cn;attach=new cn;detach=new cn;overlayKeydown=new cn;overlayOutsideClick=new cn;constructor(){let e=R(ti),r=R(_o);this._templatePortal=new Yp(e,r),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=l9e);let e=this._overlayRef=Uf(this._injector,this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),r.keyCode===27&&!this.disableClose&&!so(r)&&(r.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{let o=this._getOriginElement(),i=ca(r);(!o||o!==i&&!o.contains(i))&&this.overlayOutsideClick.next(r)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),r=new Bu({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(r.width=this.width),(this.height||this.height===0)&&(r.height=this.height),(this.minWidth||this.minWidth===0)&&(r.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(e){let r=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=zw(this._injector,this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof bb?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof bb?this.origin.elementRef.nativeElement:this.origin instanceof Ft?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe($5(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",wt],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",wt],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",wt],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",wt],push:[2,"cdkConnectedOverlayPush","push",wt],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",wt]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Qr]})}return t})();function c9e(t){let n=R(Ct);return()=>jw(n)}var u9e={provide:sde,useFactory:c9e},Tb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({providers:[Sb,u9e],imports:[xb,w$,m$,m$]})}return t})();function ade(t){return t.buttons===0||t.detail===0}function lde(t){let n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}var Eb;function cde(){if(Eb==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Eb=!0}))}finally{Eb=Eb||!1}return Eb}function Ib(t){return cde()?t:!!t.capture}var ude=new Ee("cdk-input-modality-detector-options"),dde={ignoreKeys:[18,17,224,91,16]},pde=650,C$={passive:!0,capture:!0},Nb=(()=>{class t{_platform=R(Qo);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new nr(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(r=>r===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ca(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<pde||(this._modality.next(ade(e)?"keyboard":"mouse"),this._mostRecentTarget=ca(e))};_onTouchstart=e=>{if(lde(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ca(e)};constructor(){let e=R(Zt),r=R(Gt),o=R(ude,{optional:!0});if(this._options=ae(ae({},dde),o),this.modalityDetected=this._modality.pipe(My(1)),this.modalityChanged=this.modalityDetected.pipe(Z2()),this._platform.isBrowser){let i=R(co).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[i.listen(r,"keydown",this._onKeydown,C$),i.listen(r,"mousedown",this._onMousedown,C$),i.listen(r,"touchstart",this._onTouchstart,C$)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Db=(function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t})(Db||{}),hde=new Ee("cdk-focus-monitor-default-options"),nN=Ib({passive:!0,capture:!0}),Qp=(()=>{class t{_ngZone=R(Zt);_platform=R(Qo);_inputModalityDetector=R(Nb);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=R(Gt);_stopInputModalityDetector=new nt;constructor(){let e=R(hde,{optional:!0});this._detectionMode=e?.detectionMode||Db.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let r=ca(e);for(let o=r;o;o=o.parentElement)e.type==="focus"?this._onFocus(e,o):this._onBlur(e,o)};monitor(e,r=!1){let o=f2(e);if(!this._platform.isBrowser||o.nodeType!==1)return ct();let i=Gue(o)||this._document,s=this._elementInfo.get(o);if(s)return r&&(s.checkChildren=!0),s.subject;let a={checkChildren:r,subject:new nt,rootNode:i};return this._elementInfo.set(o,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let r=f2(e),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(e,r,o){let i=f2(e),s=this._document.activeElement;i===s?this._getClosestElementsInfo(i).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),typeof i.focus=="function"&&i.focus(o))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===Db.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused",r==="touch"),e.classList.toggle("cdk-keyboard-focused",r==="keyboard"),e.classList.toggle("cdk-mouse-focused",r==="mouse"),e.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&r,this._detectionMode===Db.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?pde:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(e,r){let o=this._elementInfo.get(r),i=ca(e);!o||!o.checkChildren&&r!==i||this._originChanged(r,this._getFocusOrigin(i),o)}_onBlur(e,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(e,r){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let r=e.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,nN),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,nN)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ln(this._stopInputModalityDetector)).subscribe(i=>{this._setOrigin(i,!0)}))}_removeGlobalListeners(e){let r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,nN),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,nN),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,o){this._setClasses(e,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){let r=[];return this._elementInfo.forEach((o,i)=>{(i===e||o.checkChildren&&i.contains(e))&&r.push([i,o])}),r}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let i=e.labels;if(i){for(let s=0;s<i.length;s++)if(i[s].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var rN=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,o){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return t})();var S$=(()=>{class t{_platform=R(Qo);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return h9e(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let r=p9e(k9e(e));if(r&&(fde(r)===-1||!this.isVisible(r)))return!1;let o=e.nodeName.toLowerCase(),i=fde(e);return e.hasAttribute("contenteditable")?i!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!y9e(e)?!1:o==="audio"?e.hasAttribute("controls")?i!==-1:!1:o==="video"?i===-1?!1:i!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,r){return x9e(e)&&!this.isDisabled(e)&&(r?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function p9e(t){try{return t.frameElement}catch{return null}}function h9e(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function f9e(t){let n=t.nodeName.toLowerCase();return n==="input"||n==="select"||n==="button"||n==="textarea"}function m9e(t){return v9e(t)&&t.type=="hidden"}function g9e(t){return w9e(t)&&t.hasAttribute("href")}function v9e(t){return t.nodeName.toLowerCase()=="input"}function w9e(t){return t.nodeName.toLowerCase()=="a"}function mde(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let n=t.getAttribute("tabindex");return!!(n&&!isNaN(parseInt(n,10)))}function fde(t){if(!mde(t))return null;let n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}function y9e(t){let n=t.nodeName.toLowerCase(),e=n==="input"&&t.type;return e==="text"||e==="password"||n==="select"||n==="textarea"}function x9e(t){return m9e(t)?!1:f9e(t)||g9e(t)||t.hasAttribute("contenteditable")||mde(t)}function k9e(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var M$=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_enabled=!0;constructor(n,e,r,o,i=!1,s){this._element=n,this._checker=e,this._ngZone=r,this._document=o,this._injector=s,i||this.attachAnchors()}destroy(){let n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){let e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return n=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let r=this._getFirstTabbableElement(e);return r?.focus(n),!!r}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){let e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){let e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let r=0;r<e.length;r++){let o=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(o)return o}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let r=e.length-1;r>=0;r--){let o=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(o)return o}return null}_createAnchor(){let n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?Si(n,{injector:this._injector}):setTimeout(n)}},gde=(()=>{class t{_checker=R(S$);_ngZone=R(Zt);_document=R(Gt);_injector=R(Ct);constructor(){R(h2).load(rN)}create(e,r=!1){return new M$(e,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _9e(t,n){}var Uw=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var b9e=(()=>{class t extends $w{_elementRef=R(Ft);_focusTrapFactory=R(gde);_config;_interactivityChecker=R(S$);_ngZone=R(Zt);_focusMonitor=R(Qp);_renderer=R(vr);_changeDetectorRef=R(Br);_injector=R(Ct);_platform=R(Qo);_document=R(Gt);_portalOutlet;_focusTrapped=new nt;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=R(Uw,{optional:!0})||new Uw,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let r=this._ariaLabelledByQueue.indexOf(e);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),r}attachTemplatePortal(e){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),r}attachDomPortal=e=>{this._portalOutlet.hasAttached();let r=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{i(),s(),e.removeAttribute("tabindex")},i=this._renderer.listen(e,"blur",o),s=this._renderer.listen(e,"mousedown",o)})),e.focus(r)}_focusByCssSelector(e,r){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,r)}_trapFocus(e){this._isDestroyed||Si(()=>{let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus(e);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(e)||this._focusDialogContainer(e);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',e);break;default:this._focusByCssSelector(this._config.autoFocus,e);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,r=null;if(typeof e=="string"?r=this._document.querySelector(e):typeof e=="boolean"?r=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(r=e),this._config.restoreFocus&&r&&typeof r.focus=="function"){let o=jD(),i=this._elementRef.nativeElement;(!o||o===this._document.body||o===i||i.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(e){this._elementRef.nativeElement.focus?.(e)}_containsFocus(){let e=this._elementRef.nativeElement,r=jD();return e===r||e.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=jD()))}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(r,o){if(r&1&&xM(v$,7),r&2){let i;md(i=gd())&&(o._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,o){r&2&&Bt("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[wr],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,o){r&1&&eo(0,_9e,0,0,"ng-template",0)},dependencies:[v$],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return t})(),Ab=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new nt;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(n,e){this.overlayRef=n,this.config=e,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!so(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=n.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(n,e){if(this._canClose(n)){let r=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(n),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}_canClose(n){let e=this.config;return!!this.containerInstance&&(!e.closePredicate||e.closePredicate(n,e,this.componentInstance))}},C9e=new Ee("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=R(Ct);return()=>YD(t)}}),E$=new Ee("DialogData"),M9e=new Ee("DefaultDialogConfig");function S9e(t){let n=Ye(t),e=new cn;return{valueSignal:n,get value(){return n()},change:e,ngOnDestroy(){e.complete()}}}var vde=(()=>{class t{_injector=R(Ct);_defaultOptions=R(M9e,{optional:!0});_parentDialog=R(t,{optional:!0,skipSelf:!0});_overlayContainer=R(JD);_idGenerator=R(Hf);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new nt;_afterOpenedAtThisLevel=new nt;_ariaHiddenElements=new Map;_scrollStrategy=R(C9e);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=uc(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(sl(void 0)));constructor(){}open(e,r){let o=this._defaultOptions||new Uw;r=ae(ae({},o),r),r.id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);let i=this._getOverlayConfig(r),s=Uf(this._injector,i),a=new Ab(s,r),l=this._attachContainer(s,a,r);if(a.containerInstance=l,!this.openDialogs.length){let c=this._overlayContainer.getContainerElement();l._focusTrapped?l._focusTrapped.pipe(Fr(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(c)}):this._hideNonDialogContentFromAssistiveTechnology(c)}return this._attachDialogContent(e,a,l,r),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){T$(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(r=>r.id===e)}ngOnDestroy(){T$(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),T$(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let r=new Bu({positionStrategy:e.positionStrategy||tN().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation,disableAnimations:e.disableAnimations});return e.backdropClass&&(r.backdropClass=e.backdropClass),r}_attachContainer(e,r,o){let i=o.injector||o.viewContainerRef?.injector,s=[{provide:Uw,useValue:o},{provide:Ab,useValue:r},{provide:Vw,useValue:e}],a;o.container?typeof o.container=="function"?a=o.container:(a=o.container.type,s.push(...o.container.providers(o))):a=b9e;let l=new zf(a,o.viewContainerRef,Ct.create({parent:i||this._injector,providers:s}));return e.attach(l).instance}_attachDialogContent(e,r,o,i){if(e instanceof ti){let s=this._createInjector(i,r,o,void 0),a={$implicit:i.data,dialogRef:r};i.templateContext&&(a=ae(ae({},a),typeof i.templateContext=="function"?i.templateContext():i.templateContext)),o.attachTemplatePortal(new Yp(e,null,a,s))}else{let s=this._createInjector(i,r,o,this._injector),a=o.attachComponentPortal(new zf(e,i.viewContainerRef,s));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(e,r,o,i){let s=e.injector||e.viewContainerRef?.injector,a=[{provide:E$,useValue:e.data},{provide:Ab,useValue:r}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(r,e,o)):a.push(...e.providers)),e.direction&&(!s||!s.get(js,null,{optional:!0}))&&a.push({provide:js,useValue:S9e(e.direction)}),Ct.create({parent:s||i,providers:a})}_removeOpenDialog(e,r){let o=this.openDialogs.indexOf(e);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(e){if(e.parentElement){let r=e.parentElement.children;for(let o=r.length-1;o>-1;o--){let i=r[o];i!==e&&i.nodeName!=="SCRIPT"&&i.nodeName!=="STYLE"&&!i.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function T$(t,n){let e=t.length;for(;e--;)n(t[e])}function ua(t){t||(t=R(gr));let n=new tn(e=>{if(t.destroyed){e.next();return}return t.onDestroy(e.next.bind(e))});return e=>e.pipe(ln(n))}var I$=class{source;destroyed=!1;destroyRef=R(gr);constructor(n){this.source=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}subscribe(n){if(this.destroyed)throw new Te(953,!1);let e=this.source.pipe(ua(this.destroyRef)).subscribe({next:r=>n(r)});return{unsubscribe:()=>e.unsubscribe()}}};function oN(t,n){return new I$(t)}function wde(t,n){let e=n?.injector??R(Ct),r=new Qu(1),o=St(()=>{let i;try{i=t()}catch(s){wn(()=>r.error(s));return}wn(()=>r.next(i))},{injector:e,manualCleanup:!0});return e.get(gr).onDestroy(()=>{o.destroy(),r.complete()}),r.asObservable()}function Rb(t,n){let r=!n?.manualCleanup?n?.injector?.get(gr)??R(gr):null,o=T9e(n?.equal),i;n?.requireSync?i=Ye({kind:0},{equal:o}):i=Ye({kind:1,value:n?.initialValue},{equal:o});let s,a=t.subscribe({next:l=>i.set({kind:1,value:l}),error:l=>{i.set({kind:2,error:l}),s?.()},complete:()=>{s?.()}});if(n?.requireSync&&i().kind===0)throw new Te(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),de(()=>{let l=i();switch(l.kind){case 1:return l.value;case 2:throw l.error;case 0:throw new Te(601,!1)}},{equal:n?.equal})}function T9e(t=Object.is){return(n,e)=>n.kind===1&&e.kind===1&&t(n.value,e.value)}function yde(t){let n=null,e=wn(()=>t());return de(()=>{n=t();let r=e;return e=n,r})}function iN(t){let n=new Ee(t);return[(i={})=>R(n,i),i=>({provide:n,useValue:i}),i=>({provide:n,useExisting:$r(i)}),n]}var[xde,cWn,kde,uWn]=iN("@spartan-ng SET_CLASS_TO_CUSTOM_ELEMENT_TOKEN");var _de=!1,[bde,dWn,Cde,pWn]=iN("@spartan-ng EXPOSES_SIDE_TOKEN"),[Mde,hWn,D$,fWn]=iN("@spartan-ng EXPOSES_STATE_TOKEN");var[mWn,gWn,vWn,wWn]=iN("@spartan-ng SET_TABLE_CLASSES_TOKEN");var E9e=["*"],N$={attachPositions:[],autoFocus:"first-tabbable",closeDelay:100,closeOnBackdropClick:!0,closeOnOutsidePointerEvents:!1,disableClose:!1,hasBackdrop:!0,positionStrategy:null,restoreFocus:!0,role:"dialog",scrollStrategy:null},Sde=new Ee("brn-dialog-default-options",{providedIn:"root",factory:()=>N$});function Tde(t){return{provide:Sde,useValue:ae(ae({},N$),t)}}function I9e(){return R(Sde,{optional:!0})??N$}var Gw=(t,n="")=>{if(typeof t=="string"){let e=t.trim().split(" ");return e.length===0?[n]:e}return t??[]},ms=class{_cdkDialogRef;_open;state;dialogId;_options;_closing$=new nt;closing$=this._closing$.asObservable();closed$;_previousTimeout;get open(){return this.state()==="open"}constructor(n,e,r,o,i){this._cdkDialogRef=n,this._open=e,this.state=r,this.dialogId=o,this._options=i,this.closed$=this._cdkDialogRef.closed.pipe(Fr(1))}close(n,e=this._options?.closeDelay??0){!this.open||this._options?.disableClose||(this._closing$.next(),this._open.set(!1),this._previousTimeout&&clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._cdkDialogRef.close(n)},e))}setPanelClass(n){this._cdkDialogRef.config.panelClass=Gw(n)}setOverlayClass(n){this._cdkDialogRef.config.backdropClass=Gw(n)}setAriaDescribedBy(n){this._cdkDialogRef.config.ariaDescribedBy=n}setAriaLabelledBy(n){this._cdkDialogRef.config.ariaLabelledBy=n}setAriaLabel(n){this._cdkDialogRef.config.ariaLabel=n}},D9e=0;var Pu=(t={})=>R(E$,t),A$=(()=>{class t{_overlayCloseDispatcher=R(QD);_cdkDialog=R(vde);_rendererFactory=R(co);_renderer=this._rendererFactory.createRenderer(null,null);_positionBuilder=R(Mb);_sso=R(Cb);_injector=R(Ct);open(e,r,o,i){if(i?.id&&this._cdkDialog.getDialogById(i.id))throw new Error(`Dialog with ID: ${i.id} already exists`);let s=i?.positionStrategy??(i?.attachTo&&i?.attachPositions&&i?.attachPositions?.length>0?this._positionBuilder?.flexibleConnectedTo(i.attachTo).withPositions(i.attachPositions??[]):this._positionBuilder.global().centerHorizontally().centerVertically()),a,l,c=lt(ae({},o),{close:(v=void 0)=>a.close(v,i?.closeDelay)}),u=new nt,d=Ye(!0),p=de(()=>d()?"open":"closed"),h=++D9e,f=this._cdkDialog.open(e,{id:i?.id??`brn-dialog-${h}`,role:i?.role,viewContainerRef:r,templateContext:()=>({$implicit:c}),data:c,hasBackdrop:i?.hasBackdrop,panelClass:Gw(i?.panelClass),backdropClass:Gw(i?.backdropClass,"bg-transparent"),positionStrategy:s,scrollStrategy:i?.scrollStrategy??this._sso?.block(),restoreFocus:i?.restoreFocus,disableClose:!0,autoFocus:i?.autoFocus??"first-tabbable",ariaDescribedBy:i?.ariaDescribedBy??`brn-dialog-description-${h}`,ariaLabelledBy:i?.ariaLabelledBy??`brn-dialog-title-${h}`,ariaLabel:i?.ariaLabel,ariaModal:i?.ariaModal,providers:v=>{a=new ms(v,d,p,h,i),Vr(this._injector,()=>{l=St(()=>{m&&this._renderer.setAttribute(m,"data-state",p()),g&&this._renderer.setAttribute(g,"data-state",p())})});let w=[{provide:ms,useValue:a}];return i?.providers&&(typeof i.providers=="function"&&w.push(...i.providers()),Array.isArray(i.providers)&&w.push(...i.providers)),w}}),m=f.overlayRef.overlayElement,g=f.overlayRef.backdropElement;return i?.closeOnOutsidePointerEvents&&f.outsidePointerEvents.pipe(ln(u)).subscribe(()=>{this._overlayCloseDispatcher._attachedOverlays.at(-1)===f.overlayRef&&a.close(void 0,i?.closeDelay)}),i?.closeOnBackdropClick&&f.backdropClick.pipe(ln(u)).subscribe(()=>{a.close(void 0,i?.closeDelay)}),i?.disableClose||f.keydownEvents.pipe(Cn(v=>v.key==="Escape"),ln(u)).subscribe(()=>{a.close(void 0,i?.closeDelay)}),f.closed.pipe(ln(u)).subscribe(()=>{l?.destroy(),u.next()}),a}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),sN=(()=>{class t{_dialogService=R(A$);_vcr=R(_o);positionBuilder=R(Mb);ssos=R(Cb);_injector=R(Ct);_defaultOptions=I9e();_context={};stateComputed=de(()=>this._dialogRef()?.state()??"closed");_contentTemplate;_dialogRef=Ye(void 0);_dialogStateEffectRef;_backdropClass=Ye(null);_panelClass=Ye(null);closed=Kn();stateChanged=Kn();state=Q(null);role=Q(this._defaultOptions.role);hasBackdrop=Q(this._defaultOptions.hasBackdrop,{transform:wt});positionStrategy=Q(this._defaultOptions.positionStrategy);mutablePositionStrategy=Co(()=>this.positionStrategy());scrollStrategy=Q(this._defaultOptions.scrollStrategy);_options=de(()=>{let e=this.scrollStrategy(),r;return e==="close"?r=this.ssos.close():e==="reposition"?r=this.ssos.reposition():r=e,{role:this.role(),hasBackdrop:this.hasBackdrop(),positionStrategy:this.mutablePositionStrategy(),scrollStrategy:r,restoreFocus:this.restoreFocus(),closeOnOutsidePointerEvents:this.mutableCloseOnOutsidePointerEvents(),closeOnBackdropClick:this.closeOnBackdropClick(),attachTo:this.mutableAttachTo(),attachPositions:this.mutableAttachPositions(),autoFocus:this.autoFocus(),closeDelay:this.closeDelay(),disableClose:this.disableClose(),backdropClass:this._backdropClass()??"",panelClass:this._panelClass()??"",ariaDescribedBy:this._mutableAriaDescribedBy(),ariaLabelledBy:this._mutableAriaLabelledBy(),ariaLabel:this._mutableAriaLabel(),ariaModal:this._mutableAriaModal()}});constructor(){St(()=>{let e=this.state();e==="open"&&wn(()=>this.open()),e==="closed"&&wn(()=>this.close())})}restoreFocus=Q(this._defaultOptions.restoreFocus);closeOnOutsidePointerEvents=Q(this._defaultOptions.closeOnOutsidePointerEvents,{transform:wt});mutableCloseOnOutsidePointerEvents=Co(()=>this.closeOnOutsidePointerEvents());closeOnBackdropClick=Q(this._defaultOptions.closeOnBackdropClick,{transform:wt});attachTo=Q(null);mutableAttachTo=Co(()=>this.attachTo());attachPositions=Q(this._defaultOptions.attachPositions);mutableAttachPositions=Co(()=>this.attachPositions());autoFocus=Q(this._defaultOptions.autoFocus);closeDelay=Q(this._defaultOptions.closeDelay,{transform:Di});disableClose=Q(this._defaultOptions.disableClose,{transform:wt});ariaDescribedBy=Q(null,{alias:"aria-describedby"});_mutableAriaDescribedBy=Co(()=>this.ariaDescribedBy());ariaLabelledBy=Q(null,{alias:"aria-labelledby"});_mutableAriaLabelledBy=Co(()=>this.ariaLabelledBy());ariaLabel=Q(null,{alias:"aria-label"});_mutableAriaLabel=Co(()=>this.ariaLabel());ariaModal=Q(!0,{alias:"aria-modal",transform:wt});_mutableAriaModal=Co(()=>this.ariaModal());open(){if(!this._contentTemplate||this._dialogRef())return;this._dialogStateEffectRef?.destroy();let e=this._dialogService.open(this._contentTemplate,this._vcr,this._context,this._options());this._dialogRef.set(e),Vr(this._injector,()=>{this._dialogStateEffectRef=St(()=>{let r=e.state();wn(()=>this.stateChanged.emit(r))})}),e.closed$.pipe(Fr(1)).subscribe(r=>{this._dialogRef.set(void 0),this.closed.emit(r)})}close(e,r){this._dialogRef()?.close(e,r??this._options().closeDelay)}registerTemplate(e){this._contentTemplate=e}setOverlayClass(e){this._backdropClass.set(e),this._dialogRef()?.setOverlayClass(e)}setPanelClass(e){this._panelClass.set(e??""),this._dialogRef()?.setPanelClass(e)}setContext(e){this._context=ae(ae({},this._context),e)}setAriaDescribedBy(e){this._mutableAriaDescribedBy.set(e),this._dialogRef()?.setAriaDescribedBy(e)}setAriaLabelledBy(e){this._mutableAriaLabelledBy.set(e),this._dialogRef()?.setAriaLabelledBy(e)}setAriaLabel(e){this._mutableAriaLabel.set(e),this._dialogRef()?.setAriaLabel(e)}setAriaModal(e){this._mutableAriaModal.set(e)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["brn-dialog"]],inputs:{state:[1,"state"],role:[1,"role"],hasBackdrop:[1,"hasBackdrop"],positionStrategy:[1,"positionStrategy"],scrollStrategy:[1,"scrollStrategy"],restoreFocus:[1,"restoreFocus"],closeOnOutsidePointerEvents:[1,"closeOnOutsidePointerEvents"],closeOnBackdropClick:[1,"closeOnBackdropClick"],attachTo:[1,"attachTo"],attachPositions:[1,"attachPositions"],autoFocus:[1,"autoFocus"],closeDelay:[1,"closeDelay"],disableClose:[1,"disableClose"],ariaDescribedBy:[1,"aria-describedby","ariaDescribedBy"],ariaLabelledBy:[1,"aria-labelledby","ariaLabelledBy"],ariaLabel:[1,"aria-label","ariaLabel"],ariaModal:[1,"aria-modal","ariaModal"]},outputs:{closed:"closed",stateChanged:"stateChanged"},exportAs:["brnDialog"],ngContentSelectors:E9e,decls:1,vars:0,template:function(r,o){r&1&&(pn(),Nt(0))},encapsulation:2,changeDetection:0})}return t})(),Ede=(()=>{class t{_brnDialogRef=R(ms);delay=Q(void 0,{transform:HD});close(){this._brnDialogRef.close(void 0,this.delay())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["button","brnDialogClose",""]],hostBindings:function(r,o){r&1&&Pe("click",function(){return o.close()})},inputs:{delay:[1,"delay"]}})}return t})();var Ide=(()=>{class t{_brnDialogRef=R(ms);_id=Ye(`brn-dialog-description-${this._brnDialogRef?.dialogId}`);constructor(){St(()=>{this._brnDialogRef.setAriaDescribedBy(this._id())})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnDialogDescription",""]],hostVars:1,hostBindings:function(r,o){r&2&&zr("id",o._id())}})}return t})(),Dde=(()=>{class t{_brnDialog=R(sN);className=Q(void 0,{alias:"class"});setClassToCustomElement(e){this._brnDialog.setOverlayClass(e)}constructor(){St(()=>{if(!this._brnDialog)return;let e=this.className();wn(()=>this._brnDialog.setOverlayClass(e))})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["brn-dialog-overlay"]],inputs:{className:[1,"class","className"]},features:[pt([kde(()=>t)])],decls:0,vars:0,template:function(r,o){},encapsulation:2,changeDetection:0})}return t})(),Nde=(()=>{class t{_brnDialogRef=R(ms);_id=Ye(`brn-dialog-title-${this._brnDialogRef?.dialogId}`);constructor(){St(()=>{this._brnDialogRef.setAriaLabelledBy(this._id())})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnDialogTitle",""]],hostVars:1,hostBindings:function(r,o){r&2&&zr("id",o._id())}})}return t})();var Ade={role:"dialog",attachPositions:[],attachTo:null,autoFocus:"first-tabbable",backdropClass:"",closeDelay:100,closeOnBackdropClick:!0,closeOnOutsidePointerEvents:!1,hasBackdrop:!0,panelClass:"",positionStrategy:null,restoreFocus:!0,scrollStrategy:null,disableClose:!1,ariaLabel:void 0,ariaModal:!0};function Ode(t){var n,e,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(n=0;n<o;n++)t[n]&&(e=Ode(t[n]))&&(r&&(r+=" "),r+=e)}else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function aN(){for(var t,n,e=0,r="",o=arguments.length;e<o;e++)(t=arguments[e])&&(n=Ode(t))&&(r&&(r+=" "),r+=n);return r}var N9e=(t,n)=>{let e=new Array(t.length+n.length);for(let r=0;r<t.length;r++)e[r]=t[r];for(let r=0;r<n.length;r++)e[t.length+r]=n[r];return e},A9e=(t,n)=>({classGroupId:t,validator:n}),$de=(t=new Map,n=null,e)=>({nextPart:t,validators:n,classGroupId:e});var Fde=[],R9e="arbitrary..",O9e=t=>{let n=B9e(t),{conflictingClassGroups:e,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{if(s.startsWith("[")&&s.endsWith("]"))return F9e(s);let a=s.split("-"),l=a[0]===""&&a.length>1?1:0;return Vde(a,l,n)},getConflictingClassGroupIds:(s,a)=>{if(a){let l=r[s],c=e[s];return l?c?N9e(c,l):l:c||Fde}return e[s]||Fde}}},Vde=(t,n,e)=>{if(t.length-n===0)return e.classGroupId;let o=t[n],i=e.nextPart.get(o);if(i){let c=Vde(t,n+1,i);if(c)return c}let s=e.validators;if(s===null)return;let a=n===0?t.join("-"):t.slice(n).join("-"),l=s.length;for(let c=0;c<l;c++){let u=s[c];if(u.validator(a))return u.classGroupId}},F9e=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{let n=t.slice(1,-1),e=n.indexOf(":"),r=n.slice(0,e);return r?R9e+r:void 0})(),B9e=t=>{let{theme:n,classGroups:e}=t;return P9e(e,n)},P9e=(t,n)=>{let e=$de();for(let r in t){let o=t[r];F$(o,e,r,n)}return e},F$=(t,n,e,r)=>{let o=t.length;for(let i=0;i<o;i++){let s=t[i];L9e(s,n,e,r)}},L9e=(t,n,e,r)=>{if(typeof t=="string"){$9e(t,n,e);return}if(typeof t=="function"){V9e(t,n,e,r);return}j9e(t,n,e,r)},$9e=(t,n,e)=>{let r=t===""?n:jde(n,t);r.classGroupId=e},V9e=(t,n,e,r)=>{if(z9e(t)){F$(t(r),n,e,r);return}n.validators===null&&(n.validators=[]),n.validators.push(A9e(e,t))},j9e=(t,n,e,r)=>{let o=Object.entries(t),i=o.length;for(let s=0;s<i;s++){let[a,l]=o[s];F$(l,jde(n,a),e,r)}},jde=(t,n)=>{let e=t,r=n.split("-"),o=r.length;for(let i=0;i<o;i++){let s=r[i],a=e.nextPart.get(s);a||(a=$de(),e.nextPart.set(s,a)),e=a}return e},z9e=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,H9e=t=>{if(t<1)return{get:()=>{},set:()=>{}};let n=0,e=Object.create(null),r=Object.create(null),o=(i,s)=>{e[i]=s,n++,n>t&&(n=0,r=e,e=Object.create(null))};return{get(i){let s=e[i];if(s!==void 0)return s;if((s=r[i])!==void 0)return o(i,s),s},set(i,s){i in e?e[i]=s:o(i,s)}}};var U9e=[],Bde=(t,n,e,r,o)=>({modifiers:t,hasImportantModifier:n,baseClassName:e,maybePostfixModifierPosition:r,isExternal:o}),G9e=t=>{let{prefix:n,experimentalParseClassName:e}=t,r=o=>{let i=[],s=0,a=0,l=0,c,u=o.length;for(let m=0;m<u;m++){let g=o[m];if(s===0&&a===0){if(g===":"){i.push(o.slice(l,m)),l=m+1;continue}if(g==="/"){c=m;continue}}g==="["?s++:g==="]"?s--:g==="("?a++:g===")"&&a--}let d=i.length===0?o:o.slice(l),p=d,h=!1;d.endsWith("!")?(p=d.slice(0,-1),h=!0):d.startsWith("!")&&(p=d.slice(1),h=!0);let f=c&&c>l?c-l:void 0;return Bde(i,h,p,f)};if(n){let o=n+":",i=r;r=s=>s.startsWith(o)?i(s.slice(o.length)):Bde(U9e,!1,s,void 0,!0)}if(e){let o=r;r=i=>e({className:i,parseClassName:o})}return r},W9e=t=>{let n=new Map;return t.orderSensitiveModifiers.forEach((e,r)=>{n.set(e,1e6+r)}),e=>{let r=[],o=[];for(let i=0;i<e.length;i++){let s=e[i],a=s[0]==="[",l=n.has(s);a||l?(o.length>0&&(o.sort(),r.push(...o),o=[]),r.push(s)):o.push(s)}return o.length>0&&(o.sort(),r.push(...o)),r}},q9e=t=>ae({cache:H9e(t.cacheSize),parseClassName:G9e(t),sortModifiers:W9e(t)},O9e(t)),K9e=/\s+/,Z9e=(t,n)=>{let{parseClassName:e,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=n,s=[],a=t.trim().split(K9e),l="";for(let c=a.length-1;c>=0;c-=1){let u=a[c],{isExternal:d,modifiers:p,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=e(u);if(d){l=u+(l.length>0?" "+l:l);continue}let g=!!m,v=r(g?f.substring(0,m):f);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=r(f),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}let w=p.length===0?"":p.length===1?p[0]:i(p).join(":"),y=h?w+"!":w,k=y+v;if(s.indexOf(k)>-1)continue;s.push(k);let _=o(v,g);for(let S=0;S<_.length;++S){let E=_[S];s.push(y+E)}l=u+(l.length>0?" "+l:l)}return l},X9e=(...t)=>{let n=0,e,r,o="";for(;n<t.length;)(e=t[n++])&&(r=zde(e))&&(o&&(o+=" "),o+=r);return o},zde=t=>{if(typeof t=="string")return t;let n,e="";for(let r=0;r<t.length;r++)t[r]&&(n=zde(t[r]))&&(e&&(e+=" "),e+=n);return e},Y9e=(t,...n)=>{let e,r,o,i,s=l=>{let c=n.reduce((u,d)=>d(u),t());return e=q9e(c),r=e.cache.get,o=e.cache.set,i=a,a(l)},a=l=>{let c=r(l);if(c)return c;let u=Z9e(l,e);return o(l,u),u};return i=s,(...l)=>i(X9e(...l))},Q9e=[],Jo=t=>{let n=e=>e[t]||Q9e;return n.isThemeGetter=!0,n},Hde=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ude=/^\((?:(\w[\w-]*):)?(.+)\)$/i,J9e=/^\d+\/\d+$/,e$e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,t$e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,n$e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,r$e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,o$e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ww=t=>J9e.test(t),fn=t=>!!t&&!Number.isNaN(Number(t)),Gf=t=>!!t&&Number.isInteger(Number(t)),R$=t=>t.endsWith("%")&&fn(t.slice(0,-1)),Jp=t=>e$e.test(t),i$e=()=>!0,s$e=t=>t$e.test(t)&&!n$e.test(t),Gde=()=>!1,a$e=t=>r$e.test(t),l$e=t=>o$e.test(t),c$e=t=>!mt(t)&&!gt(t),u$e=t=>qw(t,Kde,Gde),mt=t=>Hde.test(t),v2=t=>qw(t,Zde,s$e),O$=t=>qw(t,m$e,fn),Pde=t=>qw(t,Wde,Gde),d$e=t=>qw(t,qde,l$e),lN=t=>qw(t,Xde,a$e),gt=t=>Ude.test(t),Ob=t=>Kw(t,Zde),p$e=t=>Kw(t,g$e),Lde=t=>Kw(t,Wde),h$e=t=>Kw(t,Kde),f$e=t=>Kw(t,qde),cN=t=>Kw(t,Xde,!0),qw=(t,n,e)=>{let r=Hde.exec(t);return r?r[1]?n(r[1]):e(r[2]):!1},Kw=(t,n,e=!1)=>{let r=Ude.exec(t);return r?r[1]?n(r[1]):e:!1},Wde=t=>t==="position"||t==="percentage",qde=t=>t==="image"||t==="url",Kde=t=>t==="length"||t==="size"||t==="bg-size",Zde=t=>t==="length",m$e=t=>t==="number",g$e=t=>t==="family-name",Xde=t=>t==="shadow";var v$e=()=>{let t=Jo("color"),n=Jo("font"),e=Jo("text"),r=Jo("font-weight"),o=Jo("tracking"),i=Jo("leading"),s=Jo("breakpoint"),a=Jo("container"),l=Jo("spacing"),c=Jo("radius"),u=Jo("shadow"),d=Jo("inset-shadow"),p=Jo("text-shadow"),h=Jo("drop-shadow"),f=Jo("blur"),m=Jo("perspective"),g=Jo("aspect"),v=Jo("ease"),w=Jo("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],_=()=>[...k(),gt,mt],S=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],N=()=>[gt,mt,l],B=()=>[Ww,"full","auto",...N()],D=()=>[Gf,"none","subgrid",gt,mt],P=()=>["auto",{span:["full",Gf,gt,mt]},Gf,gt,mt],M=()=>[Gf,"auto",gt,mt],W=()=>["auto","min","max","fr",gt,mt],ie=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Z=()=>["start","end","center","stretch","center-safe","end-safe"],X=()=>["auto",...N()],G=()=>[Ww,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],H=()=>[t,gt,mt],V=()=>[...k(),Lde,Pde,{position:[gt,mt]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],pe=()=>["auto","cover","contain",h$e,u$e,{size:[gt,mt]}],ce=()=>[R$,Ob,v2],se=()=>["","none","full",c,gt,mt],we=()=>["",fn,Ob,v2],Ne=()=>["solid","dashed","dotted","double"],Ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[fn,R$,Lde,Pde],Je=()=>["","none",f,gt,mt],Ge=()=>["none",fn,gt,mt],vt=()=>["none",fn,gt,mt],kt=()=>[fn,gt,mt],T=()=>[Ww,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Jp],breakpoint:[Jp],color:[i$e],container:[Jp],"drop-shadow":[Jp],ease:["in","out","in-out"],font:[c$e],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Jp],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Jp],shadow:[Jp],spacing:["px",fn],text:[Jp],"text-shadow":[Jp],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ww,mt,gt,g]}],container:["container"],columns:[{columns:[fn,mt,gt,a]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:_()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:B()}],"inset-x":[{"inset-x":B()}],"inset-y":[{"inset-y":B()}],start:[{start:B()}],end:[{end:B()}],top:[{top:B()}],right:[{right:B()}],bottom:[{bottom:B()}],left:[{left:B()}],visibility:["visible","invisible","collapse"],z:[{z:[Gf,"auto",gt,mt]}],basis:[{basis:[Ww,"full","auto",a,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[fn,Ww,"auto","initial","none",mt]}],grow:[{grow:["",fn,gt,mt]}],shrink:[{shrink:["",fn,gt,mt]}],order:[{order:[Gf,"first","last","none",gt,mt]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...ie(),"normal"]}],"justify-items":[{"justify-items":[...Z(),"normal"]}],"justify-self":[{"justify-self":["auto",...Z()]}],"align-content":[{content:["normal",...ie()]}],"align-items":[{items:[...Z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Z(),{baseline:["","last"]}]}],"place-content":[{"place-content":ie()}],"place-items":[{"place-items":[...Z(),"baseline"]}],"place-self":[{"place-self":["auto",...Z()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:X()}],mx:[{mx:X()}],my:[{my:X()}],ms:[{ms:X()}],me:[{me:X()}],mt:[{mt:X()}],mr:[{mr:X()}],mb:[{mb:X()}],ml:[{ml:X()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[a,"screen",...G()]}],"min-w":[{"min-w":[a,"screen","none",...G()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...G()]}],h:[{h:["screen","lh",...G()]}],"min-h":[{"min-h":["screen","lh","none",...G()]}],"max-h":[{"max-h":["screen","lh",...G()]}],"font-size":[{text:["base",e,Ob,v2]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,gt,O$]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",R$,mt]}],"font-family":[{font:[p$e,mt,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,gt,mt]}],"line-clamp":[{"line-clamp":[fn,"none",gt,O$]}],leading:[{leading:[i,...N()]}],"list-image":[{"list-image":["none",gt,mt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",gt,mt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[fn,"from-font","auto",gt,v2]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[fn,"auto",gt,mt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gt,mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gt,mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:V()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:pe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Gf,gt,mt],radial:["",gt,mt],conic:[Gf,gt,mt]},f$e,d$e]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:ce()}],"gradient-via-pos":[{via:ce()}],"gradient-to-pos":[{to:ce()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ne(),"hidden","none"]}],"divide-style":[{divide:[...Ne(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...Ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[fn,gt,mt]}],"outline-w":[{outline:["",fn,Ob,v2]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",u,cN,lN]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",d,cN,lN]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[fn,v2]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",p,cN,lN]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[fn,gt,mt]}],"mix-blend":[{"mix-blend":[...Ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[fn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[gt,mt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[fn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:V()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:pe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",gt,mt]}],filter:[{filter:["","none",gt,mt]}],blur:[{blur:Je()}],brightness:[{brightness:[fn,gt,mt]}],contrast:[{contrast:[fn,gt,mt]}],"drop-shadow":[{"drop-shadow":["","none",h,cN,lN]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",fn,gt,mt]}],"hue-rotate":[{"hue-rotate":[fn,gt,mt]}],invert:[{invert:["",fn,gt,mt]}],saturate:[{saturate:[fn,gt,mt]}],sepia:[{sepia:["",fn,gt,mt]}],"backdrop-filter":[{"backdrop-filter":["","none",gt,mt]}],"backdrop-blur":[{"backdrop-blur":Je()}],"backdrop-brightness":[{"backdrop-brightness":[fn,gt,mt]}],"backdrop-contrast":[{"backdrop-contrast":[fn,gt,mt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",fn,gt,mt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[fn,gt,mt]}],"backdrop-invert":[{"backdrop-invert":["",fn,gt,mt]}],"backdrop-opacity":[{"backdrop-opacity":[fn,gt,mt]}],"backdrop-saturate":[{"backdrop-saturate":[fn,gt,mt]}],"backdrop-sepia":[{"backdrop-sepia":["",fn,gt,mt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",gt,mt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[fn,"initial",gt,mt]}],ease:[{ease:["linear","initial",v,gt,mt]}],delay:[{delay:[fn,gt,mt]}],animate:[{animate:["none",w,gt,mt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,gt,mt]}],"perspective-origin":[{"perspective-origin":_()}],rotate:[{rotate:Ge()}],"rotate-x":[{"rotate-x":Ge()}],"rotate-y":[{"rotate-y":Ge()}],"rotate-z":[{"rotate-z":Ge()}],scale:[{scale:vt()}],"scale-x":[{"scale-x":vt()}],"scale-y":[{"scale-y":vt()}],"scale-z":[{"scale-z":vt()}],"scale-3d":["scale-3d"],skew:[{skew:kt()}],"skew-x":[{"skew-x":kt()}],"skew-y":[{"skew-y":kt()}],transform:[{transform:[gt,mt,"","none","gpu","cpu"]}],"transform-origin":[{origin:_()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:T()}],"translate-x":[{"translate-x":T()}],"translate-y":[{"translate-y":T()}],"translate-z":[{"translate-z":T()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gt,mt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gt,mt]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[fn,Ob,v2,O$]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};var Yde=Y9e(v$e);function Xe(...t){return Yde(aN(t))}var B$="data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 bg-black/50",Fb=class t{_classSettable=xde({optional:!0,host:!0});userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(B$,this.userClass()));constructor(){St(()=>{let n=this._computedClass();wn(()=>this._classSettable?.setClassToCustomElement(n))})}static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmDialogOverlay",""],["brn-dialog-overlay","hlm",""]],inputs:{userClass:[1,"class","userClass"]}})};var w$e=["*"],P$=class t extends sN{static \u0275fac=(()=>{let n;return function(r){return(n||(n=Jr(t)))(r||t)}})();static \u0275cmp=je({type:t,selectors:[["hlm-dialog"]],exportAs:["hlmDialog"],features:[pt([{provide:sN,useExisting:$r(()=>t)},Tde({})]),wr],ngContentSelectors:w$e,decls:2,vars:0,consts:[["hlm",""]],template:function(e,r){e&1&&(pn(),We(0,"brn-dialog-overlay",0),Nt(1))},dependencies:[Dde,Fb],encapsulation:2,changeDetection:0})};var w2=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("ring-offset-background data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 flex items-center justify-center rounded-xs opacity-70 transition-opacity hover:opacity-100 disabled:pointer-events-none [&_ng-icon]:shrink-0",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmDialogClose",""],["","brnDialogClose","","hlm",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};function y$e(t){return t==null?"":/^\d+$/.test(t)?`${t}px`:t}var x$e=new Ee("Ng Icon Pre Processor"),k$e=new Ee("Ng Icon Post Processor");function _$e(){return R(x$e,{optional:!0})??(t=>t)}function b$e(){return R(k$e,{optional:!0})??(()=>{})}var C$e=new Ee("Ng Icon Logger"),L$=class{log(n){console.log(n)}warn(n){console.warn(n)}error(n){console.error(n)}};function M$e(){return R(C$e,{optional:!0})??new L$}var S$e=new Ee("Ng Icon Config");function T$e(){return R(S$e,{optional:!0})??{}}var E$e=new Ee("Ng Icon Loader Token");var I$e=new Ee("Ng Icon Cache Token");function D$e(){return R(E$e,{optional:!0})}function N$e(){return R(I$e,{optional:!0})}function br(t){return[{provide:$$,useFactory:(n=R($$,{optional:!0,skipSelf:!0}))=>ae(ae({},n?.reduce((e,r)=>ae(ae({},e),r),{})),t),multi:!0}]}var $$=new Ee("Icons Token");function A$e(){return R($$,{optional:!0})??[]}function R$e(t){return typeof t=="string"?Promise.resolve(t):Gs(t)?t.toPromise():t}function O$e(t){return t.replace(/([^a-zA-Z0-9])+(.)?/g,(n,e,r)=>r?r.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,n=>n.toLowerCase())}var F$e=0,Cr=(()=>{let n=class n{constructor(){this.config=T$e(),this.icons=A$e(),this.loader=D$e(),this.cache=N$e(),this.preProcessor=_$e(),this.postProcessor=b$e(),this.injector=R(Ct),this.renderer=R(vr),this.platform=R(zo),this.elementRef=R(Ft),this.uniqueId=F$e++,this.logger=M$e(),this.name=Q(),this.svg=Q(),this.size=Q(this.config.size,{transform:y$e}),this.strokeWidth=Q(this.config.strokeWidth),this.color=Q(this.config.color),St(()=>this.updateIcon()),R(new M1("aria-hidden"),{optional:!0})||this.elementRef.nativeElement.setAttribute("aria-hidden","true")}ngOnDestroy(){this.svgElement=void 0}updateIcon(){return z(this,null,function*(){let r=this.name(),o=this.svg();if(o!==void 0){this.setSvg(o);return}if(r===void 0)return;let i=O$e(r);for(let s of[...this.icons].reverse())if(s[i]){this.setSvg(s[i]);return}if(this.loader){let s=yield this.requestIconFromLoader(r);if(s!==null){this.setSvg(s);return}}this.logger.warn(`No icon named ${r} was found. You may need to import it using the withIcons function.`)})}setSvg(r){if(LG(this.platform)){this.elementRef.nativeElement.innerHTML=r,this.elementRef.nativeElement.setAttribute("data-ng-icon-ssr","");return}if(this.elementRef.nativeElement.hasAttribute("data-ng-icon-ssr")&&(this.elementRef.nativeElement.removeAttribute("data-ng-icon-ssr"),this.svgElement=this.elementRef.nativeElement.querySelector("svg")??void 0,this.elementRef.nativeElement.innerHTML===r)||(this.svgElement&&this.renderer.removeChild(this.elementRef.nativeElement,this.svgElement),r===""))return;let o=this.renderer.createElement("template");r=this.replaceIds(r),this.renderer.setProperty(o,"innerHTML",this.preProcessor(r)),this.svgElement=o.content.firstElementChild,this.postProcessor(this.svgElement),this.renderer.appendChild(this.elementRef.nativeElement,this.svgElement)}replaceIds(r){if(!r.includes("ID_PLACEHOLDER_"))return r;let o=/ID_PLACEHOLDER_(\d+)/g,i=new Map,s=new Set(r.match(o));if(s===null)return r;for(let a of s){let l=a.replace("ID_PLACEHOLDER_",""),c=`ng-icon-${this.uniqueId}-${i.size}`;i.set(l,c),r=r.replace(new RegExp(a,"g"),c)}return r}requestIconFromLoader(r){return new Promise(o=>{Vr(this.injector,()=>z(this,null,function*(){if(this.cache){let a=this.cache.get(r);if(typeof a=="string"){o(a);return}if(a instanceof Promise){let l=yield a;o(l);return}}let i=R$e(this.loader(r));this.cache?.set(r,i);let s=yield i;this.cache?.set(r,s),o(s)}))})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=je({type:n,selectors:[["ng-icon"]],hostAttrs:["role","img"],hostVars:6,hostBindings:function(o,i){o&2&&wc("--ng-icon__stroke-width",i.strokeWidth())("--ng-icon__size",i.size())("--ng-icon__color",i.color())},inputs:{name:[1,"name"],svg:[1,"svg"],size:[1,"size"],strokeWidth:[1,"strokeWidth"],color:[1,"color"]},decls:0,vars:0,template:function(o,i){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-%COMP%]{color:var(--ng-icon__color, currentColor)}}"],changeDetection:0});let t=n;return t})();var uN='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M20 6 9 17l-5-5"></path></svg>';var dN='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m6 9 6 6 6-6"></path></svg>';var Qde='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m9 18 6-6-6-6"></path></svg>';var Jde='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m18 15-6-6-6 6"></path></svg>';var epe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M12 12h.01"></path><path d="M16 12h.01"></path><path d="m17 7 5 5-5 5"></path><path d="m7 7-5 5 5 5"></path><path d="M8 12h.01"></path></svg>';var tpe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><circle cx="12" cy="12" r="10"></circle></svg>';var npe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M12 20v2"></path><path d="M12 2v2"></path><path d="M17 20v2"></path><path d="M17 2v2"></path><path d="M2 12h2"></path><path d="M2 17h2"></path><path d="M2 7h2"></path><path d="M20 12h2"></path><path d="M20 17h2"></path><path d="M20 7h2"></path><path d="M7 20v2"></path><path d="M7 2v2"></path><rect x="4" y="4" width="16" height="16" rx="2"></rect><rect x="8" y="8" width="8" height="8" rx="1"></rect></svg>';var rpe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m15 17 5-5-5-5"></path><path d="M4 18v-2a4 4 0 0 1 4-4h12"></path></svg>';var Zw='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M9 10h.01"></path><path d="M15 10h.01"></path><path d="M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z"></path></svg>';var ope='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M5 22h14"></path><path d="M5 2h14"></path><path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"></path><path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"></path></svg>';var ipe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z"></path><path d="M20.054 15.987H3.946"></path></svg>';var spe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m17 2 4 4-4 4"></path><path d="M3 11v-1a4 4 0 0 1 4-4h14"></path><path d="m7 22-4-4 4-4"></path><path d="M21 13v1a4 4 0 0 1-4 4H3"></path></svg>';var ape='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M20 18v-2a4 4 0 0 0-4-4H4"></path><path d="m9 17-5-5 5-5"></path></svg>';var lpe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><rect width="20" height="8" x="2" y="14" rx="2"></rect><path d="M6.01 18H6"></path><path d="M10.01 18H10"></path><path d="M15 10v4"></path><path d="M17.84 7.17a4 4 0 0 0-5.66 0"></path><path d="M20.66 4.34a8 8 0 0 0-11.31 0"></path></svg>';var cpe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"></path><circle cx="12" cy="12" r="3"></circle></svg>';var upe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"></path></svg>';var dpe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M16.05 10.966a5 2.5 0 0 1-8.1 0"></path><path d="m16.923 14.049 4.48 2.04a1 1 0 0 1 .001 1.831l-8.574 3.9a2 2 0 0 1-1.66 0l-8.574-3.91a1 1 0 0 1 0-1.83l4.484-2.04"></path><path d="M16.949 14.14a5 2.5 0 1 1-9.9 0L10.063 3.5a2 2 0 0 1 3.874 0z"></path><path d="M9.194 6.57a5 2.5 0 0 0 5.61 0"></path></svg>';var ppe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path><path d="M3 6h18"></path><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>';var pN='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="m19 5 3-3"></path><path d="m2 22 3-3"></path><path d="M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z"></path><path d="M7.5 13.5 10 11"></path><path d="M10.5 16.5 13 14"></path><path d="m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z"></path></svg>';var hN='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:var(--ng-icon__stroke-width, 2)"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>';var hpe={size:"base"},fpe=new Ee("HlmIconConfig");function mpe(t){return{provide:fpe,useValue:ae(ae({},hpe),t)}}function gpe(){return R(fpe,{optional:!0})??hpe}var yo=class t{_config=gpe();size=Q(this._config.size);_computedSize=de(()=>{let n=this.size();switch(n){case"xs":return"12px";case"sm":return"16px";case"base":return"24px";case"lg":return"32px";case"xl":return"48px";default:return n}});static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["ng-icon","hlmIcon",""],["ng-icon","hlm",""]],hostVars:2,hostBindings:function(e,r){e&2&&wc("--ng-icon__size",r._computedSize())},inputs:{size:[1,"size"]}})};var B$e=["*"];function P$e(t,n){if(t&1&&Ti(0,0),t&2){let e=be();Ke("ngComponentOutlet",e.component)}}function L$e(t,n){t&1&&Nt(0)}var Bb=class t{_dialogRef=R(ms);_dialogContext=Pu({optional:!0});state=de(()=>this._dialogRef?.state()??"closed");component=this._dialogContext?.$component;_dynamicComponentClass=this._dialogContext?.$dynamicComponentClass;userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 relative z-50 mx-auto grid w-full max-w-[calc(100%-2rem)] gap-4 rounded-lg border p-6 shadow-lg data-[state=closed]:duration-200 data-[state=open]:duration-200 sm:mx-0 sm:max-w-lg",this.userClass(),this._dynamicComponentClass));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-dialog-content"]],hostVars:3,hostBindings:function(e,r){e&2&&(Bt("data-state",r.state()),Le(r._computedClass()))},inputs:{userClass:[1,"class","userClass"]},features:[pt([br({lucideX:hN})])],ngContentSelectors:B$e,decls:6,vars:1,consts:[[3,"ngComponentOutlet"],["brnDialogClose","","hlm",""],[1,"sr-only"],["hlm","","size","sm","name","lucideX"]],template:function(e,r){e&1&&(pn(),It(0,P$e,1,1,"ng-container",0)(1,L$e,1,0),ne(2,"button",1)(3,"span",2),le(4,"Close"),re(),We(5,"ng-icon",3),re()),e&2&&Dt(r.component?0:1)},dependencies:[_x,Ede,w2,Cr,yo],encapsulation:2,changeDetection:0})};var Pb=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("text-muted-foreground text-sm",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmDialogDescription",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Yt([Ide])]})};var $$e=["*"],y2=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-dialog-footer"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},ngContentSelectors:$$e,decls:1,vars:0,template:function(e,r){e&1&&(pn(),Nt(0))},encapsulation:2,changeDetection:0})};var V$e=["*"],rc=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("flex flex-col gap-2 text-center sm:text-left",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-dialog-header"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},ngContentSelectors:V$e,decls:1,vars:0,template:function(e,r){e&1&&(pn(),Nt(0))},encapsulation:2,changeDetection:0})};var oc=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("text-lg leading-none font-semibold",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmDialogTitle",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Yt([Nde])]})};var Wf=class t{_brnDialogService=R(A$);open(n,e){let r=lt(ae(ae({},Ade),e??{}),{backdropClass:Gw(`${B$} ${e?.backdropClass??""}`),context:lt(ae({},e?.context&&typeof e.context=="object"?e.context:{}),{$component:n,$dynamicComponentClass:e?.contentClass})});return this._brnDialogService.open(Bb,void 0,r.context,r)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})};var Xw=(t,n)=>Math.floor(Math.random()*(n-t+1))+t;var vpe=(t,n)=>{let e=Math.random()+Math.random()+Math.random();return Math.max(1,Math.floor(t+n*(e-1.5)))};var Lb=class Lb{_state;get state(){return this._state}get enabled(){return this._state!=="disabled"&&this._models!==void 0}set enabled(n){this._state=this._models!==void 0&&n?"waiting":"disabled"}_models;get models(){return this._models?Object.values(this._models).map(({id:n,name:e})=>({id:n,name:e})):[]}_model;get model(){return this._model}set model(n){n&&this._models?this._model=n:this._model=void 0,this._state="waiting"}constructor(){this._state="disabled",this._model=void 0,this._models=void 0,nc.instance.models$.subscribe(n=>this.loadModels(n))}loadModels(n){if(n){this._models={};for(let{id:e,name:r,model:o,script:i}of n)this._models[e]={id:e,name:r,model:o,analyze:i(a$,o).analyze}}else this._state="disabled",this._models=void 0}analyze(n){try{if(this.enabled){let e=this._models?.[this._model??""];if(e){let r=e.analyze(n);typeof r=="boolean"?r?this._state="attack":this._state="safe":this._state="waiting"}}}catch(e){console.error(e)}}toObject(){return{enabled:this._state!=="disabled",model:this.model}}static fromObject(n){let e=new Lb;return n.enabled&&(e._state="waiting"),n.model&&(e._model=n.model),e}};ws([Or.SetState],Lb.prototype,"enabled",1),ws([Or.SetState],Lb.prototype,"model",1);var $b=Lb;var Yw=class Yw{_queue;_processing;node1;node2;_latency;get latency(){return this._latency}set latency(n){if(n<0)throw new Error("The latency cannot be negative");this._latency=n}_latencyVariation;get latencyVariation(){return this._latencyVariation}set latencyVariation(n){if(n<0)throw new Error("The latency variation cannot be negative");this._latencyVariation=n}_bandwidth;get bandwidth(){return this._bandwidth}set bandwidth(n){if(n<=0)throw new Error("The bandwidth cannot be negative or zero");this._bandwidth=n}_status;get status(){return this._status}_cyberShield;get cyberShield(){return this._cyberShield}constructor(n,e,r,o,i,s){this._queue=[],this._processing=!1,this.node1=n,this.node2=e,this._latency=r??Xw(0,1e3),this._latencyVariation=o??0,this._bandwidth=i??Xw(1e5,1e6),this._status=0,this._cyberShield=s??new $b}_processQueue(){return z(this,null,function*(){if(!(this._processing||this._queue.length===0)){for(this._processing=!0;this._queue.length>0;){let n=this._queue.shift(),e;n.dstIP===this.node2.ip?(this._status=1,e=this.node2):(this._status=2,e=this.node1);let r=vpe(this._latency,this._latencyVariation),o=n.totalBytes/this._bandwidth*1e3;yield new Promise(i=>setTimeout(i,r+o)),this.cyberShield.analyze(n),e.receivePacket(n)}this._processing=!1,this._status=0}})}spreadPacket(n){this._queue.push(n),this._processQueue()}toObject(){return{latency:this.latency,latencyVariation:this.latencyVariation,bandwidth:this.bandwidth,cyberShield:this.cyberShield.toObject()}}static fromObject(n,e,r){return new Yw(n,e,r.latency,r.latencyVariation,r.bandwidth,$b.fromObject(r.cyberShield))}};ws([Or.SetState],Yw.prototype,"latency",1),ws([Or.SetState],Yw.prototype,"latencyVariation",1),ws([Or.SetState],Yw.prototype,"bandwidth",1);var Qw=Yw;var Mpe=(()=>{class t{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||t)(Xt(vr),Xt(Ft))};static \u0275dir=ye({type:t})}return t})(),Spe=(()=>{class t extends Mpe{static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275dir=ye({type:t,features:[wr]})}return t})(),k2=new Ee("");var j$e={provide:k2,useExisting:$r(()=>Kf),multi:!0};function z$e(){let t=Ta()?Ta().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var H$e=new Ee(""),Kf=(()=>{class t extends Mpe{_compositionMode;_composing=!1;constructor(e,r,o){super(e,r),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!z$e())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||t)(Xt(vr),Xt(Ft),Xt(H$e,8))};static \u0275dir=ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Pe("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[pt([j$e]),wr]})}return t})();var z$=new Ee(""),H$=new Ee("");function Tpe(t){return t!=null}function Epe(t){return Ch(t)?rr(t):t}function Ipe(t){let n={};return t.forEach(e=>{n=e!=null?ae(ae({},n),e):n}),Object.keys(n).length===0?null:n}function Dpe(t,n){return n.map(e=>e(t))}function U$e(t){return!t.validate}function Npe(t){return t.map(n=>U$e(n)?n:e=>n.validate(e))}function G$e(t){if(!t)return null;let n=t.filter(Tpe);return n.length==0?null:function(e){return Ipe(Dpe(e,n))}}function U$(t){return t!=null?G$e(Npe(t)):null}function W$e(t){if(!t)return null;let n=t.filter(Tpe);return n.length==0?null:function(e){let r=Dpe(e,n).map(Epe);return ky(r).pipe(Et(Ipe))}}function G$(t){return t!=null?W$e(Npe(t)):null}function wpe(t,n){return t===null?[n]:Array.isArray(t)?[...t,n]:[t,n]}function Ape(t){return t._rawValidators}function Rpe(t){return t._rawAsyncValidators}function V$(t){return t?Array.isArray(t)?t:[t]:[]}function gN(t,n){return Array.isArray(t)?t.includes(n):t===n}function ype(t,n){let e=V$(n);return V$(t).forEach(o=>{gN(e,o)||e.push(o)}),e}function xpe(t,n){return V$(n).filter(e=>!gN(t,e))}var vN=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=U$(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=G$(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},x2=class extends vN{name;get formDirective(){return null}get path(){return null}},tl=class extends vN{_parent=null;name=null;valueAccessor=null},j$=class{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},q$e={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qKn=lt(ae({},q$e),{"[class.ng-submitted]":"isSubmitted"}),Lu=(()=>{class t extends j${constructor(e){super(e)}static \u0275fac=function(r){return new(r||t)(Xt(tl,2))};static \u0275dir=ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&no("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[wr]})}return t})();var Vb="VALID",mN="INVALID",Jw="PENDING",jb="DISABLED",qf=class{},wN=class extends qf{value;source;constructor(n,e){super(),this.value=n,this.source=e}},Hb=class extends qf{pristine;source;constructor(n,e){super(),this.pristine=n,this.source=e}},Ub=class extends qf{touched;source;constructor(n,e){super(),this.touched=n,this.source=e}},ey=class extends qf{status;source;constructor(n,e){super(),this.status=n,this.source=e}},yN=class extends qf{source;constructor(n){super(),this.source=n}},xN=class extends qf{source;constructor(n){super(),this.source=n}};function Ope(t){return(SN(t)?t.validators:t)||null}function K$e(t){return Array.isArray(t)?U$(t):t||null}function Fpe(t,n){return(SN(n)?n.asyncValidators:t)||null}function Z$e(t){return Array.isArray(t)?G$(t):t||null}function SN(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function X$e(t,n,e){let r=t.controls;if(!(n?Object.keys(r):r).length)throw new Te(1e3,"");if(!r[e])throw new Te(1001,"")}function Y$e(t,n,e){t._forEachChild((r,o)=>{if(e[o]===void 0)throw new Te(1002,"")})}var kN=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,e){this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return wn(this.statusReactive)}set status(n){wn(()=>this.statusReactive.set(n))}_status=de(()=>this.statusReactive());statusReactive=Ye(void 0);get valid(){return this.status===Vb}get invalid(){return this.status===mN}get pending(){return this.status==Jw}get disabled(){return this.status===jb}get enabled(){return this.status!==jb}errors;get pristine(){return wn(this.pristineReactive)}set pristine(n){wn(()=>this.pristineReactive.set(n))}_pristine=de(()=>this.pristineReactive());pristineReactive=Ye(!0);get dirty(){return!this.pristine}get touched(){return wn(this.touchedReactive)}set touched(n){wn(()=>this.touchedReactive.set(n))}_touched=de(()=>this.touchedReactive());touchedReactive=Ye(!1);get untouched(){return!this.touched}_events=new nt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(ype(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(ype(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(xpe(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(xpe(n,this._rawAsyncValidators))}hasValidator(n){return gN(this._rawValidators,n)}hasAsyncValidator(n){return gN(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(lt(ae({},n),{sourceControl:r})),e&&n.emitEvent!==!1&&this._events.next(new Ub(!0,r))}markAllAsDirty(n={}){this.markAsDirty({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(n))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=n.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),e&&n.emitEvent!==!1&&this._events.next(new Ub(!1,r))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(lt(ae({},n),{sourceControl:r})),e&&n.emitEvent!==!1&&this._events.next(new Hb(!1,r))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=n.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),e&&n.emitEvent!==!1&&this._events.next(new Hb(!0,r))}markAsPending(n={}){this.status=Jw;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new ey(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(lt(ae({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=jb,this.errors=null,this._forEachChild(o=>{o.disable(lt(ae({},n),{onlySelf:!0}))}),this._updateValue();let r=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new wN(this.value,r)),this._events.next(new ey(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(lt(ae({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Vb,this._forEachChild(r=>{r.enable(lt(ae({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(lt(ae({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vb||this.status===Jw)&&this._runAsyncValidator(r,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new wN(this.value,e)),this._events.next(new ey(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(lt(ae({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jb:Vb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=Jw,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:n!==!1};let r=Epe(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(n,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new ey(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,r)}_initObservables(){this.valueChanges=new cn,this.statusChanges=new cn}_calculateStatus(){return this._allControlsDisabled()?jb:this.errors?mN:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jw)?Jw:this._anyControlsHaveStatus(mN)?mN:Vb}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),o&&this._events.next(new Hb(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new Ub(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){SN(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=K$e(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=Z$e(this._rawAsyncValidators)}},_N=class extends kN{constructor(n,e,r){super(Ope(e),Fpe(r,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,r={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){Y$e(this,!0,n),Object.keys(n).forEach(r=>{X$e(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(r=>{let o=this.controls[r];o&&o.patchValue(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((r,o)=>{r.reset(n?n[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e),e?.emitEvent!==!1&&this._events.next(new xN(this))}getRawValue(){return this._reduceChildren({},(n,e,r)=>(n[r]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&n(r,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&n(r))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(n,e){let r=n;return this._forEachChild((o,i)=>{r=e(r,o,i)}),r}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var TN=new Ee("",{providedIn:"root",factory:()=>W$}),W$="always";function Q$e(t,n){return[...n.path,t]}function bN(t,n,e=W$){q$(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(t.disabled),eVe(t,n),nVe(t,n),tVe(t,n),J$e(t,n)}function kpe(t,n,e=!0){let r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),MN(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function CN(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function J$e(t,n){if(n.valueAccessor.setDisabledState){let e=r=>{n.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}function q$(t,n){let e=Ape(t);n.validator!==null?t.setValidators(wpe(e,n.validator)):typeof e=="function"&&t.setValidators([e]);let r=Rpe(t);n.asyncValidator!==null?t.setAsyncValidators(wpe(r,n.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let o=()=>t.updateValueAndValidity();CN(n._rawValidators,o),CN(n._rawAsyncValidators,o)}function MN(t,n){let e=!1;if(t!==null){if(n.validator!==null){let o=Ape(t);if(Array.isArray(o)&&o.length>0){let i=o.filter(s=>s!==n.validator);i.length!==o.length&&(e=!0,t.setValidators(i))}}if(n.asyncValidator!==null){let o=Rpe(t);if(Array.isArray(o)&&o.length>0){let i=o.filter(s=>s!==n.asyncValidator);i.length!==o.length&&(e=!0,t.setAsyncValidators(i))}}}let r=()=>{};return CN(n._rawValidators,r),CN(n._rawAsyncValidators,r),e}function eVe(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Bpe(t,n)})}function tVe(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Bpe(t,n),t.updateOn!=="submit"&&t.markAsTouched()})}function Bpe(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function nVe(t,n){let e=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}function Ppe(t,n){t==null,q$(t,n)}function rVe(t,n){return MN(t,n)}function oVe(t,n){if(!t.hasOwnProperty("model"))return!1;let e=t.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function iVe(t){return Object.getPrototypeOf(t.constructor)===Spe}function Lpe(t,n){t._syncPendingControls(),n.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function sVe(t,n){if(!n)return null;Array.isArray(n);let e,r,o;return n.forEach(i=>{i.constructor===Kf?e=i:iVe(i)?r=i:o=i}),o||r||e||null}function aVe(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}var lVe={provide:x2,useExisting:$r(()=>_2)},zb=Promise.resolve(),_2=(()=>{class t extends x2{callSetDisabledState;get submitted(){return wn(this.submittedReactive)}_submitted=de(()=>this.submittedReactive());submittedReactive=Ye(!1);_directives=new Set;form;ngSubmit=new cn;options;constructor(e,r,o){super(),this.callSetDisabledState=o,this.form=new _N({},U$(e),G$(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){zb.then(()=>{let r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),bN(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){zb.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){zb.then(()=>{let r=this._findContainer(e.path),o=new _N({});Ppe(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){zb.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){zb.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Lpe(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new yN(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(r){return new(r||t)(Xt(z$,10),Xt(H$,10),Xt(TN,8))};static \u0275dir=ye({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&Pe("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[pt([lVe]),wr]})}return t})();function _pe(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function bpe(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var $pe=class extends kN{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,e,r){super(Ope(e),Fpe(r,e)),this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),SN(e)&&(e.nonNullable||e.initialValueIsDefault)&&(bpe(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new xN(this))}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){_pe(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){_pe(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){bpe(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var cVe=t=>t instanceof $pe;var uVe={provide:tl,useExisting:$r(()=>ic)},Cpe=Promise.resolve(),ic=(()=>{class t extends tl{_changeDetectorRef;callSetDisabledState;control=new $pe;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new cn;constructor(e,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=sVe(this,i)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),oVe(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){bN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Cpe.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,o=r!==0&&wt(r);Cpe.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Q$e(e,this._parent):[e]}static \u0275fac=function(r){return new(r||t)(Xt(x2,9),Xt(z$,10),Xt(H$,10),Xt(k2,10),Xt(Br,8),Xt(TN,8))};static \u0275dir=ye({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[pt([uVe]),wr,Qr]})}return t})();var dVe={provide:k2,useExisting:$r(()=>K$),multi:!0},K$=(()=>{class t extends Spe{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275dir=ye({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&Pe("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[pt([dVe]),wr]})}return t})();var pVe={provide:x2,useExisting:$r(()=>Gb)},Gb=(()=>{class t extends x2{callSetDisabledState;get submitted(){return wn(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=de(()=>this._submittedReactive());_submittedReactive=Ye(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new cn;constructor(e,r,o){super(),this.callSetDisabledState=o,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(MN(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return bN(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){kpe(e.control||null,e,!1),aVe(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),Lpe(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new yN(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0,r={}){this.form.reset(e,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,o=this.form.get(e.path);r!==o&&(kpe(r||null,e),cVe(o)&&(bN(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);Ppe(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&rVe(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){q$(this.form,this),this._oldForm&&MN(this._oldForm,this)}static \u0275fac=function(r){return new(r||t)(Xt(z$,10),Xt(H$,10),Xt(TN,8))};static \u0275dir=ye({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&Pe("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[pt([pVe]),wr,Qr]})}return t})();var hVe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({})}return t})();var $u=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:TN,useValue:e.callSetDisabledState??W$}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({imports:[hVe]})}return t})();var fVe=200,EN=class{_letterKeyStream=new nt;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new nt;selectedItem=this._selectedItem;constructor(n,e){let r=typeof e?.debounceInterval=="number"?e.debounceInterval:fVe;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){let e=n.keyCode;n.key&&n.key.length===1?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(xo(e=>this._pressedLetters.push(e)),uh(n),Cn(()=>this._pressedLetters.length>0),Et(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let r=1;r<this._items.length+1;r++){let o=(this._selectedItemIndex+r)%this._items.length,i=this._items[o];if(!this._skipPredicateFn?.(i)&&i.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(i);break}}this._pressedLetters=[]})}};var IN=class{_items;_activeItemIndex=Ye(-1);_activeItem=Ye(null);_wrap=!1;_typeaheadSubscription=Nn.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=n=>n.disabled;constructor(n,e){this._items=n,n instanceof dd?this._itemChangesSubscription=n.changes.subscribe(r=>this._itemsChanged(r.toArray())):l1(n)&&(this._effectRef=St(()=>this._itemsChanged(n()),{injector:e}))}tabOut=new nt;change=new nt;skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new EN(e,{debounceInterval:typeof n=="number"?n:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){let e=this._activeItem();this.updateActiveItem(n),this._activeItem()!==e&&this.change.next(this._activeItemIndex())}onKeydown(n){let e=n.keyCode,o=["altKey","ctrlKey","metaKey","shiftKey"].every(i=>!n[i]||this._allowedModifierKeys.indexOf(i)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&o){this.setNextItemActive();break}else return;case 38:if(this._vertical&&o){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&o){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&o){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&o){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&o){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&o){let i=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(i>0?i:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&o){let i=this._activeItemIndex()+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(i<s?i:s-1,-1);break}else return;default:(o||so(n,"shiftKey"))&&this._typeahead?.handleKey(n);return}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){let e=this._getItemsArray(),r=typeof n=="number"?n:e.indexOf(n),o=e[r];this._activeItem.set(o??null),this._activeItemIndex.set(r),this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){let e=this._getItemsArray();for(let r=1;r<=e.length;r++){let o=(this._activeItemIndex()+n*r+e.length)%e.length,i=e[o];if(!this._skipPredicateFn(i)){this.setActiveItem(o);return}}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex()+n,n)}_setActiveItemByIndex(n,e){let r=this._getItemsArray();if(r[n]){for(;this._skipPredicateFn(r[n]);)if(n+=e,!r[n])return;this.setActiveItem(n)}}_getItemsArray(){return l1(this._items)?this._items():this._items instanceof dd?this._items.toArray():this._items}_itemsChanged(n){this._typeahead?.setItems(n);let e=this._activeItem();if(e){let r=n.indexOf(e);r>-1&&r!==this._activeItemIndex()&&(this._activeItemIndex.set(r),this._typeahead?.setCurrentSelectedItemIndex(r))}}};var zpe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qn({type:t});static \u0275inj=jn({})}return t})();var DN=(()=>{class t{ngControl=null;errorState=Ye(!1);static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t})}return t})();var NN=(()=>{class t{isInvalid(e,r){return!!(e&&e.invalid&&(e.touched||r instanceof _2&&r.submitted))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ty=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;errorState=Ye(!1);matcher=null;constructor(n,e,r,o){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=r,this._parentForm=o}updateErrorState(){let n=this.errorState(),e=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,o=this.ngControl?this.ngControl.control:null,i=r?.isInvalid(o,e)??!1;i!==n&&this.errorState.set(i)}};var mVe=0,Zf=(()=>{class t{_ngControl=R(tl,{optional:!0});id=Q(`brn-label-${++mVe}`);_isBrowser=Cs(R(zo));_element=R(Ft).nativeElement;_changes;_dataDisabled=Ye("auto");dataDisabled=this._dataDisabled.asReadonly();ngOnInit(){this._isBrowser&&(this._changes=new MutationObserver(e=>{e.forEach(r=>{if(r.attributeName!=="data-disabled")return;let o=r.target.attributes.getNamedItem(r.attributeName)?.value==="true";this._dataDisabled.set(o??"auto")})}),this._changes?.observe(this._element,{attributes:!0,childList:!0,characterData:!0}))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnLabel",""]],hostVars:9,hostBindings:function(r,o){r&2&&(zr("id",o.id()),no("ng-invalid",(o._ngControl==null?null:o._ngControl.invalid)||null)("ng-dirty",(o._ngControl==null?null:o._ngControl.dirty)||null)("ng-valid",(o._ngControl==null?null:o._ngControl.valid)||null)("ng-touched",(o._ngControl==null?null:o._ngControl.touched)||null))},inputs:{id:[1,"id"]}})}return t})();var b2=class extends IN{_origin="program";setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}};var Gpe=" ";function gVe(t,n,e){let r=RN(t,n);e=e.trim(),!r.some(o=>o.trim()===e)&&(r.push(e),t.setAttribute(n,r.join(Gpe)))}function vVe(t,n,e){let r=RN(t,n);e=e.trim();let o=r.filter(i=>i!==e);o.length?t.setAttribute(n,o.join(Gpe)):t.removeAttribute(n)}function RN(t,n){return t.getAttribute(n)?.match(/\S+/g)??[]}var Wpe="cdk-describedby-message",AN="cdk-describedby-host",Y$=0,qpe=(()=>{class t{_platform=R(Qo);_document=R(Gt);_messageRegistry=new Map;_messagesContainer=null;_id=`${Y$++}`;constructor(){R(h2).load(rN),this._id=R(_h)+"-"+Y$++}describe(e,r,o){if(!this._canBeDescribed(e,r))return;let i=X$(r,o);typeof r!="string"?(Upe(r,this._id),this._messageRegistry.set(i,{messageElement:r,referenceCount:0})):this._messageRegistry.has(i)||this._createMessageElement(r,o),this._isElementDescribedByMessage(e,i)||this._addMessageReference(e,i)}removeDescription(e,r,o){if(!r||!this._isElementNode(e))return;let i=X$(r,o);if(this._isElementDescribedByMessage(e,i)&&this._removeMessageReference(e,i),typeof r=="string"){let s=this._messageRegistry.get(i);s&&s.referenceCount===0&&this._deleteMessageElement(i)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${AN}="${this._id}"]`);for(let r=0;r<e.length;r++)this._removeCdkDescribedByReferenceIds(e[r]),e[r].removeAttribute(AN);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,r){let o=this._document.createElement("div");Upe(o,this._id),o.textContent=e,r&&o.setAttribute("role",r),this._createMessagesContainer(),this._messagesContainer.appendChild(o),this._messageRegistry.set(X$(e,r),{messageElement:o,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",r=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let i=0;i<r.length;i++)r[i].remove();let o=this._document.createElement("div");o.style.visibility="hidden",o.classList.add(e),o.classList.add("cdk-visually-hidden"),this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._messagesContainer=o}_removeCdkDescribedByReferenceIds(e){let r=RN(e,"aria-describedby").filter(o=>o.indexOf(Wpe)!=0);e.setAttribute("aria-describedby",r.join(" "))}_addMessageReference(e,r){let o=this._messageRegistry.get(r);gVe(e,"aria-describedby",o.messageElement.id),e.setAttribute(AN,this._id),o.referenceCount++}_removeMessageReference(e,r){let o=this._messageRegistry.get(r);o.referenceCount--,vVe(e,"aria-describedby",o.messageElement.id),e.removeAttribute(AN)}_isElementDescribedByMessage(e,r){let o=RN(e,"aria-describedby"),i=this._messageRegistry.get(r),s=i&&i.messageElement.id;return!!s&&o.indexOf(s)!=-1}_canBeDescribed(e,r){if(!this._isElementNode(e))return!1;if(r&&typeof r=="object")return!0;let o=r==null?"":`${r}`.trim(),i=e.getAttribute("aria-label");return o?!i||i.trim()!==o:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function X$(t,n){return typeof t=="string"?`${n||""}/${t}`:t}function Upe(t,n){t.id||(t.id=`${Wpe}-${n}-${Y$++}`)}var wVe=["viewport"],yVe=["*",[["hlm-select-scroll-up"]],[["brnSelectScrollUp"]],[["brnSelectScrollDown"]],[["hlm-select-scroll-down"]]],xVe=["*","hlm-select-scroll-up","brnSelectScrollUp","brnSelectScrollDown","hlm-select-scroll-down"];function kVe(t,n){t&1&&(Nt(0,1),Nt(1,2))}function _Ve(t,n){t&1&&Ti(0)}function bVe(t,n){t&1&&(Nt(0,3),Nt(1,4))}function CVe(t,n){t&1&&Ti(0)}var MVe=[[["hlm-select-trigger"],["","brnSelectTrigger",""]],[["label","hlmLabel",""],["label","brnLabel",""]],"*"],SVe=["hlm-select-trigger,[brnSelectTrigger]","label[hlmLabel],label[brnLabel]","*"];function TVe(t,n){if(t&1&&(ne(0,"label",1),le(1),re()),t&2){let e=be();Bt("id",e.labelId()),ee(),it(e.placeholder())}}function EVe(t,n){t&1&&Nt(0,1)}function IVe(t,n){t&1&&Nt(0,2)}var DVe=t=>({$implicit:t});function NVe(t,n){if(t&1&&Ti(0,2),t&2){let e,r=be(),o=to(5);Ke("ngTemplateOutlet",((e=r._customPlaceholderTemplate())==null?null:e.templateRef)??o)}}function AVe(t,n){if(t&1&&Ti(0,3),t&2){let e,r=be(),o=to(3);Ke("ngTemplateOutlet",((e=r._customValueTemplate())==null?null:e.templateRef)??o)("ngTemplateOutletContext",gl(2,DVe,r._select.value()))}}function RVe(t,n){if(t&1&&le(0),t&2){let e=be();it(e._value())}}function OVe(t,n){if(t&1&&le(0),t&2){let e=be();it(e.placeholder())}}var Ype=new Ee("BrnSelectContentToken");function FVe(){return R(Ype)}function BVe(t){return{provide:Ype,useExisting:t}}var Qpe=new Ee("BrnSelectToken");function BN(){return R(Qpe)}function PVe(t){return{provide:Qpe,useExisting:t}}var LVe=0,Xf=(()=>{class t{_select=BN();_content=FVe();elementRef=R(Ft);id=Q(`brn-option-${++LVe}`);value=Q();_disabled=Q(!1,{alias:"disabled",transform:wt});get disabled(){return this._disabled()}selected=de(()=>this.value()!==void 0&&this._select.isSelected(this.value()));_active=Ye(!1);checkedState=de(()=>this.selected()?"checked":"unchecked");dir=this._select.dir;select(){if(!this._disabled()){if(this._select.multiple()){this._select.toggleSelect(this.value());return}this._select.selectOption(this.value())}}getLabel(){return this.elementRef.nativeElement.textContent?.trim()??""}setInactiveStyles(){this._active.set(!1)}activate(){this._disabled()||this._content.setActiveOption(this)}focus(){this.elementRef.nativeElement.focus(),this._active.set(!0)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnOption",""]],hostAttrs:["role","option"],hostVars:7,hostBindings:function(r,o){r&1&&Pe("click",function(){return o.select()})("mouseenter",function(){return o.activate()})("blur",function(){return o.setInactiveStyles()}),r&2&&(zr("id",o.id())("tabIndex",-1),Bt("aria-selected",o.selected())("aria-disabled",o._disabled())("dir",o._select.dir())("data-active",o._active()?"":void 0)("data-disabled",o._disabled()?"":void 0))},inputs:{id:[1,"id"],value:[1,"value"],_disabled:[1,"disabled","_disabled"]}})}return t})(),ON=100,Kpe=(()=>{class t{_el=R(Ft);_selectContent=R(zs);_endReached=new nt;_destroyRef=R(gr);startEmittingEvents(){let e=ch(this._el.nativeElement,"mouseleave");o4(100).pipe(ln(e),ln(this._endReached),ua(this._destroyRef)).subscribe(()=>this._selectContent.moveFocusUp())}stopEmittingEvents(){this._endReached.next(!0)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnSelectScrollUp",""],["brn-select-scroll-up"],["hlm-select-scroll-up",5,"noHlm"]],hostAttrs:["aria-hidden","true"],hostBindings:function(r,o){r&1&&Pe("mouseenter",function(){return o.startEmittingEvents()})}})}return t})(),Zpe=(()=>{class t{_el=R(Ft);_selectContent=R(zs);_endReached=new nt;_destroyRef=R(gr);startEmittingEvents(){let e=ch(this._el.nativeElement,"mouseleave");o4(100).pipe(ln(e),ln(this._endReached),ua(this._destroyRef)).subscribe(()=>this._selectContent.moveFocusDown())}stopEmittingEvents(){this._endReached.next(!0)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnSelectScrollDown",""],["brn-select-scroll-down"],["hlm-select-scroll-down",5,"noHlm"]],hostAttrs:["aria-hidden","true"],hostBindings:function(r,o){r&1&&Pe("mouseenter",function(){return o.startEmittingEvents()})}})}return t})(),zs=(()=>{class t{_elementRef=R(Ft);_injector=R(Ct);_select=BN();_canScrollUp=Ye(!1);_canScrollDown=Ye(!1);_viewport=_s.required("viewport");_scrollUpBtn=wd(Kpe);_scrollDownBtn=wd(Zpe);_options=F6(Xf,{descendants:!0});keyManager=null;constructor(){St(()=>{this._select.open()&&Si(()=>this.updateArrowDisplay(),{injector:this._injector})})}ngAfterContentInit(){this.keyManager=new b2(this._options,this._injector).withHomeAndEnd().withVerticalOrientation().withTypeAhead().withWrap().skipPredicate(e=>e.disabled),St(()=>{let e=this._select.open(),r=this._options();if(!e||!r.length)return;let o=r.find(i=>i.selected());o?Si(()=>{this.keyManager?.setActiveItem(o)},{injector:this._injector}):Si(()=>{this.keyManager?.setFirstItemActive()},{injector:this._injector})},{injector:this._injector})}updateArrowDisplay(){let{scrollTop:e,scrollHeight:r,clientHeight:o}=this._viewport().nativeElement;this._canScrollUp.set(e>0);let i=r-o;this._canScrollDown.set(Math.ceil(e)<i)}handleScroll(){this.updateArrowDisplay()}focusList(){this._elementRef.nativeElement.focus()}moveFocusUp(){this._viewport().nativeElement.scrollBy({top:-ON,behavior:"smooth"}),this._viewport().nativeElement.scrollTop===0&&this._scrollUpBtn()?.stopEmittingEvents()}moveFocusDown(){this._viewport().nativeElement.scrollBy({top:ON,behavior:"smooth"});let e=this._elementRef.nativeElement.scrollHeight,r=this._viewport().nativeElement.scrollTop;e+r+ON>this._viewport().nativeElement.scrollHeight+ON/2&&this._scrollDownBtn()?.stopEmittingEvents()}setActiveOption(e){let r=this._options().findIndex(o=>o===e);r!==-1&&this.keyManager?.setActiveItem(r)}selectActiveItem(e){e.preventDefault();let r=this.keyManager?.activeItem;r&&this._select.toggleSelect(r.value())}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["brn-select-content"],["hlm-select-content",5,"noHlm"]],contentQueries:function(r,o,i){r&1&&(Sa(i,o._scrollUpBtn,Kpe,5),Sa(i,o._scrollDownBtn,Zpe,5),Sa(i,o._options,Xf,5)),r&2&&bo(3)},viewQuery:function(r,o){r&1&&es(o._viewport,wVe,5),r&2&&bo()},hostAttrs:["role","listbox","aria-orientation","vertical",1,"flex","flex-col","outline-none","pointer-events-auto"],hostVars:6,hostBindings:function(r,o){r&1&&Pe("keydown",function(s){return o.keyManager==null?null:o.keyManager.onKeydown(s)})("keydown.enter",function(s){return o.selectActiveItem(s)})("keydown.space",function(s){return o.selectActiveItem(s)}),r&2&&(zr("id",o._select.id()+"--content"),Bt("aria-multiselectable",o._select.multiple())("aria-disabled",o._select.disabled()||o._select.formDisabled())("aria-labelledBy",o._select.labelId())("aria-controlledBy",o._select.id()+"--trigger")("dir",o._select.dir()))},features:[pt([BVe(t)])],ngContentSelectors:xVe,decls:9,vars:2,consts:[["scrollUp",""],["viewport",""],["scrollDown",""],[4,"ngTemplateOutlet"],["data-brn-select-viewport","",1,"relative","-mb-0.5","min-h-9","w-full","flex-1","overflow-auto","pb-0.5","[-ms-overflow-style:none]","[-webkit-overflow-scrolling:touch]","[scrollbar-width:none]","[&::-webkit-scrollbar]:hidden",3,"scroll"]],template:function(r,o){if(r&1){let i=mn();pn(yVe),eo(0,kVe,2,0,"ng-template",null,0,ri)(2,_Ve,1,0,"ng-container",3),ne(3,"div",4,1),Pe("scroll",function(){return He(i),Ue(o.handleScroll())}),Nt(5),re(),eo(6,bVe,2,0,"ng-template",null,2,ri)(8,CVe,1,0,"ng-container",3)}if(r&2){let i=to(1),s=to(7);ee(2),Ke("ngTemplateOutlet",o._canScrollUp()&&o._scrollUpBtn()?i:null),ee(6),Ke("ngTemplateOutlet",o._canScrollDown()&&o._scrollDownBtn()?s:null)}},dependencies:[S1],encapsulation:2,changeDetection:0})}return t})(),$Ve=0,nl=(()=>{class t{_defaultErrorStateMatcher=R(NN);_parentForm=R(_2,{optional:!0});_injector=R(Ct);_parentFormGroup=R(Gb,{optional:!0});ngControl=R(tl,{optional:!0,self:!0});id=Q(`brn-select-${++$Ve}`);multiple=Q(!1,{transform:wt});placeholder=Q("");disabled=Q(!1,{transform:wt});dir=Q("ltr");closeDelay=Q(100,{transform:Di});open=Ii(!1);value=Ii();valueChange=Kn();compareWith=Q((e,r)=>e===r);formDisabled=Ye(!1);_selectLabel=wd(Zf,{descendants:!1});_selectContent=wd.required(zs);options=F6(Xf,{descendants:!0});selectedOptions=de(()=>this.options().filter(e=>e.selected()));_overlayDir=_s.required(Hw);trigger=Ye(null);triggerWidth=Ye(0);_delayedExpanded=Rb(wde(this.open).pipe(Sr(e=>e?ct(e):ct(e).pipe(O5(this.closeDelay()))),ua()),{initialValue:!1});state=de(()=>this.open()?"open":"closed");_positionChanges$=new nt;side=Rb(this._positionChanges$.pipe(Et(e=>e.connectionPair.originY==="center"?e.connectionPair.originX==="start"?"left":"right":e.connectionPair.originY)),{initialValue:"bottom"});labelId=de(()=>this._selectLabel()?.id??`${this.id()}--label`);_onChange=()=>{};_onTouched=()=>{};_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}];errorStateTracker;errorState=de(()=>this.errorStateTracker.errorState());constructor(){this.ngControl!==null&&(this.ngControl.valueAccessor=this),this.errorStateTracker=new ty(this._defaultErrorStateMatcher,this.ngControl,this._parentFormGroup,this._parentForm)}ngDoCheck(){this.errorStateTracker.updateErrorState()}toggle(){this.open()?this.hide():this.show()}show(){this.open()||this.disabled()||this.formDisabled()||this.options()?.length==0||this.open.set(!0)}hide(){this.open()&&(this.open.set(!1),this._onTouched(),this.trigger()?.focus())}writeValue(e){this.value.set(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.formDisabled.set(e)}selectOption(e){if(this.multiple()){let r=this.value(),o=r?[...r,e]:[e];this.value.set(o),this.valueChange.emit(o)}else this.value.set(e),this.valueChange.emit(e);this._onChange?.(this.value()),this.multiple()||this.hide()}deselectOption(e){if(this.multiple()){let o=this.value().filter(i=>!this.compareWith()(i,e));this.value.set(o),this.valueChange.emit(o)}else this.value.set(null),this.valueChange.emit(null);this._onChange?.(this.value())}toggleSelect(e){this.isSelected(e)?this.deselectOption(e):this.selectOption(e)}isSelected(e){let r=this.value();return Array.isArray(r)?r.some(o=>this.compareWith()(o,e)):e!==void 0?this.compareWith()(r,e):!1}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["brn-select"],["hlm-select"]],contentQueries:function(r,o,i){r&1&&(Sa(i,o._selectLabel,Zf,4),Sa(i,o._selectContent,zs,5),Sa(i,o.options,Xf,5)),r&2&&bo(3)},viewQuery:function(r,o){r&1&&es(o._overlayDir,Hw,5),r&2&&bo()},inputs:{id:[1,"id"],multiple:[1,"multiple"],placeholder:[1,"placeholder"],disabled:[1,"disabled"],dir:[1,"dir"],closeDelay:[1,"closeDelay"],open:[1,"open"],value:[1,"value"],compareWith:[1,"compareWith"]},outputs:{open:"openChange",value:"valueChange",valueChange:"valueChange"},features:[pt([Cde(()=>t),D$(()=>t),PVe(t),{provide:DN,useExisting:$r(()=>t)}])],ngContentSelectors:SVe,decls:6,vars:5,consts:[["trigger","cdkOverlayOrigin"],[2,"display","none"],["cdk-overlay-origin","",3,"click"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","detach","positionChange","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"]],template:function(r,o){if(r&1){let i=mn();pn(MVe),It(0,TVe,2,2,"label",1)(1,EVe,1,0),ne(2,"div",2,0),Pe("click",function(){return He(i),Ue(o.toggle())}),Nt(4),re(),eo(5,IVe,1,0,"ng-template",3),Pe("backdropClick",function(){return He(i),Ue(o.hide())})("detach",function(){return He(i),Ue(o.hide())})("positionChange",function(a){return He(i),Ue(o._positionChanges$.next(a))})}if(r&2){let i=to(3);Dt(!o._selectLabel()&&o.placeholder()?0:1),ee(5),Ke("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",o._delayedExpanded())("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayWidth",o.triggerWidth()>0?o.triggerWidth():"auto")}},dependencies:[Tb,Hw,bb,zpe],encapsulation:2,changeDetection:0})}return t})(),Q$=(()=>{class t{labelledBy=Ye("");static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnSelectGroup",""]],hostAttrs:["role","group"],hostVars:1,hostBindings:function(r,o){r&2&&Bt("aria-labelledby",o.labelledBy())}})}return t})(),Jpe=(()=>{class t{_group=R(Q$,{optional:!0});_label=R(Zf,{host:!0});constructor(){this._group?.labelledBy.set(this._label.id())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnSelectLabel",""]],features:[Yt([Zf])]})}return t})(),Xpe=(()=>{class t{templateRef=R(ti);static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnSelectPlaceholder",""],["","hlmSelectPlaceholder",""]]})}return t})(),ehe=(()=>{class t{_elementRef=R(Ft);_changeDetector=R(Br);_select=BN();_ngControl=R(tl,{optional:!0});_platform=R(zo);_triggerId=de(()=>`${this._select.id()}--trigger`);_contentId=de(()=>`${this._select.id()}--content`);_disabled=de(()=>this._select.disabled()||this._select.formDisabled());_labelledBy=de(()=>{let e=this._select.value();return Array.isArray(e)&&e.length>0?`${this._select.labelId()} ${this._select.id()}--value`:this._select.labelId()});_resizeObserver;_statusChangedSubscription;constructor(){this._select.trigger.set(this)}ngOnInit(){this._ngControl&&(this._statusChangedSubscription=this._ngControl.statusChanges?.subscribe(()=>{this._changeDetector.markForCheck()}))}ngAfterViewInit(){this._select.triggerWidth.set(this._elementRef.nativeElement.offsetWidth),Cs(this._platform)&&(this._resizeObserver=new ResizeObserver(()=>this._select.triggerWidth.set(this._elementRef.nativeElement.offsetWidth)),this._resizeObserver.observe(this._elementRef.nativeElement))}ngOnDestroy(){this._resizeObserver?.disconnect(),this._statusChangedSubscription?.unsubscribe()}focus(){this._elementRef.nativeElement.focus()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnSelectTrigger",""]],hostAttrs:["type","button","role","combobox","aria-autocomplete","none"],hostVars:18,hostBindings:function(r,o){r&1&&Pe("keydown.ArrowDown",function(){return o._select.show()}),r&2&&(zr("disabled",o._disabled()),Bt("id",o._triggerId())("aria-expanded",o._select.open())("aria-controls",o._contentId())("aria-labelledBy",o._labelledBy())("dir",o._select.dir()),no("ng-invalid",(o._ngControl==null?null:o._ngControl.invalid)||null)("ng-dirty",(o._ngControl==null?null:o._ngControl.dirty)||null)("ng-valid",(o._ngControl==null?null:o._ngControl.valid)||null)("ng-touched",(o._ngControl==null?null:o._ngControl.touched)||null)("ng-untouched",(o._ngControl==null?null:o._ngControl.untouched)||null)("ng-pristine",(o._ngControl==null?null:o._ngControl.pristine)||null))}})}return t})(),FN=(()=>{class t{templateRef=R(ti);static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnSelectValue",""],["","hlmSelectValue",""]]})}return t})(),Vu=(()=>{class t{_select=BN();id=de(()=>`${this._select.id()}--value`);placeholder=de(()=>this._select.placeholder());_showPlaceholder=de(()=>this._value()===null||this._value()===void 0||this._value()==="");_customValueTemplate=wd(FN,{descendants:!0});_customPlaceholderTemplate=wd(Xpe,{descendants:!0});_value=de(()=>{let e=this._values();if(e.length===0)return null;let o=e.filter(s=>this._select.options().some(a=>this._select.compareWith()(a.value(),s))).map(s=>this._select.options().find(a=>this._select.compareWith()(a.value(),s)));if(o.length===0)return null;let i=o.map(s=>s?.getLabel());return this._select.dir()==="rtl"&&i.reverse(),this.transformFn()(i)});_values=de(()=>Array.isArray(this._select.value())?this._select.value():[this._select.value()]);transformFn=Q(e=>(e??[]).join(", "));static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["brn-select-value"],["hlm-select-value"]],contentQueries:function(r,o,i){r&1&&(Sa(i,o._customValueTemplate,FN,5),Sa(i,o._customPlaceholderTemplate,Xpe,5)),r&2&&bo(2)},hostAttrs:[1,"line-clamp-1","whitespace-nowrap","pointer-events-none"],hostVars:2,hostBindings:function(r,o){r&2&&(zr("id",o.id()),Bt("data-placeholder",o._showPlaceholder()?"":null))},inputs:{transformFn:[1,"transformFn"]},decls:6,vars:1,consts:[["defaultValueTemplate",""],["defaultPlaceholderTemplate",""],[3,"ngTemplateOutlet"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,o){r&1&&(It(0,NVe,1,1,"ng-container",2)(1,AVe,1,4,"ng-container",3),eo(2,RVe,1,1,"ng-template",null,0,ri)(4,OVe,1,1,"ng-template",null,1,ri)),r&2&&Dt(o._showPlaceholder()?0:1)},dependencies:[S1],encapsulation:2,changeDetection:0})}return t})();var the=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,nhe=aN,ju=(t,n)=>e=>{var r;if(n?.variants==null)return nhe(t,e?.class,e?.className);let{variants:o,defaultVariants:i}=n,s=Object.keys(o).map(c=>{let u=e?.[c],d=i?.[c];if(u===null)return null;let p=the(u)||the(d);return o[c][p]}),a=e&&Object.entries(e).reduce((c,u)=>{let[d,p]=u;return p===void 0||(c[d]=p),c},{}),l=n==null||(r=n.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let f=u,{class:d,className:p}=f,h=tm(f,["class","className"]);return Object.entries(h).every(m=>{let[g,v]=m;return Array.isArray(v)?v.includes(ae(ae({},i),a)[g]):ae(ae({},i),a)[g]===v})?[...c,d,p]:c},[]);return nhe(t,s,l,e?.class,e?.className)};var VVe=ju("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input focus-visible:border-ring focus-visible:ring-ring/50 flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:ring-[3px] disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",{variants:{error:{auto:"[&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:ring-destructive/20 dark:[&.ng-invalid.ng-touched]:ring-destructive/40",true:"border-destructive focus-visible:border-destructive focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40"}},defaultVariants:{error:"auto"}}),eh=class t{_injector=R(Ct);_additionalClasses=Ye("");_errorStateTracker;_defaultErrorStateMatcher=R(NN);_parentForm=R(_2,{optional:!0});_parentFormGroup=R(Gb,{optional:!0});userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(VVe({error:this._state().error}),this.userClass(),this._additionalClasses()));error=Q("auto");_state=Co(()=>({error:this.error()}));ngControl=this._injector.get(tl,null);errorState=de(()=>this._errorStateTracker.errorState());constructor(){this._errorStateTracker=new ty(this._defaultErrorStateMatcher,this.ngControl,this._parentFormGroup,this._parentForm),St(()=>{let n=this._errorStateTracker.errorState();wn(()=>{if(this.ngControl){let e=n&&this.ngControl.invalid&&(this.ngControl.touched||this.ngControl.dirty);this._errorStateTracker.errorState.set(!!e),this.setError(e?!0:"auto")}})})}ngDoCheck(){this._errorStateTracker.updateErrorState()}setError(n){this._state.set({error:n})}setClass(n){this._additionalClasses.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmInput",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"],error:[1,"error"]},features:[pt([{provide:DN,useExisting:$r(()=>t)}])]})};var da=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50 peer-data-[disabled]:cursor-not-allowed peer-data-[disabled]:opacity-50 has-[[disabled]]:cursor-not-allowed has-[[disabled]]:opacity-50",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmLabel",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Yt([{directive:Zf,inputs:["id","id"]}])]})};var gs=class t{userClass=Q("",{alias:"class"});stickyLabels=Q(!1,{transform:wt});_stateProvider=Mde({optional:!0});_sideProvider=bde({optional:!0});_computedClass=de(()=>Xe("border-border bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 w-full min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md data-[side=bottom]:top-[2px] data-[side=top]:bottom-[2px]",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmSelectContent",""],["hlm-select-content"]],hostVars:4,hostBindings:function(e,r){e&2&&(Bt("data-state",(r._stateProvider==null?null:r._stateProvider.state())??"open")("data-side",(r._sideProvider==null?null:r._sideProvider.side())??"bottom"),Le(r._computedClass()))},inputs:{userClass:[1,"class","userClass"],stickyLabels:[1,"stickyLabels"]}})};var eV=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmSelectGroup",""],["hlm-select-group"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Yt([Q$])]})};var tV=class t{_selectContent=R(gs);_stickyLabels=de(()=>this._selectContent.stickyLabels());userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("text-muted-foreground px-2 py-1.5 text-xs",this._stickyLabels()?"bg-popover sticky top-0 z-[2] block":"",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmSelectLabel",""],["hlm-select-label"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Yt([Jpe])]})};var jVe=["*"];function zVe(t,n){t&1&&We(0,"ng-icon",1)}var pa=class t{_brnSelectOption=R(Xf,{host:!0});userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("data-[active]:bg-accent data-[active]:text-accent-foreground [&>ng-icon]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2 [&>ng-icon]:pointer-events-none [&>ng-icon]:size-4 [&>ng-icon]:shrink-0",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-option"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[pt([br({lucideCheck:uN})]),Yt([{directive:Xf,inputs:["disabled","disabled","value","value"]}])],ngContentSelectors:jVe,decls:3,vars:1,consts:[[1,"absolute","right-2","flex","size-3.5","items-center","justify-center"],["hlm","","size","sm","aria-hidden","true","name","lucideCheck"]],template:function(e,r){e&1&&(pn(),ne(0,"span",0),It(1,zVe,1,0,"ng-icon",1),re(),Nt(2)),e&2&&(ee(),Dt(r._brnSelectOption.selected()?1:-1))},dependencies:[Cr,yo],encapsulation:2,changeDetection:0})};var nV=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("flex cursor-default items-center justify-center py-1",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-select-scroll-down"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[pt([br({lucideChevronDown:dN})])],decls:1,vars:0,consts:[["hlm","","size","sm","name","lucideChevronDown",1,"ml-2"]],template:function(e,r){e&1&&We(0,"ng-icon",0)},dependencies:[Cr,yo],encapsulation:2,changeDetection:0})};var rV=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("flex cursor-default items-center justify-center py-1",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-select-scroll-up"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[pt([br({lucideChevronUp:Jde})])],decls:1,vars:0,consts:[["hlm","","size","sm","name","lucideChevronUp",1,"ml-2"]],template:function(e,r){e&1&&We(0,"ng-icon",0)},dependencies:[Cr,yo],encapsulation:2,changeDetection:0})};var HVe=["*",[["ng-icon"]]],UVe=["*","ng-icon"];function GVe(t,n){t&1&&Nt(0,1)}function WVe(t,n){t&1&&We(0,"ng-icon",2)}var qVe=ju("border-input [&>ng-icon]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 [&>ng-icon]:pointer-events-none [&>ng-icon]:size-4 [&>ng-icon]:shrink-0",{variants:{error:{auto:"[&.ng-invalid.ng-touched]:text-destructive [&.ng-invalid.ng-touched]:border-destructive [&.ng-invalid.ng-touched]:focus-visible:ring-destructive/20 dark:[&.ng-invalid.ng-touched]:focus-visible:ring-destructive/40",true:"text-destructive border-destructive focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40"}},defaultVariants:{error:"auto"}}),ha=class t{_icon=wd(yo);_brnSelect=R(nl,{optional:!0});userClass=Q("",{alias:"class"});size=Q("default");_computedClass=de(()=>Xe(qVe({error:this._brnSelect?.errorState()}),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-select-trigger"]],contentQueries:function(e,r,o){e&1&&Sa(o,r._icon,yo,5),e&2&&bo()},inputs:{userClass:[1,"class","userClass"],size:[1,"size"]},features:[pt([br({lucideChevronDown:dN})])],ngContentSelectors:UVe,decls:5,vars:4,consts:[["button",""],["hlmInput","","brnSelectTrigger","","type","button"],["hlm","","size","sm","name","lucideChevronDown",1,"ml-2","flex-none"]],template:function(e,r){e&1&&(pn(HVe),ne(0,"button",1,0),Nt(2),It(3,GVe,1,0)(4,WVe,1,0,"ng-icon",2),re()),e&2&&(Le(r._computedClass()),Bt("data-size",r.size()),ee(3),Dt(r._icon()?3:4))},dependencies:[ehe,Cr,yo],encapsulation:2,changeDetection:0})};var fa=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("data-[placeholder]:text-muted-foreground line-clamp-1 flex items-center gap-2 truncate",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["hlm-select-value"],["","hlmSelectValue",""],["brn-select-value","hlm",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var KVe=["switch"],ZVe=()=>({display:"contents"}),XVe=[[["brn-switch-thumb"]]],YVe=["brn-switch-thumb"],QVe={provide:k2,useExisting:$r(()=>iV),multi:!0},oV="-switch",JVe=0,iV=(()=>{class t{_destroyRef=R(gr);_renderer=R(vr);_isBrowser=Cs(R(zo));_elementRef=R(Ft);_focusMonitor=R(Qp);_cdr=R(Br);_document=R(Gt);_focusVisible=Ye(!1);_focused=Ye(!1);checked=Ii(!1);checkedChange=Kn();id=Q(++JVe+"");name=Q(null);class=Q(null);ariaLabel=Q(null,{alias:"aria-label"});ariaLabelledby=Q(null,{alias:"aria-labelledby"});mutableAriaLabelledby=Co(()=>this.ariaLabelledby());ariaDescribedby=Q(null,{alias:"aria-describedby"});required=Q(!1,{transform:wt});disabled=Q(!1,{transform:wt});tabIndex=Q(0);touched=Kn();_onChange=()=>{};_onTouched=()=>{};switch=_s.required("switch");_state=de(()=>{let e=this.name(),r=this.id();return{disabled:Ye(this.disabled()),name:e?e+oV:null,id:r?r+oV:null}});constructor(){St(()=>{let e=this._state(),r=e.disabled();if(!this._elementRef.nativeElement||!this._isBrowser)return;let o=e.id+"-label",i=this.getSwitchButtonId(e.id),s=this._elementRef.nativeElement.closest("label")??this._document.querySelector(`label[for="${i}"]`);if(!s)return;let a=s.id;this._renderer.setAttribute(s,"data-disabled",r?"true":"false"),this.mutableAriaLabelledby.set(a||o),(!a||a.length===0)&&this._renderer.setAttribute(s,"id",o)})}toggle(){this._state().disabled()||(this._onTouched(),this.touched.emit(),this.checked.update(e=>!e),this._onChange(this.checked()),this.checkedChange.emit(this.checked()))}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).pipe(ua(this._destroyRef)).subscribe(e=>{e&&this._focused.set(!0),(e==="keyboard"||e==="program")&&(this._focusVisible.set(!0),this._cdr.markForCheck()),e||Promise.resolve().then(()=>{this._focusVisible.set(!1),this._focused.set(!1),this._onTouched(),this.touched.emit(),this._cdr.markForCheck()})}),this.switch()&&(this.switch().nativeElement.value=this.checked()?"on":"off",this.switch().nativeElement.dispatchEvent(new Event("change")))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}getSwitchButtonId(e){return e?e.replace(oV,""):null}writeValue(e){this.checked.set(!!e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._state().disabled.set(e),this._cdr.markForCheck()}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["brn-switch"]],viewQuery:function(r,o){r&1&&es(o.switch,KVe,5),r&2&&bo()},hostVars:12,hostBindings:function(r,o){r&2&&(Bt("id",o._state().id)("name",o._state().name)("aria-labelledby",null)("aria-label",null)("aria-describedby",null)("data-state",o.checked()?"checked":"unchecked")("data-focus-visible",o._focusVisible())("data-focus",o._focused())("data-disabled",o._state().disabled()),ks(Dm(11,ZVe)))},inputs:{checked:[1,"checked"],id:[1,"id"],name:[1,"name"],class:[1,"class"],ariaLabel:[1,"aria-label","ariaLabel"],ariaLabelledby:[1,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[1,"aria-describedby","ariaDescribedby"],required:[1,"required"],disabled:[1,"disabled"],tabIndex:[1,"tabIndex"]},outputs:{checked:"checkedChange",checkedChange:"checkedChange",touched:"touched"},features:[pt([QVe])],ngContentSelectors:YVe,decls:3,vars:15,consts:[["switch",""],["role","switch","type","button",3,"click","id","name","value","disabled","tabIndex"]],template:function(r,o){if(r&1){let i=mn();pn(XVe),Ca(0,"button",1,0),yM("click",function(a){return He(i),a.preventDefault(),Ue(o.toggle())}),Nt(2),Ma()}r&2&&(Le(o.class()),zr("id",o.getSwitchButtonId(o._state().id)??"")("name",o.getSwitchButtonId(o._state().name)??"")("value",o.checked()?"on":"off")("disabled",o._state().disabled())("tabIndex",o.tabIndex()),Bt("aria-checked",o.checked())("aria-label",o.ariaLabel()||null)("aria-labelledby",o.mutableAriaLabelledby()||null)("aria-describedby",o.ariaDescribedby()||null)("data-state",o.checked()?"checked":"unchecked")("data-focus-visible",o._focusVisible())("data-focus",o._focused())("data-disabled",o._state().disabled()))},encapsulation:2,changeDetection:0})}return t})(),rhe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["brn-switch-thumb"]],hostAttrs:["role","presentation"],hostBindings:function(r,o){r&1&&Pe("click",function(s){return s.preventDefault()})},decls:0,vars:0,template:function(r,o){},encapsulation:2,changeDetection:0})}return t})();var Yb=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("bg-background dark:group-data-[state=unchecked]:bg-foreground dark:group-data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform group-data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["brn-switch-thumb","hlm",""],["","hlmSwitchThumb",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var eje={provide:k2,useExisting:$r(()=>ny),multi:!0},ny=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 group inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] data-[disabled=true]:cursor-not-allowed data-[disabled=true]:opacity-50",this.userClass()));checked=Ii(!1);checkedChange=Kn();disabled=Q(!1,{transform:wt});id=Q(null);ariaLabel=Q(null,{alias:"aria-label"});ariaLabelledby=Q(null,{alias:"aria-labelledby"});ariaDescribedby=Q(null,{alias:"aria-describedby"});_disabled=Co(this.disabled);_onChange;_onTouched;handleChange(n){this.checked.set(n),this._onChange?.(n),this.checkedChange.emit(n)}writeValue(n){this.checked.set(!!n)}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this._disabled.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-switch"]],hostAttrs:[1,"contents"],hostVars:4,hostBindings:function(e,r){e&2&&Bt("id",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{userClass:[1,"class","userClass"],checked:[1,"checked"],disabled:[1,"disabled"],id:[1,"id"],ariaLabel:[1,"aria-label","ariaLabel"],ariaLabelledby:[1,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[1,"aria-describedby","ariaDescribedby"]},outputs:{checked:"checkedChange",checkedChange:"checkedChange"},features:[pt([eje])],decls:2,vars:8,consts:[[3,"checkedChange","touched","checked","disabled","id","aria-label","aria-labelledby","aria-describedby"],["hlm",""]],template:function(e,r){e&1&&(ne(0,"brn-switch",0),Pe("checkedChange",function(i){return r.handleChange(i)})("touched",function(){return r._onTouched==null?null:r._onTouched()}),We(1,"brn-switch-thumb",1),re()),e&2&&(Le(r._computedClass()),Ke("checked",r.checked())("disabled",r._disabled())("id",r.id()),wM("aria-label",r.ariaLabel())("aria-labelledby",r.ariaLabelledby())("aria-describedby",r.ariaDescribedby()))},dependencies:[rhe,iV,Yb],encapsulation:2,changeDetection:0})};function nje(t,n){if(t&1&&(ne(0,"hlm-option",12),le(1),re()),t&2){let e=n.$implicit;Ke("value",e.id),ee(),Ze(" ",e.name," ")}}function rje(t,n){if(t&1){let e=mn();ne(0,"div",2)(1,"label",3),le(2),Me(3,"translate"),re(),ne(4,"brn-select",9),Me(5,"translate"),fi("ngModelChange",function(o){He(e);let i=be();return Ei(i.connection.cyberShield.model,o)||(i.connection.cyberShield.model=o),Ue(o)}),ne(6,"hlm-select-trigger",10),We(7,"hlm-select-value",11),re(),ne(8,"hlm-select-content"),uo(9,nje,2,2,"hlm-option",12,Ji),re()()()}if(t&2){let e=be();ee(2),it(Se(3,4,"MODEL")),ee(2),hi("ngModel",e.connection.cyberShield.model),Ke("disabled",e.connection.cyberShield.models.length===0)("placeholder",Se(5,6,"SELECT_MODEL")),ee(5),po(e.context.connection.cyberShield.models)}}var PN=class t{Math=Math;context=Pu();connection=this.context.connection;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["app-edit-connection-dialog"]],hostAttrs:[1,"min-w-96","flex","flex-col","gap-4"],decls:27,vars:21,consts:[["hlmDialogTitle",""],[1,"grid","gap-4"],[1,"grid","grid-cols-4","items-center","gap-4"],["hlmLabel","",1,"justify-end"],["hlmInput","","type","number","placeholder","ms",1,"col-span-3",3,"ngModelChange","ngModel"],["hlmInput","","type","number",1,"col-span-3",3,"ngModelChange","ngModel"],["hlmInput","","type","number","placeholder","Bytes/s",1,"col-span-3",3,"ngModelChange","ngModel"],[1,"col-span-3","inline-flex","items-center","justify-end"],[3,"ngModelChange","ngModel","disabled"],[1,"col-span-3","inline-block","w-full",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"w-full"],[1,"block"],[3,"value"]],template:function(e,r){e&1&&(ne(0,"hlm-dialog-header")(1,"h3",0),le(2),Me(3,"translate"),re()(),ne(4,"div",1)(5,"div",2)(6,"label",3),le(7),Me(8,"translate"),re(),ne(9,"input",4),Pe("ngModelChange",function(i){return r.connection.latency=r.Math.max(i,0)}),re()(),ne(10,"div",2)(11,"label",3),le(12),Me(13,"translate"),re(),ne(14,"input",5),Pe("ngModelChange",function(i){return r.connection.latencyVariation=r.Math.max(i,0)}),re()(),ne(15,"div",2)(16,"label",3),le(17),Me(18,"translate"),re(),ne(19,"input",6),Pe("ngModelChange",function(i){return r.connection.bandwidth=r.Math.max(i,1)}),re()(),ne(20,"div",2)(21,"label",3),le(22),Me(23,"translate"),re(),ne(24,"div",7)(25,"hlm-switch",8),fi("ngModelChange",function(i){return Ei(r.connection.cyberShield.enabled,i)||(r.connection.cyberShield.enabled=i),i}),re()()(),It(26,rje,11,8,"div",2),re()),e&2&&(ee(2),it(Se(3,11,"MODIFY_CONNECTION")),ee(5),it(Se(8,13,"LATENCY")),ee(2),Ke("ngModel",r.connection.latency),ee(3),it(Se(13,15,"VARIABILITY")),ee(2),Ke("ngModel",r.connection.latencyVariation),ee(3),it(Se(18,17,"BANDWIDTH")),ee(2),Ke("ngModel",r.connection.bandwidth),ee(3),it(Se(23,19,"CYBER_SHIELD")),ee(3),hi("ngModel",r.connection.cyberShield.enabled),Ke("disabled",r.connection.cyberShield.models.length===0),ee(),Dt(r.connection.cyberShield.enabled?26:-1))},dependencies:[xr,$u,Kf,K$,Lu,ic,To,nl,zs,Vu,rc,oc,eh,da,gs,ha,pa,fa,ny,So],encapsulation:2})};var oje=(t,n,e,r)=>({left:t,top:n,width:e,height:r}),ije=(t,n)=>({animate:t,reverse:n}),sje=t=>({animate:t}),LN=class t{dialog=R(Wf);connection=Q.required();get animate(){return this.connection().status!==0}get reverse(){return this.connection().status===2}get node1(){return this.connection().node1.position}get node2(){return this.connection().node2.position}get point(){let e=this.node2.x-this.node1.x,r=this.node2.y-this.node1.y,o=Math.sqrt(e*e+r*r);return o===0?{x:this.node1.x,y:this.node1.y}:{x:this.node1.x+e/o*Math.min(60,o/2),y:this.node1.y+r/o*Math.min(60,o/2)}}get w(){return Math.abs(this.node2.x-this.node1.x)+60}get h(){return Math.abs(this.node2.y-this.node1.y)+60}get t(){return{x:(this.node1.x+this.node2.x)/2-this.w/2,y:(this.node1.y+this.node2.y)/2+this.h/2}}onClick(){this.dialog.open(PN,{context:{connection:this.connection()}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["app-connection"]],hostAttrs:[1,"contents"],inputs:{connection:[1,"connection"]},decls:4,vars:27,consts:[[1,"pointer-events-none","absolute","z-0","origin-center","-translate-x-1/2","-translate-y-1/2"],["hlmTooltipTrigger","",1,"pseudo-connection",3,"click"],[1,"connection",3,"ngClass"],["r","5",3,"ngClass"]],template:function(e,r){e&1&&(mc(),ne(0,"svg",0)(1,"line",1),Pe("click",function(){return r.onClick()}),re(),We(2,"line",2)(3,"circle",3),re()),e&2&&(ks(w6(17,oje,"calc(50% + "+(r.node1.x+r.node2.x)/2+"px)","calc(50% - "+(r.node1.y+r.node2.y)/2+"px)",r.w+"px",r.h+"px")),ee(),Bt("x1",r.node1.x-r.t.x)("y1",r.t.y-r.node1.y)("x2",r.node2.x-r.t.x)("y2",r.t.y-r.node2.y),ee(),Ke("ngClass",vd(22,ije,r.animate,r.reverse)),Bt("x1",r.node1.x-r.t.x)("y1",r.t.y-r.node1.y)("x2",r.node2.x-r.t.x)("y2",r.t.y-r.node2.y),ee(),Le(g6("cyber-shield ",r.connection().cyberShield.enabled&&r.connection().cyberShield.model?r.connection().cyberShield.state:"disabled")),Ke("ngClass",gl(25,sje,r.animate)),Bt("cx",r.point.x-r.t.x)("cy",r.t.y-r.point.y))},dependencies:[xr,Nm],styles:[".connection[_ngcontent-%COMP%]{stroke:hsl(var(--border));stroke-width:1;transition-property:stroke-width,stroke-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;stroke-linecap:round}  .high-contrast .connection{stroke:hsl(var(--primary))!important}.connection.animate[_ngcontent-%COMP%]{stroke:hsl(var(--primary));stroke-width:2;animation:5s linear 0ms infinite forwards normal _ngcontent-%COMP%_dash;stroke-dasharray:10}.connection.animate.reverse[_ngcontent-%COMP%]{animation-direction:reverse}.cyber-shield[_ngcontent-%COMP%]{fill:transparent;opacity:0;transition-property:opacity,fill-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.cyber-shield.waiting[_ngcontent-%COMP%]{fill:#2563eb;opacity:1}@media (prefers-color-scheme: dark){.cyber-shield.waiting[_ngcontent-%COMP%]{fill:#60a5fa}}  .high-contrast .cyber-shield.waiting{fill:#1d4ed8}@media (prefers-color-scheme: dark){  .high-contrast .cyber-shield.waiting{fill:#3b82f6}}.cyber-shield.safe[_ngcontent-%COMP%]{fill:#16a34a;opacity:1}@media (prefers-color-scheme: dark){.cyber-shield.safe[_ngcontent-%COMP%]{fill:#4ade80}}  .high-contrast .cyber-shield.safe{fill:#15803d}@media (prefers-color-scheme: dark){  .high-contrast .cyber-shield.safe{fill:#22c55e}}.cyber-shield.attack[_ngcontent-%COMP%]{fill:#dc2626;opacity:1}@media (prefers-color-scheme: dark){.cyber-shield.attack[_ngcontent-%COMP%]{fill:#f87171}}  .high-contrast .cyber-shield.attack{fill:#b91c1c}@media (prefers-color-scheme: dark){  .high-contrast .cyber-shield.attack{fill:#ef4444}}.cyber-shield.animate[_ngcontent-%COMP%]{animation:.8s ease-in-out 0ms infinite alternate _ngcontent-%COMP%_pulse}.pseudo-connection[_ngcontent-%COMP%]{pointer-events:auto;cursor:pointer;stroke:transparent;stroke-width:20}.pseudo-connection[_ngcontent-%COMP%]:hover ~ .connection[_ngcontent-%COMP%]{stroke-width:4}@keyframes _ngcontent-%COMP%_dash{0%{stroke-dashoffset:100%}to{stroke-dashoffset:0%}}@keyframes _ngcontent-%COMP%_pulse{0%{r:5}to{r:7}}"]})};var zu;(a=>(a.ICMPEchoRequest=(l,c,u="Ping request")=>{let p=new TextEncoder().encode(u).length;return{srcIP:l,dstIP:c,transportProtocol:1,payload:u,totalBytes:8+p,headerSize:8,payloadSize:p,timestamp:new Date,ttl:64,type:8,code:0,identifier:Math.floor(Math.random()*65535),sequence:Math.floor(Math.random()*65535)}},a.ICMPEchoReply=(l,c,u,d,p="Pong response")=>{let f=new TextEncoder().encode(p).length;return{srcIP:l,dstIP:c,transportProtocol:1,payload:p,totalBytes:8+f,headerSize:8,payloadSize:f,timestamp:new Date,ttl:64,type:0,code:0,identifier:u,sequence:d}},a.TCP=(l,c,u,d,p,h,f,m="")=>{let v=new TextEncoder().encode(m).length;return{srcIP:l,dstIP:c,srcPort:u,dstPort:d,transportProtocol:6,payload:m,totalBytes:20+v,headerSize:20,payloadSize:v,timestamp:new Date,ttl:64,sequence:p,ack:h,tcpFlags:f}},a.TCPSYN=(l,c,u,d)=>(0,a.TCP)(l,c,u,d,Math.floor(Math.random()*1e3),0,2),a.TCPSYNACK=(l,c,u,d,p)=>(0,a.TCP)(l,c,u,d,Math.floor(Math.random()*1e3),p+1,18),a.TCPACK=(l,c,u,d,p,h)=>(0,a.TCP)(l,c,u,d,h+1,p+1,16),a.UDP=(l,c,u,d,p="")=>{let f=new TextEncoder().encode(p).length;return{srcIP:l,dstIP:c,srcPort:u,dstPort:d,transportProtocol:17,payload:p,totalBytes:8+f,headerSize:8,payloadSize:f,timestamp:new Date,ttl:64}}))(zu||={});var C2=class{constructor(n,e){this.node=n;this.interceptor=e}library;internalCommands=[{id:"ping",name:"Ping",multiple:!1},{id:"threeWayHandshake",name:"Three-Way Handshake",multiple:!1}];_externalCommands=[];get externalCommands(){return[...this._externalCommands]}ping(n){this.node.sendPacket(zu.ICMPEchoRequest(this.node.ip,n))}threeWayHandshake(n,e,r){this.node.sendPacket(zu.TCPSYN(this.node.ip,n,e,r))}loadLibrary(n){if(!n){this.library=void 0,this._externalCommands=[];return}let e=Object.keys(n).filter(r=>r.startsWith("cmd_"));this.library={},this._externalCommands=[];for(let r of e)this.library[r]=(...o)=>n[r]({mac:this.node.mac,ip:this.node.ip,name:this.node.name,type:this.node.type,send:i=>this.node.sendPacket(i)},...o),this._externalCommands.push({id:r,name:r.substring(4).replaceAll("_"," "),multiple:U3(n[r])===1/0})}execute(n,...e){if(this.library&&this.library[n])try{this.library[n](...e)}catch(r){console.error(r)}}};var $N=class{constructor(n){this.node=n}_intercept=new nr(null);get intercept$(){return this._intercept}_externalInterceptor;_interceptICMP(n){switch(n.type){case 8:this.node.sendPacket(zu.ICMPEchoReply(this.node.ip??"",n.srcIP,n.identifier,n.sequence));break;case 0:break}}_interceptTCP(n){switch(n.tcpFlags){case 2:this.node.sendPacket(zu.TCPSYNACK(this.node.ip,n.srcIP,n.dstPort,n.srcPort,n.sequence));break;case 18:this.node.sendPacket(zu.TCPACK(this.node.ip,n.srcIP,n.dstPort,n.srcPort,n.sequence,n.ack));break;case 16:break}}intercept(n){if(this._externalInterceptor)try{if(this._externalInterceptor(ae({},n))!==void 0)return}catch(e){console.error(e)}switch(this._intercept.next(ae({},n)),n.transportProtocol){case 1:this._interceptICMP(n);break;case 6:this._interceptTCP(n);break;case 17:break}}loadLibrary(n){if(!n){this._externalInterceptor=void 0;return}let e=Object.keys(n).find(r=>r===`intcp_${this.node.type}`)??Object.keys(n).find(r=>r==="intcp");e&&(this._externalInterceptor=r=>n[e]({mac:this.node.mac,ip:this.node.ip,name:this.node.name,type:this.node.type,send:o=>this.node.sendPacket(o)},r))}};var ry=class extends C2{internalAttacks=[{id:"dos",name:"Denial of Service (DoS)",multiple:!1}];_externalAttacks=[];get externalAttacks(){return[...this._externalAttacks]}dos(n,e,r,o){for(let i=0;i<o;i++){let s=zu.TCPSYN(this.node.ip,n,Xw(1024,65535),e);s.ttl=Xw(r[0],r[1]),this.node.sendPacket(s)}}loadLibrary(n){if(!n){super.loadLibrary(n),this._externalAttacks=[];return}let e=Object.keys(n).filter(r=>r.startsWith("atk_"));super.loadLibrary(n),this._externalAttacks=[];for(let r of e)this.library[r]=(...o)=>n[r]({mac:this.node.mac,ip:this.node.ip,name:this.node.name,type:this.node.type,send:i=>this.node.sendPacket(i)},...o),this._externalAttacks.push({id:r,name:r.substring(4).replaceAll("_"," "),multiple:U3(n[r])===1/0})}attack(n,...e){this.execute(n,...e)}};var aje=/^([0-9A-Fa-f]{2}:){5}([0-9A-Fa-f]{2})$/,ihe=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$/,Un=(r=>(r.ROUTER="router",r.COMPUTER="computer",r.IOT="iot",r))(Un||{});(s=>(s.Types=["router","computer","iot"],s.RouterTypes=["router"],s.DeviceTypes=["computer","iot"],s.AttackerTypes=["computer"],s.getTypes=a=>{switch(a){case"router":return s.RouterTypes;case"computer":case"iot":return s.DeviceTypes;default:return s.Types}},s.toString=a=>{switch(a){case"router":return"ROUTER";case"computer":return"COMPUTER";case"iot":return"IOT_DEVICE"}}))(Un||={});var Hu=class{_mac;get mac(){return this._mac}_ip;get ip(){return this._ip}set ip(n){if(n!==void 0&&(typeof n!="string"||!ihe.test(n)))throw new Error("Invalid IP address");this._ip=n}_name;get name(){return this._name}set name(n){this._name!==n&&(this._name=n)}_type;get type(){return this._type}set type(n){if(this._type!==n){if(!Un.Types.includes(n))throw new Error("Invalid node type");if(this._type==="router"&&n!=="router")throw new Error("Cannot change the type of a router");if(this._type!=="router"&&n==="router")throw new Error("Cannot change the type of a device to a router");Un.AttackerTypes.includes(n)?this._generator=new ry(this,this.interceptor):this._generator instanceof ry&&(this._generator=new C2(this,this.interceptor)),this._generator.loadLibrary(this._library),this._type=n}}_library;interceptor;_generator;get generator(){return this._generator}_traffic;get traffic(){return this._traffic.map(n=>ae({},n))}_position;get position(){return ae({},this._position)}constructor(n,e,r={x:0,y:0}){this._mac=this._generateMac(),this._ip=void 0,this._name=n,this._type=e,this.interceptor=new $N(this),this._generator=Un.AttackerTypes.includes(e)?new ry(this,this.interceptor):new C2(this,this.interceptor),this._traffic=[],this._position={x:Math.min(Math.max(r.x,-Tc/2),Tc/2),y:Math.min(Math.max(r.y,-Tc/2),Tc/2)},bl.instance.library$.subscribe(o=>this.loadLibrary(o))}init(n,e,r){if(n&&!aje.test(n))throw new Error("Invalid MAC address");if(n&&(this._mac=n),e&&!ihe.test(e))throw new Error("Invalid IP address");return e&&(this._ip=e),r&&(this._traffic=r.map(o=>ae({},o))),this}_generateMac(){return"XX:XX:XX:XX:XX:XX".replace(/X/g,()=>Math.floor(Math.random()*16).toString(16))}loadLibrary(n){this._library=n?n():void 0,this.interceptor.loadLibrary(this._library),this.generator.loadLibrary(this._library)}logTraffic(n){this._traffic.push(n)}clearTraffic(){this._traffic=[]}move(n,e,r=!1){!r&&this._position.x===n&&this._position.y===e||(r&&(n=this._position.x+n,e=this._position.y+e),this._position={x:Math.min(Math.max(n,-Tc/2),Tc/2),y:Math.min(Math.max(e,-Tc/2),Tc/2)})}static fromObject(n){throw new Error("Method not implemented")}};ws([Or.SetState],Hu.prototype,"ip",1),ws([Or.SetState],Hu.prototype,"name",1),ws([Or.SetState],Hu.prototype,"type",1),ws([Or.SetState],Hu.prototype,"move",1);var th=class t extends Hu{_connection;get connected(){return this._connection!==void 0}get communicating(){return this._connection!==void 0&&this._connection.status!==0}constructor(n,e,r){super(n,e,r)}connect(n,e){let r=n.acceptConnection(this,e);if(!r)throw new Error(`${this.mac} could not connect to router`);let[o,i]=r;this.ip!==o&&(this.ip=o),this._connection=i}disconnect(n){n.removeConnection(this)&&(this._connection=void 0,this.ip=void 0)}sendPacket(n){if(this._connection===void 0)throw new Error(`${this.mac} is not connected to a router`);this.logTraffic(n),this._connection.spreadPacket(n)}receivePacket(n){if(this.ip!==n.dstIP)throw new Error(`Packet is not addressed to ${this.mac}`);this.logTraffic(n),this.interceptor.intercept(n)}static fromObject(n){return new t(n.name,n.type,n.position).init(n.mac,n.ip,n.traffic)}toObject(){let n=this.traffic;return{name:this.name,mac:this.mac,ip:this.ip,type:this.type,position:this.position,connection:this._connection?.toObject(),traffic:n.length>0?n:void 0}}};var sV=class{_table;get connections(){return[...this._table.values()]}constructor(){this._table=new Map}get(n){return this._table.get(n)}add(n,e){this._table.set(n,e)}remove(n){return this._table.delete(n)}has(n){return this._table.has(n)}clear(){this._table.clear()}size(){return this._table.size}},aV=class{_availableIPs;_assignedIPs;get leasedIPs(){return ae({},this._assignedIPs)}constructor(n,e,r){this._availableIPs=new Set,this._assignedIPs=new Map;for(let o=e;o<=r;o++)this._availableIPs.add(`${n}.${o}`)}requestIP(n){if(this._assignedIPs.has(n))return this._assignedIPs.get(n);let e=this._availableIPs.values().next().value;return e?(this._availableIPs.delete(e),this._assignedIPs.set(n,e),e):null}releaseIP(n){let e=this._assignedIPs.get(n);e&&(this._assignedIPs.delete(n),this._availableIPs.add(e))}registerFixedIP(n,e){this._availableIPs.delete(e),this._assignedIPs.set(n,e)}},oy=class t extends Hu{_arpTable;_dhcpServer;get connections(){return this._arpTable.connections}get connected(){return this.connections.length>0}get communicating(){return this.connections.some(n=>n.status!==0)}constructor(n,e){super(n,"router",e),this.init(void 0,"192.168.0.1"),this._arpTable=new sV,this._dhcpServer=new aV("192.168.0",2,254)}_forwardPacket(n){let e=this._arpTable.get(n.dstIP);if(e)this.logTraffic(n),n=lt(ae({},n),{ttl:(n.ttl??1)-1}),n.ttl>0&&e.spreadPacket(n);else throw new Error(`Impossible to forward the packet ${JSON.stringify(n,null,2)}, destination IP not found`)}acceptConnection(n,e){n.ip&&this._dhcpServer.registerFixedIP(n.mac,n.ip);let r=n.ip??this._dhcpServer.requestIP(n.mac);return r?(e||(e=new Qw(this,n)),this._arpTable.add(r,e),[r,e]):null}removeConnection(n){return this._arpTable.get(n.ip??"")?(this._arpTable.remove(n.ip??""),this._dhcpServer.releaseIP(n.mac),!0):!1}removeAllConnections(){for(let n of this._arpTable.connections)n.node1 instanceof th?n.node1.disconnect(this):n.node2 instanceof th&&n.node2.disconnect(this);return this._arpTable.size()===0}sendPacket(n){this._forwardPacket(n)}receivePacket(n){n.dstIP===this.ip?(this.logTraffic(n),this.interceptor.intercept(n)):this._forwardPacket(n)}static fromObject(n){return new t(n.name,n.position).init(n.mac,n.ip,n.traffic)}toObject(){let n=this.traffic;return{name:this.name,mac:this.mac,ip:this.ip,position:ae({},this.position),traffic:n.length>0?n:void 0}}};var iy=class{_nodes=new Map;get nodes(){return[...this._nodes.values()]}_router;get router(){return this._router}get devices(){let n=this.nodes.filter(({type:e})=>!Un.RouterTypes.includes(e));return n.length>0?n:void 0}reset(){this._nodes.clear(),this._router=void 0}addNode(n){if(this._router&&Un.RouterTypes.includes(n.type))throw new Error("Cannot add more than one router to the network");return Un.RouterTypes.includes(n.type)&&(this._router=n),this._nodes.set(n.mac,n),n}deleteNode(n){let e=this._nodes.get(n);if(!e)throw new Error("Does not exist a node with the specified MAC address");return Un.RouterTypes.includes(e.type)?(this._router=void 0,e.removeAllConnections()):this._router&&e.disconnect(this._router),this._nodes.delete(e.mac),!0}getNode(n){return this._nodes.get(n)}getConnectedNodes(n){return this.nodes.filter(e=>e.ip&&n!==e.mac)}toObject(){return{exportedAt:new Date().toISOString(),router:this.router?.toObject(),devices:this.devices?.map(n=>n.toObject())}}fromObject(n){this.reset(),n.router&&this.addNode(oy.fromObject(n.router)),n.devices&&n.devices.forEach(e=>{let r=this.addNode(th.fromObject(e));e.connection&&r.connect(this.router,Qw.fromObject(this.router,r,e.connection))})}};iy=ws([Or.UseState],iy);var lje={variant:"default",size:"default"},cje=new Ee("BrnButtonConfig");function she(){return R(cje,{optional:!0})??lje}var ahe=(()=>{class t{disabled=Q(!1,{transform:wt});_isAnchor=R(O6)==="a";_elementRef=R(Ft);constructor(){this._isAnchor&&ch(this._elementRef.nativeElement,"click").pipe(Cn(()=>this.disabled()),ua()).subscribe(e=>{e.preventDefault(),e.stopImmediatePropagation()})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["a","brnButton",""],["button","brnButton",""]],hostVars:3,hostBindings:function(r,o){r&2&&Bt("tabindex",o.disabled()?-1:void 0)("disabled",!o._isAnchor&&o.disabled()||null)("data-disabled",o.disabled()||null)},inputs:{disabled:[1,"disabled"]}})}return t})();var dje=ju("focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex shrink-0 items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap transition-all outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_ng-icon]:pointer-events-none [&_ng-icon]:shrink-0 [&_ng-icon:not([class*='text-'])]:text-base",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-white",outline:"bg-background hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 border shadow-xs",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>ng-icon]:px-3",sm:"h-8 gap-1.5 rounded-md px-3 has-[>ng-icon]:px-2.5",lg:"h-10 rounded-md px-6 has-[>ng-icon]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}}),ma=class t{_config=she();_additionalClasses=Ye("");userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(dje({variant:this.variant(),size:this.size()}),this.userClass(),this._additionalClasses()));variant=Q(this._config.variant);size=Q(this._config.size);setClass(n){this._additionalClasses.set(n)}static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["button","hlmBtn",""],["a","hlmBtn",""]],hostAttrs:["data-slot","button"],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"],variant:[1,"variant"],size:[1,"size"]},exportAs:["hlmBtn"],features:[Yt([{directive:ahe,inputs:["disabled","disabled"]}])]})};function pje(t,n){if(t&1&&(ne(0,"hlm-option",8),le(1),Me(2,"translate"),re()),t&2){let e=n.$implicit,r=be();Ke("value",e),ee(),it(Se(2,2,r.NodeType.toString(e)))}}var VN=class t{NodeType=Un;ref=R(ms);context=Pu();types=de(()=>Array.isArray(this.context.type)?this.context.type:[this.context.type]);name=Ii(null);type=Ii(this.types().length===1?this.types()[0]:null);submit(){this.ref.close({name:this.name(),type:this.type()})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["app-add-node-dialog"]],hostAttrs:[1,"min-w-96","flex","flex-col","gap-4"],inputs:{name:[1,"name"],type:[1,"type"]},outputs:{name:"nameChange",type:"typeChange"},decls:25,vars:19,consts:[["hlmDialogTitle",""],[1,"grid","gap-4"],[1,"grid","grid-cols-4","items-center","gap-4"],["hlmLabel","",1,"justify-end"],["hlmInput","",1,"col-span-3",3,"ngModelChange","ngModel"],[1,"col-span-3","inline-block",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"w-full"],[1,"block"],[3,"value"],["hlmBtn","",3,"click","disabled"]],template:function(e,r){e&1&&(ne(0,"hlm-dialog-header")(1,"h3",0),le(2),Me(3,"translate"),re()(),ne(4,"div",1)(5,"div",2)(6,"label",3),le(7),Me(8,"translate"),re(),ne(9,"input",4),fi("ngModelChange",function(i){return Ei(r.name,i)||(r.name=i),i}),re()(),ne(10,"div",2)(11,"label",3),le(12),Me(13,"translate"),re(),ne(14,"brn-select",5),Me(15,"translate"),fi("ngModelChange",function(i){return Ei(r.type,i)||(r.type=i),i}),ne(16,"hlm-select-trigger",6),We(17,"hlm-select-value",7),re(),ne(18,"hlm-select-content"),uo(19,pje,3,4,"hlm-option",8,Ji),re()()()(),ne(21,"hlm-dialog-footer")(22,"button",9),Pe("click",function(){return r.submit()}),le(23),Me(24,"translate"),re()()),e&2&&(ee(2),it(Se(3,9,"ADD_NODE")),ee(5),it(Se(8,11,"NAME")),ee(2),hi("ngModel",r.name),ee(3),it(Se(13,13,"TYPE")),ee(2),hi("ngModel",r.type),Ke("placeholder",Se(15,15,"SELECT_DEVICE_TYPE"))("disabled",r.types().length===1),ee(5),po(r.types()),ee(3),Ke("disabled",!(r.name()&&r.type())),ee(),Ze(" ",Se(24,17,"ADD")," "))},dependencies:[xr,$u,Kf,Lu,ic,To,nl,zs,Vu,ma,y2,rc,oc,eh,da,gs,ha,pa,fa,So],encapsulation:2})};var hje=t=>({name:t}),jN=class t{ref=R(ms);context=Pu();name=de(()=>this.context.node.name);cancel(){this.ref.close()}delete(){this.ref.close({node:this.context.node})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["app-delete-node-dialog"]],hostAttrs:[1,"min-w-96","flex","flex-col","gap-4"],decls:14,vars:15,consts:[["hlmDialogTitle",""],["hlmDialogDescription",""],["hlmBtn","","variant","outline",3,"click"],["hlmBtn","","variant","destructive",3,"click"]],template:function(e,r){e&1&&(ne(0,"hlm-dialog-header")(1,"h3",0),le(2),Me(3,"translate"),re()(),ne(4,"p",1),le(5),Me(6,"translate"),re(),ne(7,"hlm-dialog-footer")(8,"button",2),Pe("click",function(){return r.cancel()}),le(9),Me(10,"translate"),re(),ne(11,"button",3),Pe("click",function(){return r.delete()}),le(12),Me(13,"translate"),re()()),e&2&&(ee(2),Ze(" ",x6(3,4,"DELETE_NODE",gl(13,hje,r.name()))," "),ee(3),Ze(" ",Se(6,7,"DELETE_DESC")," "),ee(4),Ze(" ",Se(10,9,"CANCEL")," "),ee(3),Ze(" ",Se(13,11,"DELETE")," "))},dependencies:[xr,To,ma,Pb,y2,rc,oc,So],encapsulation:2})};function bhe(t){return typeof t>"u"||t===null}function fje(t){return typeof t=="object"&&t!==null}function mje(t){return Array.isArray(t)?t:bhe(t)?[]:[t]}function gje(t,n){var e,r,o,i;if(n)for(i=Object.keys(n),e=0,r=i.length;e<r;e+=1)o=i[e],t[o]=n[o];return t}function vje(t,n){var e="",r;for(r=0;r<n;r+=1)e+=t;return e}function wje(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var yje=bhe,xje=fje,kje=mje,_je=vje,bje=wje,Cje=gje,ei={isNothing:yje,isObject:xje,toArray:kje,repeat:_je,isNegativeZero:bje,extend:Cje};function Che(t,n){var e="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(e+='in "'+t.mark.name+'" '),e+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!n&&t.mark.snippet&&(e+=`

`+t.mark.snippet),r+" "+e):r}function eC(t,n){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=n,this.message=Che(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}eC.prototype=Object.create(Error.prototype);eC.prototype.constructor=eC;eC.prototype.toString=function(n){return this.name+": "+Che(this,n)};var Hs=eC;function lV(t,n,e,r,o){var i="",s="",a=Math.floor(o/2)-1;return r-n>a&&(i=" ... ",n=r-a+i.length),e-r>a&&(s=" ...",e=r+a-s.length),{str:i+t.slice(n,e).replace(/\t/g,"\u2192")+s,pos:r-n+i.length}}function cV(t,n){return ei.repeat(" ",n-t.length)+t}function Mje(t,n){if(n=Object.create(n||null),!t.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var e=/\r?\n|\r|\0/g,r=[0],o=[],i,s=-1;i=e.exec(t.buffer);)o.push(i.index),r.push(i.index+i[0].length),t.position<=i.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",l,c,u=Math.min(t.line+n.linesAfter,o.length).toString().length,d=n.maxLength-(n.indent+u+3);for(l=1;l<=n.linesBefore&&!(s-l<0);l++)c=lV(t.buffer,r[s-l],o[s-l],t.position-(r[s]-r[s-l]),d),a=ei.repeat(" ",n.indent)+cV((t.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=lV(t.buffer,r[s],o[s],t.position,d),a+=ei.repeat(" ",n.indent)+cV((t.line+1).toString(),u)+" | "+c.str+`
`,a+=ei.repeat("-",n.indent+u+3+c.pos)+`^
`,l=1;l<=n.linesAfter&&!(s+l>=o.length);l++)c=lV(t.buffer,r[s+l],o[s+l],t.position-(r[s]-r[s+l]),d),a+=ei.repeat(" ",n.indent)+cV((t.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var Sje=Mje,Tje=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Eje=["scalar","sequence","mapping"];function Ije(t){var n={};return t!==null&&Object.keys(t).forEach(function(e){t[e].forEach(function(r){n[String(r)]=e})}),n}function Dje(t,n){if(n=n||{},Object.keys(n).forEach(function(e){if(Tje.indexOf(e)===-1)throw new Hs('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')}),this.options=n,this.tag=t,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(e){return e},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=Ije(n.styleAliases||null),Eje.indexOf(this.kind)===-1)throw new Hs('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Wi=Dje;function lhe(t,n){var e=[];return t[n].forEach(function(r){var o=e.length;e.forEach(function(i,s){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(o=s)}),e[o]=r}),e}function Nje(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,e;function r(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(n=0,e=arguments.length;n<e;n+=1)arguments[n].forEach(r);return t}function dV(t){return this.extend(t)}dV.prototype.extend=function(n){var e=[],r=[];if(n instanceof Wi)r.push(n);else if(Array.isArray(n))r=r.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(e=e.concat(n.implicit)),n.explicit&&(r=r.concat(n.explicit));else throw new Hs("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.forEach(function(i){if(!(i instanceof Wi))throw new Hs("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new Hs("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new Hs("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof Wi))throw new Hs("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(dV.prototype);return o.implicit=(this.implicit||[]).concat(e),o.explicit=(this.explicit||[]).concat(r),o.compiledImplicit=lhe(o,"implicit"),o.compiledExplicit=lhe(o,"explicit"),o.compiledTypeMap=Nje(o.compiledImplicit,o.compiledExplicit),o};var Aje=dV,Rje=new Wi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Oje=new Wi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Fje=new Wi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Bje=new Aje({explicit:[Rje,Oje,Fje]});function Pje(t){if(t===null)return!0;var n=t.length;return n===1&&t==="~"||n===4&&(t==="null"||t==="Null"||t==="NULL")}function Lje(){return null}function $je(t){return t===null}var Vje=new Wi("tag:yaml.org,2002:null",{kind:"scalar",resolve:Pje,construct:Lje,predicate:$je,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function jje(t){if(t===null)return!1;var n=t.length;return n===4&&(t==="true"||t==="True"||t==="TRUE")||n===5&&(t==="false"||t==="False"||t==="FALSE")}function zje(t){return t==="true"||t==="True"||t==="TRUE"}function Hje(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Uje=new Wi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:jje,construct:zje,predicate:Hje,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Gje(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Wje(t){return 48<=t&&t<=55}function qje(t){return 48<=t&&t<=57}function Kje(t){if(t===null)return!1;var n=t.length,e=0,r=!1,o;if(!n)return!1;if(o=t[e],(o==="-"||o==="+")&&(o=t[++e]),o==="0"){if(e+1===n)return!0;if(o=t[++e],o==="b"){for(e++;e<n;e++)if(o=t[e],o!=="_"){if(o!=="0"&&o!=="1")return!1;r=!0}return r&&o!=="_"}if(o==="x"){for(e++;e<n;e++)if(o=t[e],o!=="_"){if(!Gje(t.charCodeAt(e)))return!1;r=!0}return r&&o!=="_"}if(o==="o"){for(e++;e<n;e++)if(o=t[e],o!=="_"){if(!Wje(t.charCodeAt(e)))return!1;r=!0}return r&&o!=="_"}}if(o==="_")return!1;for(;e<n;e++)if(o=t[e],o!=="_"){if(!qje(t.charCodeAt(e)))return!1;r=!0}return!(!r||o==="_")}function Zje(t){var n=t,e=1,r;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),r=n[0],(r==="-"||r==="+")&&(r==="-"&&(e=-1),n=n.slice(1),r=n[0]),n==="0")return 0;if(r==="0"){if(n[1]==="b")return e*parseInt(n.slice(2),2);if(n[1]==="x")return e*parseInt(n.slice(2),16);if(n[1]==="o")return e*parseInt(n.slice(2),8)}return e*parseInt(n,10)}function Xje(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ei.isNegativeZero(t)}var Yje=new Wi("tag:yaml.org,2002:int",{kind:"scalar",resolve:Kje,construct:Zje,predicate:Xje,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Qje=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Jje(t){return!(t===null||!Qje.test(t)||t[t.length-1]==="_")}function eze(t){var n,e;return n=t.replace(/_/g,"").toLowerCase(),e=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:e*parseFloat(n,10)}var tze=/^[-+]?[0-9]+e/;function nze(t,n){var e;if(isNaN(t))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ei.isNegativeZero(t))return"-0.0";return e=t.toString(10),tze.test(e)?e.replace("e",".e"):e}function rze(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ei.isNegativeZero(t))}var oze=new Wi("tag:yaml.org,2002:float",{kind:"scalar",resolve:Jje,construct:eze,predicate:rze,represent:nze,defaultStyle:"lowercase"}),ize=Bje.extend({implicit:[Vje,Uje,Yje,oze]}),sze=ize,Mhe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),She=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function aze(t){return t===null?!1:Mhe.exec(t)!==null||She.exec(t)!==null}function lze(t){var n,e,r,o,i,s,a,l=0,c=null,u,d,p;if(n=Mhe.exec(t),n===null&&(n=She.exec(t)),n===null)throw new Error("Date resolve error");if(e=+n[1],r=+n[2]-1,o=+n[3],!n[4])return new Date(Date.UTC(e,r,o));if(i=+n[4],s=+n[5],a=+n[6],n[7]){for(l=n[7].slice(0,3);l.length<3;)l+="0";l=+l}return n[9]&&(u=+n[10],d=+(n[11]||0),c=(u*60+d)*6e4,n[9]==="-"&&(c=-c)),p=new Date(Date.UTC(e,r,o,i,s,a,l)),c&&p.setTime(p.getTime()-c),p}function cze(t){return t.toISOString()}var uze=new Wi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:aze,construct:lze,instanceOf:Date,represent:cze});function dze(t){return t==="<<"||t===null}var pze=new Wi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:dze}),gV=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function hze(t){if(t===null)return!1;var n,e,r=0,o=t.length,i=gV;for(e=0;e<o;e++)if(n=i.indexOf(t.charAt(e)),!(n>64)){if(n<0)return!1;r+=6}return r%8===0}function fze(t){var n,e,r=t.replace(/[\r\n=]/g,""),o=r.length,i=gV,s=0,a=[];for(n=0;n<o;n++)n%4===0&&n&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(r.charAt(n));return e=o%4*6,e===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):e===18?(a.push(s>>10&255),a.push(s>>2&255)):e===12&&a.push(s>>4&255),new Uint8Array(a)}function mze(t){var n="",e=0,r,o,i=t.length,s=gV;for(r=0;r<i;r++)r%3===0&&r&&(n+=s[e>>18&63],n+=s[e>>12&63],n+=s[e>>6&63],n+=s[e&63]),e=(e<<8)+t[r];return o=i%3,o===0?(n+=s[e>>18&63],n+=s[e>>12&63],n+=s[e>>6&63],n+=s[e&63]):o===2?(n+=s[e>>10&63],n+=s[e>>4&63],n+=s[e<<2&63],n+=s[64]):o===1&&(n+=s[e>>2&63],n+=s[e<<4&63],n+=s[64],n+=s[64]),n}function gze(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var vze=new Wi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:hze,construct:fze,predicate:gze,represent:mze}),wze=Object.prototype.hasOwnProperty,yze=Object.prototype.toString;function xze(t){if(t===null)return!0;var n=[],e,r,o,i,s,a=t;for(e=0,r=a.length;e<r;e+=1){if(o=a[e],s=!1,yze.call(o)!=="[object Object]")return!1;for(i in o)if(wze.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(n.indexOf(i)===-1)n.push(i);else return!1}return!0}function kze(t){return t!==null?t:[]}var _ze=new Wi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:xze,construct:kze}),bze=Object.prototype.toString;function Cze(t){if(t===null)return!0;var n,e,r,o,i,s=t;for(i=new Array(s.length),n=0,e=s.length;n<e;n+=1){if(r=s[n],bze.call(r)!=="[object Object]"||(o=Object.keys(r),o.length!==1))return!1;i[n]=[o[0],r[o[0]]]}return!0}function Mze(t){if(t===null)return[];var n,e,r,o,i,s=t;for(i=new Array(s.length),n=0,e=s.length;n<e;n+=1)r=s[n],o=Object.keys(r),i[n]=[o[0],r[o[0]]];return i}var Sze=new Wi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Cze,construct:Mze}),Tze=Object.prototype.hasOwnProperty;function Eze(t){if(t===null)return!0;var n,e=t;for(n in e)if(Tze.call(e,n)&&e[n]!==null)return!1;return!0}function Ize(t){return t!==null?t:{}}var Dze=new Wi("tag:yaml.org,2002:set",{kind:"mapping",resolve:Eze,construct:Ize}),The=sze.extend({implicit:[uze,pze],explicit:[vze,_ze,Sze,Dze]}),Jf=Object.prototype.hasOwnProperty,zN=1,Ehe=2,Ihe=3,HN=4,uV=1,Nze=2,che=3,Aze=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Rze=/[\x85\u2028\u2029]/,Oze=/[,\[\]\{\}]/,Dhe=/^(?:!|!!|![a-z\-]+!)$/i,Nhe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function uhe(t){return Object.prototype.toString.call(t)}function Uu(t){return t===10||t===13}function S2(t){return t===9||t===32}function Us(t){return t===9||t===32||t===10||t===13}function ay(t){return t===44||t===91||t===93||t===123||t===125}function Fze(t){var n;return 48<=t&&t<=57?t-48:(n=t|32,97<=n&&n<=102?n-97+10:-1)}function Bze(t){return t===120?2:t===117?4:t===85?8:0}function Pze(t){return 48<=t&&t<=57?t-48:-1}function dhe(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Lze(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}function Ahe(t,n,e){n==="__proto__"?Object.defineProperty(t,n,{configurable:!0,enumerable:!0,writable:!0,value:e}):t[n]=e}var Rhe=new Array(256),Ohe=new Array(256);for(M2=0;M2<256;M2++)Rhe[M2]=dhe(M2)?1:0,Ohe[M2]=dhe(M2);var M2;function $ze(t,n){this.input=t,this.filename=n.filename||null,this.schema=n.schema||The,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Fhe(t,n){var e={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return e.snippet=Sje(e),new Hs(n,e)}function Mt(t,n){throw Fhe(t,n)}function UN(t,n){t.onWarning&&t.onWarning.call(null,Fhe(t,n))}var phe={YAML:function(n,e,r){var o,i,s;n.version!==null&&Mt(n,"duplication of %YAML directive"),r.length!==1&&Mt(n,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),o===null&&Mt(n,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Mt(n,"unacceptable YAML version of the document"),n.version=r[0],n.checkLineBreaks=s<2,s!==1&&s!==2&&UN(n,"unsupported YAML version of the document")},TAG:function(n,e,r){var o,i;r.length!==2&&Mt(n,"TAG directive accepts exactly two arguments"),o=r[0],i=r[1],Dhe.test(o)||Mt(n,"ill-formed tag handle (first argument) of the TAG directive"),Jf.call(n.tagMap,o)&&Mt(n,'there is a previously declared suffix for "'+o+'" tag handle'),Nhe.test(i)||Mt(n,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Mt(n,"tag prefix is malformed: "+i)}n.tagMap[o]=i}};function Qf(t,n,e,r){var o,i,s,a;if(n<e){if(a=t.input.slice(n,e),r)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Mt(t,"expected valid JSON character");else Aze.test(a)&&Mt(t,"the stream contains non-printable characters");t.result+=a}}function hhe(t,n,e,r){var o,i,s,a;for(ei.isObject(e)||Mt(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(e),s=0,a=o.length;s<a;s+=1)i=o[s],Jf.call(n,i)||(Ahe(n,i,e[i]),r[i]=!0)}function ly(t,n,e,r,o,i,s,a,l){var c,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),c=0,u=o.length;c<u;c+=1)Array.isArray(o[c])&&Mt(t,"nested arrays are not supported inside keys"),typeof o=="object"&&uhe(o[c])==="[object Object]"&&(o[c]="[object Object]");if(typeof o=="object"&&uhe(o)==="[object Object]"&&(o="[object Object]"),o=String(o),n===null&&(n={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(c=0,u=i.length;c<u;c+=1)hhe(t,n,i[c],e);else hhe(t,n,i,e);else!t.json&&!Jf.call(e,o)&&Jf.call(n,o)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,Mt(t,"duplicated mapping key")),Ahe(n,o,i),delete e[o];return n}function vV(t){var n;n=t.input.charCodeAt(t.position),n===10?t.position++:n===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Mt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Bo(t,n,e){for(var r=0,o=t.input.charCodeAt(t.position);o!==0;){for(;S2(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(n&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(Uu(o))for(vV(t),o=t.input.charCodeAt(t.position),r++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return e!==-1&&r!==0&&t.lineIndent<e&&UN(t,"deficient indentation"),r}function qN(t){var n=t.position,e;return e=t.input.charCodeAt(n),!!((e===45||e===46)&&e===t.input.charCodeAt(n+1)&&e===t.input.charCodeAt(n+2)&&(n+=3,e=t.input.charCodeAt(n),e===0||Us(e)))}function wV(t,n){n===1?t.result+=" ":n>1&&(t.result+=ei.repeat(`
`,n-1))}function Vze(t,n,e){var r,o,i,s,a,l,c,u,d=t.kind,p=t.result,h;if(h=t.input.charCodeAt(t.position),Us(h)||ay(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(o=t.input.charCodeAt(t.position+1),Us(o)||e&&ay(o)))return!1;for(t.kind="scalar",t.result="",i=s=t.position,a=!1;h!==0;){if(h===58){if(o=t.input.charCodeAt(t.position+1),Us(o)||e&&ay(o))break}else if(h===35){if(r=t.input.charCodeAt(t.position-1),Us(r))break}else{if(t.position===t.lineStart&&qN(t)||e&&ay(h))break;if(Uu(h))if(l=t.line,c=t.lineStart,u=t.lineIndent,Bo(t,!1,-1),t.lineIndent>=n){a=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=l,t.lineStart=c,t.lineIndent=u;break}}a&&(Qf(t,i,s,!1),wV(t,t.line-l),i=s=t.position,a=!1),S2(h)||(s=t.position+1),h=t.input.charCodeAt(++t.position)}return Qf(t,i,s,!1),t.result?!0:(t.kind=d,t.result=p,!1)}function jze(t,n){var e,r,o;if(e=t.input.charCodeAt(t.position),e!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=o=t.position;(e=t.input.charCodeAt(t.position))!==0;)if(e===39)if(Qf(t,r,t.position,!0),e=t.input.charCodeAt(++t.position),e===39)r=t.position,t.position++,o=t.position;else return!0;else Uu(e)?(Qf(t,r,o,!0),wV(t,Bo(t,!1,n)),r=o=t.position):t.position===t.lineStart&&qN(t)?Mt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);Mt(t,"unexpected end of the stream within a single quoted scalar")}function zze(t,n){var e,r,o,i,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,e=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Qf(t,e,t.position,!0),t.position++,!0;if(a===92){if(Qf(t,e,t.position,!0),a=t.input.charCodeAt(++t.position),Uu(a))Bo(t,!1,n);else if(a<256&&Rhe[a])t.result+=Ohe[a],t.position++;else if((s=Bze(a))>0){for(o=s,i=0;o>0;o--)a=t.input.charCodeAt(++t.position),(s=Fze(a))>=0?i=(i<<4)+s:Mt(t,"expected hexadecimal character");t.result+=Lze(i),t.position++}else Mt(t,"unknown escape sequence");e=r=t.position}else Uu(a)?(Qf(t,e,r,!0),wV(t,Bo(t,!1,n)),e=r=t.position):t.position===t.lineStart&&qN(t)?Mt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Mt(t,"unexpected end of the stream within a double quoted scalar")}function Hze(t,n){var e=!0,r,o,i,s=t.tag,a,l=t.anchor,c,u,d,p,h,f=Object.create(null),m,g,v,w;if(w=t.input.charCodeAt(t.position),w===91)u=93,h=!1,a=[];else if(w===123)u=125,h=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);w!==0;){if(Bo(t,!0,n),w=t.input.charCodeAt(t.position),w===u)return t.position++,t.tag=s,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=a,!0;e?w===44&&Mt(t,"expected the node content, but found ','"):Mt(t,"missed comma between flow collection entries"),g=m=v=null,d=p=!1,w===63&&(c=t.input.charCodeAt(t.position+1),Us(c)&&(d=p=!0,t.position++,Bo(t,!0,n))),r=t.line,o=t.lineStart,i=t.position,cy(t,n,zN,!1,!0),g=t.tag,m=t.result,Bo(t,!0,n),w=t.input.charCodeAt(t.position),(p||t.line===r)&&w===58&&(d=!0,w=t.input.charCodeAt(++t.position),Bo(t,!0,n),cy(t,n,zN,!1,!0),v=t.result),h?ly(t,a,f,g,m,v,r,o,i):d?a.push(ly(t,null,f,g,m,v,r,o,i)):a.push(m),Bo(t,!0,n),w=t.input.charCodeAt(t.position),w===44?(e=!0,w=t.input.charCodeAt(++t.position)):e=!1}Mt(t,"unexpected end of the stream within a flow collection")}function Uze(t,n){var e,r,o=uV,i=!1,s=!1,a=n,l=0,c=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)uV===o?o=d===43?che:Nze:Mt(t,"repeat of a chomping mode identifier");else if((u=Pze(d))>=0)u===0?Mt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Mt(t,"repeat of an indentation width identifier"):(a=n+u-1,s=!0);else break;if(S2(d)){do d=t.input.charCodeAt(++t.position);while(S2(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!Uu(d)&&d!==0)}for(;d!==0;){for(vV(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),Uu(d)){l++;continue}if(t.lineIndent<a){o===che?t.result+=ei.repeat(`
`,i?1+l:l):o===uV&&i&&(t.result+=`
`);break}for(r?S2(d)?(c=!0,t.result+=ei.repeat(`
`,i?1+l:l)):c?(c=!1,t.result+=ei.repeat(`
`,l+1)):l===0?i&&(t.result+=" "):t.result+=ei.repeat(`
`,l):t.result+=ei.repeat(`
`,i?1+l:l),i=!0,s=!0,l=0,e=t.position;!Uu(d)&&d!==0;)d=t.input.charCodeAt(++t.position);Qf(t,e,t.position,!1)}return!0}function fhe(t,n){var e,r=t.tag,o=t.anchor,i=[],s,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=i),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Mt(t,"tab characters must not be used in indentation")),!(l!==45||(s=t.input.charCodeAt(t.position+1),!Us(s))));){if(a=!0,t.position++,Bo(t,!0,-1)&&t.lineIndent<=n){i.push(null),l=t.input.charCodeAt(t.position);continue}if(e=t.line,cy(t,n,Ihe,!1,!0),i.push(t.result),Bo(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===e||t.lineIndent>n)&&l!==0)Mt(t,"bad indentation of a sequence entry");else if(t.lineIndent<n)break}return a?(t.tag=r,t.anchor=o,t.kind="sequence",t.result=i,!0):!1}function Gze(t,n,e){var r,o,i,s,a,l,c=t.tag,u=t.anchor,d={},p=Object.create(null),h=null,f=null,m=null,g=!1,v=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),w=t.input.charCodeAt(t.position);w!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Mt(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),i=t.line,(w===63||w===58)&&Us(r))w===63?(g&&(ly(t,d,p,h,f,null,s,a,l),h=f=m=null),v=!0,g=!0,o=!0):g?(g=!1,o=!0):Mt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=r;else{if(s=t.line,a=t.lineStart,l=t.position,!cy(t,e,Ehe,!1,!0))break;if(t.line===i){for(w=t.input.charCodeAt(t.position);S2(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),Us(w)||Mt(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(ly(t,d,p,h,f,null,s,a,l),h=f=m=null),v=!0,g=!1,o=!1,h=t.tag,f=t.result;else if(v)Mt(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(v)Mt(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===i||t.lineIndent>n)&&(g&&(s=t.line,a=t.lineStart,l=t.position),cy(t,n,HN,!0,o)&&(g?f=t.result:m=t.result),g||(ly(t,d,p,h,f,m,s,a,l),h=f=m=null),Bo(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===i||t.lineIndent>n)&&w!==0)Mt(t,"bad indentation of a mapping entry");else if(t.lineIndent<n)break}return g&&ly(t,d,p,h,f,null,s,a,l),v&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=d),v}function Wze(t){var n,e=!1,r=!1,o,i,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Mt(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(e=!0,s=t.input.charCodeAt(++t.position)):s===33?(r=!0,o="!!",s=t.input.charCodeAt(++t.position)):o="!",n=t.position,e){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(i=t.input.slice(n,t.position),s=t.input.charCodeAt(++t.position)):Mt(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Us(s);)s===33&&(r?Mt(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(n-1,t.position+1),Dhe.test(o)||Mt(t,"named tag handle cannot contain such characters"),r=!0,n=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(n,t.position),Oze.test(i)&&Mt(t,"tag suffix cannot contain flow indicator characters")}i&&!Nhe.test(i)&&Mt(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Mt(t,"tag name is malformed: "+i)}return e?t.tag=i:Jf.call(t.tagMap,o)?t.tag=t.tagMap[o]+i:o==="!"?t.tag="!"+i:o==="!!"?t.tag="tag:yaml.org,2002:"+i:Mt(t,'undeclared tag handle "'+o+'"'),!0}function qze(t){var n,e;if(e=t.input.charCodeAt(t.position),e!==38)return!1;for(t.anchor!==null&&Mt(t,"duplication of an anchor property"),e=t.input.charCodeAt(++t.position),n=t.position;e!==0&&!Us(e)&&!ay(e);)e=t.input.charCodeAt(++t.position);return t.position===n&&Mt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(n,t.position),!0}function Kze(t){var n,e,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),n=t.position;r!==0&&!Us(r)&&!ay(r);)r=t.input.charCodeAt(++t.position);return t.position===n&&Mt(t,"name of an alias node must contain at least one character"),e=t.input.slice(n,t.position),Jf.call(t.anchorMap,e)||Mt(t,'unidentified alias "'+e+'"'),t.result=t.anchorMap[e],Bo(t,!0,-1),!0}function cy(t,n,e,r,o){var i,s,a,l=1,c=!1,u=!1,d,p,h,f,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,i=s=a=HN===e||Ihe===e,r&&Bo(t,!0,-1)&&(c=!0,t.lineIndent>n?l=1:t.lineIndent===n?l=0:t.lineIndent<n&&(l=-1)),l===1)for(;Wze(t)||qze(t);)Bo(t,!0,-1)?(c=!0,a=i,t.lineIndent>n?l=1:t.lineIndent===n?l=0:t.lineIndent<n&&(l=-1)):a=!1;if(a&&(a=c||o),(l===1||HN===e)&&(zN===e||Ehe===e?m=n:m=n+1,g=t.position-t.lineStart,l===1?a&&(fhe(t,g)||Gze(t,g,m))||Hze(t,m)?u=!0:(s&&Uze(t,m)||jze(t,m)||zze(t,m)?u=!0:Kze(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&Mt(t,"alias node should not have any properties")):Vze(t,m,zN===e)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=a&&fhe(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Mt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,p=t.implicitTypes.length;d<p;d+=1)if(f=t.implicitTypes[d],f.resolve(t.result)){t.result=f.construct(t.result),t.tag=f.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Jf.call(t.typeMap[t.kind||"fallback"],t.tag))f=t.typeMap[t.kind||"fallback"][t.tag];else for(f=null,h=t.typeMap.multi[t.kind||"fallback"],d=0,p=h.length;d<p;d+=1)if(t.tag.slice(0,h[d].tag.length)===h[d].tag){f=h[d];break}f||Mt(t,"unknown tag !<"+t.tag+">"),t.result!==null&&f.kind!==t.kind&&Mt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+f.kind+'", not "'+t.kind+'"'),f.resolve(t.result,t.tag)?(t.result=f.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Mt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function Zze(t){var n=t.position,e,r,o,i=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Bo(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(i=!0,s=t.input.charCodeAt(++t.position),e=t.position;s!==0&&!Us(s);)s=t.input.charCodeAt(++t.position);for(r=t.input.slice(e,t.position),o=[],r.length<1&&Mt(t,"directive name must not be less than one character in length");s!==0;){for(;S2(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Uu(s));break}if(Uu(s))break;for(e=t.position;s!==0&&!Us(s);)s=t.input.charCodeAt(++t.position);o.push(t.input.slice(e,t.position))}s!==0&&vV(t),Jf.call(phe,r)?phe[r](t,r,o):UN(t,'unknown document directive "'+r+'"')}if(Bo(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Bo(t,!0,-1)):i&&Mt(t,"directives end mark is expected"),cy(t,t.lineIndent-1,HN,!1,!0),Bo(t,!0,-1),t.checkLineBreaks&&Rze.test(t.input.slice(n,t.position))&&UN(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&qN(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Bo(t,!0,-1));return}if(t.position<t.length-1)Mt(t,"end of the stream or a document separator is expected");else return}function Bhe(t,n){t=String(t),n=n||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var e=new $ze(t,n),r=t.indexOf("\0");for(r!==-1&&(e.position=r,Mt(e,"null byte is not allowed in input")),e.input+="\0";e.input.charCodeAt(e.position)===32;)e.lineIndent+=1,e.position+=1;for(;e.position<e.length-1;)Zze(e);return e.documents}function Xze(t,n,e){n!==null&&typeof n=="object"&&typeof e>"u"&&(e=n,n=null);var r=Bhe(t,e);if(typeof n!="function")return r;for(var o=0,i=r.length;o<i;o+=1)n(r[o])}function Yze(t,n){var e=Bhe(t,n);if(e.length!==0){if(e.length===1)return e[0];throw new Hs("expected a single document in the stream, but found more")}}var Qze=Xze,Jze=Yze,Phe={loadAll:Qze,load:Jze},Lhe=Object.prototype.toString,$he=Object.prototype.hasOwnProperty,yV=65279,eHe=9,tC=10,tHe=13,nHe=32,rHe=33,oHe=34,pV=35,iHe=37,sHe=38,aHe=39,lHe=42,Vhe=44,cHe=45,GN=58,uHe=61,dHe=62,pHe=63,hHe=64,jhe=91,zhe=93,fHe=96,Hhe=123,mHe=124,Uhe=125,qi={};qi[0]="\\0";qi[7]="\\a";qi[8]="\\b";qi[9]="\\t";qi[10]="\\n";qi[11]="\\v";qi[12]="\\f";qi[13]="\\r";qi[27]="\\e";qi[34]='\\"';qi[92]="\\\\";qi[133]="\\N";qi[160]="\\_";qi[8232]="\\L";qi[8233]="\\P";var gHe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],vHe=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function wHe(t,n){var e,r,o,i,s,a,l;if(n===null)return{};for(e={},r=Object.keys(n),o=0,i=r.length;o<i;o+=1)s=r[o],a=String(n[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=t.compiledTypeMap.fallback[s],l&&$he.call(l.styleAliases,a)&&(a=l.styleAliases[a]),e[s]=a;return e}function yHe(t){var n,e,r;if(n=t.toString(16).toUpperCase(),t<=255)e="x",r=2;else if(t<=65535)e="u",r=4;else if(t<=4294967295)e="U",r=8;else throw new Hs("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+e+ei.repeat("0",r-n.length)+n}var xHe=1,nC=2;function kHe(t){this.schema=t.schema||The,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=ei.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=wHe(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?nC:xHe,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function mhe(t,n){for(var e=ei.repeat(" ",n),r=0,o=-1,i="",s,a=t.length;r<a;)o=t.indexOf(`
`,r),o===-1?(s=t.slice(r),r=a):(s=t.slice(r,o+1),r=o+1),s.length&&s!==`
`&&(i+=e),i+=s;return i}function hV(t,n){return`
`+ei.repeat(" ",t.indent*n)}function _He(t,n){var e,r,o;for(e=0,r=t.implicitTypes.length;e<r;e+=1)if(o=t.implicitTypes[e],o.resolve(n))return!0;return!1}function WN(t){return t===nHe||t===eHe}function rC(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==yV||65536<=t&&t<=1114111}function ghe(t){return rC(t)&&t!==yV&&t!==tHe&&t!==tC}function vhe(t,n,e){var r=ghe(t),o=r&&!WN(t);return(e?r:r&&t!==Vhe&&t!==jhe&&t!==zhe&&t!==Hhe&&t!==Uhe)&&t!==pV&&!(n===GN&&!o)||ghe(n)&&!WN(n)&&t===pV||n===GN&&o}function bHe(t){return rC(t)&&t!==yV&&!WN(t)&&t!==cHe&&t!==pHe&&t!==GN&&t!==Vhe&&t!==jhe&&t!==zhe&&t!==Hhe&&t!==Uhe&&t!==pV&&t!==sHe&&t!==lHe&&t!==rHe&&t!==mHe&&t!==uHe&&t!==dHe&&t!==aHe&&t!==oHe&&t!==iHe&&t!==hHe&&t!==fHe}function CHe(t){return!WN(t)&&t!==GN}function Jb(t,n){var e=t.charCodeAt(n),r;return e>=55296&&e<=56319&&n+1<t.length&&(r=t.charCodeAt(n+1),r>=56320&&r<=57343)?(e-55296)*1024+r-56320+65536:e}function Ghe(t){var n=/^\n* /;return n.test(t)}var Whe=1,fV=2,qhe=3,Khe=4,sy=5;function MHe(t,n,e,r,o,i,s,a){var l,c=0,u=null,d=!1,p=!1,h=r!==-1,f=-1,m=bHe(Jb(t,0))&&CHe(Jb(t,t.length-1));if(n||s)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Jb(t,l),!rC(c))return sy;m=m&&vhe(c,u,a),u=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Jb(t,l),c===tC)d=!0,h&&(p=p||l-f-1>r&&t[f+1]!==" ",f=l);else if(!rC(c))return sy;m=m&&vhe(c,u,a),u=c}p=p||h&&l-f-1>r&&t[f+1]!==" "}return!d&&!p?m&&!s&&!o(t)?Whe:i===nC?sy:fV:e>9&&Ghe(t)?sy:s?i===nC?sy:fV:p?Khe:qhe}function SHe(t,n,e,r,o){t.dump=(function(){if(n.length===0)return t.quotingType===nC?'""':"''";if(!t.noCompatMode&&(gHe.indexOf(n)!==-1||vHe.test(n)))return t.quotingType===nC?'"'+n+'"':"'"+n+"'";var i=t.indent*Math.max(1,e),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),a=r||t.flowLevel>-1&&e>=t.flowLevel;function l(c){return _He(t,c)}switch(MHe(n,a,t.indent,s,l,t.quotingType,t.forceQuotes&&!r,o)){case Whe:return n;case fV:return"'"+n.replace(/'/g,"''")+"'";case qhe:return"|"+whe(n,t.indent)+yhe(mhe(n,i));case Khe:return">"+whe(n,t.indent)+yhe(mhe(THe(n,s),i));case sy:return'"'+EHe(n)+'"';default:throw new Hs("impossible error: invalid scalar style")}})()}function whe(t,n){var e=Ghe(t)?String(n):"",r=t[t.length-1]===`
`,o=r&&(t[t.length-2]===`
`||t===`
`),i=o?"+":r?"":"-";return e+i+`
`}function yhe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function THe(t,n){for(var e=/(\n+)([^\n]*)/g,r=(function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,e.lastIndex=c,xhe(t.slice(0,c),n)})(),o=t[0]===`
`||t[0]===" ",i,s;s=e.exec(t);){var a=s[1],l=s[2];i=l[0]===" ",r+=a+(!o&&!i&&l!==""?`
`:"")+xhe(l,n),o=i}return r}function xhe(t,n){if(t===""||t[0]===" ")return t;for(var e=/ [^ ]/g,r,o=0,i,s=0,a=0,l="";r=e.exec(t);)a=r.index,a-o>n&&(i=s>o?s:a,l+=`
`+t.slice(o,i),o=i+1),s=a;return l+=`
`,t.length-o>n&&s>o?l+=t.slice(o,s)+`
`+t.slice(s+1):l+=t.slice(o),l.slice(1)}function EHe(t){for(var n="",e=0,r,o=0;o<t.length;e>=65536?o+=2:o++)e=Jb(t,o),r=qi[e],!r&&rC(e)?(n+=t[o],e>=65536&&(n+=t[o+1])):n+=r||yHe(e);return n}function IHe(t,n,e){var r="",o=t.tag,i,s,a;for(i=0,s=e.length;i<s;i+=1)a=e[i],t.replacer&&(a=t.replacer.call(e,String(i),a)),(nh(t,n,a,!1,!1)||typeof a>"u"&&nh(t,n,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=o,t.dump="["+r+"]"}function khe(t,n,e,r){var o="",i=t.tag,s,a,l;for(s=0,a=e.length;s<a;s+=1)l=e[s],t.replacer&&(l=t.replacer.call(e,String(s),l)),(nh(t,n+1,l,!0,!0,!1,!0)||typeof l>"u"&&nh(t,n+1,null,!0,!0,!1,!0))&&((!r||o!=="")&&(o+=hV(t,n)),t.dump&&tC===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=i,t.dump=o||"[]"}function DHe(t,n,e){var r="",o=t.tag,i=Object.keys(e),s,a,l,c,u;for(s=0,a=i.length;s<a;s+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),l=i[s],c=e[l],t.replacer&&(c=t.replacer.call(e,l,c)),nh(t,n,l,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),nh(t,n,c,!1,!1)&&(u+=t.dump,r+=u));t.tag=o,t.dump="{"+r+"}"}function NHe(t,n,e,r){var o="",i=t.tag,s=Object.keys(e),a,l,c,u,d,p;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Hs("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)p="",(!r||o!=="")&&(p+=hV(t,n)),c=s[a],u=e[c],t.replacer&&(u=t.replacer.call(e,c,u)),nh(t,n+1,c,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&tC===t.dump.charCodeAt(0)?p+="?":p+="? "),p+=t.dump,d&&(p+=hV(t,n)),nh(t,n+1,u,!0,d)&&(t.dump&&tC===t.dump.charCodeAt(0)?p+=":":p+=": ",p+=t.dump,o+=p));t.tag=i,t.dump=o||"{}"}function _he(t,n,e){var r,o,i,s,a,l;for(o=e?t.explicitTypes:t.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof n=="object"&&n instanceof a.instanceOf)&&(!a.predicate||a.predicate(n))){if(e?a.multi&&a.representName?t.tag=a.representName(n):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,Lhe.call(a.represent)==="[object Function]")r=a.represent(n,l);else if($he.call(a.represent,l))r=a.represent[l](n,l);else throw new Hs("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=r}return!0}return!1}function nh(t,n,e,r,o,i,s){t.tag=null,t.dump=e,_he(t,e,!1)||_he(t,e,!0);var a=Lhe.call(t.dump),l=r,c;r&&(r=t.flowLevel<0||t.flowLevel>n);var u=a==="[object Object]"||a==="[object Array]",d,p;if(u&&(d=t.duplicates.indexOf(e),p=d!==-1),(t.tag!==null&&t.tag!=="?"||p||t.indent!==2&&n>0)&&(o=!1),p&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&p&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(NHe(t,n,t.dump,o),p&&(t.dump="&ref_"+d+t.dump)):(DHe(t,n,t.dump),p&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!s&&n>0?khe(t,n-1,t.dump,o):khe(t,n,t.dump,o),p&&(t.dump="&ref_"+d+t.dump)):(IHe(t,n,t.dump),p&&(t.dump="&ref_"+d+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&SHe(t,t.dump,n,i,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Hs("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function AHe(t,n){var e=[],r=[],o,i;for(mV(t,e,r),o=0,i=r.length;o<i;o+=1)n.duplicates.push(e[r[o]]);n.usedDuplicates=new Array(i)}function mV(t,n,e){var r,o,i;if(t!==null&&typeof t=="object")if(o=n.indexOf(t),o!==-1)e.indexOf(o)===-1&&e.push(o);else if(n.push(t),Array.isArray(t))for(o=0,i=t.length;o<i;o+=1)mV(t[o],n,e);else for(r=Object.keys(t),o=0,i=r.length;o<i;o+=1)mV(t[r[o]],n,e)}function RHe(t,n){n=n||{};var e=new kHe(n);e.noRefs||AHe(t,e);var r=t;return e.replacer&&(r=e.replacer.call({"":r},"",r)),nh(e,0,r,!0,!0)?e.dump+`
`:""}var OHe=RHe,FHe={dump:OHe};function xV(t,n){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var Zhe=Phe.load,WJn=Phe.loadAll,Xhe=FHe.dump;var qJn=xV("safeLoad","load"),KJn=xV("safeLoadAll","loadAll"),ZJn=xV("safeDump","dump");var Po=class t{constructor(n,e,r,o,i,s){this.navigationRouter=n;this.dialog=e;this.config=r;this.state=o;this.focusedNode=Rb(this.navigationRouter.events.pipe(Cn(a=>a instanceof ns),Et(({url:a})=>a.split("/").length>1?a.split("/")[1]:void 0),Et(a=>this._network.getNode(a??""))))}_network=new iy;get nodes(){return this._network.nodes}get router(){return this._network.router}get devices(){return this._network.devices}focusedNode;new(){this._network.reset(),this.focusedNode()&&this.navigationRouter.navigate([""]),this.state.reset(!1),Es.success(this.config.translate.instant("PROJECT_CREATED"))}loadFromFile(){Es.promise(zn.openFile(".yaml"),{loading:this.config.translate.instant("PROJECT_IMPORTING"),success:n=>{try{this._network.fromObject(Zhe(n))}catch(e){throw this._network.reset(),this.state.reset(!1),e}return this.focusedNode()&&!this._network.getNode(this.focusedNode().mac??"")&&this.navigationRouter.navigate([""]),this.state.reset(!1),this.state.setState(this._network.toObject(),!1),this.config.translate.instant("PROJECT_IMPORTED")},error:()=>this.config.translate.instant("PROJECT_NOT_IMPORTED")})}saveToFile(){Es.promise(new Promise((n,e)=>{let r=["iot","simulator",...new Date().toISOString().split(/T|\./g,2)].join("_").replace(/-|:/g,"").concat(".yaml"),o=Xhe(this._network.toObject(),{noCompatMode:!0,forceQuotes:!0});n([r,o,"application/x-yaml"])}).then(([n,e,r])=>zn.saveFile(n,e,r)),{loading:this.config.translate.instant("PROJECT_EXPORTING"),success:()=>(this.state.replaceState(this._network.toObject(),!1),this.config.translate.instant("PROJECT_EXPORTED")),error:()=>this.config.translate.instant("PROJECT_NOT_EXPORTED")})}addNode(n,e){return new Promise((r,o)=>{if(this._network.router&&(Array.isArray(n)?Un.RouterTypes.some(i=>n.includes(i)):Un.RouterTypes.includes(n)))return Es.error(this.config.translate.instant("ROUTER_EXISTS")),o();this.dialog.open(VN,{context:{type:n}}).closed$.subscribe(i=>i?(this._network.addNode(Un.RouterTypes.includes(i.type)?new oy(i.name,e):new th(i.name,i.type,e)),this.state.setState(this._network.toObject(),!1),Es.success(this.config.translate.instant("NODE_ADDED",{name:i.name})),r(!0)):r(!1))})}deleteNode(n){return new Promise((e,r)=>{let o=this._network.getNode(n);if(!o)return Es.error(this.config.translate.instant("NODE_NOT_FOUND",{name:n})),r();this.dialog.open(jN,{context:{node:o}}).closed$.subscribe(i=>i?(this._network.deleteNode(i.node.mac),this.focusedNode()?.mac===o.mac&&this.navigationRouter.navigate([""]),this.state.setState(this._network.toObject(),!1),Es.success(this.config.translate.instant("NODE_DELETED",{name:i.node.name})),e(!0)):e(!1))})}getNode(n){return this._network.getNode(n)}getConnectedNodes(n){return this._network.getConnectedNodes(n)}static \u0275fac=function(e){return new(e||t)(rt(Uo),rt(Wf),rt(zn),rt(Or),rt(nc),rt(bl))};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})};var Qhe="iot-sim";var Jhe="1.0.4";var KN=(()=>{class t{_listeners=[];notify(e,r){for(let o of this._listeners)o(e,r)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(r=>e!==r)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var oC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","cdkMenuGroup",""]],hostAttrs:["role","group",1,"cdk-menu-group"],exportAs:["cdkMenuGroup"],features:[pt([{provide:KN,useClass:KN}])]})}return t})(),ZN=new Ee("cdk-menu"),sc=(function(t){return t[t.nextItem=0]="nextItem",t[t.previousItem=1]="previousItem",t[t.currentItem=2]="currentItem",t})(sc||{}),Gu=new Ee("cdk-menu-stack"),BHe={provide:Gu,deps:[[new nx,new nM,new tx(Gu)]],useFactory:t=>t||new XN},PHe=t=>({provide:Gu,deps:[[new nx,new nM,new tx(Gu)]],useFactory:n=>n||XN.inline(t)}),XN=(()=>{class t{id=R(Hf).getId("cdk-menu-stack-");_elements=[];_close=new nt;_empty=new nt;_hasFocus=new nt;closed=this._close;hasFocus=this._hasFocus.pipe(sl(!1),uh(0),Z2());emptied=this._empty;_inlineMenuOrientation=null;static inline(e){let r=new t;return r._inlineMenuOrientation=e,r}push(e){this._elements.push(e)}close(e,r){let{focusNextOnEmpty:o,focusParentTrigger:i}=ae({},r);if(this._elements.indexOf(e)>=0){let s;do s=this._elements.pop(),this._close.next({item:s,focusParentTrigger:i});while(s!==e);this.isEmpty()&&this._empty.next(o)}}closeSubMenuOf(e){let r=!1;if(this._elements.indexOf(e)>=0)for(r=this.peek()!==e;this.peek()!==e;)this._close.next({item:this._elements.pop()});return r}closeAll(e){let{focusNextOnEmpty:r,focusParentTrigger:o}=ae({},e);if(!this.isEmpty()){for(;!this.isEmpty();){let i=this._elements.pop();i&&this._close.next({item:i,focusParentTrigger:o})}this._empty.next(r)}}isEmpty(){return!this._elements.length}length(){return this._elements.length}peek(){return this._elements[this._elements.length-1]}hasInlineMenu(){return this._inlineMenuOrientation!=null}inlineMenuOrientation(){return this._inlineMenuOrientation}setHasFocus(e){this._hasFocus.next(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac})}return t})(),YN=new Ee("cdk-menu-trigger"),LHe=new Ee("cdk-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=R(Ct);return()=>jw(t)}}),efe=(()=>{class t{static _openMenuTrigger;update(e){t._openMenuTrigger!==e&&(t._openMenuTrigger?.close(),t._openMenuTrigger=e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tfe=(()=>{class t{injector=R(Ct);viewContainerRef=R(_o);menuStack=R(Gu);menuScrollStrategy=R(LHe);menuPosition;opened=new cn;closed=new cn;menuTemplateRef;menuData;overlayRef=null;destroyed=new nt;stopOutsideClicksListener=_y(this.closed,this.destroyed);childMenu;_menuPortal;_childMenuInjector;ngOnDestroy(){this._destroyOverlay(),this.destroyed.next(),this.destroyed.complete()}isOpen(){return!!this.overlayRef?.hasAttached()}registerChildMenu(e){this.childMenu=e}getMenuContentPortal(){let e=this.menuTemplateRef!==this._menuPortal?.templateRef;return this.menuTemplateRef&&(!this._menuPortal||e)&&(this._menuPortal=new Yp(this.menuTemplateRef,this.viewContainerRef,this.menuData,this._getChildMenuInjector())),this._menuPortal}isElementInsideMenuStack(e){for(let r=e;r;r=r?.parentElement??null)if(r.getAttribute("data-cdk-menu-stack-id")===this.menuStack.id)return!0;return!1}_destroyOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}_getChildMenuInjector(){return this._childMenuInjector=this._childMenuInjector||Ct.create({providers:[{provide:YN,useValue:this},{provide:Gu,useValue:this.menuStack}],parent:this.injector}),this._childMenuInjector}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,hostVars:2,hostBindings:function(r,o){r&2&&Bt("aria-controls",o.childMenu==null?null:o.childMenu.id)("data-cdk-menu-stack-id",o.menuStack.id)}})}return t})();var CV=new Ee("cdk-menu-aim");function nfe(t,n){if(!n.isTrusted)return!1;let e=t.nativeElement,r=n.keyCode;return e.nodeName==="BUTTON"&&!e.disabled?r===13||r===32:e.nodeName==="A"?r===13:!1}var iC=(()=>{class t extends tfe{_elementRef=R(Ft);_ngZone=R(Zt);_changeDetectorRef=R(Br);_inputModalityDetector=R(Nb);_directionality=R(js,{optional:!0});_renderer=R(vr);_injector=R(Ct);_cleanupMouseenter;_menuTracker=R(efe);_parentMenu=R(ZN,{optional:!0});_menuAim=R(CV,{optional:!0});constructor(){super(),this._setRole(),this._registerCloseHandler(),this._subscribeToMenuStackClosed(),this._subscribeToMouseEnter(),this._subscribeToMenuStackHasFocus(),this._setType()}toggle(){this.isOpen()?this.close():this.open()}open(){this._parentMenu||this._menuTracker.update(this),!this.isOpen()&&this.menuTemplateRef!=null&&(this.opened.next(),this.overlayRef=this.overlayRef||Uf(this._injector,this._getOverlayConfig()),this.overlayRef.attach(this.getMenuContentPortal()),this._changeDetectorRef.markForCheck(),this._subscribeToOutsideClicks())}close(){this.isOpen()&&(this.closed.next(),this.overlayRef.detach(),this._changeDetectorRef.markForCheck()),this._closeSiblingTriggers()}getMenu(){return this.childMenu}ngOnChanges(e){e.menuPosition&&this.overlayRef&&this.overlayRef.updatePositionStrategy(this._getOverlayPositionStrategy())}ngOnDestroy(){this._cleanupMouseenter(),super.ngOnDestroy()}_toggleOnKeydown(e){let r=this._parentMenu?.orientation==="vertical";switch(e.keyCode){case 32:case 13:!so(e)&&!nfe(this._elementRef,e)&&(this.toggle(),this.childMenu?.focusFirstItem("keyboard"));break;case 39:so(e)||this._parentMenu&&r&&this._directionality?.value!=="rtl"&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 37:so(e)||this._parentMenu&&r&&this._directionality?.value==="rtl"&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 40:case 38:so(e)||r||(e.preventDefault(),this.open(),e.keyCode===40?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusLastItem("keyboard"));break}}_handleClick(){this.toggle(),this.childMenu?.focusFirstItem("mouse")}_setHasFocus(e){this._parentMenu||this.menuStack.setHasFocus(e)}_subscribeToMouseEnter(){this._cleanupMouseenter=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"mouseenter",()=>{if(this._inputModalityDetector.mostRecentModality!=="touch"&&!this.menuStack.isEmpty()&&!this.isOpen()){let e=()=>this._ngZone.run(()=>{this._closeSiblingTriggers(),this.open()});this._menuAim?this._menuAim.toggle(e):e()}}))}_closeSiblingTriggers(){this._parentMenu?!this.menuStack.closeSubMenuOf(this._parentMenu)&&this.menuStack.peek()!==this._parentMenu&&this.menuStack.closeAll():this.menuStack.closeAll()}_getOverlayConfig(){return new Bu({positionStrategy:this._getOverlayPositionStrategy(),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(){return zw(this._injector,this._elementRef).withLockedPosition().withFlexibleDimensions(!1).withPositions(this._getOverlayPositions())}_getOverlayPositions(){return this.menuPosition??(!this._parentMenu||this._parentMenu.orientation==="horizontal"?eN:b$)}_registerCloseHandler(){this._parentMenu||this.menuStack.closed.pipe(ln(this.destroyed)).subscribe(({item:e})=>{e===this.childMenu&&this.close()})}_subscribeToOutsideClicks(){this.overlayRef&&this.overlayRef.outsidePointerEvents().pipe(ln(this.stopOutsideClicksListener)).subscribe(e=>{let r=ca(e),o=this._elementRef.nativeElement;r!==o&&!o.contains(r)&&(this.isElementInsideMenuStack(r)?this._closeSiblingTriggers():this.menuStack.closeAll())})}_subscribeToMenuStackHasFocus(){this._parentMenu||this.menuStack.hasFocus.pipe(ln(this.destroyed)).subscribe(e=>{e||this.menuStack.closeAll()})}_subscribeToMenuStackClosed(){this._parentMenu||this.menuStack.closed.subscribe(({focusParentTrigger:e})=>{e&&!this.menuStack.length()&&this._elementRef.nativeElement.focus()})}_setRole(){this._parentMenu||this._elementRef.nativeElement.setAttribute("role","button")}_setType(){let e=this._elementRef.nativeElement;e.nodeName==="BUTTON"&&!e.getAttribute("type")&&e.setAttribute("type","button")}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","cdkMenuTriggerFor",""]],hostAttrs:[1,"cdk-menu-trigger"],hostVars:2,hostBindings:function(r,o){r&1&&Pe("focusin",function(){return o._setHasFocus(!0)})("focusout",function(){return o._setHasFocus(!1)})("keydown",function(s){return o._toggleOnKeydown(s)})("click",function(){return o._handleClick()}),r&2&&Bt("aria-haspopup",o.menuTemplateRef?"menu":null)("aria-expanded",o.menuTemplateRef==null?null:o.isOpen())},inputs:{menuTemplateRef:[0,"cdkMenuTriggerFor","menuTemplateRef"],menuPosition:[0,"cdkMenuPosition","menuPosition"],menuData:[0,"cdkMenuTriggerData","menuData"]},outputs:{opened:"cdkMenuOpened",closed:"cdkMenuClosed"},exportAs:["cdkMenuTriggerFor"],features:[pt([{provide:YN,useExisting:t},BHe]),wr,Qr]})}return t})(),em=(()=>{class t{_dir=R(js,{optional:!0});_elementRef=R(Ft);_ngZone=R(Zt);_inputModalityDetector=R(Nb);_renderer=R(vr);_cleanupMouseEnter;_menuAim=R(CV,{optional:!0});_menuStack=R(Gu);_parentMenu=R(ZN,{optional:!0});_menuTrigger=R(iC,{optional:!0,self:!0});disabled=!1;typeaheadLabel;triggered=new cn;get hasMenu(){return this._menuTrigger?.menuTemplateRef!=null}_tabindex=-1;closeOnSpacebarTrigger=!0;destroyed=new nt;constructor(){this._setupMouseEnter(),this._setType(),this._isStandaloneItem()&&(this._tabindex=0)}ngOnDestroy(){this._cleanupMouseEnter?.(),this.destroyed.next(),this.destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}trigger(e){let{keepOpen:r}=ae({},e);!this.disabled&&!this.hasMenu&&(this.triggered.next(),r||this._menuStack.closeAll({focusParentTrigger:!0}))}isMenuOpen(){return!!this._menuTrigger?.isOpen()}getMenu(){return this._menuTrigger?.getMenu()}getMenuTrigger(){return this._menuTrigger}getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}_resetTabIndex(){this._isStandaloneItem()||(this._tabindex=-1)}_setTabIndex(e){this.disabled||(!e||!this._menuStack.isEmpty())&&(this._tabindex=0)}_handleClick(e){this.disabled?(e.preventDefault(),e.stopPropagation()):this.trigger()}_onKeydown(e){switch(e.keyCode){case 32:case 13:if(!so(e)&&!nfe(this._elementRef,e)){let r=this._elementRef.nativeElement.nodeName;r!=="A"&&r!=="BUTTON"&&e.preventDefault(),this.trigger({keepOpen:e.keyCode===32&&!this.closeOnSpacebarTrigger})}break;case 39:so(e)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._forwardArrowPressed(e):this._backArrowPressed(e));break;case 37:so(e)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._backArrowPressed(e):this._forwardArrowPressed(e));break}}_isStandaloneItem(){return!this._parentMenu}_backArrowPressed(e){let r=this._parentMenu;(this._menuStack.hasInlineMenu()||this._menuStack.length()>1)&&(e.preventDefault(),this._menuStack.close(r,{focusNextOnEmpty:this._menuStack.inlineMenuOrientation()==="horizontal"?sc.previousItem:sc.currentItem,focusParentTrigger:!0}))}_forwardArrowPressed(e){!this.hasMenu&&this._menuStack.inlineMenuOrientation()==="horizontal"&&(e.preventDefault(),this._menuStack.closeAll({focusNextOnEmpty:sc.nextItem,focusParentTrigger:!0}))}_setupMouseEnter(){if(!this._isStandaloneItem()){let e=()=>this._ngZone.run(()=>this._menuStack.closeSubMenuOf(this._parentMenu));this._cleanupMouseEnter=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"mouseenter",()=>{this._inputModalityDetector.mostRecentModality!=="touch"&&!this._menuStack.isEmpty()&&!this.hasMenu&&(this._menuAim?this._menuAim.toggle(e):e())}))}}_isParentVertical(){return this._parentMenu?.orientation==="vertical"}_setType(){let e=this._elementRef.nativeElement;e.nodeName==="BUTTON"&&!e.getAttribute("type")&&e.setAttribute("type","button")}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","cdkMenuItem",""]],hostAttrs:["role","menuitem",1,"cdk-menu-item"],hostVars:4,hostBindings:function(r,o){r&1&&Pe("blur",function(){return o._resetTabIndex()})("focus",function(){return o._setTabIndex()})("click",function(s){return o._handleClick(s)})("keydown",function(s){return o._onKeydown(s)}),r&2&&(zr("tabIndex",o._tabindex),Bt("aria-disabled",o.disabled||null),no("cdk-menu-item-disabled",o.disabled))},inputs:{disabled:[2,"cdkMenuItemDisabled","disabled",wt],typeaheadLabel:[0,"cdkMenuitemTypeaheadLabel","typeaheadLabel"]},outputs:{triggered:"cdkMenuItemTriggered"},exportAs:["cdkMenuItem"]})}return t})(),bV=class{_renderer;_items;_eventCleanups;_itemsSubscription;entered=new nt;exited=new nt;activeElement;previousElement;constructor(n,e){this._renderer=n,this._items=e,this._bindEvents(),this.entered.subscribe(r=>this.activeElement=r),this.exited.subscribe(()=>{this.previousElement=this.activeElement,this.activeElement=void 0})}destroy(){this._cleanupEvents(),this._itemsSubscription?.unsubscribe()}_bindEvents(){this._itemsSubscription=this._items.changes.pipe(sl(this._items)).subscribe(()=>{this._cleanupEvents(),this._eventCleanups=[],this._items.forEach(n=>{let e=n._elementRef.nativeElement;this._eventCleanups.push(this._renderer.listen(e,"mouseenter",()=>{this.entered.next(n)}),this._renderer.listen(e,"mouseout",()=>{this.exited.next(n)}))})})}_cleanupEvents(){this._eventCleanups?.forEach(n=>n()),this._eventCleanups=void 0}},rfe=(()=>{class t extends oC{_focusMonitor=R(Qp);ngZone=R(Zt);_renderer=R(vr);nativeElement=R(Ft).nativeElement;menuStack=R(Gu);menuAim=R(CV,{optional:!0,self:!0});dir=R(js,{optional:!0});_allItems;id=R(Hf).getId("cdk-menu-");items=new dd;orientation="vertical";isInline=!1;keyManager;destroyed=new nt;triggerItem;pointerTracker;_menuStackHasFocus=Ye(!1);_tabIndexSignal=de(()=>{let e=this._menuStackHasFocus()?-1:0;return this.isInline?e:null});ngAfterContentInit(){this.isInline||this.menuStack.push(this),this._setItems(),this._setKeyManager(),this._handleFocus(),this._subscribeToMenuStackHasFocus(),this._subscribeToMenuOpen(),this._subscribeToMenuStackClosed(),this._setUpPointerTracker()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this.nativeElement),this.keyManager?.destroy(),this.destroyed.next(),this.destroyed.complete(),this.pointerTracker?.destroy()}focusFirstItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setFirstItemActive()}focusLastItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setLastItemActive()}setActiveMenuItem(e){this.keyManager?.setActiveItem(e)}_getTabIndex(){return this._tabIndexSignal()}closeOpenMenu(e,r){let{focusParentTrigger:o}=ae({},r),i=this.keyManager,s=this.triggerItem;e===s?.getMenuTrigger()?.getMenu()&&(s?.getMenuTrigger()?.close(),o&&(s?i.setActiveItem(s):i.setFirstItemActive()))}_setItems(){this._allItems.changes.pipe(sl(this._allItems),ln(this.destroyed)).subscribe(e=>{this.items.reset(e.filter(r=>r._parentMenu===this)),this.items.notifyOnChanges()})}_setKeyManager(){this.keyManager=new b2(this.items).withWrap().withTypeAhead().withHomeAndEnd().skipPredicate(()=>!1),this.orientation==="horizontal"?this.keyManager.withHorizontalOrientation(this.dir?.value||"ltr"):this.keyManager.withVerticalOrientation()}_subscribeToMenuOpen(){let e=_y(this.items.changes,this.destroyed);this.items.changes.pipe(sl(this.items),or(r=>r.filter(o=>o.hasMenu).map(o=>o.getMenuTrigger().opened.pipe(by(o),ln(e)))),ga(),Sr(r=>(this.triggerItem=r,r.getMenuTrigger().closed)),ln(this.destroyed)).subscribe(()=>this.triggerItem=void 0)}_subscribeToMenuStackClosed(){this.menuStack.closed.pipe(ln(this.destroyed)).subscribe(({item:e,focusParentTrigger:r})=>this.closeOpenMenu(e,{focusParentTrigger:r}))}_subscribeToMenuStackHasFocus(){this.isInline&&this.menuStack.hasFocus.pipe(ln(this.destroyed)).subscribe(e=>{this._menuStackHasFocus.set(e)})}_setUpPointerTracker(){this.menuAim&&(this.ngZone.runOutsideAngular(()=>{this.pointerTracker=new bV(this._renderer,this.items)}),this.menuAim.initialize(this,this.pointerTracker))}_handleFocus(){this._focusMonitor.monitor(this.nativeElement,!1).pipe(ln(this.destroyed)).subscribe(e=>{e!==null&&e!=="mouse"&&this.focusFirstItem(e)})}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275dir=ye({type:t,contentQueries:function(r,o,i){if(r&1&&C1(i,em,5),r&2){let s;md(s=gd())&&(o._allItems=s)}},hostAttrs:["role","menu"],hostVars:4,hostBindings:function(r,o){r&1&&Pe("focusin",function(){return o.menuStack.setHasFocus(!0)})("focusout",function(){return o.menuStack.setHasFocus(!1)}),r&2&&(zr("tabIndex",o._getTabIndex())("id",o.id),Bt("aria-orientation",o.orientation)("data-cdk-menu-stack-id",o.menuStack.id))},inputs:{id:"id"},features:[wr]})}return t})(),QN=(()=>{class t extends rfe{_parentTrigger=R(YN,{optional:!0});closed=new cn;orientation="vertical";isInline=!this._parentTrigger;constructor(){super(),this.destroyed.subscribe(this.closed),this._parentTrigger?.registerChildMenu(this)}ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}ngOnDestroy(){super.ngOnDestroy(),this.closed.complete()}_handleKeyEvent(e){let r=this.keyManager;switch(e.keyCode){case 37:case 39:so(e)||(e.preventDefault(),r.setFocusOrigin("keyboard"),r.onKeydown(e));break;case 27:so(e)||(e.preventDefault(),this.menuStack.close(this,{focusNextOnEmpty:sc.currentItem,focusParentTrigger:!0}));break;case 9:so(e,"altKey","metaKey","ctrlKey")||this.menuStack.closeAll({focusParentTrigger:!0});break;default:r.onKeydown(e)}}_toggleMenuFocus(e){let r=this.keyManager;switch(e){case sc.nextItem:r.setFocusOrigin("keyboard"),r.setNextItemActive();break;case sc.previousItem:r.setFocusOrigin("keyboard"),r.setPreviousItemActive();break;case sc.currentItem:r.activeItem&&(r.setFocusOrigin("keyboard"),r.setActiveItem(r.activeItem));break}}_subscribeToMenuStackEmptied(){this.menuStack.emptied.pipe(ln(this.destroyed)).subscribe(e=>this._toggleMenuFocus(e))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","cdkMenu",""]],hostAttrs:["role","menu",1,"cdk-menu"],hostVars:2,hostBindings:function(r,o){r&1&&Pe("keydown",function(s){return o._handleKeyEvent(s)}),r&2&&no("cdk-menu-inline",o.isInline)},outputs:{closed:"closed"},exportAs:["cdkMenu"],features:[pt([{provide:oC,useExisting:t},{provide:ZN,useExisting:t},PHe("vertical")]),wr]})}return t})(),ofe=(()=>{class t extends rfe{orientation="horizontal";isInline=!0;ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}_handleKeyEvent(e){let r=this.keyManager;switch(e.keyCode){case 38:case 40:case 37:case 39:if(!so(e)&&(e.keyCode===37||e.keyCode===39)){e.preventDefault();let i=r.activeItem?.isMenuOpen();r.activeItem?.getMenuTrigger()?.close(),r.setFocusOrigin("keyboard"),r.onKeydown(e),i&&r.activeItem?.getMenuTrigger()?.open()}break;case 27:so(e)||(e.preventDefault(),r.activeItem?.getMenuTrigger()?.close());break;case 9:so(e,"altKey","metaKey","ctrlKey")||r.activeItem?.getMenuTrigger()?.close();break;default:r.onKeydown(e)}}_toggleOpenMenu(e){let r=this.keyManager;switch(e){case sc.nextItem:r.setFocusOrigin("keyboard"),r.setNextItemActive(),r.activeItem?.getMenuTrigger()?.open();break;case sc.previousItem:r.setFocusOrigin("keyboard"),r.setPreviousItemActive(),r.activeItem?.getMenuTrigger()?.open();break;case sc.currentItem:r.activeItem&&(r.setFocusOrigin("keyboard"),r.setActiveItem(r.activeItem));break}}_subscribeToMenuStackEmptied(){this.menuStack?.emptied.pipe(ln(this.destroyed)).subscribe(e=>this._toggleOpenMenu(e))}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275dir=ye({type:t,selectors:[["","cdkMenuBar",""]],hostAttrs:["role","menubar",1,"cdk-menu-bar"],hostBindings:function(r,o){r&1&&Pe("keydown",function(s){return o._handleKeyEvent(s)})},exportAs:["cdkMenuBar"],features:[pt([{provide:oC,useExisting:t},{provide:ZN,useExisting:t},{provide:Gu,useFactory:()=>XN.inline("horizontal")}]),wr]})}return t})(),uy=(()=>{class t extends em{checked=!1;closeOnSpacebarTrigger=!1;static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275dir=ye({type:t,hostVars:2,hostBindings:function(r,o){r&2&&Bt("aria-checked",!!o.checked)("aria-disabled",o.disabled||null)},inputs:{checked:[2,"cdkMenuItemChecked","checked",wt]},features:[wr]})}return t})(),JN=(()=>{class t extends uy{_selectionDispatcher=R(KN);_id=R(Hf).getId("cdk-menu-item-radio-");_removeDispatcherListener;constructor(){super(),this._registerDispatcherListener()}ngOnDestroy(){super.ngOnDestroy(),this._removeDispatcherListener()}trigger(e){super.trigger(e),this.disabled||this._selectionDispatcher.notify(this._id,"")}_registerDispatcherListener(){this._removeDispatcherListener=this._selectionDispatcher.listen(e=>{this.checked=this._id===e})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","cdkMenuItemRadio",""]],hostAttrs:["role","menuitemradio"],hostVars:2,hostBindings:function(r,o){r&2&&no("cdk-menu-item-radio",!0)},exportAs:["cdkMenuItemRadio"],features:[pt([{provide:uy,useExisting:t},{provide:em,useExisting:uy}]),wr]})}return t})(),e5=(()=>{class t extends uy{trigger(e){super.trigger(e),this.disabled||(this.checked=!this.checked)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Jr(t)))(o||t)}})();static \u0275dir=ye({type:t,selectors:[["","cdkMenuItemCheckbox",""]],hostAttrs:["role","menuitemcheckbox"],hostVars:2,hostBindings:function(r,o){r&2&&no("cdk-menu-item-checkbox",!0)},exportAs:["cdkMenuItemCheckbox"],features:[pt([{provide:uy,useExisting:t},{provide:em,useExisting:uy}]),wr]})}return t})(),$He=eN.map(t=>{let n=t.overlayX==="start"?2:-2,e=t.overlayY==="top"?2:-2;return lt(ae({},t),{offsetX:n,offsetY:e})}),t5=(()=>{class t extends tfe{_injector=R(Ct);_directionality=R(js,{optional:!0});_menuTracker=R(efe);_changeDetectorRef=R(Br);disabled=!1;constructor(){super(),this._setMenuStackCloseListener()}open(e){this._open(null,e),this._changeDetectorRef.markForCheck()}close(){this.menuStack.closeAll()}_openOnContextMenu(e){this.disabled||(e.preventDefault(),e.stopPropagation(),this._menuTracker.update(this),this._open(e,{x:e.clientX,y:e.clientY}),e.button===2?this.childMenu?.focusFirstItem("mouse"):e.button===0?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusFirstItem("program"))}_getOverlayConfig(e){return new Bu({positionStrategy:this._getOverlayPositionStrategy(e),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(e){return zw(this._injector,e).withLockedPosition().withGrowAfterOpen().withPositions(this.menuPosition??$He)}_setMenuStackCloseListener(){this.menuStack.closed.pipe(ln(this.destroyed)).subscribe(({item:e})=>{e===this.childMenu&&this.isOpen()&&(this.closed.next(),this.overlayRef.detach(),this.childMenu=void 0,this._changeDetectorRef.markForCheck())})}_subscribeToOutsideClicks(e){if(this.overlayRef){let r=this.overlayRef.outsidePointerEvents();if(e){let[o,i]=A5(r,({type:s})=>s==="auxclick");r=_y(i.pipe(L5((s,a)=>e.ctrlKey&&a===0&&s.ctrlKey)),o.pipe(My(1)))}r.pipe(ln(this.stopOutsideClicksListener)).subscribe(o=>{this.isElementInsideMenuStack(ca(o))||this.menuStack.closeAll()})}}_open(e,r){this.disabled||(this.isOpen()?(this.menuStack.closeSubMenuOf(this.childMenu),this.overlayRef.getConfig().positionStrategy.setOrigin(r),this.overlayRef.updatePosition()):(this.opened.next(),this.overlayRef?(this.overlayRef.getConfig().positionStrategy.setOrigin(r),this.overlayRef.updatePosition()):this.overlayRef=Uf(this._injector,this._getOverlayConfig(r)),this.overlayRef.attach(this.getMenuContentPortal()),this._subscribeToOutsideClicks(e)))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","cdkContextMenuTriggerFor",""]],hostVars:1,hostBindings:function(r,o){r&1&&Pe("contextmenu",function(s){return o._openOnContextMenu(s)}),r&2&&Bt("data-cdk-menu-stack-id",null)},inputs:{menuTemplateRef:[0,"cdkContextMenuTriggerFor","menuTemplateRef"],menuPosition:[0,"cdkContextMenuPosition","menuPosition"],menuData:[0,"cdkContextMenuTriggerData","menuData"],disabled:[2,"cdkContextMenuDisabled","disabled",wt]},outputs:{opened:"cdkContextMenuOpened",closed:"cdkContextMenuClosed"},exportAs:["cdkContextMenuTriggerFor"],features:[pt([{provide:YN,useExisting:t},{provide:Gu,useClass:XN}]),wr]})}return t})();var ife=(t,n)=>{let e=t==="start"?"top":t==="end"?"bottom":"center",r=(o,i,s,a)=>[{originX:o,originY:i,overlayX:s,overlayY:a},{originX:s,originY:a,overlayX:o,overlayY:i}];switch(n){case"top":return r(t,"top",t,"bottom");case"bottom":return r(t,"bottom",t,"top");case"left":return r("start",e,"end",e);case"right":return r("end",e,"start",e)}},sfe=(()=>{class t{_cdkTrigger=R(t5,{host:!0});brnCtxMenuTriggerFor=Q(null);brnCtxMenuTriggerData=Q(void 0);align=Q("center");side=Q("bottom");constructor(){this._cdkTrigger.opened.pipe(ua()).subscribe(()=>setTimeout(()=>this._cdkTrigger._spartanLastPosition=this._cdkTrigger.overlayRef._positionStrategy._lastPosition)),St(()=>this._cdkTrigger.menuTemplateRef=this.brnCtxMenuTriggerFor()),St(()=>this._cdkTrigger.menuData=this.brnCtxMenuTriggerData()),St(()=>{let e=this.align(),r=this.side();this._cdkTrigger.menuPosition=ife(e,r)})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnCtxMenuTriggerFor",""]],inputs:{brnCtxMenuTriggerFor:[1,"brnCtxMenuTriggerFor"],brnCtxMenuTriggerData:[1,"brnCtxMenuTriggerData"],align:[1,"align"],side:[1,"side"]},features:[Yt([t5])]})}return t})(),n5=(()=>{class t{_host=R(QN);_state=Ye("open");_side=Ye("top");constructor(){this.setSideWithDarkMagic(),this._host.closed.pipe(ua()).subscribe(()=>this._state.set("closed"))}setSideWithDarkMagic(){let e=this._host.menuStack.peek()===void 0;setTimeout(()=>{let r=this._host._parentTrigger._spartanLastPosition;if(!r){this._side.set(e?"top":"left");return}let o=e?r.originY:r.originX==="end"?"right":"left";this._side.set(o)})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnMenu",""],["","brnSubMenu",""]],hostVars:2,hostBindings:function(r,o){r&2&&Bt("data-state",o._state())("data-side",o._side())},features:[Yt([QN])]})}return t})(),afe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnMenuBar",""]],features:[Yt([ofe])]})}return t})(),lfe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnMenuGroup",""]],features:[Yt([oC])]})}return t})(),r5=(()=>{class t{_cdkMenuItem=R(em);disabled=Q(this._cdkMenuItem.disabled,{transform:wt});triggered=oN(this._cdkMenuItem.triggered);constructor(){St(()=>this._cdkMenuItem.disabled=this.disabled())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnMenuItem",""]],hostVars:2,hostBindings:function(r,o){r&2&&(zr("disabled",o.disabled()),Bt("data-disabled",o.disabled()?"":null))},inputs:{disabled:[1,"disabled"]},outputs:{triggered:"triggered"},features:[Yt([em])]})}return t})(),cfe=(()=>{class t{_cdkMenuItem=R(e5);checked=Q(this._cdkMenuItem.checked,{transform:wt});disabled=Q(this._cdkMenuItem.disabled,{transform:wt});triggered=oN(this._cdkMenuItem.triggered);constructor(){St(()=>this._cdkMenuItem.disabled=this.disabled()),St(()=>this._cdkMenuItem.checked=this.checked())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnMenuItemCheckbox",""]],hostVars:3,hostBindings:function(r,o){r&2&&(zr("disabled",o.disabled()),no("checked",o.checked()))},inputs:{checked:[1,"checked"],disabled:[1,"disabled"]},outputs:{triggered:"triggered"},features:[Yt([e5])]})}return t})(),ufe=(()=>{class t{_cdkMenuItem=R(JN);checked=Q(this._cdkMenuItem.checked,{transform:wt});disabled=Q(this._cdkMenuItem.disabled,{transform:wt});triggered=oN(this._cdkMenuItem.triggered);constructor(){St(()=>this._cdkMenuItem.disabled=this.disabled()),St(()=>this._cdkMenuItem.checked=this.checked())}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnMenuItemRadio",""]],hostVars:3,hostBindings:function(r,o){r&2&&(zr("disabled",o.disabled()),no("checked",o.checked()))},inputs:{checked:[1,"checked"],disabled:[1,"disabled"]},outputs:{triggered:"triggered"},features:[Yt([JN])]})}return t})(),dfe=(()=>{class t{_cdkTrigger=R(iC,{host:!0});align=Q("center");side=Q("bottom");constructor(){this._cdkTrigger.opened.pipe(ua()).subscribe(()=>setTimeout(()=>this._cdkTrigger._spartanLastPosition=this._cdkTrigger.overlayRef._positionStrategy._lastPosition)),St(()=>{let e=this.align(),r=this.side();this._cdkTrigger.menuPosition=ife(e,r)})}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnMenuTriggerFor",""]],inputs:{align:[1,"align"],side:[1,"side"]},features:[Yt([{directive:iC,inputs:["cdkMenuTriggerFor","brnMenuTriggerFor","cdkMenuTriggerData","brnMenuTriggerData"],outputs:["cdkMenuOpened","brnMenuOpened","cdkMenuClosed","brnMenuClosed"]}])]})}return t})();var jHe=["*"],zHe=ju("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-top overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",{variants:{variant:{default:"my-0.5",menubar:"my-2"}},defaultVariants:{variant:"default"}}),T2=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(zHe({variant:this.variant()}),this.userClass()));variant=Q("default");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-menu"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"],variant:[1,"variant"]},features:[Yt([n5])],ngContentSelectors:jHe,decls:1,vars:0,template:function(e,r){e&1&&(pn(),Nt(0))},encapsulation:2,changeDetection:0})};var HHe=["*"],sC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-menu-bar"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Yt([afe])],ngContentSelectors:HHe,decls:1,vars:0,template:function(e,r){e&1&&(pn(),Nt(0))},encapsulation:2,changeDetection:0})};var aC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("focus:bg-accent focus:text-accent-foreground aria-expanded:bg-accent aria-expanded:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-none select-none",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmMenuBarItem",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Yt([r5])]})};var UHe=["*"],E2=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-menu-group"]],hostAttrs:[1,"block"],features:[Yt([lfe])],ngContentSelectors:UHe,decls:1,vars:0,template:function(e,r){e&1&&(pn(),Nt(0))},encapsulation:2,changeDetection:0})};var I2=class t{variant=Q("default");inset=Q(!1,{transform:wt});userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("hover:bg-accent focus-visible:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[ng-icon]:!text-destructive [&_ng-icon]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_ng-icon]:pointer-events-none [&_ng-icon]:shrink-0",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmMenuItem",""]],hostVars:4,hostBindings:function(e,r){e&2&&(Bt("data-variant",r.variant())("data-inset",r.inset()?"":null),Le(r._computedClass()))},inputs:{variant:[1,"variant"],inset:[1,"inset"],userClass:[1,"class","userClass"]},features:[Yt([{directive:r5,inputs:["disabled","disabled"],outputs:["triggered","triggered"]}])]})};var lC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("absolute left-2 flex h-3.5 w-3.5 items-center justify-center opacity-0 group-[.checked]:opacity-100",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-menu-item-check"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[pt([br({lucideCheck:uN})])],decls:1,vars:0,consts:[["hlm","","size","1rem","name","lucideCheck"]],template:function(e,r){e&1&&We(0,"ng-icon",0)},dependencies:[Cr,yo],encapsulation:2,changeDetection:0})};var cC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("hover:bg-accent hover:text-accent-foreground focus-visible:bg-accent focus-visible:text-accent-foreground group relative flex w-full cursor-default items-center rounded-sm py-1.5 pr-2 pl-8 text-sm transition-colors outline-none select-none disabled:pointer-events-none disabled:opacity-50",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmMenuItemCheckbox",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Yt([{directive:cfe,inputs:["disabled","disabled","checked","checked"],outputs:["triggered","triggered"]}])]})};var uC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("mr-2",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmMenuIcon",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[pt([mpe({size:"sm"})])]})};var MV=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("hover:bg-accent hover:text-accent-foreground focus-visible:bg-accent focus-visible:text-accent-foreground group relative flex w-full cursor-default items-center rounded-sm py-1.5 pr-2 pl-8 text-sm transition-colors outline-none select-none disabled:pointer-events-none disabled:opacity-50",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmMenuItemRadio",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Yt([{directive:ufe,inputs:["disabled","disabled","checked","checked"],outputs:["triggered","triggered"]}])]})};var SV=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("absolute left-2 flex h-3.5 w-3.5 items-center justify-center opacity-0 group-[.checked]:opacity-100",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-menu-item-radio"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[pt([br({lucideCircle:tpe})])],decls:1,vars:0,consts:[["hlm","","size","0.5rem","name","lucideCircle",1,"*:*:fill-current"]],template:function(e,r){e&1&&We(0,"ng-icon",0)},dependencies:[Cr,yo],encapsulation:2,changeDetection:0})};var dC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("ml-auto size-4",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-menu-item-sub-indicator"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[pt([br({lucideChevronRight:Qde})])],decls:1,vars:0,consts:[["hlm","","size","sm","name","lucideChevronRight",1,"text-popover-foreground"]],template:function(e,r){e&1&&We(0,"ng-icon",0)},dependencies:[Cr,yo],encapsulation:2,changeDetection:0})};var ac=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("bg-border -mx-1 my-1 block h-px",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-menu-separator"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},decls:0,vars:0,template:function(e,r){},encapsulation:2,changeDetection:0})};var GHe=["*"],D2=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("text-muted-foreground ml-auto text-xs tracking-widest",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-menu-shortcut"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},ngContentSelectors:GHe,decls:1,vars:0,template:function(e,r){e&1&&(pn(),Nt(0))},encapsulation:2,changeDetection:0})};var WHe=["*"],pC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("border-border bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-lg",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-sub-menu"]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]},features:[Yt([n5])],ngContentSelectors:WHe,decls:1,vars:0,template:function(e,r){e&1&&(pn(),Nt(0))},encapsulation:2,changeDetection:0})};function qHe(t,n){if(t&1&&(ne(0,"button",12),le(1),Me(2,"translate"),We(3,"hlm-menu-item-sub-indicator"),re()),t&2){be(2);let e=to(19);Ke("brnMenuTriggerFor",e),ee(),Ze(" ",Se(2,2,"EXTERNAL_LIBRARY")," ")}}function KHe(t,n){if(t&1){let e=mn();ne(0,"button",11),Pe("click",function(){He(e);let o=be(2);return Ue(o.handleOnLoadExternalLibrary())}),le(1),Me(2,"translate"),re()}t&2&&(ee(),Ze(" ",Se(2,1,"IMPORT_EXTERNAL_LIBRARY")," "))}function ZHe(t,n){if(t&1&&(ne(0,"button",12),le(1),Me(2,"translate"),We(3,"hlm-menu-item-sub-indicator"),re()),t&2){be(2);let e=to(21);Ke("brnMenuTriggerFor",e),ee(),Ze(" ",Se(2,2,"MODELS")," ")}}function XHe(t,n){if(t&1){let e=mn();ne(0,"button",11),Pe("click",function(){He(e);let o=be(2);return Ue(o.handleOnLoadModels())}),le(1),Me(2,"translate"),re()}t&2&&(ee(),Ze(" ",Se(2,1,"IMPORT_MODELS")," "))}function YHe(t,n){if(t&1){let e=mn();ne(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnNewFile())}),le(3),Me(4,"translate"),ne(5,"hlm-menu-shortcut"),le(6,"\u2318N"),re()(),ne(7,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnOpenFile())}),le(8),Me(9,"translate"),ne(10,"hlm-menu-shortcut"),le(11,"\u2318O"),re()()(),We(12,"hlm-menu-separator"),ne(13,"hlm-menu-group"),It(14,qHe,4,4,"button",12)(15,KHe,3,3,"button",13),It(16,ZHe,4,4,"button",12)(17,XHe,3,3,"button",13),re(),We(18,"hlm-menu-separator"),ne(19,"hlm-menu-group")(20,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnSaveFile())}),le(21),Me(22,"translate"),ne(23,"hlm-menu-shortcut"),le(24,"\u2318S"),re()()()()}if(t&2){let e=be();ee(3),Ze(" ",Se(4,5,"NEW_FILE")," "),ee(5),Ze(" ",Se(9,7,"OPEN")," "),ee(6),Dt(e.externalLibrary()?14:15),ee(2),Dt(e.models()?16:17),ee(5),Ze(" ",Se(22,9,"SAVE")," ")}}function QHe(t,n){if(t&1){let e=mn();ne(0,"hlm-sub-menu")(1,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnLoadExternalLibrary())}),le(2),Me(3,"translate"),re(),ne(4,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnDeleteExternalLibrary())}),le(5),Me(6,"translate"),re()()}t&2&&(ee(2),Ze(" ",Se(3,2,"IMPORT_EXTERNAL_LIBRARY")," "),ee(3),Ze(" ",Se(6,4,"DELETE_EXTERNAL_LIBRARY")," "))}function JHe(t,n){if(t&1){let e=mn();ne(0,"hlm-sub-menu")(1,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnLoadModels())}),le(2),Me(3,"translate"),re(),ne(4,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnDeleteModels())}),le(5),Me(6,"translate"),re()()}t&2&&(ee(2),Ze(" ",Se(3,2,"IMPORT_MODELS")," "),ee(3),Ze(" ",Se(6,4,"DELETE_MODELS")," "))}function eUe(t,n){if(t&1){let e=mn();ne(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",14),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnUndo())}),le(3),Me(4,"translate"),ne(5,"hlm-menu-shortcut"),le(6,"\u2318Z"),re()(),ne(7,"button",14),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnRedo())}),le(8),Me(9,"translate"),ne(10,"hlm-menu-shortcut"),le(11,"\u21E7\u2318Z"),re()()()()}if(t&2){let e=be();ee(2),Ke("disabled",!e.canUndo),ee(),Ze(" ",Se(4,4,"UNDO")," "),ee(4),Ke("disabled",!e.canRedo),ee(),Ze(" ",Se(9,6,"REDO")," ")}}function tUe(t,n){if(t&1){let e=mn();ne(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",14),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnInsertRouter())}),le(3),Me(4,"translate"),ne(5,"hlm-menu-shortcut"),le(6,"\u2318\u21E7R"),re()(),ne(7,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnInsertDevice())}),le(8),Me(9,"translate"),ne(10,"hlm-menu-shortcut"),le(11,"\u2318\u21E7D"),re()()()()}if(t&2){let e=be();ee(2),Ke("disabled",!e.canInsertRouter),ee(),Ze(" ",Se(4,3,"ROUTER")," "),ee(5),Ze(" ",Se(9,5,"DEVICE")," ")}}function nUe(t,n){if(t&1){let e=mn();ne(0,"hlm-menu",10)(1,"button",15),le(2),Me(3,"translate"),We(4,"hlm-menu-item-sub-indicator"),re(),We(5,"hlm-menu-separator"),ne(6,"hlm-menu-group")(7,"button",16),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnHighContrast())}),We(8,"hlm-menu-item-check"),le(9),Me(10,"translate"),re(),ne(11,"button",16),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnGrid())}),We(12,"hlm-menu-item-check"),le(13),Me(14,"translate"),re()(),We(15,"hlm-menu-separator"),ne(16,"button",17),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnCenter())}),le(17),Me(18,"translate"),ne(19,"hlm-menu-shortcut"),le(20,"\u23250"),re()(),We(21,"hlm-menu-separator"),ne(22,"hlm-menu-group")(23,"button",17),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnZoomReset())}),le(24),Me(25,"translate"),ne(26,"hlm-menu-shortcut"),le(27,"\u23180"),re()(),ne(28,"button",17),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnZoomIn())}),le(29),Me(30,"translate"),ne(31,"hlm-menu-shortcut"),le(32,"\u2318+"),re()(),ne(33,"button",17),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnZoomOut())}),le(34),Me(35,"translate"),ne(36,"hlm-menu-shortcut"),le(37,"\u2318-"),re()()()()}if(t&2){let e=be(),r=to(29);ee(),Ke("brnMenuTriggerFor",r),ee(),Ze(" ",Se(3,10,"LANGUAGE")," "),ee(5),Ke("checked",e.highContrast()),ee(2),Ze(" ",Se(10,12,"HIGH_CONTRAST")," "),ee(2),Ke("checked",e.showGrid()),ee(2),Ze(" ",Se(14,14,"SHOW_GRID")," "),ee(4),Ze(" ",Se(18,16,"CENTER")," "),ee(7),Ze(" ",Se(25,18,"ORIGINAL_ZOOM")," "),ee(5),Ze(" ",Se(30,20,"ZOOM_IN")," "),ee(5),Ze(" ",Se(35,22,"ZOOM_OUT")," ")}}function rUe(t,n){if(t&1){let e=mn();ne(0,"hlm-sub-menu")(1,"button",16),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnLanguage("de"))}),We(2,"hlm-menu-item-check"),le(3," Deutsch "),re(),ne(4,"button",16),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnLanguage("en"))}),We(5,"hlm-menu-item-check"),le(6," English "),re(),ne(7,"button",16),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnLanguage("es"))}),We(8,"hlm-menu-item-check"),le(9," Espa\xF1ol "),re(),ne(10,"button",16),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnLanguage("fr"))}),We(11,"hlm-menu-item-check"),le(12," Fran\xE7ais "),re(),ne(13,"button",16),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnLanguage("it"))}),We(14,"hlm-menu-item-check"),le(15," Italiano "),re(),ne(16,"button",16),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnLanguage("pt"))}),We(17,"hlm-menu-item-check"),le(18," Portugu\xEAs "),re()()}if(t&2){let e=be();ee(),Ke("checked",e.language()==="de"),ee(3),Ke("checked",e.language()==="en"),ee(3),Ke("checked",e.language()==="es"),ee(3),Ke("checked",e.language()==="fr"),ee(3),Ke("checked",e.language()==="it"),ee(3),Ke("checked",e.language()==="pt")}}function oUe(t,n){if(t&1){let e=mn();ne(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnLayoutExamples())}),le(3),Me(4,"translate"),re(),ne(5,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnLibraryExamples())}),le(6),Me(7,"translate"),re(),ne(8,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnModelsExamples())}),le(9),Me(10,"translate"),re()(),We(11,"hlm-menu-separator"),ne(12,"hlm-menu-group")(13,"button",11),Pe("click",function(){He(e);let o=be();return Ue(o.handleOnSourceCode())}),le(14),Me(15,"translate"),re(),ne(16,"button",18),le(17),re()()()}if(t&2){let e=be();ee(3),Ze(" ",Se(4,5,"LAYOUT_EXAMPLES")," "),ee(3),Ze(" ",Se(7,7,"LIBRARY_EXAMPLES")," "),ee(3),Ze(" ",Se(10,9,"MODELS_EXAMPLES")," "),ee(5),Ze(" ",Se(15,11,"SOURCE_CODE")," "),ee(3),Ze(" ",e.versionName," ")}}var o5=class t{config=R(zn);state=R(Or);network=R(Po);onNewFile=Kn();onOpenFile=Kn();externalLibrary=Q.required();onLoadExternalLibrary=Kn();onDeleteExternalLibrary=Kn();models=Q.required();onLoadModels=Kn();onDeleteModels=Kn();onSaveFile=Kn();onUndo=Kn();get canUndo(){return this.state.canUndo}onRedo=Kn();get canRedo(){return this.state.canRedo}onInsertRouter=Kn();onInsertDevice=Kn();get canInsertRouter(){return!this.network.router}language=Q.required();onChangeLanguage=Kn();highContrast=Q.required();onHighContrast=Kn();showGrid=Q.required();onShowGrid=Kn();onCenter=Kn();onZoomReset=Kn();onZoomIn=Kn();get canZoomIn(){return this.config.zoom()<2}onZoomOut=Kn();get canZoomOut(){return this.config.zoom()>.5}versionName=`${Qhe} v${Jhe}`;handleOnNewFile(){this.onNewFile.emit()}handleOnOpenFile(){this.onOpenFile.emit()}handleOnLoadExternalLibrary(){this.onLoadExternalLibrary.emit()}handleOnDeleteExternalLibrary(){this.onDeleteExternalLibrary.emit()}handleOnLoadModels(){this.onLoadModels.emit()}handleOnDeleteModels(){this.onDeleteModels.emit()}handleOnSaveFile(){this.onSaveFile.emit()}handleOnUndo(){this.onUndo.emit()}handleOnRedo(){this.onRedo.emit()}handleOnInsertRouter(){this.onInsertRouter.emit()}handleOnInsertDevice(){this.onInsertDevice.emit()}handleOnLanguage(n){this.onChangeLanguage.emit(n)}handleOnHighContrast(){this.onHighContrast.emit()}handleOnGrid(){this.onShowGrid.emit()}handleOnCenter(){this.onCenter.emit()}handleOnZoomReset(){this.onZoomReset.emit()}handleOnZoomIn(){this.onZoomIn.emit()}handleOnZoomOut(){this.onZoomOut.emit()}handleOnSourceCode(){window.open("https://github.com/adbermejo-ubu/iot-sim","_blank","noopener noreferrer")}handleOnLayoutExamples(){window.open("https://github.com/adbermejo-ubu/iot-sim/tree/docs/layouts","_blank","noopener noreferrer")}handleOnLibraryExamples(){window.open("https://github.com/adbermejo-ubu/iot-sim/tree/docs/libs","_blank","noopener noreferrer")}handleOnModelsExamples(){window.open("https://github.com/adbermejo-ubu/iot-sim/tree/docs/models","_blank","noopener noreferrer")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["app-menu-bar"]],inputs:{externalLibrary:[1,"externalLibrary"],models:[1,"models"],language:[1,"language"],highContrast:[1,"highContrast"],showGrid:[1,"showGrid"]},outputs:{onNewFile:"onNewFile",onOpenFile:"onOpenFile",onLoadExternalLibrary:"onLoadExternalLibrary",onDeleteExternalLibrary:"onDeleteExternalLibrary",onLoadModels:"onLoadModels",onDeleteModels:"onDeleteModels",onSaveFile:"onSaveFile",onUndo:"onUndo",onRedo:"onRedo",onInsertRouter:"onInsertRouter",onInsertDevice:"onInsertDevice",onChangeLanguage:"onChangeLanguage",onHighContrast:"onHighContrast",onShowGrid:"onShowGrid",onCenter:"onCenter",onZoomReset:"onZoomReset",onZoomIn:"onZoomIn",onZoomOut:"onZoomOut"},decls:32,vars:20,consts:[["file",""],["librarySubmenu",""],["modelsSubmenu",""],["edit",""],["insert",""],["view",""],["languageSubmenu",""],["help",""],[1,"w-fit"],["hlmMenuBarItem","","align","start",3,"brnMenuTriggerFor"],["variant","menubar",1,"w-48"],["hlmMenuItem","",3,"click"],["hlmMenuItem","","align","start","side","right",3,"brnMenuTriggerFor"],["hlmMenuItem",""],["hlmMenuItem","",3,"click","disabled"],["inset","","hlmMenuItem","","align","start","side","right",3,"brnMenuTriggerFor"],["hlmMenuItemCheckbox","",3,"click","checked"],["inset","","hlmMenuItem","",3,"click"],["hlmMenuItem","","disabled",""]],template:function(e,r){if(e&1&&(ne(0,"hlm-menu-bar",8)(1,"button",9),le(2),Me(3,"translate"),re(),ne(4,"button",9),le(5),Me(6,"translate"),re(),ne(7,"button",9),le(8),Me(9,"translate"),re(),ne(10,"button",9),le(11),Me(12,"translate"),re(),ne(13,"button",9),le(14),Me(15,"translate"),re()(),eo(16,YHe,25,11,"ng-template",null,0,ri)(18,QHe,7,6,"ng-template",null,1,ri)(20,JHe,7,6,"ng-template",null,2,ri)(22,eUe,12,8,"ng-template",null,3,ri)(24,tUe,12,7,"ng-template",null,4,ri)(26,nUe,38,24,"ng-template",null,5,ri)(28,rUe,19,6,"ng-template",null,6,ri)(30,oUe,18,13,"ng-template",null,7,ri)),e&2){let o=to(17),i=to(23),s=to(25),a=to(27),l=to(31);ee(),Ke("brnMenuTriggerFor",o),ee(),Ze(" ",Se(3,10,"FILE")," "),ee(2),Ke("brnMenuTriggerFor",i),ee(),Ze(" ",Se(6,12,"EDIT")," "),ee(2),Ke("brnMenuTriggerFor",s),ee(),Ze(" ",Se(9,14,"INSERT")," "),ee(2),Ke("brnMenuTriggerFor",a),ee(),Ze(" ",Se(12,16,"VIEW")," "),ee(2),Ke("brnMenuTriggerFor",l),ee(),Ze(" ",Se(15,18,"HELP")," ")}},dependencies:[xr,To,dfe,I2,E2,dC,lC,D2,cC,ac,T2,pC,sC,aC,So],styles:["hlm-menu-group[_ngcontent-%COMP%] > button[_ngcontent-%COMP%], hlm-sub-menu[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{text-align:left}"]})};var iUe=ju("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",{variants:{},defaultVariants:{}}),N2=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(iUe(),this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmCard",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var hC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("px-6",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmCardContent",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var fC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("text-muted-foreground text-sm",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmCardDescription",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var mC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmCardHeader",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var gC=class t{userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe("leading-none font-semibold",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmCardTitle",""]],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var sUe=(t,n,e)=>({focused:t,dragging:n,communicating:e}),ffe=(t,n)=>({left:t,top:n}),aUe=(t,n)=>({dragging:t,communicating:n});function lUe(t,n){t&1&&We(0,"ng-icon",1)}function cUe(t,n){t&1&&We(0,"ng-icon",2)}function uUe(t,n){t&1&&We(0,"ng-icon",6)(1,"ng-icon",7)}var i5=class t{router=R(Uo);config=R(zn);network=R(Po);NodeType=Un;node=Q.required();focused=de(()=>this.network.focusedNode()?.mac===this.node().mac);clicked=!1;dragging=!1;mouseDown(n){n.preventDefault(),n.button===0&&(this.clicked=!0)}mouseMove(n){n.preventDefault(),this.clicked&&Math.sqrt(n.movementX**2+n.movementY**2)>1&&(this.dragging=!0,this.router.navigate([""])),this.dragging&&(this.clicked=!1,this.node().move(n.movementX/this.config.zoom(),-n.movementY/this.config.zoom(),!0))}mouseUp(n){if(n.preventDefault(),this.clicked)if(this.focused())this.router.navigate([""]);else{let e=this.router.url.split("/").length>2?this.router.url.split("/")[2]:"network-traffic";this.router.navigate([this.node().mac,e])}this.dragging&&this.node().move(Math.round(this.node().position.x/20)*20,Math.round(this.node().position.y/20)*20),this.clicked=!1,this.dragging=!1}supr(n){n.preventDefault(),this.focused()&&this.network.deleteNode(this.node().mac)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["app-node"]],hostAttrs:[1,"contents"],hostBindings:function(e,r){e&1&&Pe("mousedown",function(i){return r.mouseDown(i)})("mousemove",function(i){return r.mouseMove(i)},ni)("mouseup",function(i){return r.mouseUp(i)},ni)("keydown.delete",function(i){return r.supr(i)},ni)("keydown.meta.backspace",function(i){return r.supr(i)},ni)},inputs:{node:[1,"node"]},features:[pt([br({lucideCpu:npe,lucideGhost:Zw,lucideLaptop:ipe,lucideRouter:lpe,lucideShield:upe})])],decls:9,vars:20,consts:[["hlmCard","",1,"node",3,"ngClass","ngStyle"],["name","lucideRouter","size","24"],["name","lucideCpu","size","24"],[1,"node-info",3,"ngClass","ngStyle"],[1,"name","text-lg","font-bold"],[1,"ip","text-sm","text-muted-foreground","opacity-60"],["name","lucideLaptop","size","24"],["name","lucideGhost","size","1rem",1,"phantom-attacker"]],template:function(e,r){if(e&1&&(ne(0,"div",0),It(1,lUe,1,0,"ng-icon",1)(2,cUe,1,0,"ng-icon",2)(3,uUe,2,0),re(),ne(4,"div",3)(5,"span",4),le(6),re(),ne(7,"span",5),le(8),re()()),e&2){let o;Ke("ngClass",v6(7,sUe,r.focused(),r.dragging,r.node().communicating))("ngStyle",vd(11,ffe,"calc(50% + "+r.node().position.x+"px)","calc(50% - "+r.node().position.y+"px)")),ee(),Dt((o=r.node().type)===r.NodeType.ROUTER?1:o===r.NodeType.IOT?2:o===r.NodeType.COMPUTER?3:-1),ee(3),Ke("ngClass",vd(14,aUe,r.dragging,r.node().communicating))("ngStyle",vd(17,ffe,"calc(50% + "+r.node().position.x+"px)","calc(50% - "+r.node().position.y+"px)")),ee(2),it(r.node().name),ee(2),it(r.node().ip)}},dependencies:[nk,xr,Nm,bx,N2,Cr],styles:[".node[_ngcontent-%COMP%]{display:flex;position:absolute;justify-content:center;align-items:center;z-index:20;padding:0;width:60px;height:60px;border-radius:calc(var(--radius) + 4px);transform:translate(-50%,-50%);transform-origin:center;transition:top .1s,left .1s,border .1s,color .1s,background-color .1s,transform .1s;cursor:pointer}.node[_ngcontent-%COMP%]   .phantom-attacker[_ngcontent-%COMP%]{position:absolute;transform:translate(8px,8px)}.node[_ngcontent-%COMP%]     .phantom-attacker svg{stroke-width:2.5px!important;fill:hsl(var(--card-foreground));color:hsl(var(--card))}.node[_ngcontent-%COMP%]:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-offset-width: 0px}.node.dragging[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1.2);z-index:30;transition:transform .1s;cursor:grabbing}.node.focused[_ngcontent-%COMP%]{z-index:30;border-width:0px;border-color:hsl(var(--primary));color:hsl(var(--primary-foreground));background-color:hsl(var(--primary))}.node.focused[_ngcontent-%COMP%]     .phantom-attacker svg{fill:hsl(var(--primary-foreground));color:hsl(var(--primary))}.node.communicating[_ngcontent-%COMP%]{z-index:30;border-width:2px;border-color:hsl(var(--primary))}.node-info[_ngcontent-%COMP%]{display:flex;position:absolute;flex-direction:column;justify-content:center;align-items:flex-start;transform:translateY(-50%);transform-origin:center;z-index:10;transition:top .1s,left .1s,opacity .1s;margin-left:42px;width:auto;height:60px;pointer-events:none;-webkit-user-select:none;user-select:none}  .high-contrast .node-info{margin-left:34px}  .high-contrast .node-info{border-radius:calc(var(--radius) - 2px)!important}  .high-contrast .node-info{background-color:hsl(var(--card))!important}  .high-contrast .node-info{padding-left:.5rem!important;padding-right:.5rem!important}  .high-contrast .node-info{padding-top:.25rem!important;padding-bottom:.25rem!important}  .high-contrast .node-info *{color:hsl(var(--primary))!important}  .high-contrast .node-info *{opacity:1!important}.node-info.dragging[_ngcontent-%COMP%]{opacity:0;transition:opacity .1s}"]})};var mfe=GM("floatAnimation",[R1("_ => *",[Bm(":enter",[Ms({transform:"translateX(100%) translateY(-50%)",opacity:0}),A1("0.5s ease-in-out",Ms({transform:"translateX(0) translateY(-50%)",opacity:1}))],{optional:!0})]),R1("* => _",[Bm(":leave",[Ms({transform:"translateX(0) translateY(-50%)",opacity:1}),A1("0.5s ease-in-out",Ms({transform:"translateX(100%) translateY(-50%)",opacity:0}))],{optional:!0})])]),gfe=GM("fadeAnimation",[R1("_ <=> *",[]),R1("* => *",[Bm(":enter",[Ms({display:"none",opacity:0})],{optional:!0}),Bm(":leave",[A1("0.25s ease-in-out",Ms({opacity:0})),Ms({display:"none"})],{optional:!0}),Bm(":enter",[Ms({display:"flex"}),A1("0.25s ease-in-out",Ms({opacity:1}))],{optional:!0})])]);var vC=class t{invert=Q(!1,{transform:wt});theme=Q("light");position=Q("bottom-right");hotKey=Q(["altKey","KeyT"]);richColors=Q(!1,{transform:wt});expand=Q(!1,{transform:wt});duration=Q(4e3,{transform:Di});visibleToasts=Q(3,{transform:Di});closeButton=Q(!1,{transform:wt});toastOptions=Q({});offset=Q(null);dir=Q("auto");userClass=Q("",{alias:"class"});userStyle=Q({"--normal-bg":"hsl(var(--popover))","--normal-text":"hsl(var(--popover-foreground))","--normal-border":"hsl(var(--border))","--border-radius":"var(--radius)"},{alias:"style"});_computedClass=de(()=>Xe("toaster group",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-toaster"]],inputs:{invert:[1,"invert"],theme:[1,"theme"],position:[1,"position"],hotKey:[1,"hotKey"],richColors:[1,"richColors"],expand:[1,"expand"],duration:[1,"duration"],visibleToasts:[1,"visibleToasts"],closeButton:[1,"closeButton"],toastOptions:[1,"toastOptions"],offset:[1,"offset"],dir:[1,"dir"],userClass:[1,"class","userClass"],userStyle:[1,"style","userStyle"]},decls:1,vars:16,consts:[[3,"invert","theme","position","hotKey","richColors","expand","duration","visibleToasts","closeButton","toastOptions","offset","dir"]],template:function(e,r){e&1&&We(0,"ngx-sonner-toaster",0),e&2&&(ks(r.userStyle()),Le(r._computedClass()),Ke("invert",r.invert())("theme",r.theme())("position",r.position())("hotKey",r.hotKey())("richColors",r.richColors())("expand",r.expand())("duration",r.duration())("visibleToasts",r.visibleToasts())("closeButton",r.closeButton())("toastOptions",r.toastOptions())("offset",r.offset())("dir",r.dir()))},dependencies:[DK],encapsulation:2,changeDetection:0})};var pUe=t=>({$implicit:t}),hUe=(t,n)=>n.mac,fUe=(t,n)=>`${n.node1.mac}::${n.node2.mac}`;function mUe(t,n){if(t&1&&We(0,"app-node",8),t&2){let e=n.$implicit;be();let r=to(14);Ke("node",e)("brnCtxMenuTriggerFor",r)("brnCtxMenuTriggerData",gl(3,pUe,e))}}function gUe(t,n){if(t&1&&We(0,"app-connection",9),t&2){let e=n.$implicit;Ke("connection",e)}}function vUe(t,n){if(t&1){let e=mn();ne(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",11),Pe("click",function(o){He(e);let i=be();return Ue(i.onInsertNode(i.NodeType.RouterTypes,o))}),le(3),Me(4,"translate"),ne(5,"hlm-menu-shortcut"),le(6,"\u2318\u21E7R"),re()(),ne(7,"button",12),Pe("click",function(o){He(e);let i=be();return Ue(i.onInsertNode(i.NodeType.DeviceTypes,o))}),le(8),Me(9,"translate"),ne(10,"hlm-menu-shortcut"),le(11,"\u2318\u21E7D"),re()()()()}if(t&2){let e=be();ee(2),Ke("disabled",e.router),ee(),Ze(" ",Se(4,3,"INSERT_ROUTER")," "),ee(5),Ze(" ",Se(9,5,"INSERT_DEVICE")," ")}}function wUe(t,n){if(t&1){let e=mn();ne(0,"button",12),Pe("click",function(o){He(e);let i=be().$implicit,s=be();return Ue(s.onNodeAttack(i.mac,o))}),We(1,"ng-icon",18),le(2),Me(3,"translate"),re()}t&2&&(ee(2),Ze(" ",Se(3,1,"PHANTOM_ATTACKER")," "))}function yUe(t,n){if(t&1){let e=mn();ne(0,"hlm-menu",10)(1,"hlm-menu-group")(2,"button",12),Pe("click",function(o){let i=He(e).$implicit,s=be();return Ue(s.onNodeTraffic(i.mac,o))}),We(3,"ng-icon",13),le(4),Me(5,"translate"),re(),It(6,wUe,4,3,"button",14),ne(7,"button",12),Pe("click",function(o){let i=He(e).$implicit,s=be();return Ue(s.onNodeConfig(i.mac,o))}),We(8,"ng-icon",15),le(9),Me(10,"translate"),re()(),We(11,"hlm-menu-separator"),ne(12,"hlm-menu-group")(13,"button",16),Pe("click",function(o){let i=He(e).$implicit,s=be();return Ue(s.onDeleteNode(i.mac,o))}),We(14,"ng-icon",17),le(15),Me(16,"translate"),re()()()}if(t&2){let e=n.$implicit,r=be();ee(4),Ze(" ",Se(5,4,"NETWORK_TRAFFIC")," "),ee(2),Dt(r.NodeType.AttackerTypes.includes(e.type)?6:-1),ee(3),Ze(" ",Se(10,6,"CONFIGURATION")," "),ee(6),Ze(" ",Se(16,8,"DELETE")," ")}}var s5=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,r){},encapsulation:2})},a5=class t{navigationRouter=R(Uo);config=R(zn);state=R(Or);network=R(Po);library=R(bl);model=R(nc);NodeType=Un;canvas=_s.required(Bw);get nodes(){return this.network.nodes}get router(){return this.network.router}get connections(){return this.router?.connections??[]}ngAfterViewInit(){this.onCenter("instant")}getAnimationData(n){return n&&!n.isActivated?"_":n.activatedRoute.snapshot.params.mac??"_"}onNewFile(n){n?.preventDefault(),this.network.new()}onOpenFile(n){n?.preventDefault(),this.network.loadFromFile()}onLoadExternalLibrary(n){n?.preventDefault(),this.library.loadFromFile()}onDeleteExternalLibrary(n){n?.preventDefault(),this.library.deleteFile()}onLoadModels(n){n?.preventDefault(),this.model.loadFromFile()}onDeleteModels(n){n?.preventDefault(),this.model.deleteFile()}onSaveFile(n){n?.preventDefault(),this.network.saveToFile()}onUndo(n){n?.preventDefault(),this.state.undo()}onRedo(n){n?.preventDefault(),this.state.redo()}onInsertNode(n,e){let{scrollWidth:r,scrollHeight:o,scrollLeft:i,scrollTop:s}=this.canvas().frame().nativeElement,{left:a,top:l,width:c,height:u}=this.canvas().frame().nativeElement.getBoundingClientRect(),d=r/2,p=o/2;if(e?.preventDefault(),e instanceof MouseEvent){let{clientX:h,clientY:f}=e;this.network.addNode(n,{x:(h-a+i-d)/this.config.zoom(),y:(p-(f-l+s))/this.config.zoom()})}else this.network.addNode(n,{x:(c/2-a+i-d)/this.config.zoom(),y:(p-(u/2-l+s))/this.config.zoom()})}onChangeLanguage(n){this.config.language.set(n)}onHighContrast(){this.config.highContrast.update(n=>!n)}onShowGrid(){this.config.grid.update(n=>!n)}onCenter(n,e){let r=this.canvas().frame().nativeElement,{scrollHeight:o,clientHeight:i,scrollWidth:s,clientWidth:a}=r;e?.preventDefault(),r.scrollTo({top:(o-i)/2,left:(s-a)/2,behavior:n})}onZoomReset(n){n?.preventDefault(),this.config.resetZoom()}onZoomIn(n){n?.preventDefault(),this.config.zoomIn()}onZoomOut(n){n?.preventDefault(),this.config.zoomOut()}onDeleteNode(n,e){e?.preventDefault(),this.network.deleteNode(n)}onNodeTraffic(n,e){e?.preventDefault(),this.navigationRouter.navigate([n,"network-traffic"])}onNodeAttack(n,e){e?.preventDefault(),this.navigationRouter.navigate([n,"attack"])}onNodeConfig(n,e){e?.preventDefault(),this.navigationRouter.navigate([n,"configuration"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["app-root"]],viewQuery:function(e,r){e&1&&es(r.canvas,Bw,5),e&2&&bo()},hostVars:2,hostBindings:function(e,r){e&1&&Pe("keydown.meta.n",function(i){return r.onNewFile(i)},ni)("keydown.meta.o",function(i){return r.onOpenFile(i)},ni)("keydown.meta.s",function(i){return r.onSaveFile(i)},ni)("keydown.meta.z",function(i){return r.onUndo(i)},ni)("keydown.meta.shift.z",function(i){return r.onRedo(i)},ni)("keydown.meta.shift.r",function(i){return r.onInsertNode(r.NodeType.RouterTypes,i)},ni)("keydown.meta.shift.d",function(i){return r.onInsertNode(r.NodeType.DeviceTypes,i)},ni)("keydown.alt.0",function(i){return r.onCenter("smooth",i)},ni)("keydown.meta.0",function(i){return r.onZoomReset(i)},ni)("keydown.meta.+",function(i){return r.onZoomIn(i)},ni)("keydown.meta.-",function(i){return r.onZoomOut(i)},ni),e&2&&no("high-contrast",r.config.highContrast())},features:[pt([br({lucideChevronsLeftRightEllipsis:epe,lucideGhost:Zw,lucideSettings:cpe,lucideTrash:ppe})])],decls:15,vars:7,consts:[["outlet","outlet"],["canvas",""],["canvasContextMenu",""],["nodeContextMenu",""],[1,"fixed","left-5","top-5","z-inf",3,"onNewFile","onOpenFile","onLoadExternalLibrary","onDeleteExternalLibrary","onLoadModels","onDeleteModels","onSaveFile","onUndo","onRedo","onInsertRouter","onInsertDevice","onChangeLanguage","onHighContrast","onShowGrid","onCenter","onZoomReset","onZoomIn","onZoomOut","externalLibrary","models","language","highContrast","showGrid"],[1,"relative","z-inf"],["richColors","","theme","system"],["align","start",3,"brnCtxMenuTriggerFor"],[3,"node","brnCtxMenuTriggerFor","brnCtxMenuTriggerData"],[3,"connection"],[1,"w-64"],["hlmMenuItem","",3,"click","disabled"],["hlmMenuItem","",3,"click"],["hlmMenuIcon","","name","lucideChevronsLeftRightEllipsis",1,"!text-current"],["hlmMenuItem",""],["hlmMenuIcon","","name","lucideSettings",1,"!text-current"],["hlmMenuItem","",1,"text-red-500","hover:bg-red-50","hover:text-red-600","dark:text-red-400","dark:hover:bg-red-950","dark:hover:text-red-300",3,"click"],["hlmMenuIcon","","name","lucideTrash",1,"!text-current"],["hlmMenuIcon","","name","lucideGhost",1,"!text-current"]],template:function(e,r){if(e&1){let o=mn();ne(0,"app-menu-bar",4),Pe("onNewFile",function(){return He(o),Ue(r.onNewFile())})("onOpenFile",function(){return He(o),Ue(r.onOpenFile())})("onLoadExternalLibrary",function(){return He(o),Ue(r.onLoadExternalLibrary())})("onDeleteExternalLibrary",function(){return He(o),Ue(r.onDeleteExternalLibrary())})("onLoadModels",function(){return He(o),Ue(r.onLoadModels())})("onDeleteModels",function(){return He(o),Ue(r.onDeleteModels())})("onSaveFile",function(){return He(o),Ue(r.onSaveFile())})("onUndo",function(){return He(o),Ue(r.onUndo())})("onRedo",function(){return He(o),Ue(r.onRedo())})("onInsertRouter",function(){return He(o),Ue(r.onInsertNode(r.NodeType.RouterTypes))})("onInsertDevice",function(){return He(o),Ue(r.onInsertNode(r.NodeType.DeviceTypes))})("onChangeLanguage",function(s){return He(o),Ue(r.onChangeLanguage(s))})("onHighContrast",function(){return He(o),Ue(r.onHighContrast())})("onShowGrid",function(){return He(o),Ue(r.onShowGrid())})("onCenter",function(){return He(o),Ue(r.onCenter("smooth"))})("onZoomReset",function(){return He(o),Ue(r.onZoomReset())})("onZoomIn",function(){return He(o),Ue(r.onZoomIn())})("onZoomOut",function(){return He(o),Ue(r.onZoomOut())}),re(),ne(1,"div",5),We(2,"router-outlet",null,0),re(),We(4,"hlm-toaster",6),ne(5,"app-canvas",7,1),uo(7,mUe,1,5,"app-node",8,hUe),uo(9,gUe,1,1,"app-connection",9,fUe),re(),eo(11,vUe,12,7,"ng-template",null,2,ri)(13,yUe,17,10,"ng-template",null,3,ri)}if(e&2){let o=to(3),i=to(12);Ke("externalLibrary",r.library.library!==void 0)("models",r.model.models!==void 0)("language",r.config.language())("highContrast",r.config.highContrast())("showGrid",r.config.grid()),ee(),Ke("@floatAnimation",r.getAnimationData(o)),ee(4),Ke("brnCtxMenuTriggerFor",i),ee(2),po(r.nodes),ee(2),po(r.connections)}},dependencies:[Wm,Bw,LN,I2,uC,E2,D2,ac,T2,sfe,vC,o5,i5,Cr,To,So],encapsulation:2,data:{animation:[mfe]}})};var vfe=(t,n)=>{let e=R(Uo),r=R(Po),{mac:o}=t.parent.params,i=r.getNode(o);return Un.AttackerTypes.includes(i.type)?!0:new Ah(e.parseUrl(`/${o}/network-traffic`))};var wfe=(t,n)=>{let e=R(Po),{mac:r}=t.params;return!!e.getNode(r)};function xUe(t,n){t&1&&We(0,"hlm-menu-separator")}function kUe(t,n){if(t&1&&(ne(0,"hlm-option",6),le(1),re()),t&2){let e=be().$implicit;Ke("value",e),ee(),it(e.name)}}function _Ue(t,n){if(t&1&&It(0,xUe,1,0,"hlm-menu-separator")(1,kUe,2,2,"hlm-option",6),t&2){let e=n.$implicit;Dt(e==="---"?0:1)}}function bUe(t,n){t&1&&(ne(0,"hlm-option",4),le(1),Me(2,"translate"),re()),t&2&&(ee(),Ze(" ",Se(2,1,"NO_ATTACKS")," "))}function CUe(t,n){if(t&1&&(ne(0,"hlm-option",6),le(1),re()),t&2){let e=n.$implicit;Ke("value",e.ip),ee(),it(e.ip)}}function MUe(t,n){if(t&1){let e=mn();ne(0,"label",0),le(1),Me(2,"translate"),ne(3,"brn-select",1),Me(4,"translate"),fi("ngModelChange",function(o){He(e);let i=be();return Ei(i.attack,o)||(i.attack=o),Ue(o)}),ne(5,"hlm-select-trigger",2),We(6,"hlm-select-value",3),re(),ne(7,"hlm-select-content"),uo(8,_Ue,2,1,null,null,Ji,!1,bUe,3,3,"hlm-option",4),re()()(),ne(11,"label",0),le(12),Me(13,"translate"),ne(14,"brn-select",5),Me(15,"translate"),fi("ngModelChange",function(o){He(e);let i=be();return Ei(i.target,o)||(i.target=o),Ue(o)}),ne(16,"hlm-select-trigger",2),We(17,"hlm-select-value",3),re(),ne(18,"hlm-select-content"),uo(19,CUe,2,2,"hlm-option",6,Ji),re()()(),ne(21,"button",7),Pe("click",function(){He(e);let o=be();return Ue(o.execute())}),le(22),Me(23,"translate"),re()}if(t&2){let e=be();ee(),Ze(" ",Se(2,10,"ATTACK")," "),ee(2),hi("ngModel",e.attack),Ke("placeholder",Se(4,12,"SELECT_ATTACK")),ee(5),po(e.attacks),ee(4),Ze(" ",Se(13,14,e.multipleTargets()?"TARGETS":"TARGET")," "),ee(2),hi("ngModel",e.target),Ke("placeholder",Se(15,16,e.multipleTargets()?"TARGETS_IP":"TARGET_IP"))("multiple",e.multipleTargets()),ee(5),po(e.connectedNodes),ee(2),Ke("disabled",!(e.attack()&&e.target())),ee(),Ze(" ",Se(23,18,"LAUNCH_ATTACK")," ")}}function SUe(t,n){t&1&&(We(0,"ng-icon",8),ne(1,"p",9),le(2),Me(3,"translate"),re()),t&2&&(ee(2),Ze(" ",Se(3,1,"ATTACKER_NOT_CONNECTED")," "))}var l5=class t{network=R(Po);node=Q.required();attack=Ii(null);target=Ii(null);multipleTargets=de(()=>this.attack()?.multiple??!1);get canConnect(){return this.network.router!==void 0}get attacks(){let n=this.node().generator.internalAttacks,e=this.node().generator.externalAttacks;return n.length>0&&e.length>0?[...n,"---",...e]:[...n,...e]}get connectedNodes(){return this.network.getConnectedNodes(this.node().mac)}constructor(){St(()=>{this.multipleTargets()?this.target.update(n=>n&&!Array.isArray(n)?[n]:n):this.target.update(n=>n&&Array.isArray(n)?n[0]:n)})}ngOnChanges(n){this.attack.set(null),this.target.set(null)}connect(){this.node().connect(this.network.router)}execute(){switch(this.attack().id){case"dos":this.node().generator.dos(this.target(),53,[32,128],200);break;default:this.node().generator.attack(this.attack().id,...Array.isArray(this.target())?this.target():[this.target()]);break}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["ng-component"]],hostAttrs:[1,"flex","flex-col","gap-4","pb-6"],inputs:{node:[1,"node"],attack:[1,"attack"],target:[1,"target"]},outputs:{attack:"attackChange",target:"targetChange"},features:[pt([br({lucideUnplug:pN})]),Qr],decls:2,vars:1,consts:[["hlmLabel","",1,"flex-col","items-start","justify-start"],[1,"mt-2!","inline-block","w-full",3,"ngModelChange","ngModel","placeholder"],[1,"w-full"],[1,"block"],["disabled","",1,"px-2"],[1,"mt-2!","inline-block","w-full",3,"ngModelChange","ngModel","placeholder","multiple"],[3,"value"],["hlmBtn","",3,"click","disabled"],["name","lucideUnplug","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],[1,"w-96","self-center","text-center","text-sm","text-muted-foreground"]],template:function(e,r){e&1&&It(0,MUe,24,20)(1,SUe,4,3),e&2&&Dt(r.node().connected?0:1)},dependencies:[xr,$u,Lu,ic,To,nl,zs,Vu,ma,da,ac,gs,ha,pa,fa,Cr,So],encapsulation:2})};function TUe(t,n){if(t&1&&(cx(0),le(1),Me(2,"translate"),ux()),t&2){let e=n.$implicit,r=be();ee(),Ze(" ",Se(2,1,r.NodeType.toString(e))," ")}}function EUe(t,n){if(t&1&&(ne(0,"hlm-option",7),le(1),re()),t&2){let e=n.$implicit,r=be();Ke("value",e),ee(),Ze(" ",r.config.translate.instant(r.NodeType.toString(e))," ")}}var c5=class t{config=R(zn);network=R(Po);NodeType=Un;node=Q.required();delete(){this.network.deleteNode(this.node().mac)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["ng-component"]],hostAttrs:[1,"flex","flex-col","gap-4","pb-6"],inputs:{node:[1,"node"]},decls:24,vars:25,consts:[["hlmLabel","",1,"flex-col","items-start","justify-start"],["hlmInput","","type","text",1,"mt-2!","w-full",3,"ngModelChange","ngModel","placeholder"],["hlmInput","","type","text","disabled","",1,"mt-2!","w-full",3,"ngModel","placeholder"],[1,"mt-2!","inline-block","w-full",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"w-full"],[1,"block"],[4,"brnSelectValue"],[3,"value"],["hlmBtn","","variant","destructive",3,"click"]],template:function(e,r){e&1&&(ne(0,"label",0),le(1),Me(2,"translate"),ne(3,"input",1),Me(4,"translate"),fi("ngModelChange",function(i){return Ei(r.node().name,i)||(r.node().name=i),i}),re()(),ne(5,"label",0),le(6),Me(7,"translate"),We(8,"input",2),Me(9,"translate"),re(),ne(10,"label",0),le(11),Me(12,"translate"),ne(13,"brn-select",3),Me(14,"translate"),fi("ngModelChange",function(i){return Ei(r.node().type,i)||(r.node().type=i),i}),ne(15,"hlm-select-trigger",4)(16,"hlm-select-value",5),eo(17,TUe,3,3,"ng-container",6),re()(),ne(18,"hlm-select-content"),uo(19,EUe,2,2,"hlm-option",7,Ji),re()()(),ne(21,"button",8),Pe("click",function(){return r.delete()}),le(22),Me(23,"translate"),re()),e&2&&(ee(),Ze(" ",Se(2,11,"NAME")," "),ee(2),hi("ngModel",r.node().name),Ke("placeholder",Se(4,13,"DEVICE_NAME")),ee(3),Ze(" ",Se(7,15,"IP")," "),ee(2),Ke("ngModel",r.node().ip)("placeholder",Se(9,17,"DEVICE_IP")),ee(3),Ze(" ",Se(12,19,"TYPE")," "),ee(2),hi("ngModel",r.node().type),Ke("placeholder",Se(14,21,"SELECT_DEVICE_TYPE"))("disabled",r.NodeType.getTypes(r.node().type).length<=1),ee(6),po(r.NodeType.getTypes(r.node().type)),ee(3),Ze(" ",Se(23,23,"DELETE"),`
`))},dependencies:[xr,$u,Kf,Lu,ic,To,nl,zs,Vu,FN,ma,eh,da,gs,ha,pa,fa,So],encapsulation:2})};var IUe=["tooltip"];function DUe(t,n){if(t&1&&le(0),t&2){let e=be();Ze(" ",e.content," ")}}function NUe(t,n){if(t&1&&Ti(0,2),t&2){let e=be();Ke("ngTemplateOutlet",e.content)}}var u5=(()=>{class t{tooltipTemplate=Ye(null);static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnTooltip",""]]})}return t})(),AUe=(()=>{class t{_cdr=R(Br);_isBrowser=Cs(R(zo));_renderer2=R(vr);_contentHovered=Ye(!1);tooltipClasses=Ye("");side=Ye("above");content=null;_showTimeoutId;_hideTimeoutId;_animateTimeoutId;triggerElement;mouseLeaveHideDelay=0;exitAnimationDuration=0;tooltip=_s("tooltip",{read:Ft});_closeOnInteraction=!1;_isVisible=!1;_onHide=new nt;afterHidden=this._onHide.asObservable();show(e){this._hideTimeoutId!==null&&clearTimeout(this._hideTimeoutId),this._animateTimeoutId!==null&&clearTimeout(this._animateTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleDataAttributes(!0,this.side()),this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e,r){this._showTimeoutId!==null&&clearTimeout(this._showTimeoutId),this._animateTimeoutId=setTimeout(()=>{this._animateTimeoutId=void 0,!this._contentHovered()&&this._toggleDataAttributes(!1,this.side())},Math.max(e,0)),this._hideTimeoutId=setTimeout(()=>{this._hideTimeoutId=void 0,!this._contentHovered()&&this._toggleVisibility(!1)},e+r)}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this.triggerElement=void 0}_isTypeOfString(e){return typeof e=="string"}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0,0)}_markForCheck(){this._cdr.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this.triggerElement?.contains(e))&&(this.isVisible()?this.hide(this.mouseLeaveHideDelay,this.exitAnimationDuration):this._finalize(!1)),this._contentHovered.set(!1)}_cancelPendingAnimations(){this._showTimeoutId!==null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!==null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalize(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let r=this.tooltip()?.nativeElement;!r||!this._isBrowser||(this._renderer2.setStyle(r,"visibility",e?"visible":"hidden"),e?this._renderer2.removeStyle(r,"display"):this._renderer2.setStyle(r,"display","none"),this._isVisible=e)}_toggleDataAttributes(e,r){let o=this.tooltip()?.nativeElement;!o||!this._isBrowser||(this._renderer2.setAttribute(o,"data-side",r),this._renderer2.setAttribute(o,"data-state",e?"open":"closed"))}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=je({type:t,selectors:[["brn-tooltip-content"]],viewQuery:function(r,o){r&1&&es(o.tooltip,IUe,5,Ft),r&2&&bo()},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(r,o){r&1&&Pe("mouseleave",function(s){return o._handleMouseLeave(s)}),r&2&&wc("zoom",o.isVisible()?1:null)},decls:4,vars:5,consts:[["tooltip",""],[3,"mouseenter","mouseleave"],[3,"ngTemplateOutlet"]],template:function(r,o){if(r&1){let i=mn();ne(0,"div",1,0),Pe("mouseenter",function(){return He(i),Ue(o._contentHovered.set(!0))})("mouseleave",function(){return He(i),Ue(o._contentHovered.set(!1))}),It(2,DUe,1,1)(3,NUe,1,1,"ng-container",2),re()}r&2&&(Le(o.tooltipClasses()),wc("visibility","hidden"),ee(2),Dt(o._isTypeOfString(o.content)?2:3))},dependencies:[S1],encapsulation:2,changeDetection:0})}return t})(),kfe=(()=>{class t{_brnTooltipDirective=R(u5,{optional:!0});_tpl=R(ti);constructor(){!this._brnTooltipDirective||!this._tpl||this._brnTooltipDirective.tooltipTemplate.set(this._tpl)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnTooltipContent",""]]})}return t})(),TV={showDelay:0,hideDelay:0,exitAnimationDuration:0,touchendHideDelay:1500},_fe=new Ee("brn-tooltip-default-options",{providedIn:"root",factory:()=>TV});function bfe(t){return{provide:_fe,useValue:ae(ae({},TV),t)}}function RUe(){return R(_fe,{optional:!0})??TV}var OUe=20;function yfe(t){return Error(`Tooltip position "${t}" is invalid.`)}var Cfe=new Ee("brn-tooltip-scroll-strategy"),FUe={provide:Cfe,deps:[Sb],useFactory:t=>()=>t.scrollStrategies.reposition({scrollThrottle:OUe})},BUe="tooltip-panel",xfe=Ib({passive:!0}),PUe=500,LUe=8,$Ue=8,Mfe=(()=>{class t{_tooltipDirective=R(u5,{optional:!0});_tooltipComponent=AUe;_cssClassPrefix="brn";_destroyed=new nt;_passiveListeners=[];_defaultOptions=RUe();_overlay=R(Sb);_elementRef=R(Ft);_scrollDispatcher=R(Pw);_viewContainerRef=R(_o);_ngZone=R(Zt);_platform=R(Qo);_ariaDescriber=R(qpe);_focusMonitor=R(Qp);_dir=R(js);_scrollStrategy=R(Cfe);_document=R(Gt);_portal;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_viewportMargin=8;_currentPosition;_touchstartTimeout;_overlayRef=null;_tooltipInstance=null;position=Q(this._defaultOptions?.position??"above");positionAtOrigin=Q(this._defaultOptions?.positionAtOrigin??!1,{transform:wt});brnTooltipDisabled=Q(!1,{transform:wt});showDelay=Q(this._defaultOptions?.showDelay??0,{transform:Di});hideDelay=Q(this._defaultOptions?.hideDelay??0,{transform:Di});exitAnimationDuration=Q(this._defaultOptions?.exitAnimationDuration??0,{transform:Di});tooltipContentClasses=Q(this._defaultOptions?.tooltipContentClasses??"",{alias:"tooltipContentClasses"});computedTooltipContentClasses=de(()=>Ye(this.tooltipContentClasses()));touchGestures=Q(this._defaultOptions?.touchGestures??"auto");ariaDescribedBy=Q("",{alias:"aria-describedby"});computedAriaDescribedBy=de(()=>Ye(this.ariaDescribedBy()));ariaDescribedByPrevious=yde(this.computedAriaDescribedBy);brnTooltipTrigger=Q(null);brnTooltipTriggerState=de(()=>this._tooltipDirective?this._tooltipDirective.tooltipTemplate():this.brnTooltipTrigger());constructor(){this._dir.change.pipe(ln(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=LUe,this._initBrnTooltipTriggerEffect(),this._initAriaDescribedByPreviousEffect(),this._initTooltipContentClassesEffect(),this._initPositionEffect(),this._initPositionAtOriginEffect(),this._initBrnTooltipDisabledEffect(),this._initExitAnimationDurationEffect(),this._initHideDelayEffect()}setTooltipContentClasses(e){this.computedTooltipContentClasses().set(e)}setAriaDescribedBy(e){this.computedAriaDescribedBy().set(e)}_initPositionEffect(){St(()=>{this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition())})}_initBrnTooltipDisabledEffect(){St(()=>{this.brnTooltipDisabled()?this.hide(0):this._setupPointerEnterEventsIfNeeded()})}_initPositionAtOriginEffect(){St(()=>{let e=this.positionAtOrigin();this._detach(),this._overlayRef=null})}_initTooltipContentClassesEffect(){St(()=>{this._tooltipInstance&&this._tooltipInstance.tooltipClasses.set(this.computedTooltipContentClasses()()??"")})}_initAriaDescribedByPreviousEffect(){St(()=>{let e=this.computedAriaDescribedBy()();this._ariaDescriber.removeDescription(this._elementRef.nativeElement,wn(()=>this.ariaDescribedByPrevious()()),"tooltip"),e&&!this._isTooltipVisible()&&this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,e,"tooltip")})})})}_initBrnTooltipTriggerEffect(){St(()=>{let e=this.brnTooltipTriggerState(),r=this._isTooltipVisible();wn(()=>{!e&&r?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipContent())})})}_initExitAnimationDurationEffect(){St(()=>{this._tooltipInstance&&(this._tooltipInstance.exitAnimationDuration=this.exitAnimationDuration())})}_initHideDelayEffect(){St(()=>{this._tooltipInstance&&(this._tooltipInstance.mouseLeaveHideDelay=this.hideDelay())})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(ln(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))}),_de&&!this.computedAriaDescribedBy()&&console.warn('BrnTooltip: "aria-describedby" attribute is required for accessibility')}ngOnDestroy(){let e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([r,o])=>e.removeEventListener(r,o,xfe)),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.computedAriaDescribedBy()(),"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay(),r){if(this.brnTooltipDisabled()||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let o=this._createOverlay(r);this._detach(),this._portal=this._portal||new zf(this._tooltipComponent,this._viewContainerRef);let i=this._tooltipInstance=o.attach(this._portal).instance;i.triggerElement=this._elementRef.nativeElement,i.mouseLeaveHideDelay=this.hideDelay(),i.tooltipClasses.set(this.computedTooltipContentClasses()()),i.exitAnimationDuration=this.exitAnimationDuration(),i.side.set(this._currentPosition??"above"),i.afterHidden.pipe(ln(this._destroyed)).subscribe(()=>this._detach()),this._updateTooltipContent(),i.show(e)}hide(e=this.hideDelay(),r=this.exitAnimationDuration()){let o=this._tooltipInstance;o&&(o.isVisible()?o.hide(e,r):(o._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let i=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin()||!e)&&i._origin instanceof Ft)return this._overlayRef;this._detach()}let r=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),o=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin()?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(r);return o.positionChanges.pipe(ln(this._destroyed)).subscribe(i=>{this._updateCurrentPositionClass(i.connectionPair),this._tooltipInstance&&i.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:o,panelClass:`${this._cssClassPrefix}-${BUe}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(ln(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(ln(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(ln(this._destroyed)).subscribe(i=>{this._isTooltipVisible()&&i.key==="Escape"&&!so(i)&&(i.preventDefault(),i.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef?.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let r=e.getConfig().positionStrategy,o=this._getOrigin(),i=this._getOverlayPosition();r.withPositions([this._addOffset(ae(ae({},o.main),i.main)),this._addOffset(ae(ae({},o.fallback),i.fallback))])}_addOffset(e){let r=$Ue,o=!this._dir||this._dir.value==="ltr";return e.originY==="top"?e.offsetY=-r:e.originY==="bottom"?e.offsetY=r:e.originX==="start"?e.offsetX=o?-r:r:e.originX==="end"&&(e.offsetX=o?r:-r),e}_getOrigin(){let e=!this._dir||this._dir.value==="ltr",r=this.position(),o;if(r==="above"||r==="below")o={originX:"center",originY:r==="above"?"top":"bottom"};else if(r==="before"||r==="left"&&e||r==="right"&&!e)o={originX:"start",originY:"center"};else if(r==="after"||r==="right"&&e||r==="left"&&!e)o={originX:"end",originY:"center"};else if(typeof mx()>"u"||mx())throw yfe(r);let{x:i,y:s}=this._invertPosition(o.originX,o.originY);return{main:o,fallback:{originX:i,originY:s}}}_getOverlayPosition(){let e=!this._dir||this._dir.value==="ltr",r=this.position(),o;if(r==="above")o={overlayX:"center",overlayY:"bottom"};else if(r==="below")o={overlayX:"center",overlayY:"top"};else if(r==="before"||r==="left"&&e||r==="right"&&!e)o={overlayX:"end",overlayY:"center"};else if(r==="after"||r==="right"&&e||r==="left"&&!e)o={overlayX:"start",overlayY:"center"};else if(typeof mx()>"u"||mx())throw yfe(r);let{x:i,y:s}=this._invertPosition(o.overlayX,o.overlayY);return{main:o,fallback:{overlayX:i,overlayY:s}}}_updateTooltipContent(){this._tooltipInstance&&(this._tooltipInstance.content=this.brnTooltipTriggerState(),this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Fr(1),ln(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef?.updatePosition()}))}_invertPosition(e,r){return this.position()==="above"||this.position()==="below"?r==="top"?r="bottom":r==="bottom"&&(r="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:r}}_updateCurrentPositionClass(e){let{overlayY:r,originX:o,originY:i}=e,s;r==="center"?this._dir&&this._dir.value==="rtl"?s=o==="end"?"left":"right":s=o==="start"?"left":"right":s=r==="bottom"&&i==="top"?"above":"below",s!==this._currentPosition&&(this._tooltipInstance?.side.set(s),this._currentPosition=s)}_setupPointerEnterEventsIfNeeded(){this.brnTooltipDisabled()||!this.brnTooltipTriggerState()||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let r;e.x!==void 0&&e.y!==void 0&&(r=e),this.show(void 0,r)}]):this.touchGestures()!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let r=e.targetTouches?.[0],o=r?{x:r.clientX,y:r.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,o),PUe)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",r=>{let o=r.relatedTarget;(!o||!this._overlayRef?.overlayElement.contains(o))&&this.hide()}],["wheel",r=>this._wheelListener(r)]);else if(this.touchGestures()!=="off"){this._disableNativeGesturesIfNecessary();let r=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};e.push(["touchend",r],["touchcancel",r])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([r,o])=>{this._elementRef.nativeElement.addEventListener(r,o,xfe)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let r=this._document.elementFromPoint(e.clientX,e.clientY),o=this._elementRef.nativeElement;r!==o&&!o.contains(r)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures();if(e!=="off"){let r=this._elementRef.nativeElement,o=r.style;(e==="on"||r.nodeName!=="INPUT"&&r.nodeName!=="TEXTAREA")&&(o.userSelect=o.msUserSelect=o.webkitUserSelect=o.MozUserSelect="none"),(e==="on"||!r.draggable)&&(o.webkitUserDrag="none"),o.touchAction="none",o.webkitTapHighlightColor="transparent"}}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ye({type:t,selectors:[["","brnTooltipTrigger",""]],hostAttrs:[1,"brn-tooltip-trigger"],hostVars:2,hostBindings:function(r,o){r&2&&no("brn-tooltip-disabled",o.brnTooltipDisabled())},inputs:{position:[1,"position"],positionAtOrigin:[1,"positionAtOrigin"],brnTooltipDisabled:[1,"brnTooltipDisabled"],showDelay:[1,"showDelay"],hideDelay:[1,"hideDelay"],exitAnimationDuration:[1,"exitAnimationDuration"],tooltipContentClasses:[1,"tooltipContentClasses"],touchGestures:[1,"touchGestures"],ariaDescribedBy:[1,"aria-describedby","ariaDescribedBy"],brnTooltipTrigger:[1,"brnTooltipTrigger"]},exportAs:["brnTooltipTrigger"],features:[pt([FUe])]})}return t})();var VUe=()=>({display:"contents"}),jUe=["*"],wC=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["hlm-tooltip"]],hostVars:3,hostBindings:function(e,r){e&2&&ks(Dm(2,VUe))},features:[Yt([u5])],ngContentSelectors:jUe,decls:1,vars:0,template:function(e,r){e&1&&(pn(),Nt(0))},encapsulation:2,changeDetection:0})};var zUe="bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=below]:slide-in-from-top-2 data-[side=above]:slide-in-from-bottom-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 ",yC=class t{static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["","hlmTooltipTrigger",""]],features:[pt([bfe({showDelay:150,hideDelay:300,exitAnimationDuration:150,tooltipContentClasses:zUe})]),Yt([{directive:Mfe,inputs:["brnTooltipDisabled","hlmTooltipDisabled","brnTooltipTrigger","hlmTooltipTrigger","aria-describedby","aria-describedby","position","position","positionAtOrigin","positionAtOrigin","hideDelay","hideDelay","showDelay","showDelay","exitAnimationDuration","exitAnimationDuration","touchGestures","touchGestures"]}])]})};function UUe(t,n){if(t&1&&(ne(0,"span",8),le(1),re()),t&2){let e=be();ee(),Ze(" ",e.context.packet.payload," ")}}function GUe(t,n){if(t&1&&(ne(0,"div",3)(1,"label",4),le(2),Me(3,"translate"),re(),ne(4,"span",5),le(5),re()()),t&2){let e=be();ee(2),it(Se(3,2,"PACKET_TYPE")),ee(3),it(e.context.packet.type)}}function WUe(t,n){if(t&1&&(ne(0,"div",3)(1,"label",4),le(2),Me(3,"translate"),re(),ne(4,"span",5),le(5),re()()),t&2){let e=be();ee(2),it(Se(3,2,"PACKET_CODE")),ee(3),it(e.context.packet.code)}}function qUe(t,n){if(t&1&&(ne(0,"div",3)(1,"label",4),le(2),Me(3,"translate"),re(),ne(4,"span",5),le(5),re()()),t&2){let e=be();ee(2),it(Se(3,2,"PACKET_IDENTIFIER")),ee(3),it(e.context.packet.identifier)}}function KUe(t,n){if(t&1&&(ne(0,"div",3)(1,"label",4),le(2),Me(3,"translate"),re(),ne(4,"span",5),le(5),re()()),t&2){let e=be();ee(2),it(Se(3,2,"PACKET_SEQUENCE")),ee(3),it(e.context.packet.sequence)}}function ZUe(t,n){if(t&1&&(ne(0,"div",3)(1,"label",4),le(2),Me(3,"translate"),re(),ne(4,"span",5),le(5),re()()),t&2){let e=be();ee(2),it(Se(3,2,"PACKET_TCP_FLAGS")),ee(3),it(e.context.packet.tcpFlags)}}function XUe(t,n){if(t&1&&(ne(0,"div",3)(1,"label",4),le(2),Me(3,"translate"),re(),ne(4,"span",5),le(5),re()()),t&2){let e=be();ee(2),it(Se(3,2,"PACKET_ACK")),ee(3),it(e.context.packet.ack)}}var d5=class t{config=R(zn);ref=R(ms);context=Pu();ngOnInit(){}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["app-show-packet-dialog"]],hostAttrs:[1,"min-w-96","max-h-[80vh]","flex","flex-col","gap-4"],decls:86,vars:62,consts:[[1,"px-6"],["hlmDialogTitle",""],[1,"grid","gap-4","overflow-y-auto","px-6","pb-6"],[1,"grid","grid-cols-4","items-center","gap-4"],["hlmLabel","",1,"items-center","text-right","text-sm","font-medium","text-muted-foreground"],[1,"col-span-3","overflow-hidden","text-ellipsis"],["hlmTooltipTrigger","","showDelay","500",1,"col-span-3","inline-block","truncate"],["class","wrap-break-word overflow-hidden whitespace-normal break-all",4,"brnTooltipContent"],[1,"wrap-break-word","overflow-hidden","whitespace-normal","break-all"]],template:function(e,r){e&1&&(ne(0,"hlm-dialog-header",0)(1,"h3",1),le(2),Me(3,"translate"),re()(),ne(4,"div",2)(5,"div",3)(6,"label",4),le(7),Me(8,"translate"),re(),ne(9,"span",5),le(10),re()(),ne(11,"div",3)(12,"label",4),le(13),Me(14,"translate"),re(),ne(15,"span",5),le(16),re()(),ne(17,"div",3)(18,"label",4),le(19),Me(20,"translate"),re(),ne(21,"span",5),le(22),re()(),ne(23,"div",3)(24,"label",4),le(25),Me(26,"translate"),re(),ne(27,"span",5),le(28),re()(),ne(29,"div",3)(30,"label",4),le(31),Me(32,"translate"),re(),ne(33,"span",5),le(34),re()(),ne(35,"div",3)(36,"label",4),le(37),Me(38,"translate"),re(),ne(39,"span",5),le(40),re()(),ne(41,"div",3)(42,"label",4),le(43),Me(44,"translate"),re(),ne(45,"hlm-tooltip")(46,"span",6),le(47),re(),eo(48,UUe,2,1,"span",7),re()(),ne(49,"div",3)(50,"label",4),le(51),Me(52,"translate"),re(),ne(53,"span",5),le(54),re()(),ne(55,"div",3)(56,"label",4),le(57),Me(58,"translate"),re(),ne(59,"span",5),le(60),re()(),ne(61,"div",3)(62,"label",4),le(63),Me(64,"translate"),re(),ne(65,"span",5),le(66),re()(),ne(67,"div",3)(68,"label",4),le(69),Me(70,"translate"),re(),ne(71,"span",5),le(72),Me(73,"date"),re()(),ne(74,"div",3)(75,"label",4),le(76),Me(77,"translate"),re(),ne(78,"span",5),le(79),re()(),It(80,GUe,6,4,"div",3),It(81,WUe,6,4,"div",3),It(82,qUe,6,4,"div",3),It(83,KUe,6,4,"div",3),It(84,ZUe,6,4,"div",3),It(85,XUe,6,4,"div",3),re()),e&2&&(ee(2),it(Se(3,31,"PACKET_DETAILS")),ee(5),it(Se(8,33,"PACKET_SRC_IP")),ee(3),it(r.context.packet.srcIP),ee(3),it(Se(14,35,"PACKET_DST_IP")),ee(3),it(r.context.packet.dstIP),ee(3),it(Se(20,37,"PACKET_SRC_PORT")),ee(3),it(r.context.packet.srcPort),ee(3),it(Se(26,39,"PACKET_DST_PORT")),ee(3),it(r.context.packet.dstPort),ee(3),it(Se(32,41,"PACKET_TRANSPORT_PROTOCOL")),ee(3),it(r.context.packet.transportProtocol),ee(3),it(Se(38,43,"PACKET_APPLICATION_PROTOCOL")),ee(3),it(r.context.packet.applicationProtocol),ee(3),it(Se(44,45,"PACKET_PAYLOAD")),ee(4),Ze(" ",r.context.packet.payload," "),ee(4),it(Se(52,47,"PACKET_TOTAL_BYTES")),ee(3),it(r.context.packet.totalBytes),ee(3),it(Se(58,49,"PACKET_HEADER_SIZE")),ee(3),it(r.context.packet.headerSize),ee(3),it(Se(64,51,"PACKET_PAYLOAD_SIZE")),ee(3),it(r.context.packet.payloadSize),ee(3),it(Se(70,53,"PACKET_TIMESTAMP")),ee(3),it(_6(73,55,r.context.packet.timestamp,"medium",void 0,r.config.language())),ee(4),it(Se(77,60,"PACKET_TTL")),ee(3),it(r.context.packet.ttl),ee(),Dt(r.context.packet.type?80:-1),ee(),Dt(r.context.packet.code?81:-1),ee(),Dt(r.context.packet.identifier?82:-1),ee(),Dt(r.context.packet.sequence?83:-1),ee(),Dt(r.context.packet.tcpFlags?84:-1),ee(),Dt(r.context.packet.ack?85:-1))},dependencies:[xr,To,wC,yC,kfe,rc,oc,H6,So],encapsulation:2})};var YUe=new Ee("HlmTableConfig"),QUe={tableContainer:"relative w-full overflow-x-auto",table:"w-full caption-bottom text-sm",thead:"[&_tr]:border-b",tbody:"[&_tr:last-child]:border-0",tfoot:"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",tr:"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",th:"text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0",td:"p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0",caption:"text-muted-foreground mt-4 text-sm"};function A2(){return R(YUe,{optional:!0})??QUe}var xC=class t{_globalOrDefaultConfig=A2();userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(this._globalOrDefaultConfig?this._globalOrDefaultConfig.tableContainer.trim():"",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["div","hlmTableContainer",""]],hostAttrs:["data-slot","table-container"],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})},kC=class t{userVariant=Q({},{alias:"hlmTable"});userClass=Q("",{alias:"class"});_globalOrDefaultConfig=A2();_variant=de(()=>{let n=this._globalOrDefaultConfig,e=this.userVariant();return typeof e=="object"&&e!==null&&Object.keys(e).length>0?ae(ae({},n),e):n});_computedClass=de(()=>Xe(this._variant().table,this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["table","hlmTable",""]],hostAttrs:["data-slot","table"],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userVariant:[1,"hlmTable","userVariant"],userClass:[1,"class","userClass"]}})},_C=class t{_globalOrDefaultConfig=A2();userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(this._globalOrDefaultConfig?this._globalOrDefaultConfig.thead.trim():"",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["thead","hlmTHead",""]],hostAttrs:["data-slot","table-header"],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})},bC=class t{_globalOrDefaultConfig=A2();userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(this._globalOrDefaultConfig?this._globalOrDefaultConfig.tbody.trim():"",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["tbody","hlmTBody",""]],hostAttrs:["data-slot","table-body"],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var CC=class t{_globalOrDefaultConfig=A2();userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(this._globalOrDefaultConfig?this._globalOrDefaultConfig.tr.trim():"",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["tr","hlmTr",""]],hostAttrs:["data-slot","table-row"],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})},MC=class t{_globalOrDefaultConfig=A2();userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(this._globalOrDefaultConfig?this._globalOrDefaultConfig.th.trim():"",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["th","hlmTh",""]],hostAttrs:["data-slot","table-head"],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})},SC=class t{_globalOrDefaultConfig=A2();userClass=Q("",{alias:"class"});_computedClass=de(()=>Xe(this._globalOrDefaultConfig?this._globalOrDefaultConfig.td.trim():"",this.userClass()));static \u0275fac=function(e){return new(e||t)};static \u0275dir=ye({type:t,selectors:[["td","hlmTd",""]],hostAttrs:["data-slot","table-cell"],hostVars:2,hostBindings:function(e,r){e&2&&Le(r._computedClass())},inputs:{userClass:[1,"class","userClass"]}})};var eGe=(t,n)=>n.timestamp;function tGe(t,n){t&1&&We(0,"ng-icon",21)}function nGe(t,n){t&1&&We(0,"ng-icon",22)}function rGe(t,n){t&1&&We(0,"ng-icon",23)}function oGe(t,n){if(t&1){let e=mn();ne(0,"tr",19),Pe("click",function(){let o=He(e).$implicit,i=be(3);return Ue(i.viewPacket(o))}),ne(1,"td",20),It(2,tGe,1,0,"ng-icon",21)(3,nGe,1,0,"ng-icon",22)(4,rGe,1,0,"ng-icon",23),re(),ne(5,"td",24),le(6),re(),ne(7,"td",24),le(8),re(),ne(9,"td",24),le(10),re(),ne(11,"td",24),le(12),re()()}if(t&2){let e,r=n.$implicit,o=be(3);ee(2),Dt((e=o.node().ip)===r.srcIP?2:e===r.dstIP?3:4),ee(4),it(r.srcIP),ee(2),it(r.dstIP),ee(2),it(r.totalBytes),ee(2),it(r.payload)}}function iGe(t,n){if(t&1&&(ne(0,"div",0)(1,"table",11)(2,"thead",12)(3,"tr",13),We(4,"th",14),ne(5,"th",15),le(6),Me(7,"translate"),re(),ne(8,"th",15),le(9),Me(10,"translate"),re(),ne(11,"th",16),le(12),Me(13,"translate"),re(),ne(14,"th",17),le(15),Me(16,"translate"),re()()(),ne(17,"tbody",18),uo(18,oGe,13,5,"tr",13,eGe),re()()()),t&2){let e=be(2);ee(6),Ze(" ",Se(7,4,"SOURCE")," "),ee(3),Ze(" ",Se(10,6,"DESTINATION")," "),ee(3),Ze(" ",Se(13,8,"BYTES")," "),ee(3),Ze(" ",Se(16,10,"DATA")," "),ee(3),po(e.node().traffic.slice(-50))}}function sGe(t,n){t&1&&(We(0,"ng-icon",25),ne(1,"p",26),le(2),Me(3,"translate"),re()),t&2&&(ee(2),Ze(" ",Se(3,1,"NO_TRAFFIC")," "))}function aGe(t,n){t&1&&We(0,"hlm-menu-separator")}function lGe(t,n){if(t&1&&(ne(0,"hlm-option",9),le(1),re()),t&2){let e=be().$implicit;Ke("value",e),ee(),it(e.name)}}function cGe(t,n){if(t&1&&It(0,aGe,1,0,"hlm-menu-separator")(1,lGe,2,2,"hlm-option",9),t&2){let e=n.$implicit;Dt(e==="---"?0:1)}}function uGe(t,n){t&1&&(ne(0,"hlm-option",6),le(1),Me(2,"translate"),re()),t&2&&(ee(),Ze(" ",Se(2,1,"NO_COMMANDS")," "))}function dGe(t,n){if(t&1&&(ne(0,"hlm-option",9),le(1),re()),t&2){let e=n.$implicit;Ke("value",e.ip),ee(),it(e.ip)}}function pGe(t,n){if(t&1){let e=mn();It(0,iGe,20,12,"div",0)(1,sGe,4,3),ne(2,"div",1)(3,"label",2),le(4),Me(5,"translate"),ne(6,"brn-select",3),Me(7,"translate"),fi("ngModelChange",function(o){He(e);let i=be();return Ei(i.command,o)||(i.command=o),Ue(o)}),ne(8,"hlm-select-trigger",4),We(9,"hlm-select-value",5),re(),ne(10,"hlm-select-content"),uo(11,cGe,2,1,null,null,Ji,!1,uGe,3,3,"hlm-option",6),re()()(),ne(14,"label",7),le(15),Me(16,"translate"),ne(17,"brn-select",8),Me(18,"translate"),fi("ngModelChange",function(o){He(e);let i=be();return Ei(i.target,o)||(i.target=o),Ue(o)}),ne(19,"hlm-select-trigger",4),We(20,"hlm-select-value",5),re(),ne(21,"hlm-select-content"),uo(22,dGe,2,2,"hlm-option",9,Ji),re()()(),ne(24,"button",10),Pe("click",function(){He(e);let o=be();return Ue(o.execute())}),le(25),Me(26,"translate"),re()()}if(t&2){let e=be();Dt(e.node().traffic.length>0?0:1),ee(4),Ze(" ",Se(5,11,"COMMAND")," "),ee(2),hi("ngModel",e.command),Ke("placeholder",Se(7,13,"SELECT_COMMAND")),ee(5),po(e.commands),ee(4),Ze(" ",Se(16,15,e.multipleTargets()?"TARGETS":"TARGET")," "),ee(2),hi("ngModel",e.target),Ke("placeholder",Se(18,17,e.multipleTargets()?"TARGETS_IP":"TARGET_IP"))("multiple",e.multipleTargets()),ee(5),po(e.connectedNodes),ee(2),Ke("disabled",!(e.command()&&e.target())),ee(),Ze(" ",Se(26,19,"LAUNCH_COMMAND")," ")}}function hGe(t,n){t&1&&(We(0,"ng-icon",27),ne(1,"p",28),le(2),Me(3,"translate"),re()),t&2&&(ee(2),Ze(" ",Se(3,1,"NO_CONNECTED_DEVICES")," "))}function fGe(t,n){if(t&1){let e=mn();We(0,"ng-icon",29),ne(1,"p",28),le(2),Me(3,"translate"),re(),ne(4,"button",30),Pe("click",function(){He(e);let o=be(2);return Ue(o.connect())}),le(5),Me(6,"translate"),re()}if(t&2){let e=be(2);ee(2),Ze(" ",Se(3,3,"NO_ROUTER")," "),ee(2),Ke("disabled",!e.canConnect),ee(),Ze(" ",Se(6,5,"CONNECT")," ")}}function mGe(t,n){if(t&1&&It(0,hGe,4,3)(1,fGe,7,7),t&2){let e=be();Dt(e.NodeType.RouterTypes.includes(e.node().type)?0:1)}}var p5=class t{dialog=R(Wf);network=R(Po);node=Q.required();NodeType=Un;displayedColumns=de(()=>["icon","source","destination","size","data"]);command=Ii(null);target=Ii(null);multipleTargets=de(()=>this.command()?.multiple??!1);get canConnect(){return this.network.router!==void 0}get commands(){let n=this.node().generator.internalCommands,e=this.node().generator.externalCommands;return n.length>0&&e.length>0?[...n,"---",...e]:[...n,...e]}get connectedNodes(){return this.network.getConnectedNodes(this.node().mac)}constructor(){St(()=>{this.multipleTargets()?this.target.update(n=>n&&!Array.isArray(n)?[n]:n):this.target.update(n=>n&&Array.isArray(n)?n[0]:n)})}ngOnChanges(n){this.command.set(null),this.target.set(null)}connect(){this.node().connect(this.network.router)}viewPacket(n){this.dialog.open(d5,{context:{packet:n},contentClass:"pt-6 px-0 pb-0"})}execute(){switch(this.command().id){case"ping":this.node().generator.ping(this.target());break;case"threeWayHandshake":this.node().generator.threeWayHandshake(this.target(),80,80);break;default:this.node().generator.execute(this.command().id,...Array.isArray(this.target())?this.target():[this.target()]);break}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=je({type:t,selectors:[["ng-component"]],hostAttrs:[1,"flex","flex-col","gap-4","pb-6"],inputs:{node:[1,"node"],command:[1,"command"],target:[1,"target"]},outputs:{command:"commandChange",target:"targetChange"},features:[pt([br({lucideForward:rpe,lucideHourglass:ope,lucideUnplug:pN,lucideRepeat:spe,lucideReply:ape,lucideTrafficCone:dpe})]),Qr],decls:2,vars:1,consts:[["hlmTableContainer","",1,"block","max-h-64","min-h-44","overflow-auto","rounded-md","border","border-border"],[1,"flex","w-[584px]","flex-row","items-center","justify-end","gap-2"],["hlmLabel","",1,"w-40","flex-col","items-start","justify-start"],[1,"mt-2!","inline-block","w-full",3,"ngModelChange","ngModel","placeholder"],[1,"w-full"],[1,"block"],["disabled","",1,"px-2"],["hlmLabel","",1,"grow","flex-col","items-start","justify-start"],[1,"mt-2!","inline-block","w-full",3,"ngModelChange","ngModel","placeholder","multiple"],[3,"value"],["hlmBtn","",1,"self-end",3,"click","disabled"],["hlmTable",""],["hlmTHead","",1,"sticky","top-0","bg-card","shadow-[0_0_0_0.5px_hsl(var(--border))]"],["hlmTr",""],["hlmTh","",1,"w-12","font-semibold"],["hlmTh","",1,"w-28","font-semibold"],["hlmTh","",1,"w-[86px]","font-semibold"],["hlmTh","",1,"w-56","font-semibold"],["hlmTBody",""],["hlmTr","",3,"click"],["hlmTd","",1,"text-center","align-middle"],["name","lucideReply","size","1rem",1,"text-red-600","dark:text-red-400"],["name","lucideForward","size","1rem",1,"text-green-600","dark:text-green-400"],["name","lucideRepeat","size","1rem",1,"text-yellow-600","dark:text-yellow-400"],["hlmTd",""],["name","lucideTrafficCone","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],[1,"mb-4","w-96","self-center","text-center","text-sm","text-muted-foreground"],["name","lucideHourglass","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],[1,"w-96","self-center","text-center","text-sm","text-muted-foreground"],["name","lucideUnplug","size","6rem",1,"mb-8","mt-4","self-center","text-secondary"],["hlmBtn","",3,"click","disabled"]],template:function(e,r){e&1&&It(0,pGe,27,21)(1,mGe,2,1),e&2&&Dt(r.node().connected?0:1)},dependencies:[xr,$u,Lu,ic,To,nl,zs,Vu,ma,da,ac,gs,ha,pa,fa,xC,kC,bC,SC,MC,_C,CC,Cr,So],encapsulation:2})};function gGe(t,n){t&1&&(ne(0,"button",8),We(1,"ng-icon",11),le(2),Me(3,"translate"),re()),t&2&&(ee(2),Ze(" ",Se(3,1,"PHANTOM_ATTACKER")," "))}var h5=class t{constructor(n){this.cdr=n}node=Q.required();NodeType=Un;_loaded=!1;ngAfterViewInit(){this._loaded=!0,this.cdr.detectChanges()}getAnimationData(n){return n&&!n.isActivated||!this._loaded?"_":n.activatedRoute.snapshot.url[0]?.path??"_"}static \u0275fac=function(e){return new(e||t)(Xt(Br))};static \u0275cmp=je({type:t,selectors:[["app-panel-node"]],hostAttrs:[1,"fixed","right-5","top-1/2","flex","flex-col","max-h-[calc(100%-2.5rem)]","min-w-[512px]","max-w-[calc(100%-2.5rem)]","-translate-y-1/2","rounded-xl","overflow-hidden","!gap-0","pt-6","pb-0"],inputs:{node:[1,"node"]},features:[pt([br({lucideGhost:Zw,lucideX:hN})]),Yt([N2])],decls:18,vars:10,consts:[["outlet","outlet"],["routerLink","/","hlmDialogClose",""],["name","lucideX","size","1rem"],["hlmCardHeader",""],["hlmCardTitle",""],["hlmCardDescription",""],[1,"mx-6","mb-4","mt-6","inline-flex","h-10","items-center","justify-center","space-x-1","rounded-md","bg-muted","p-1","text-muted-foreground"],["routerLink","network-traffic","routerLinkActive","bg-background text-foreground shadow-sm",1,"inline-flex","flex-1","items-center","justify-center","whitespace-nowrap","rounded-sm","px-3","py-1.5","text-sm","font-medium","ring-offset-background","transition-all","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2"],["routerLink","attack","routerLinkActive","bg-background text-foreground shadow-sm",1,"inline-flex","flex-1","items-center","justify-center","gap-1","whitespace-nowrap","rounded-sm","px-3","py-1.5","text-sm","font-medium","ring-offset-background","transition-all","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2"],["routerLink","configuration","routerLinkActive","bg-background text-foreground shadow-sm",1,"inline-flex","flex-1","items-center","justify-center","whitespace-nowrap","rounded-sm","px-3","py-1.5","text-sm","font-medium","ring-offset-background","transition-all","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2"],["hlmCardContent","",1,"overflow-scroll"],["name","lucideGhost","size","1rem"]],template:function(e,r){if(e&1&&(ne(0,"button",1),We(1,"ng-icon",2),re(),ne(2,"div",3)(3,"h3",4),le(4),re(),ne(5,"p",5),le(6),re()(),ne(7,"div",6)(8,"button",7),le(9),Me(10,"translate"),re(),It(11,gGe,4,3,"button",8),ne(12,"button",9),le(13),Me(14,"translate"),re()(),ne(15,"div",10),We(16,"router-outlet",null,0),re()),e&2){let o=to(17);ee(4),it(r.node().name),ee(2),it(r.node().ip),ee(3),Ze(" ",Se(10,6,"NETWORK_TRAFFIC")," "),ee(2),Dt(r.NodeType.AttackerTypes.includes(r.node().type)?11:-1),ee(2),Ze(" ",Se(14,8,"CONFIGURATION")," "),ee(2),Ke("@fadeAnimation",r.getAnimationData(o))}},dependencies:[xr,nk,Wm,Y1,iO,To,mC,gC,fC,hC,w2,Cr,So],encapsulation:2,data:{animation:[gfe]}})};var TC=(t,n)=>{let e=R(Po),r=t.params.mac;return r||(r=t.parent.params.mac),e.getNode(r)};var Sfe=[{path:"",title:"IoT-Sim",component:s5},{path:":mac",canActivate:[wfe],resolve:{node:TC},title:"Device",component:h5,children:[{path:"network-traffic",resolve:{node:TC},title:"Network Traffic",component:p5},{path:"attack",canActivate:[vfe],resolve:{node:TC},title:"Phantom Attacker",component:l5},{path:"configuration",resolve:{node:TC},title:"Configuration",component:c5}]},{path:"**",redirectTo:""}];Rm(JG,"de");Rm(eW,"en");Rm(tW,"es");Rm(nW,"fr");Rm(rW,"it");Rm(oW,"pt");var vGe={providers:[M6({eventCoalescing:!0}),sO(Sfe,lO(),V3()),K6(),uq(),kK(),_K({prefix:"./assets/i18n/",suffix:".json"}),{provide:Or,useFactory:()=>Or.init()},{provide:bl,useFactory:t=>bl.init(t),deps:[zn]},{provide:nc,useFactory:t=>nc.init(t),deps:[zn]}]};n8(a5,vGe).catch(t=>console.error(t));
